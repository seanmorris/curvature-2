!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},r={},n={},i={}.hasOwnProperty,a=/^\.\.?(\/|$)/,o=function(e,t){for(var r,n=[],i=(a.test(t)?e+"/"+t:t).split("/"),o=0,s=i.length;o<s;o++)".."===(r=i[o])?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},u=function(t,n){var i,a={id:t,exports:{},hot:h&&h.createHot(t)};return r[t]=a,n(a.exports,(i=t,function(t){var r=o(s(i),t);return e.require(r,i)}),a),a.exports},l=function(e){var t=n[e];return t&&e!==t?l(t):e},c=function(e,n){null==n&&(n="/");var a=l(e);if(i.call(r,a))return r[a].exports;if(i.call(t,a))return u(a,t[a]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};c.alias=function(e,t){n[t]=e};var f=/\.[^.\/]+$/,d=/\/index(\.[^\/]+)?$/;c.register=c.define=function(e,a){if(e&&"object"==typeof e)for(var o in e)i.call(e,o)&&c.register(o,e[o]);else t[e]=a,delete r[e],function(e){if(f.test(e)){var t=e.replace(f,"");i.call(n,t)&&n[t].replace(f,"")!==t+"/index"||(n[t]=e)}if(d.test(e)){var r=e.replace(d,"");i.call(n,r)||(n[r]=e)}}(e)},c.list=function(){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e};var h=e._hmr&&new e._hmr(function(e,t){return l(o(s(e),t))},c,t,r);c._cache=r,c.hmr=h&&h.wrap,c.brunch=!0,e.require=c}}(),function(){"undefined"==typeof window||window;var e=function(e,t,r){var n={},i=function(t,r){try{return e(r+"/node_modules/"+t)}catch(e){if(-1===e.toString().indexOf("Cannot find module"))throw e;if(-1!==r.indexOf("node_modules")){var a=r.split("/"),o=a.lastIndexOf("node_modules"),s=a.slice(0,o).join("/");return i(t,s)}}return n};return function(a){if(a in t&&(a=t[a]),a){if("."!==a[0]&&r){var o=i(a,r);if(o!==n)return o}return e(a)}}};require.register("@babel/runtime/helpers/arrayLikeToArray.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){n.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/arrayWithHoles.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){n.exports=function(e){if(Array.isArray(e))return e},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/arrayWithoutHoles.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){var e=r("./arrayLikeToArray.js");n.exports=function(t){if(Array.isArray(t))return e(t)},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/assertThisInitialized.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){n.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/classCallCheck.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){n.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/construct.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){var e=r("./setPrototypeOf.js"),t=r("./isNativeReflectConstruct.js");function i(r,a,o){return t()?(n.exports=i=Reflect.construct.bind(),n.exports.__esModule=!0,n.exports.default=n.exports):(n.exports=i=function(t,r,n){var i=[null];i.push.apply(i,r);var a=new(Function.bind.apply(t,i));return n&&e(a,n.prototype),a},n.exports.__esModule=!0,n.exports.default=n.exports),i.apply(null,arguments)}n.exports=i,n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/createClass.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){var e=r("./toPropertyKey.js");function t(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,e(i.key),i)}}n.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/defineProperty.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){var e=r("./toPropertyKey.js");n.exports=function(t,r,n){return(r=e(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/get.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){var e=r("./superPropBase.js");function t(){return"undefined"!=typeof Reflect&&Reflect.get?(n.exports=t=Reflect.get.bind(),n.exports.__esModule=!0,n.exports.default=n.exports):(n.exports=t=function(t,r,n){var i=e(t,r);if(i){var a=Object.getOwnPropertyDescriptor(i,r);return a.get?a.get.call(arguments.length<3?t:n):a.value}},n.exports.__esModule=!0,n.exports.default=n.exports),t.apply(this,arguments)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/getPrototypeOf.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){function e(t){return n.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/inherits.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){var e=r("./setPrototypeOf.js");n.exports=function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&e(t,r)},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/interopRequireDefault.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){n.exports=function(e){return e&&e.__esModule?e:{default:e}},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/isNativeReflectConstruct.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){n.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/iterableToArray.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){n.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/iterableToArrayLimit.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){n.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/nonIterableRest.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){n.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/nonIterableSpread.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){n.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/possibleConstructorReturn.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){var e=r("./typeof.js").default,t=r("./assertThisInitialized.js");n.exports=function(r,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return t(r)},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/readOnlyError.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){n.exports=function(e){throw new TypeError('"'+e+'" is read-only')},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/setPrototypeOf.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){function e(t,r){return n.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n.exports.__esModule=!0,n.exports.default=n.exports,e(t,r)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/slicedToArray.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){var e=r("./arrayWithHoles.js"),t=r("./iterableToArrayLimit.js"),i=r("./unsupportedIterableToArray.js"),a=r("./nonIterableRest.js");n.exports=function(r,n){return e(r)||t(r,n)||i(r,n)||a()},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/superPropBase.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){var e=r("./getPrototypeOf.js");n.exports=function(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=e(t)););return t},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/toConsumableArray.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){var e=r("./arrayWithoutHoles.js"),t=r("./iterableToArray.js"),i=r("./unsupportedIterableToArray.js"),a=r("./nonIterableSpread.js");n.exports=function(r){return e(r)||t(r)||i(r)||a()},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/toPrimitive.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){var e=r("./typeof.js").default;n.exports=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/toPropertyKey.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){var e=r("./typeof.js").default,t=r("./toPrimitive.js");n.exports=function(r){var n=t(r,"string");return"symbol"===e(n)?n:String(n)},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/typeof.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){function e(t){"@babel/helpers - typeof";return n.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("@babel/runtime/helpers/unsupportedIterableToArray.js",function(t,r,n){r=e(r,{},"@babel/runtime"),function(){var e=r("./arrayLikeToArray.js");n.exports=function(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}},n.exports.__esModule=!0,n.exports.default=n.exports}()}),require.register("curvature/Config.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;e.Config={title:"Curvature 0.0.66-r"}}),require.register("curvature/access/LoginView.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("../base/Config"),c=t("../base/View"),f=t("../base/Router"),d=t("../base/Repository"),h=t("./UserRepository"),v=t("../toast/Toast"),p=t("../toast/ToastAlert");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.LoginView=void 0;var m=function(e){function t(){var e;return(0,i.default)(this,t),(e=r.call(this)).template='\n\t\t\t<a cv-link = "user">User</a>\n\t\t\t<br />\n\t\t\t\n\t\t\t<a cv-link = "user/login">Login</a>\n\t\t\t<br />\n\n\t\t\t<a cv-link = "user/register">Register</a>\n\t\t\t<br />\n\n\t\t\t<a cv-link = "user/logout">Logout</a>\n\t\t\t<br />\n\n\t\t\t<input\n\t\t\t\ttype  = "button"\n\t\t\t\tvalue = "Login via FaceBook"\n\t\t\t \tcv-on = "click:facebookLogin(event)"\n\t\t\t />\n\t\t\t <input\n\t\t\t\ttype  = "button"\n\t\t\t\tvalue = "Log Out"\n\t\t\t \tcv-on = "click:logout(event)"\n\t\t\t />\n\t\t',e}(0,o.default)(t,e);var r=b(t);return(0,a.default)(t,[{key:"facebookLogin",value:function(e){var t=this;console.log("fb!"),e.preventDefault(),window.open(l.Config.get("backend")+"/facebookLogin"),this.userCheck&&this.clearInterval(this.userCheck),this.userCheck=this.onInterval(333,function(){h.UserRepository.getCurrentUser(!0).then(function(e){var r=e.body;r.id&&r&&(t.clearInterval(t.userCheck),f.Router.clearCache(),d.Repository.clearCache(),v.Toast.instance().pop(new p.ToastAlert({title:"Logged in as "+r.username,body:"ID: "+r.publicId,time:2400})))})})}},{key:"logout",value:function(){window.open(l.Config.get("backend")+"/user/logout?page=app%3Fclose%3D1")}}]),t}(c.View);e.LoginView=m}),require.register("curvature/access/UserRepository.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("../base/Config"),c=t("../base/Bindable"),f=t("../base/Repository");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.UserRepository=void 0;var h=function(e){function t(){return(0,i.default)(this,t),r.apply(this,arguments)}(0,o.default)(t,e);var r=d(t);return(0,a.default)(t,null,[{key:"uri",get:function(){return l.Config.get("backend")+"/user/"}},{key:"getCurrentUser",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return window.prerenderer||navigator.userAgent.match(/prerender/i)?void(window.prerenderer=window.prerenderer||!0):this.args.response&&!1===t?Promise.resolve(this.args.response):this.request(this.uri+"current",!1,!1).then(function(t){if(t.body&&t.body.roles)for(var r in t.body.roles)"SeanMorris\\Access\\Role\\Administrator"==t.body.roles[r].class&&(t.body.isAdmin=!0);return t.body&&t.body.id&&(e.args.response=t,e.args.current=t.body),t}).catch(function(e){console.error(e)})}},{key:"login",value:function(){return this.request(this.uri+"/login")}},{key:"logout",value:function(){var e=this,t=this.args.current;return delete this.args.current,this.request(this.uri+"logout",!1,{},!1).then(function(){return e.args.current=null,t})}},{key:"onChange",value:function(e){return this.args.bindTo("current",e)}}]),t}(f.Repository);e.UserRepository=h,Object.defineProperty(h,"args",{configurable:!1,writable:!1,value:c.Bindable.makeBindable({})}),f.Repository.onResponse(function(e){e&&e.meta&&"currentUser"in e.meta&&(!h.args.current||e.meta.currentUser.id!==h.args.current.id)&&(h.args.current=e.meta.currentUser)})}),require.register("curvature/animate/Chain.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck"));Object.defineProperty(e,"__esModule",{value:!0}),e.Chain=void 0;var o=(0,i.default)(function e(){(0,a.default)(this,e)});e.Chain=o}),require.register("curvature/animate/Ease.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("../base/Mixin"),c=t("../mixin/PromiseMixin");function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Ease=void 0;var d=function(e){function t(e){var n,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(n=r.call(this)).interval=e,n.terminal=!1,n.initial=!1,n.timeout=!1,n.final=!1,n.canceled=!1,n.done=!1,n.calculate=!!(n.calculate||"calculate"in a)&&a.calculate,n.bounded=!("bounded"in a)||a.bounded,n.repeat="repeat"in a?a.repeat:1,n.reverse=!!("reverse"in a)&&a.reverse,n}(0,o.default)(t,e);var r=f(t);return(0,a.default)(t,[{key:"start",value:function(){var e=this;this.done=!1,requestAnimationFrame(function(){e.initial=Date.now(),e.terminal=e.initial+e.interval,0<=e.repeat&&(e.terminal=e.initial+e.interval*e.repeat,e.timeout=setTimeout(function(){return e.done?e.reverse?0:1:(e.done=!0,void e[c.PromiseMixin.Accept](e.reverse?0:1))},e.interval*e.repeat))})}},{key:"cancel",value:function(){return this.done?this.final:(clearTimeout(this.timeout),this.final=this.current(),this.canceled=this.done=!0,this[c.PromiseMixin.Reject](this.final),this.final)}},{key:"fraction",value:function(){if(this.done)return this.reverse?0:1;if(!1===this.initial)return this.reverse?1:0;var e=Date.now()-this.initial;if(e/this.interval>=this.repeat)return this.reverse?0:1;var t=e%this.interval/this.interval;return this.reverse?1-t:t}},{key:"current",value:function(){var e=this.fraction();return this.calculate?this.calculate(e):e}}]),t}(l.Mixin.with(c.PromiseMixin));e.Ease=d}),require.register("curvature/animate/ease/CubicIn.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.CubicIn=void 0;var h=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=r.call.apply(r,[this].concat(i)),(0,c.default)((0,o.default)(e),"calculate",function(e){return e*e*e}),e}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.CubicIn=h}),require.register("curvature/animate/ease/CubicInOut.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.CubicInOut=void 0;var h=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=r.call.apply(r,[this].concat(i)),(0,c.default)((0,o.default)(e),"calculate",function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}),e}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.CubicInOut=h}),require.register("curvature/animate/ease/CubicOut.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.CubicOut=void 0;var h=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=r.call.apply(r,[this].concat(i)),(0,c.default)((0,o.default)(e),"calculate",function(e){return--e*e*e+1}),e}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.CubicOut=h}),require.register("curvature/animate/ease/ElasticOut.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.ElasticOut=void 0;var h=function(e){function t(e){var n,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,t),n=r.call(this,e,i),(0,c.default)((0,o.default)(n),"calculate",function(e){return Math.pow(2,-10*e)*Math.sin((e-n.friction/4)*(2*Math.PI)/n.friction)+1}),n.friction=n.friction||"friction"in i?i.friction:.3,n}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.ElasticOut=h}),require.register("curvature/animate/ease/GeoIn.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("../Ease");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.GeoIn=void 0;var f=function(e){function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,t),r.call(this,e,n)}(0,o.default)(t,e);var r=c(t);return(0,i.default)(t)}(l.Ease);e.GeoIn=f}),require.register("curvature/animate/ease/GeoInOut.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=n(t("@babel/runtime/helpers/defineProperty")),c=t("../Ease"),f=t("./GeoIn");t("./GeoOut");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.GeoInOut=void 0,console.log(f.GeoIn);var h=function(e){function t(){return(0,i.default)(this,t),r.apply(this,arguments)}(0,o.default)(t,e);var r=d(t);return(0,a.default)(t,[{key:"calculate",value:function(e){return.5>e?EaseIn(power)(2*e)/2:EaseOut(power)(2*e-1)/2+.5}}]),t}(c.Ease);e.GeoInOut=h,(0,l.default)(h,"power",1)}),require.register("curvature/animate/ease/GeoOut.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.GeoOut=void 0;var h=function(e){function t(e){var n,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,t),n=r.call(this,e,i),(0,c.default)((0,o.default)(n),"calculate",function(e){return 1-Math.abs(e-Math.pow(1,n.power))}),n.power=n.power||"power"in i?i.power:1,n}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.GeoOut=h}),require.register("curvature/animate/ease/Linear.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("../Ease");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Linear=void 0;var f=function(e){function t(){return(0,a.default)(this,t),r.apply(this,arguments)}(0,o.default)(t,e);var r=c(t);return(0,i.default)(t)}(l.Ease);e.Linear=f}),require.register("curvature/animate/ease/QuadIn.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("../Ease");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.QuadIn=void 0;var f=function(e){function t(){return(0,i.default)(this,t),r.apply(this,arguments)}(0,o.default)(t,e);var r=c(t);return(0,a.default)(t,[{key:"current",value:function(){var e=this.fraction();return e*e}}]),t}(l.Ease);e.QuadIn=f}),require.register("curvature/animate/ease/QuadInOut.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.QuadInOut=void 0;var h=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=r.call.apply(r,[this].concat(i)),(0,c.default)((0,o.default)(e),"calculate",function(e){return.5>e?2*e*e:(4-2*e)*e-1}),e}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.QuadInOut=h}),require.register("curvature/animate/ease/QuadOut.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("../Ease");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.QuadOut=void 0;var f=function(e){function t(){return(0,i.default)(this,t),r.apply(this,arguments)}(0,o.default)(t,e);var r=c(t);return(0,a.default)(t,[{key:"current",value:function(){var e=this.fraction();return e*(2-e)}}]),t}(l.Ease);e.QuadOut=f}),require.register("curvature/animate/ease/QuartIn.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.QuartIn=void 0;var h=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=r.call.apply(r,[this].concat(i)),(0,c.default)((0,o.default)(e),"calculate",function(e){return e*e*e*e}),e}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.QuartIn=h}),require.register("curvature/animate/ease/QuartInOut.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.QuartInOut=void 0;var h=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=r.call.apply(r,[this].concat(i)),(0,c.default)((0,o.default)(e),"calculate",function(e){return.5>e?8*e*e*e*e:1-8*--e*e*e*e}),e}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.QuartInOut=h}),require.register("curvature/animate/ease/QuartOut.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.QuartOut=void 0;var h=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=r.call.apply(r,[this].concat(i)),(0,c.default)((0,o.default)(e),"calculate",function(e){return 1- --e*e*e*e}),e}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.QuartOut=h}),require.register("curvature/animate/ease/QuintIn.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.QuintIn=void 0;var h=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=r.call.apply(r,[this].concat(i)),(0,c.default)((0,o.default)(e),"calculate",function(e){return e*e*e*e*e}),e}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.QuintIn=h}),require.register("curvature/animate/ease/QuintInOut.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.QuintInOut=void 0;var h=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=r.call.apply(r,[this].concat(i)),(0,c.default)((0,o.default)(e),"calculate",function(e){return.5>e?16*e*e*e*e*e:1+16*--e*e*e*e*e}),e}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.QuintInOut=h}),require.register("curvature/animate/ease/QuintOut.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.QuintOut=void 0;var h=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=r.call.apply(r,[this].concat(i)),(0,c.default)((0,o.default)(e),"calculate",function(e){return 1+--e*e*e*e*e}),e}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.QuintOut=h}),require.register("curvature/animate/ease/SineIn.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.SineIn=void 0;var h=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=r.call.apply(r,[this].concat(i)),(0,c.default)((0,o.default)(e),"calculate",function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)}),e}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.SineIn=h}),require.register("curvature/animate/ease/SineInOut.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.SineInOut=void 0;var h=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=r.call.apply(r,[this].concat(i)),(0,c.default)((0,o.default)(e),"calculate",function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}),e}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.SineInOut=h}),require.register("curvature/animate/ease/SineOut.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("../Ease");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.SineOut=void 0;var h=function(e){function t(){var e;(0,a.default)(this,t);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=r.call.apply(r,[this].concat(i)),(0,c.default)((0,o.default)(e),"calculate",function(e){return Math.sin(Math.PI/2*e)}),e}(0,s.default)(t,e);var r=d(t);return(0,i.default)(t)}(f.Ease);e.SineOut=h}),require.register("curvature/base/Bag.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("./Bindable"),c=t("./Mixin"),f=t("../mixin/EventTargetMixin");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Bag=void 0;var h=Symbol("Mapped"),v=Symbol("Has"),p=Symbol("Add"),b=Symbol("Remove"),m=Symbol("Delete"),y=function(e){function t(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;return(0,i.default)(this,t),(e=r.call(this)).changeCallback=n,e.content=new Map,e.current=0,e.length=0,e.list=l.Bindable.makeBindable([]),e.meta=Symbol("meta"),e.type=void 0,e}(0,o.default)(t,e);var r=d(t);return(0,a.default)(t,[{key:"has",value:function(e){return this[h]?this[h].has(e):this[v](e)}},{key:v,value:function(e){return this.content.has(e)}},{key:"add",value:function(e){return this[h]?this[h].add(e):this[p](e)}},{key:p,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(e=l.Bindable.make(e),!this.content.has(e)){var r=new CustomEvent("adding",{detail:{item:e}});if(this.dispatchEvent(r)){var n=function(e){return+e}(this.current++);this.content.set(e,n),this.list[n]=e,this.changeCallback&&this.changeCallback(e,this.meta,t.ITEM_ADDED,n);var i=new CustomEvent("added",{detail:{item:e,id:n}});return this.dispatchEvent(i),this.length=this.size,n}}}},{key:"remove",value:function(e){return this[h]?this[h].remove(e):this[b](e)}},{key:b,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(e=l.Bindable.make(e),!this.content.has(e))return this.changeCallback&&this.changeCallback(e,this.meta,0,void 0),!1;var r=new CustomEvent("removing",{detail:{item:e}});if(this.dispatchEvent(r)){var n=this.content.get(e);delete this.list[n],this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,t.ITEM_REMOVED,n);var i=new CustomEvent("removed",{detail:{item:e,id:n}});return this.dispatchEvent(i),this.length=this.size,e}}},{key:"delete",value:function(e){return this[h]?this[h].delete(e):void this[m](e)}},{key:m,value:function(e){this.remove(e)}},{key:"map",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(e){return e},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=new WeakMap,i=new t;return i[h]=this,this.addEventListener("added",function(t){var a=t.detail.item;if(r(a)&&!n.has(a)){var o=e(a);n.set(a,o),i[p](o)}}),this.addEventListener("removed",function(e){var t=e.detail.item;if(n.has(t)){var r=n.get(t);n.delete(t),i[b](r)}}),i}},{key:"size",get:function(){return this.content.size}},{key:"items",value:function(){return Array.from(this.content.entries()).map(function(e){return e[0]})}}]),t}(c.Mixin.with(f.EventTargetMixin));e.Bag=y,Object.defineProperty(y,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(y,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}),require.register("curvature/base/Bindable.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/construct")),a=n(t("@babel/runtime/helpers/toConsumableArray")),o=n(t("@babel/runtime/helpers/classCallCheck")),s=n(t("@babel/runtime/helpers/createClass")),u=n(t("@babel/runtime/helpers/defineProperty")),l=n(t("@babel/runtime/helpers/typeof"));function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.Bindable=void 0;var d=Symbol("ref"),h=Symbol("original"),v=Symbol("deck"),p=Symbol("binding"),b=Symbol("subBinding"),m=Symbol("bindingAll"),y=Symbol("isBindable"),g=Symbol("wrapping"),w=Symbol("Names"),k=Symbol("executing"),R=Symbol("stack"),C=(Symbol("object"),Symbol("wrapped")),O=Symbol("unwrapped"),_=Symbol("getProto"),P=Symbol("onGet"),j=Symbol("onAllGet"),E=Symbol("bindChain"),x=Symbol("Descriptors"),T=Symbol("Before"),S=Symbol("After"),A=Symbol("NoGetters"),M=Object.getPrototypeOf(Int8Array),B=Set.prototype[Symbol.iterator],D=Map.prototype[Symbol.iterator],q="object"===("undefined"==typeof globalThis?"undefined":(0,l.default)(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":(0,l.default)(window))?window:"object"===("undefined"==typeof self?"undefined":(0,l.default)(self))?self:void 0,I=[q.Node,q.File,q.Map,q.Set,q.WeakMap,q.WeakSet,q.ArrayBuffer,q.ResizeObserver,q.MutationObserver,q.PerformanceObserver,q.IntersectionObserver,q.IDBCursor,q.IDBCursorWithValue,q.IDBDatabase,q.IDBFactory,q.IDBIndex,q.IDBKeyRange,q.IDBObjectStore,q.IDBOpenDBRequest,q.IDBRequest,q.IDBTransaction,q.IDBVersionChangeEvent,q.Event,q.CustomEvent,q.FileSystemFileHandle].filter(function(e){return"function"==typeof e}),L=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,null,[{key:"isBindable",value:function(t){return!(!t||!t[y])&&t[y]===e}},{key:"onDeck",value:function(e,t){return e[v][t]||!1}},{key:"ref",value:function(e){return e[d]||e||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"shuck",value:function(t,r){r=r||new Map;var n={};if(t instanceof M||t instanceof ArrayBuffer){var i=t.slice(0);return r.set(t,i),i}var a=Object.keys(t);for(var o in a){var s=a[o];if("___"!==s.substring(0,3)){var u=r.get(t[s]);if(u){n[s]=u;continue}if(t[s]===t){r.set(t[s],n),n[s]=n;continue}if(t[s]&&"object"===(0,l.default)(t[s])){var c=t[s];e.isBindable(t[s])&&(c=t[s][h]),n[s]=this.shuck(c,r)}else n[s]=t[s];r.set(t[s],n[s])}}return e.isBindable(t)&&(delete n.bindTo,delete n.isBound),n}},{key:"make",value:function(t){var r=this;if(!t||!["function","object"].includes((0,l.default)(t)))return t;if(t[d])return t[d];if(t[y])return t;if(Object.isSealed(t)||Object.isFrozen(t)||!Object.isExtensible(t)||I.filter(function(e){return t instanceof e}).length)return t;Object.defineProperty(t,y,{configurable:!1,enumerable:!1,writable:!1,value:e}),Object.defineProperty(t,d,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(t,h,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(t,v,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(t,p,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(t,b,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(t,m,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(t,k,{enumerable:!1,writable:!0}),Object.defineProperty(t,g,{enumerable:!1,writable:!0}),Object.defineProperty(t,R,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(t,T,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(t,S,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(t,C,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)}),Object.defineProperty(t,O,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(t,x,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)});var n=function(i){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=!1;if(Array.isArray(i)){var u=i.map(function(e){return n(e,a,o)});return function(){return u.forEach(function(e){return e()})}}if(i instanceof Function&&(o=a||{},a=i,s=!0),0<=o.delay&&(a=r.wrapDelayCallback(a,o.delay)),0<=o.throttle&&(a=r.wrapThrottleCallback(a,o.throttle)),0<=o.wait&&(a=r.wrapWaitCallback(a,o.wait)),o.frame&&(a=r.wrapFrameCallback(a,o.frame)),o.idle&&(a=r.wrapIdleCallback(a)),s){var c=t[m].length;if(t[m].push(a),!("now"in o)||o.now)for(var f in t)a(t[f],f,t,!1);return function(){delete t[m][c]}}if(t[p][i]||(t[p][i]=new Set),o.children){var d=a;a=function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n[0],s=t[b].get(d);if(s&&(t[b].delete(d),s()),"object"===(0,l.default)(a)){var u=e.make(a);e.isBindable(u)&&t[b].set(d,u.bindTo(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return d.apply(void 0,n.concat(t))},Object.assign({},o,{children:!1}))),d.apply(void 0,n)}else d.apply(void 0,n)}}t[p][i].add(a),(!("now"in o)||o.now)&&a(t[i],i,t,!1);var h=function(){var e=t[b].get(a);e&&(t[b].delete(a),e()),t[p][i]&&t[p][i].has(a)&&t[p][i].delete(a)};return o.removeWith&&o.removeWith instanceof View&&o.removeWith.onRemove(function(){return h}),h};Object.defineProperty(t,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:n}),Object.defineProperty(t,E,{configurable:!1,enumerable:!1,writable:!1,value:function(e,n){var i=e.split("."),a=i.shift(),o=i.slice(0),s=[];return s.push(t.bindTo(a,function(e,t,i,a){var u=o.join(".");return 0===o.length?void n(e,t,i,a):(void 0===e&&(e=i[t]=r.make({})),void(s=s.concat(e[E](u,n))))})),function(){return s.forEach(function(e){return e()})}}}),Object.defineProperty(t,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var r=t[T].length;t[T].push(e);var n=!1;return function(){n||(n=!0,delete t[T][r])}}}),Object.defineProperty(t,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var r=t[S].length;t[S].push(e);var n=!1;return function(){n||(n=!0,delete t[S][r])}}}),Object.defineProperty(t,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e in t[m])if(t[m][e])return!0;for(var r in t[p]){var n,i=c(t[p][r]);try{for(i.s();!(n=i.n()).done;){if(n.value)return!0}}catch(e){i.e(e)}finally{i.f()}}return!1}});var o=function(r){t[r]&&t[r]instanceof Object&&!t[r]instanceof Promise&&!I.filter(function(e){return t[r]instanceof e}).length&&Object.isExtensible(t[r])&&!Object.isSealed(t[r])&&(t[r]=e.make(t[r]))};for(var s in t)o(s);var u=t[x],f=t[C],q=t[R],L={get:function(r,n){if(f.has(n))return f.get(n);if(n===d||n===h||"apply"===n||"isBound"===n||"bindTo"===n||"__proto__"===n||"constructor"===n)return t[n];var a;if(u.has(n)?a=u.get(n):(a=Object.getOwnPropertyDescriptor(t,n),u.set(n,a)),a&&!a.configurable&&!a.writable)return t[n];if(j in t)return t[j](n);if(P in t&&!(n in t))return t[P](n);if(a&&!a.configurable&&!a.writable)return f.set(n,t[n]),t[n];if("function"==typeof t[n]){if(w in t[n])return t[n];Object.defineProperty(t[O],n,{configurable:!1,enumerable:!1,writable:!0,value:t[n]});var o=Object.getPrototypeOf(t)[n]===t[n],s="function"==typeof Promise&&t instanceof Promise||"function"==typeof Map&&t instanceof Map||"function"==typeof Set&&t instanceof Set||"function"==typeof D&&t.prototype===D||"function"==typeof B&&t.prototype===B||"function"==typeof B&&t.prototype===B||"function"==typeof WeakMap&&t instanceof WeakMap||"function"==typeof WeakSet&&t instanceof WeakSet||"function"==typeof Date&&t instanceof Date||"function"==typeof M&&t instanceof M||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||"function"==typeof EventTarget&&t instanceof EventTarget||"function"==typeof ResizeObserver&&t instanceof ResizeObserver||"function"==typeof MutationObserver&&t instanceof MutationObserver||"function"==typeof PerformanceObserver&&t instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&t instanceof IntersectionObserver||"function"==typeof t[Symbol.iterator]&&"next"===n?t:t[d],l=function e(){t[k]=n,q.unshift(n);for(var r=arguments.length,a=Array(r),u=0;u<r;u++)a[u]=arguments[u];var l,f,d=c(t[T]);try{for(d.s();!(l=d.n()).done;)(0,l.value)(t,n,q,t,a)}catch(e){d.e(e)}finally{d.f()}if(this instanceof e?this.constructor:void 0)f=(0,i.default)(t[O][n],a);else{var h=t[O][n];f=o?h.apply(s||t,a):h.apply(void 0,a)}var v,p=c(t[S]);try{for(p.s();!(v=p.n()).done;)(0,v.value)(t,n,q,t,a)}catch(e){p.e(e)}finally{p.f()}return t[k]=null,q.shift(),f};(l[w]=l[w]||new WeakMap).set(t,n),l[j]=function(e){var r=l[w].get(t);return t[r][e]};var v=e.make(l);return f.set(n,v),v}return t[n]},set:function(r,n,i){if(f.has(n)&&f.delete(n),n===h)return!0;var a=t[v];if(n in a&&a[n]===i)return!0;if(n.slice&&"___"===n.slice(-3))return!0;if(r[n]===i||"number"==typeof i&&isNaN(a[n])&&isNaN(i))return!0;for(var o in i&&i instanceof Object&&Object.isExtensible(t)&&!Object.isSealed(t)&&!I.filter(function(e){return t instanceof e}).length&&(i=e.make(i)),a[n]=i,t[m])t[m][o]&&t[m][o](i,n,r,!1);var s=!1;if(n in t[p]){var u,l=c(t[p][n]);try{for(l.s();!(u=l.n()).done;)!1===(0,u.value)(i,n,r,!1,r[n])&&(s=!0)}catch(e){l.e(e)}finally{l.f()}}if(delete a[n],!s){var d=Object.getOwnPropertyDescriptor(r,n);r instanceof File&&"lastModifiedDate"==n||d&&!d.writable||r[n]!==i||(r[n]=i)}var b=Reflect.set(r,n,i);if(Array.isArray(r)&&t[p].length)for(var y in t[p].length)(0,t[p].length[y])(r.length,"length",r,!1,r.length);return b},construct:function(r,n){for(var o in r[T])r[T][o](r,"constructor",t[R],void 0,n);var s=e.make((0,i.default)(r[h],(0,a.default)(n)));for(var u in r[S])r[S][u](r,"constructor",t[R],s,n);return s},getPrototypeOf:function(e){return _ in t?t[_]:Reflect.getPrototypeOf(e)},deleteProperty:function(e,r){var n=t[v];if(void 0!==n[r])return!0;if(!(r in e))return!0;if(u.has(r)){var i=u.get(r);if(i&&!i.configurable)return!1;u.delete(r)}for(var a in n[r]=null,f.has(r)&&f.delete(r),t[m])t[m][a](void 0,r,e,!0,e[r]);if(r in t[p]){var o,s=c(t[p][r]);try{for(s.s();!(o=s.n()).done;)(0,o.value)(void 0,r,e,!0,e[r])}catch(e){s.e(e)}finally{s.f()}}return delete n[r],delete e[r],!0}};return t[A]&&delete L.get,Object.defineProperty(t,d,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(t,L)}),t[d]}},{key:"clearBindings",value:function(e){(function(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.map(e)}})(function(e){return Object.keys(e).map(function(t){return delete e[t]})})(e[C],e[p],e[m],e[S],e[T])}},{key:"resolve",value:function(e,t){for(var r,n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],i=t.split("."),a=i[0];i.length;){if(n&&1===i.length)return[this.make(e),i.shift(),a];!(!(r=i.shift())in e)&&e[r]&&e[r]instanceof Object||(e[r]={}),e=this.make(e[r])}return[this.make(e),r,a]}},{key:"wrapDelayCallback",value:function(e,t){return function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return setTimeout(function(){return e.apply(void 0,n)},t)}}},{key:"wrapThrottleCallback",value:function(e,t){var r=this;return this.throttles.set(e,!1),function(){r.throttles.get(e,!0)||(e.apply(void 0,arguments),r.throttles.set(e,!0),setTimeout(function(){r.throttles.set(e,!1)},t))}}},{key:"wrapWaitCallback",value:function(e,t){var r=this;return function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var o;(o=r.waiters.get(e))&&(r.waiters.delete(e),clearTimeout(o)),o=setTimeout(function(){return e.apply(void 0,i)},t),r.waiters.set(e,o)}}},{key:"wrapFrameCallback",value:function(e,t){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];requestAnimationFrame(function(){return e.apply(void 0,r)})}}},{key:"wrapIdleCallback",value:function(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(window.requestIdleCallback||requestAnimationFrame)(function(){return e.apply(void 0,r)})}}}]),e}();e.Bindable=L,(0,u.default)(L,"waiters",new WeakMap),(0,u.default)(L,"throttles",new WeakMap),Object.defineProperty(L,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:P}),Object.defineProperty(L,"NoGetters",{configurable:!1,enumerable:!1,writable:!1,value:A}),Object.defineProperty(L,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:_}),Object.defineProperty(L,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:j})}),require.register("curvature/base/Cache.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass"));Object.defineProperty(e,"__esModule",{value:!0}),e.Cache=void 0;var o=function(){function e(){(0,i.default)(this,e)}return(0,a.default)(e,null,[{key:"store",value:function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"standard",i=0;r&&(i=1e3*r+(new Date).getTime()),this.buckets||(this.buckets=new Map),this.buckets.has(n)||this.buckets.set(n,new Map);var a=new CustomEvent("cvCacheStore",{cancelable:!0,detail:{key:e,value:t,expiry:r,bucket:n}});document.dispatchEvent(a)&&this.buckets.get(n).set(e,{value:t,expiration:i})}},{key:"load",value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"standard",n=new CustomEvent("cvCacheLoad",{cancelable:!0,detail:{key:e,defaultvalue:t,bucket:r}});if(!document.dispatchEvent(n))return t;if(this.buckets&&this.buckets.has(r)&&this.buckets.get(r).has(e)){var i=this.buckets.get(r).get(e);if(0===i.expiration||i.expiration>(new Date).getTime())return this.buckets.get(r).get(e).value}return t}}]),e}();e.Cache=o}),require.register("curvature/base/Config.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/typeof"));Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var s={},u=t,l="object"===("undefined"==typeof globalThis?"undefined":(0,o.default)(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":(0,o.default)(window))?window:"object"===("undefined"==typeof self?"undefined":(0,o.default)(self))?self:void 0;try{s=u("/Config").Config}catch(e){!0===l.devMode&&console.error(e),s={}}var c=function(){function e(){(0,i.default)(this,e)}return(0,a.default)(e,null,[{key:"get",value:function(e){return this.configs[e]}},{key:"set",value:function(e,t){return this.configs[e]=t,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n in t){var i=t[n];for(var a in"string"==typeof i&&(i=JSON.parse(i)),i){var o=i[a];return this.configs[a]=o}}return this}}]),e}();e.Config=c,Object.defineProperty(c,"configs",{configurable:!1,enumerable:!1,writable:!1,value:s})}),require.register("curvature/base/Cookie.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/slicedToArray")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/createClass")),s=n(t("@babel/runtime/helpers/defineProperty")),u=t("./Bindable");Object.defineProperty(e,"__esModule",{value:!0}),e.Cookie=void 0;var l=function(){function e(){(0,a.default)(this,e)}return(0,o.default)(e,null,[{key:"set",value:function(e,t){this.jar[e]=t}},{key:"get",value:function(e){return this.jar[e]}},{key:"delete",value:function(e){delete this.jar[e]}}]),e}();e.Cookie=l,(0,s.default)(l,"jar",u.Bindable.make({})),"string"==typeof document.cookie&&"data"!==window.location.href.substr(0,4)&&(document.cookie.split(";").map(function(e){var t=e.split("="),r=(0,i.default)(t,2),n=r[0],a=r[1];try{a=JSON.parse(a)}catch(e){a=a}n=n.trim(),l.jar[decodeURIComponent(n)]=a}),l.jar.bindTo(function(e,t,r,n){document.cookie=n?"".concat(encodeURIComponent(t),"=;expires=").concat(new Date(0)):"".concat(encodeURIComponent(t),"=").concat(e)}))}),require.register("curvature/base/Dom.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass"));Object.defineProperty(e,"__esModule",{value:!0}),e.Dom=void 0;var o=function(){function e(){(0,i.default)(this,e)}return(0,a.default)(e,null,[{key:"mapTags",value:function(e,t,r,n,i){var a=[],o=!0;n&&(o=!1);var s=!1,u=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(e){if(!o){if(e!==n)return NodeFilter.FILTER_SKIP;o=!0}return i&&e===i&&(s=!0),s?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);for(0;u.nextNode();)a.push(r(u.currentNode,u));return a}},{key:"dispatchEvent",value:function(t,r){t.dispatchEvent(r),e.mapTags(t,!1,function(e){e.dispatchEvent(r)})}}]),e}();e.Dom=o}),require.register("curvature/base/Import.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass"));Object.defineProperty(e,"__esModule",{value:!0}),e.Import=void 0;var o=function(){function e(t){if((0,i.default)(this,e),console.log(this.__proto__.constructor),this.__proto__.constructor.instances[t])return this.__proto__.constructor.instances[t];this.uri=t;var r=document.createElement("script");r.setAttribute("src",this.uri),this.ready=new Promise(function(e,t){r.addEventListener("load",function(){return e(r)}),r.addEventListener("error",function(e){console.error(e),t(e)})}),this.tag=r,this.attached=!1,this.__proto__.constructor.instances[t]=this}return(0,a.default)(e,[{key:"attach",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.attached||((e=e||document.head).append(this.tag),this.attached=!0)}}]),e}();e.Import=o,o.instances={}}),require.register("curvature/base/Mixin.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/toConsumableArray")),a=n(t("@babel/runtime/helpers/typeof")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/classCallCheck")),f=n(t("@babel/runtime/helpers/createClass")),d=t("./Bindable");function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Mixin=void 0;var b=Symbol("constructor"),m=(Symbol("mixinList"),function(){function e(){(0,c.default)(this,e)}return(0,f.default)(e,null,[{key:"from",value:function(t){for(var r=arguments.length,n=Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return function(r){function i(){var r;(0,c.default)(this,i);for(var s=arguments.length,f=Array(s),d=0;d<s;d++)f[d]=arguments[d];var v,p=t.constructor?r=l.call.apply(l,[this].concat(f)):null,b=h(n);try{for(b.s();!(v=b.n()).done;){var m=v.value;switch(m[e.Constructor]&&m[e.Constructor].apply((0,o.default)(r)),(0,a.default)(m)){case"function":e.mixClass(m,i);break;case"object":e.mixObject(m,(0,o.default)(r))}}}catch(e){b.e(e)}finally{b.f()}return(0,u.default)(r,p)}(0,s.default)(i,r);var l=p(i);return(0,f.default)(i)}(t)}},{key:"make",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.pop();return e.to.apply(e,[i].concat(r))}},{key:"to",value:function(e){for(var t={},r=arguments.length,n=Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];n.map(function(r){switch((0,a.default)(r)){case"object":Object.assign(t,Object.getOwnPropertyDescriptors(r));break;case"function":Object.assign(t,Object.getOwnPropertyDescriptors(r.prototype))}delete t.constructor,Object.defineProperties(e.prototype,t)})}},{key:"with",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.from.apply(this,[function(){return(0,f.default)(function e(){(0,c.default)(this,e)})}()].concat(t))}},{key:"mixObject",value:function(e,t){var r,n=h(Object.getOwnPropertyNames(e));try{for(n.s();!(r=n.n()).done;){var i=r.value;"function"!=typeof e[i]?t[i]=e[i]:t[i]=e[i].bind(t)}}catch(e){n.e(e)}finally{n.f()}var a,o=h(Object.getOwnPropertySymbols(e));try{for(o.s();!(a=o.n()).done;){var s=a.value;"function"!=typeof e[s]?t[s]=e[s]:t[s]=e[s].bind(t)}}catch(e){o.e(e)}finally{o.f()}}},{key:"mixClass",value:function(e,t){var r,n=h(Object.getOwnPropertyNames(e.prototype));try{for(n.s();!(r=n.n()).done;){var i=r.value;if(!["name","prototype","length"].includes(i)){var a=Object.getOwnPropertyDescriptor(t,i);if(!a||a.writable){if("function"!=typeof e[i]){t.prototype[i]=e.prototype[i];continue}t.prototype[i]=e.prototype[i].bind(t.prototype)}}}}catch(e){n.e(e)}finally{n.f()}var o,s=h(Object.getOwnPropertySymbols(e.prototype));try{for(s.s();!(o=s.n()).done;){var u=o.value;"function"==typeof e[u]?t.prototype[u]=e.prototype[u].bind(t.prototype):t.prototype[u]=e.prototype[u]}}catch(e){s.e(e)}finally{s.f()}var l,c=h(Object.getOwnPropertyNames(e));try{var f=function(){var r=l.value;if(["name","prototype","length"].includes(r))return"continue";var n=Object.getOwnPropertyDescriptor(t,r);if(n&&!n.writable)return"continue";if("function"!=typeof e[r])return t[r]=e[r],"continue";var i=t[r]||!1,a=e[r].bind(t);t[r]=function(){return i&&i.apply(void 0,arguments),a.apply(void 0,arguments)}};for(c.s();!(l=c.n()).done;)f()}catch(e){c.e(e)}finally{c.f()}var d,v=h(Object.getOwnPropertySymbols(e));try{var p=function(){var r=d.value;if("function"!=typeof e[r])return t.prototype[r]=e[r],"continue";var n=t[r]||!1,i=e[r].bind(t);t[r]=function(){return n&&n.apply(void 0,arguments),i.apply(void 0,arguments)}};for(v.s();!(d=v.n()).done;)p()}catch(e){v.e(e)}finally{v.f()}}},{key:"mix",value:function(e){for(var t={},r={},n=d.Bindable.makeBindable(e),a=function(e){var a,o=Object.getOwnPropertyNames(e.prototype),s=/^(before|after)__(.+)/,u=h(Object.getOwnPropertyNames(e));try{var l=function(){var r=a.value,o=r.match(s);if(o){switch(o[1]){case"before":n.___before(function(t,n,a,s,u){if(n===o[2])return e[r].bind(s).apply(void 0,(0,i.default)(u))});break;case"after":n.___after(function(t,n,a,s,u){if(n===o[2])return e[r].bind(s).apply(void 0,(0,i.default)(u))})}return"continue"}return t[r]?"continue":"function"==typeof e[r]?void(t[r]=e[r]):"continue"};for(u.s();!(a=u.n()).done;)l()}catch(e){u.e(e)}finally{u.f()}var c,f=h(o);try{var d=function(){var t=c.value,a=t.match(s);if(a){switch(a[1]){case"before":n.___before(function(r,n,o,s,u){if(n===a[2])return e.prototype[t].bind(s).apply(void 0,(0,i.default)(u))});break;case"after":n.___after(function(r,n,o,s,u){if(n===a[2])return e.prototype[t].bind(s).apply(void 0,(0,i.default)(u))})}return"continue"}return r[t]?"continue":"function"==typeof e.prototype[t]?void(r[t]=e.prototype[t]):"continue"};for(f.s();!(c=f.n()).done;)d()}catch(e){f.e(e)}finally{f.f()}},o=this;o&&o.prototype;o=Object.getPrototypeOf(o))a(o);for(var s in t)e[s]=t[s].bind(e);var u=function(t){e.prototype[t]=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return r[t].apply(this,n)}};for(var l in r)u(l);return n}}]),e}());e.Mixin=m,m.Constructor=b}),require.register("curvature/base/Model.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=t("./Cache"),s=t("./Bindable");t("./Repository");Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var u=function(){function e(t){(0,i.default)(this,e),this.repository=t}return(0,a.default)(e,[{key:"consume",value:function(t){for(var r in t){var n=t[r];if(t[r]instanceof Object&&t[r].class&&t[r].publicId){var i="".concat(t[r].class,"::").concat(t[r].publidId),a=o.Cache.load(i,!1,"model-type-repo");n=s.Bindable.makeBindable(new e(this.repository)),a&&(n=a),n.consume(t[r]),o.Cache.store(i,n,0,"model-type-repo")}this[r]=n}}}]),e}();e.Model=u}),require.register("curvature/base/Repository.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/typeof")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/createClass")),s=t("./Bindable"),u=t("./Router"),l=t("./Cache"),c=t("./Model"),f=t("./Bag"),d=t("../form/Form"),h=t("../form/multiField/FormWrapper");Object.defineProperty(e,"__esModule",{value:!0}),e.Repository=void 0;var v=function(){function e(t){(0,a.default)(this,e),this.uri=t}return(0,o.default)(e,[{key:"get",value:function(t){var r=this,n=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=this.uri+"/"+t,o=l.Cache.load(a+u.Router.queryToString(u.Router.queryOver(i),!0),!1,"model-uri-repo");return!n&&o?Promise.resolve(o):e.request(a,i).then(function(e){return r.extractModel(e.body)})}},{key:"page",value:function(){var t=this;0<arguments.length&&void 0!==arguments[0]&&arguments[0];var r=1<arguments.length?arguments[1]:void 0;return e.request(this.uri,r).then(function(e){var r=[];for(var n in e.body){var i=e.body[n];r.push(t.extractModel(i))}return e.body=r,e})}},{key:"edit",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=this.uri+"/create";return t&&(i=this.uri+"/"+t+"/edit"),r?e.request(i,{api:"json"},r).then(function(e){return e.body}):e.request(i).then(function(e){var t=new d.Form(e.meta.form,n);return new h.FormWrapper(t,i,"POST",n)})}},{key:"extractModel",value:function(e){var t=s.Bindable.makeBindable(new c.Model(this));if(t.consume(e),this.uri,t.publicId,t.class){var r="".concat(t.class,"::").concat(t.publidId);l.Cache.load(r,!1,"model-type-repo")}return t}}],[{key:"loadPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return 1<arguments.length&&void 0!==arguments[1]&&arguments[1],this.request(this.uri,e).then(function(e){return e})}},{key:"domCache",value:function(){}},{key:"load",value:function(e){return 1<arguments.length&&void 0!==arguments[1]&&arguments[1],this.objects=this.objects||{},this.objects[this.uri]=this.objects[this.uri]||{},this.objects[this.uri][e]?Promise.resolve(this.objects[this.uri][e]):this.request(this.uri+"/"+e).then(function(){})}},{key:"form",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=this.uri+"/create";return e&&(t=this.uri+"/"+e+"/edit"),this.request(t).then(function(e){return e})}},{key:"clearCache",value:function(){this.objects&&this.objects[this.uri]&&(this.objects[this.uri]={})}},{key:"encode",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;for(var n in r||(r=new FormData),e){var a=n;t&&(a="".concat(t,"[").concat(a,"]")),e[n]&&"object"!==(0,i.default)(e[n])?r.append(a,e[n]):this.encode(e[n],a,r)}return r}},{key:"onResponse",value:function(e){return this._onResponse||(this._onResponse=new f.Bag),this._onResponse.add(e)}},{key:"request",value:function(e){var t,r=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},s="GET",u=null,l={};n&&(l=n),this._onResponse||(this._onResponse=new f.Bag),this.runningRequests||(this.runningRequests={}),l.api=l.api||"json",t=Object.keys(l).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(l[e])}).join("&");var c;if(c=e+"?"+t,!i&&this.runningRequests[c])return this.runningRequests[c];i&&(a=!1,s="POST",u=i instanceof FormData?i:this.encode(i));var d=new XMLHttpRequest;if("responseType"in o&&(d.responseType=o.responseType),!i&&a&&this.cache&&this.cache[c])return Promise.resolve(this.cache[c]);var h='script[data-uri="'+c+'"]',v=document.querySelector(h);if(!i&&a&&v){var p=JSON.parse(v.innerText);return Promise.resolve(p)}d.withCredentials=!("withCredentials"in o)||o.withCredentials,document.createElement("a").href=c,i||(d.timeout=o.timeout||15e3,this.xhrs[c]=d);var b=new Promise(function(e,t){if(i&&"progressUp"in o&&(d.upload.onprogress=o.progressUp),"progressDown"in o&&(d.onprogress=o.progressDown),d.onreadystatechange=function(){var n;if(4===d.readyState)if(delete r.xhrs[c],delete r.runningRequests[c],r.cache||(r.cache={}),"application/json"!=d.getResponseHeader("Content-Type")&&"application/json; charset=utf-8"!=d.getResponseHeader("Content-Type")&&"text/json"!=d.getResponseHeader("Content-Type")&&"text/json; charset=utf-8"!=d.getResponseHeader("Content-Type")){var i=r._onResponse.items();for(var a in i)i[a](d,!0);200===d.status?e(d):t(d)}else if((n=JSON.parse(d.responseText))&&0==n.code){var o=document.querySelector('script[data-uri="'+c+'"]');(window.prerenderer||navigator.userAgent.match(/prerender/i))&&(window.prerenderer=window.prerenderer||!0,!o&&((o=document.createElement("script")).type="text/json",o.setAttribute("data-hack","application/ld+json-NOT!"),o.setAttribute("data-uri",c),document.head.appendChild(o)),o.innerText=JSON.stringify(n));var s=r._onResponse.items();for(var u in s)s[u](n,!0);n._http=d.status,200===d.status?e(n):t(n)}else{var l=r._onResponse.items();for(var f in l)l[f](n,!0);t(n)}},d.open(s,c,!0),o.headers)for(var n in o.headers)d.setRequestHeader(n,o.headers[n]);d.send(u)});return i||(this.runningRequests[c]=b),b}},{key:"cancel",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:/^.$/;for(var t in this.xhrs)this.xhrs[t]&&t.match(e)&&(this.xhrs[t].abort(),delete this.xhrs[t])}}]),e}();e.Repository=v,v.xhrs=[]}),require.register("curvature/base/Router.js",function(e,t,r){"use strict";var n,i=t("@babel/runtime/helpers/interopRequireDefault"),a=i(t("@babel/runtime/helpers/slicedToArray")),o=i(t("@babel/runtime/helpers/classCallCheck")),s=i(t("@babel/runtime/helpers/createClass")),u=i(t("@babel/runtime/helpers/typeof")),l=t("./View"),c=(t("./Cache"),t("./Config")),f=t("./Routes");function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;var v=Symbol("NotFound"),p=Symbol("Internal"),b="object"===("undefined"==typeof globalThis?"undefined":(0,u.default)(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":(0,u.default)(window))?window:"object"===("undefined"==typeof self?"undefined":(0,u.default)(self))?self:void 0;b.CustomEvent=null!==(n=b.CustomEvent)&&void 0!==n?n:b.Event;var m=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,null,[{key:"wait",value:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded";(2<arguments.length&&void 0!==arguments[2]?arguments[2]:document).addEventListener(r,function(){t.listen(e)})}},{key:"listen",value:function(e){var t=this,r=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];this.listener=e||this.listener,this.routes=r||e.routes,Object.assign(this.query,this.queryOver({}));var n=function(r){r.preventDefault(),r.state&&"routedId"in r.state?(r.state.routedId<=t.routeCount?(t.history.splice(r.state.routedId),t.routeCount=r.state.routedId):r.state.routedId>t.routeCount&&(t.history.push(r.state.prev),t.routeCount=r.state.routedId),t.state=r.state):null!==t.prevPath&&t.prevPath!==location.pathname&&t.history.push(t.prevPath),t.isOriginLimited(location)?t.match(t.nextPath,e):t.match(location.pathname,e)};window.addEventListener("cvUrlChanged",n),window.addEventListener("popstate",n);var i=!this.isOriginLimited(location)&&location.pathname+location.search;!this.isOriginLimited(location)&&location.hash&&(i+=location.hash);var a={routedId:this.routeCount,url:location.pathname,prev:this.prevPath};this.isOriginLimited(location)||history.replaceState(a,null,location.pathname),this.go(!1===i?"/":i)}},{key:"go",value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],r=c.Config.get("title");r&&(document.title=r);var n={routedId:this.routeCount,prev:this.prevPath,url:location.pathname};-1===t?this.match(e,this.listener,!0):this.isOriginLimited(location)?this.nextPath=e:2===t&&location.pathname!==e?history.replaceState(n,null,e):location.pathname!==e&&history.pushState(n,null,e),(!t||0>t)&&(!1===t&&(this.path=null),!t&&("#"===e.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged")))),this.prevPath=e}},{key:"processRoute",value:function(e,t,r){return"function"==typeof e[t]?e[t].prototype instanceof l.View?new e[t](r):e[t](r):e[t]}},{key:"handleError",value:function(e,t,r,n,i,a,o,s){"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:a,prev:o,view:i,routes:t,selected:r}}));var u=b.devMode?"Unexpected error: "+e:"Unexpected error.";t[p]&&(n[p]=e,u=this.processRoute(t,p,n)),this.update(i,a,u,t,r,n,s)}},{key:"match",value:function(e,t){var r=this,n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],i=null,o=!1;if(!0===n&&(o=n),n&&"object"===(0,u.default)(n)&&(o=n.forceRefresh,i=n.event),"undefined"==typeof document||this.path!==e||o){var s="http://example.com";"undefined"!=typeof document&&(s=this.isOriginLimited(location)?s:location.origin,this.queryString=location.search);var l=new URL(e,s);e=this.path=l.pathname,"undefined"==typeof document&&(this.queryString=l.search);var c=this.prevPath,h=t&&t.args?t.args.content:null,p=this.routes||t&&t.routes||f.Routes.dump(),b=new URLSearchParams(this.queryString);for(var m in i&&i.request&&(this.request=i.request),Object.keys(this.query))delete this.query[m];var y,g=d(b);try{for(g.s();!(y=g.n()).done;){var w=(0,a.default)(y.value,2),k=w[0],R=w[1];this.query[k]=R}}catch(e){g.e(e)}finally{g.f()}var C={},O=!1,_="";for(var P in"/"===e.substring(0,1)&&(e=e.substring(1)),e=e.split("/"),this.query)C[P]=this.query[P];e:for(var j in p){var E=j.split("/");if(!(E.length<e.length&&"*"!==E[E.length-1])){for(var x in E)if("%"==E[x].substr(0,1)){var T=null,S=/^%(\w+)\??/.exec(E[x]);if(S&&S[1]&&(T=S[1]),!T)throw new Error("".concat(E[x],' is not a valid argument segment in route "').concat(j,'"'));if(e[x])C[T]=e[x];else{if("?"!=E[x].substr(E[x].length-1,1))continue e;C[T]=""}}else if("*"!==E[x]&&e[x]!==E[x])continue e;O=j,_=p[j],"*"===E[E.length-1]&&(C.pathparts=e.slice(E.length-1));break}}var A=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:e,prev:c,root:t,selected:O,routes:p}});if("undefined"==typeof document||document.dispatchEvent(A)){if(!o&&t&&h&&_ instanceof Object&&h instanceof _&&!(_ instanceof Promise)&&h.update(C))return t.args.content=h,!0;O in p||(p[O]=p[v]);try{return!1===(_=this.processRoute(p,O,C))&&(_=this.processRoute(p,v,C)),_ instanceof Promise?"undefined"==typeof document?_:_.then(function(n){return r.update(t,e,n,p,O,C,o)}).catch(function(n){r.handleError(n,p,O,C,t,e,c,o)}):this.update(t,e,_,p,O,C,o)}catch(r){this.handleError(r,p,O,C,t,e,c,o)}}}}},{key:"update",value:function(e,t,r,n,i,a,o){if(e){var s=this.prevPath,u=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:r,path:t,prev:s,view:e,routes:n,selected:i}});!1!==r&&(e.args.content instanceof l.View&&(e.args.content.pause(!0),e.args.content.remove()),document.dispatchEvent(u)&&(e.args.content=r),r instanceof l.View&&(r.pause(!1),r.update(a,o)));var c=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:r,path:t,prev:s,view:e,routes:n,selected:i}});document.dispatchEvent(c)}}},{key:"isOriginLimited",value:function(e){var t=e.origin;return"null"===t||"file://"===t}},{key:"queryOver",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r={},n={},i=d(new URLSearchParams(location.search));try{for(i.s();!(e=i.n()).done;){var a=e.value;n[a[0]]=a[1]}}catch(t){i.e(t)}finally{i.f()}return delete(r=Object.assign(r,n,t)).api,r}},{key:"queryToString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],r=[],n=e;for(var i in t||(n=this.queryOver(e)),n)""!==n[i]&&r.push(i+"="+encodeURIComponent(n[i]));return r.join("&")}},{key:"setQuery",value:function(e,t,r){var n=this.queryOver();n[e]=t,void 0===t&&delete n[e];var i=this.queryToString(n,!0);this.go(location.pathname+(i?"?"+i:"?"),r)}}]),e}();e.Router=m,Object.defineProperty(m,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(m,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(m,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(m,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(m,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(m,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:p}),Object.defineProperty(m,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:v})}),require.register("curvature/base/Routes.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass"));Object.defineProperty(e,"__esModule",{value:!0}),e.Routes=void 0;var o={},s=t,u=!1,l=function(){if(!u){try{Object.assign(o,s("Routes").Routes||{})}catch(e){!0===globalThis.devMode&&console.warn(e)}u=!0}},c=function(){function e(){(0,i.default)(this,e)}return(0,a.default)(e,null,[{key:"get",value:function(e){return l(),this.routes[e]}},{key:"dump",value:function(){return l(),this.routes}}]),e}();e.Routes=c,Object.defineProperty(c,"routes",{configurable:!1,enumerable:!1,writable:!1,value:o})}),require.register("curvature/base/RuleSet.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/slicedToArray")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/createClass")),s=(t("./Dom"),t("./Tag")),u=t("./View");function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.RuleSet=void 0;var f=function(){function e(){(0,a.default)(this,e)}return(0,o.default)(e,[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;for(var n in e.apply(t,r),this.rules)for(var i in this.rules[n]){var a,o=this.rules[n][i],s=e.wrap(t,o,r),u=l(t.querySelectorAll(n));try{for(u.s();!(a=u.n()).done;){s(a.value)}}catch(e){u.e(e)}finally{u.f()}}}},{key:"purge",value:function(){if(this.rules)for(var e=0,t=Object.entries(this.rules);e<t.length;e++){var r=(0,i.default)(t[e],2),n=r[0];r[1];if(this.rules[n])for(var a in this.rules[n])delete this.rules[n][a]}}}],[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;for(var r in this.globalRules)for(var n in this.globalRules[r]){var i,a=this.globalRules[r][n],o=this.wrap(e,a,t),s=l(e.querySelectorAll(r));try{for(s.s();!(i=s.n()).done;){o(i.value)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"wait",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document,n=function(t,r){return function(){return r.removeEventListener(t,n),e.apply()}}(t,r);r.addEventListener(t,n)}},{key:"wrap",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t;return(t instanceof u.View||t&&t.prototype&&t.prototype instanceof u.View)&&(n=function(){return t}),function(e){if(void 0===e.___cvApplied___&&Object.defineProperty(e,"___cvApplied___",{enumerable:!1,writable:!1,value:new WeakSet}),!e.___cvApplied___.has(t)){var i,a;r&&(i=a=r,r.viewList&&(a=r.viewList.parent));var o=new s.Tag(e,a,null,void 0,i),l=o.element.parentNode,c=o.element.nextSibling,f=n(o);if(!1!==f&&e.___cvApplied___.add(t),f instanceof HTMLElement&&(f=new s.Tag(f)),f instanceof s.Tag){if(!f.element.contains(o.element)){for(;o.element.firstChild;)f.element.appendChild(o.element.firstChild);o.remove()}c?l.insertBefore(f.element,c):l.appendChild(f.element)}f&&f.prototype&&f.prototype instanceof u.View&&(f=new f({},r)),f instanceof u.View&&(r&&(r.cleanup.push(function(e){return function(){e.remove()}}(f)),r.cleanup.push(r.args.bindTo(function(e,t,r){r[t]=e,f.args[t]=e})),r.cleanup.push(f.args.bindTo(function(e,t,n){n[t]=e,r.args[t]=e}))),o.clear(),f.render(o.element))}}}}]),e}();e.RuleSet=f}),require.register("curvature/base/SetMap.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/construct")),a=n(t("@babel/runtime/helpers/toConsumableArray")),o=n(t("@babel/runtime/helpers/classCallCheck")),s=n(t("@babel/runtime/helpers/createClass")),u=n(t("@babel/runtime/helpers/defineProperty"));function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.SetMap=void 0;var f=function(){function e(){(0,o.default)(this,e),(0,u.default)(this,"_map",new Map)}return(0,s.default)(e,[{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"getOne",value:function(e){var t,r=l(this.get(e));try{for(r.s();!(t=r.n()).done;){return t.value}}catch(e){r.e(e)}finally{r.f()}}},{key:"add",value:function(e,t){var r=this._map.get(e);return r||this._map.set(e,r=new Set),r.add(t)}},{key:"remove",value:function(e,t){var r=this._map.get(e);if(r){var n=r.delete(t);return r.size||this._map.delete(e),n}}},{key:"values",value:function(){return(0,i.default)(Set,(0,a.default)((0,a.default)(this._map.values()).map(function(e){return(0,a.default)(e.values())})))}}]),e}();e.SetMap=f}),require.register("curvature/base/Tag.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=t("./Bindable");Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=void 0;var s=Symbol("CurrentStyle"),u=function(e){if(this.node)for(var t in e){var r=e[t]+"";this[s].has(t)&&this[s].get(t)===e[t]||("-"===t[0]?this.node.style.setProperty(t,r):this.node.style[t]=r,void 0===e[t]?this[s].delete(t):this[s].set(t,e[t]))}},l=function(e){var t=this;return"function"==typeof this[e]?this[e]:this.node&&"function"==typeof this.node[e]?function(){var r;return(r=t.node)[e].apply(r,arguments)}:"style"===e?this.proxy.style:this.node&&e in this.node?this.node[e]:this[e]},c=function(){function e(t,r,n,a,c){var f=this;if((0,i.default)(this,e),"string"==typeof t){var d=document.createRange().createContextualFragment(t);t=d.firstChild}this.element=o.Bindable.makeBindable(t),this.node=this.element,this.parent=r,this.direct=c,this.ref=n,this.index=a,this.cleanup=[],this[o.Bindable.OnAllGet]=l.bind(this),this[s]=new Map;var h=o.Bindable.make(u.bind(this));return Object.defineProperty(this,"style",{value:h}),this.proxy=o.Bindable.make(this),this.proxy.style.bindTo(function(e,t,r,n){f[s].has(t)&&f[s].get(t)===e||(f.node.style[t]=e,n||void 0===e?f[s].delete(t):f[s].set(t,e))}),this.proxy.bindTo(function(e,r){if("index"!==r)return r in t&&t[r]!==e&&(t[r]=e),!1}),this.proxy}return(0,a.default)(e,[{key:"attr",value:function(e){for(var t in e)void 0===e[t]?this.node.removeAttribute(t):null===e[t]?this.node.setAttribute(t,""):this.node.setAttribute(t,e[t]);return this}},{key:"remove",value:function(){this.node&&this.node.remove(),o.Bindable.clearBindings(this);for(var e;e=this.cleanup.shift();)e();if(this.clear(),this.node){var t=new Event("cvDomDetached");this.node.dispatchEvent(t),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var e=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(e),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){!(0<arguments.length&&void 0!==arguments[0])||arguments[0]}},{key:"listen",value:function(e,t,r){var n=this.node;n.addEventListener(e,t,r);var i=function(){n.removeEventListener(e,t,r)},a=function(){i(),i=function(){return console.warn("Already removed!")}};return this.parent.onRemove(function(){return a()}),a}}]),e}();e.Tag=c}),require.register("curvature/base/Theme.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/slicedToArray")),a=n(t("@babel/runtime/helpers/toConsumableArray")),o=n(t("@babel/runtime/helpers/classCallCheck")),s=n(t("@babel/runtime/helpers/createClass")),u=n(t("@babel/runtime/helpers/defineProperty"));function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.Theme=void 0;var f=function(){function e(t){var r;(0,o.default)(this,e),(0,u.default)(this,"themes",[]),(r=this.themes).push.apply(r,(0,a.default)(t))}return(0,s.default)(e,[{key:"getTemplate",value:function(e){for(var t in this.themes){var r=this.themes[t].getTemplate(e);if(r)return r}}},{key:"getView",value:function(e){for(var t in this.themes){var r=this.themes[t].getView(e);if(r)return r}}}]),e}(),d=function(){function e(t){(0,o.default)(this,e),this.key=t,this.viewMap=new Map,this.templateMap=new Map,this.fallbacks=[]}return(0,s.default)(e,[{key:"setFallback",value:function(){var e;return(e=this.fallbacks).push.apply(e,arguments),this}},{key:"setView",value:function(e,t){return this.viewMap.set(e,t),this}},{key:"getView",value:function(e){var t=this.resolve(e,"viewMap");return t?new t(e):null}},{key:"setTemplate",value:function(e,t){return this.templateMap.set(e,t),this}},{key:"getTemplate",value:function(e){return this.resolve(e,"templateMap")}},{key:"resolve",value:function(e,t){e.___object___&&e.isBound&&(e=e.___object___);var r=e.__proto__.constructor,n=this[t];if(n.has(r,e))return n.get(r);var a,o=null,s=l(n);try{for(s.s();!(a=s.n()).done;){var u=(0,i.default)(a.value,2),c=u[0],f=u[1];e instanceof c&&(o=f)}}catch(e){s.e(e)}finally{s.f()}if(!o){var d,h=l(this.fallbacks);try{for(h.s();!(d=h.n()).done;){if(o=d.value.resolve(e,t))return o}}catch(e){h.e(e)}finally{h.f()}}return o&&n.set(r,o),o}}],[{key:"get",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(1>=t.length){var n=(t[0]||"")+"";return this.instances[n]||(this.instances[n]=new this(n)),this.instances[n]}var i=[];for(var a in t)i.push(this.get(t[a]));return new f(i)}}]),e}();e.Theme=d,(0,u.default)(d,"instances",{})}),require.register("curvature/base/Uuid.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/defineProperty")),s=Symbol.toPrimitive;Object.defineProperty(e,"__esModule",{value:!0}),e.Uuid=void 0;var u=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4;if((0,i.default)(this,e),(0,o.default)(this,"uuid",null),(0,o.default)(this,"version",4),t){if(!t||"string"!=typeof t&&!(t instanceof e)||!t.match(/[0-9A-Fa-f]{8}(-[0-9A-Fa-f]{4}){3}-[0-9A-Fa-f]{12}/))throw new Error('Invalid input for Uuid: "'.concat(t,'"'));this.version=r,this.uuid=t}else this.uuid="function"==typeof crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)});Object.freeze(this)}return(0,a.default)(e,[{key:s,value:function(){return this.toString()}},{key:"toString",value:function(){return this.uuid}},{key:"toJson",value:function(){return{version:this.version,uuid:this.uuid}}}]),e}();e.Uuid=u}),require.register("curvature/base/View.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/typeof")),a=n(t("@babel/runtime/helpers/toConsumableArray")),o=n(t("@babel/runtime/helpers/slicedToArray")),s=n(t("@babel/runtime/helpers/classCallCheck")),u=n(t("@babel/runtime/helpers/createClass")),l=n(t("@babel/runtime/helpers/assertThisInitialized")),c=n(t("@babel/runtime/helpers/inherits")),f=n(t("@babel/runtime/helpers/possibleConstructorReturn")),d=n(t("@babel/runtime/helpers/getPrototypeOf")),h=t("./Bindable"),v=t("./ViewList"),p=t("./Router"),b=t("./Uuid"),m=t("./Dom"),y=t("./Tag"),g=t("./Bag"),w=t("./RuleSet"),k=t("./Mixin"),R=(t("../mixin/PromiseMixin"),t("../mixin/EventTargetMixin"));function C(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;var P=Symbol("dontParse"),j=Symbol("expandBind"),E=Symbol("uuid"),x=function(e){function r(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return(0,s.default)(this,r),(e=n.call(this,t,i))[R.EventTargetMixin.EventTargetParent]=i,Object.defineProperty((0,l.default)(e),"args",{value:h.Bindable.make(t)}),Object.defineProperty((0,l.default)(e),E,{value:e.constructor.uuid()}),Object.defineProperty((0,l.default)(e),"nodesAttached",{value:new g.Bag(function(){})}),Object.defineProperty((0,l.default)(e),"nodesDetached",{value:new g.Bag(function(){})}),Object.defineProperty((0,l.default)(e),"_onRemove",{value:new g.Bag(function(){})}),Object.defineProperty((0,l.default)(e),"cleanup",{value:[]}),Object.defineProperty((0,l.default)(e),"parent",{value:i}),Object.defineProperty((0,l.default)(e),"views",{value:new Map}),Object.defineProperty((0,l.default)(e),"viewLists",{value:new Map}),Object.defineProperty((0,l.default)(e),"withViews",{value:new Map}),Object.defineProperty((0,l.default)(e),"tags",{value:h.Bindable.make({})}),Object.defineProperty((0,l.default)(e),"nodes",{value:h.Bindable.make([])}),Object.defineProperty((0,l.default)(e),"timeouts",{value:new Map}),Object.defineProperty((0,l.default)(e),"intervals",{value:[]}),Object.defineProperty((0,l.default)(e),"frames",{value:[]}),Object.defineProperty((0,l.default)(e),"ruleSet",{value:new w.RuleSet}),Object.defineProperty((0,l.default)(e),"preRuleSet",{value:new w.RuleSet}),Object.defineProperty((0,l.default)(e),"subBindings",{value:{}}),Object.defineProperty((0,l.default)(e),"templates",{value:{}}),Object.defineProperty((0,l.default)(e),"eventCleanup",{value:[]}),Object.defineProperty((0,l.default)(e),"unpauseCallbacks",{value:new Map}),Object.defineProperty((0,l.default)(e),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty((0,l.default)(e),"rendered",{value:new Promise(function(t){return Object.defineProperty((0,l.default)(e),"renderComplete",{value:t})})}),e.onRemove(function(){e[R.EventTargetMixin.Parent]&&(e[R.EventTargetMixin.Parent]=null)}),e.controller=(0,l.default)(e),e.template="",e.firstNode=null,e.lastNode=null,e.viewList=null,e.mainView=null,e.preserve=!1,e.removed=!1,e.loaded=Promise.resolve((0,l.default)(e)),e}(0,c.default)(r,e);var n=_(r);return(0,u.default)(r,[{key:"_id",get:function(){return this[E]}},{key:"onFrame",value:function(e){var t=this,r=!1,n=function(){r=!0},i=function(){t.removed||r||(!t.paused&&e(Date.now()),requestAnimationFrame(i))};return requestAnimationFrame(function(){return i(Date.now())}),this.frames.push(n),n}},{key:"onNextFrame",value:function(e){return requestAnimationFrame(function(){return e(Date.now())})}},{key:"onIdle",value:function(e){return requestIdleCallback(function(){return e(Date.now())})}},{key:"onTimeout",value:function(e,t){var r=this,n={timeout:null,callback:null,time:e,fired:!1,created:(new Date).getTime(),paused:!1},i=function(){t(),n.fired=!0,r.timeouts.delete(n.timeout)},a=setTimeout(i,e);return n.callback=i,n.timeout=a,this.timeouts.set(n.timeout,n),a}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e,t=C(this.timeouts);try{for(t.s();!(e=t.n()).done;){var r=(0,o.default)(e.value,2),n=(r[0],r[1]);clearTimeout(n.timeout),this.timeouts.delete(n.timeout)}}catch(e){t.e(e)}finally{t.f()}})},{key:"onInterval",value:function(e,t){var r=setInterval(t,e);return this.intervals.push({timeout:r,callback:t,time:e,paused:!1}),r}},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){for(var t in this.intervals)e===this.intervals[t].timeout&&(clearInterval(this.intervals[t].timeout),delete this.intervals[t])})},{key:"pause",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){var t,r=C(this.timeouts);try{for(r.s();!(t=r.n()).done;){var n=(0,o.default)(t.value,2),i=(n[0],n[1]);i.fired?this.timeouts.delete(i.timeout):(clearTimeout(i.timeout),i.paused=!0,i.time=Math.max(0,i.time-(Date.now()-i.created)))}}catch(e){r.e(e)}finally{r.f()}for(var a in this.intervals)clearInterval(this.intervals[a].timeout)}else{var s,u=C(this.timeouts);try{for(u.s();!(s=u.n()).done;){var l=(0,o.default)(s.value,2),c=(l[0],l[1]);if(c.paused){if(c.fired){this.timeouts.delete(c.timeout);continue}c.timeout=setTimeout(c.callback,c.time),c.paused=!1}}}catch(e){u.e(e)}finally{u.f()}for(var f in this.intervals)this.intervals[f].timeout.paused&&(this.intervals[f].timeout.paused=!1,this.intervals[f].timeout=setInterval(this.intervals[f].callback,this.intervals[f].time));var d,h=C(this.unpauseCallbacks);try{for(h.s();!(d=h.n()).done;){(0,(0,o.default)(d.value,2)[1])()}}catch(e){h.e(e)}finally{h.f()}this.unpauseCallbacks.clear()}var v,p=C(this.viewLists);try{for(p.s();!(v=p.n()).done;){var b=(0,o.default)(v.value,2);b[0];b[1].pause(!!e)}}catch(e){p.e(e)}finally{p.f()}for(var m in this.tags)if(Array.isArray(this.tags[m]))for(var y in this.tags[m])this.tags[m][y].pause(!!e);else this.tags[m].pause(!!e)}},{key:"render",value:function(){var e,t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(n instanceof r&&(n=n.firstNode.parentNode),i instanceof r&&(i=i.firstNode),this.firstNode)return this.reRender(n,i);this.dispatchEvent(new CustomEvent("render"));var o=this.template instanceof DocumentFragment?this.template.cloneNode(!0):r.templates.has(this.template),s=o?this.template instanceof DocumentFragment?o:r.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(o||this.template instanceof DocumentFragment||r.templates.set(this.template,s.cloneNode(!0)),this.mainView||this.preRuleSet.apply(s,this),this.mapTags(s),this.mainView||this.ruleSet.apply(s,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(e=this.nodes).push.apply(e,[this.firstNode].concat((0,a.default)(Array.from(s.childNodes)),[this.lastNode])),this.postRender(n),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(n){var u=n.getRootNode();if(i?(n.insertBefore(this.firstNode,i),n.insertBefore(this.lastNode,i)):(n.appendChild(this.firstNode),n.appendChild(this.lastNode)),n.insertBefore(s,this.lastNode),0,u.isConnected)this.attached(u,n),this.dispatchAttached(u,n);else{var l=function(e){e.target.isConnected&&(t.attached(u,n),t.dispatchAttached(u,n),n.removeEventListener("cvDomAttached",l))};n.addEventListener("cvDomAttached",l)}}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;this.dispatchEvent(new CustomEvent("attached",{detail:{view:r||this,node:t,root:e,mainView:this}})),this.dispatchDomAttached(r);var n,i=C(this.nodesAttached.items());try{for(i.s();!(n=i.n()).done;){(0,n.value)(e,t)}}catch(e){i.e(e)}finally{i.f()}}},{key:"dispatchDomAttached",value:function(e){var t=this;this.nodes.filter(function(e){return e.nodeType!==Node.COMMENT_NODE}).forEach(function(r){r.matches&&(m.Dom.mapTags(r,!1,function(r){r.matches&&r.dispatchEvent(new CustomEvent("cvDomAttached",{target:r,detail:{view:e||t,mainView:t}}))}),r.dispatchEvent(new CustomEvent("cvDomAttached",{target:r,detail:{view:e||t,mainView:t}})))})}},{key:"reRender",value:function(e,t){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this})){var r=new DocumentFragment;if(this.firstNode.isConnected){var n=this.nodesDetached.items();for(var i in n)n[i]()}if(r.append.apply(r,(0,a.default)(this.nodes)),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(r,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this});var o=e.getRootNode();o.isConnected&&(this.attached(o,e),this.dispatchAttached(o,e))}return this.nodes}}},{key:"mapTags",value:function(e){var t=this;m.Dom.mapTags(e,!1,function(e,r){e[P]||(e.matches?e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.mapInterpolatableTag(e)).matches("[cv-template]")&&t.mapTemplateTag(e)||e).matches("[cv-slot]")&&t.mapSlotTag(e)||e).matches("[cv-prerender]")&&t.mapPrendererTag(e)||e).matches("[cv-link]")&&t.mapLinkTag(e)||e).matches("[cv-attr]")&&t.mapAttrTag(e)||e).matches("[cv-expand]")&&t.mapExpandableTag(e)||e).matches("[cv-ref]")&&t.mapRefTag(e)||e).matches("[cv-on]")&&t.mapOnTag(e)||e).matches("[cv-each]")&&t.mapEachTag(e)||e).matches("[cv-bind]")&&t.mapBindTag(e)||e).matches("[cv-with]")&&t.mapWithTag(e)||e).matches("[cv-if]")&&t.mapIfTag(e)||e).matches("[cv-view]")&&t.mapViewTag(e)||e:e=t.mapInterpolatableTag(e),e!==r.currentNode&&(r.currentNode=e))})}},{key:"mapExpandableTag",value:function(e){var t=e[j];t&&(t(),e[j]=!1);var r=h.Bindable.resolve(this.args,e.getAttribute("cv-expand"),!0),n=(0,o.default)(r,2),i=n[0],a=n[1];return e.removeAttribute("cv-expand"),i[a]||(i[a]={}),i[a]=h.Bindable.make(i[a]),this.onRemove(e[j]=i[a].bindTo(function(t,r,n,i){return i||void 0===t?void e.removeAttribute(r,t):null===t?void e.setAttribute(r,""):void e.setAttribute(r,t)})),e}},{key:"compileExpandableTag",value:function(e){return function(t){var r=e.cloneNode(!0),n=r.getAttribute("cv-expand"),i=h.Bindable.make(t.args[n]||{});r.removeAttribute("cv-expand");var a=function(){if("name"===o||"type"===o)return"continue";var e=i.bindTo(o,function(e,t){return function(r){e.setAttribute(t,r)}}(r,o));t.onRemove(function(){e(),i.isBound()&&h.Bindable.clearBindings(i)})};for(var o in i)a();return r}}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(e){var t=e.getAttribute("cv-attr").split(/[,;]/).map(function(e){return e.split(":")});return e.removeAttribute("cv-attr"),function(r){var n=e.cloneNode(!0),i=function(){var e=t[a][1]||t[a][0],i=h.Bindable.resolve(r.args,e,!0),s=(0,o.default)(i,2),u=s[0],l=s[1],c=t[a][0];r.onRemove(u.bindTo(l,function(e,t,r,i){return i||void 0===e?void n.removeAttribute(c,e):null===e?void n.setAttribute(c,""):void n.setAttribute(c,e)}))};for(var a in t)i();return n}}},{key:"mapInterpolatableTag",value:function(e){var t=this,n=this.interpolateRegex;if(e.nodeType===Node.TEXT_NODE){var a=e.nodeValue;if(!this.interpolatable(a))return e;for(var s,u=0,l=function(){var n=s[2],l=!1,c=!1,f=n.split("|"),d=!1;if(1<f.length&&(d=t.stringTransformer(f.slice(1)),n=f[0]),"$$"===n.substr(0,2)&&(l=!0,c=!0,n=n.substr(2)),"$"===n.substr(0,1)&&(l=!0,n=n.substr(1)),"000"===n.substr(0,3))return expand=!0,n=n.substr(3),"continue";var v=a.substring(u,s.index);u=s.index+s[1].length;var p,b=document.createTextNode(v);b[P]=!0,e.parentNode.insertBefore(b,e),(p=l?document.createElement("div"):document.createTextNode(""))[P]=!0;var m=t.args,g=n;if(n.match(/\./)){var w=h.Bindable.resolve(t.args,n,!0),k=(0,o.default)(w,2);m=k[0],g=k[1]}if(e.parentNode.insertBefore(p,e),"object"!==(0,i.default)(m))return"break";var C=(m=h.Bindable.make(m)).bindTo(g,function(n,i,a){if(a[i]!==n&&(a[i]instanceof r||a[i]instanceof Node||a[i]instanceof y.Tag)&&!a[i].preserve&&a[i].remove(),p.nodeValue="",c&&!(n instanceof r)){var o,s=null!==(o=n)&&void 0!==o?o:"";(n=new r(t.args,t)).template=s}if(d&&(n=d(n)),n instanceof r){n[R.EventTargetMixin.EventTargetParent]=t;var u=function(e,r){n.dispatchAttached(e,r,t)};t.nodesAttached.add(u),n.render(e.parentNode,p);var f=function(){n.preserve||n.remove()};t.onRemove(f),n.onRemove(function(){t.nodesAttached.remove(u),t._onRemove.remove(f)})}else n instanceof Node?(e.parentNode.insertBefore(n,p),t.onRemove(function(){return n.remove()})):n instanceof y.Tag?n.node?(e.parentNode.insertBefore(n.node,p),t.onRemove(function(){return n.remove()})):n.remove():(n instanceof Object&&n.__toString instanceof Function&&(n=n.__toString()),l?p.innerHTML=n:p.nodeValue=n);p[P]=!0});t.onRemove(C)};s=n.exec(a);){var c=l();if("continue"!==c&&"break"===c)break}var f=a.substring(u),d=document.createTextNode(f);d[P]=!0,e.parentNode.insertBefore(d,e),e.nodeValue=""}else if(e.nodeType===Node.ELEMENT_NODE)for(var v=function(){if(!t.interpolatable(e.attributes[p].value))return"continue";for(var r,i=0,a=e.attributes[p].value,s=e.attributes[p],u={},l=[];r=n.exec(a);)l.push(a.substring(i,r.index)),u[r[2]]||(u[r[2]]=[]),u[r[2]].push(l.length),l.push(r[1]),i=r.index+r[1].length;l.push(a.substring(i));var c=function(){var r=t.args,n=f,i=f.split("|"),a=!1,c=f;if(1<i.length&&(a=t.stringTransformer(i.slice(1)),n=i[0]),n.match(/\./)){var d=h.Bindable.resolve(t.args,n,!0),v=(0,o.default)(d,2);r=v[0],n=v[1]}u[c];t.onRemove(r.bindTo(n,function(r,i,o,f){for(var d in a&&(r=a(r)),u)for(var h in u[c])l[u[c][h]]=o[d],i===n&&(l[u[c][h]]=r);t.paused?t.unpauseCallbacks.set(s,function(){return e.setAttribute(s.name,l.join(""))}):e.setAttribute(s.name,l.join(""))})),t.onRemove(function(){r.isBound()||h.Bindable.clearBindings(r)})};for(var f in u)c()},p=0;p<e.attributes.length;p++)v();return e}},{key:"mapRefTag",value:function(e){var t=e.getAttribute("cv-ref").split(":"),r=(0,o.default)(t,3),n=r[0],i=r[1],a=void 0===i?null:i,s=r[2],u=void 0===s?null:s,l=y.Tag;a&&(l=this.stringToClass(a)),e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(function(){e.___tag___=null,e.remove()});var c=this;this.viewList&&(c=this.viewList.parent);var f=new l(e,this,n,void 0,this);for(e.___tag___=f,this.tags[n]=f;c;){var d=this.args[u];if(void 0===d?c.tags[n]=f:(!c.tags[n]&&(c.tags[n]=[]),c.tags[n][d]=f),!c.parent)break;c=c.parent}return e}},{key:"mapBindTag",value:function(e){var t=this,n=e.getAttribute("cv-bind"),i=this.args,a=n,s=null;if(n.match(/\./)){var u=h.Bindable.resolve(this.args,n,!0),l=(0,o.default)(u,3);i=l[0],a=l[1],s=l[2]}i!==this.args&&(this.subBindings[n]=this.subBindings[n]||[],this.onRemove(this.args.bindTo(s,function(){for(;t.subBindings.length;)t.subBindings.shift()()})));var c=!1;"$"===a.substr(0,1)&&(a=a.substr(1),c=!0);var f=i.bindTo(a,function(n,i,a,o,s){(s instanceof r||s instanceof Node||s instanceof y.Tag)&&s!==n&&s.remove();var u=new CustomEvent("cvAutoChanged",{bubbles:!0});if(["INPUT","SELECT","TEXTAREA"].includes(e.tagName)){var l=e.getAttribute("type");if(l&&"checkbox"===l.toLowerCase())e.checked=!!n,e.dispatchEvent(u);else if(l&&"radio"===l.toLowerCase())e.checked=n==e.value,e.dispatchEvent(u);else if("file"!==l){if("SELECT"===e.tagName){var f=function(){for(var t=0;t<e.options.length;t++){e.options[t].value==n&&(e.selectedIndex=t)}};f(),t.nodesAttached.add(f)}else e.value=null==n?"":n;e.dispatchEvent(u)}}else if(n instanceof r){var d,h=C(e.childNodes);try{for(h.s();!(d=h.n()).done;){d.value.remove()}}catch(e){h.e(e)}finally{h.f()}var v=function(e){n.dispatchDomAttached(t)};t.nodesAttached.add(v),n[R.EventTargetMixin.EventTargetParent]=t,n.render(e),n.onRemove(function(){return t.nodesAttached.remove(v)})}else if(n instanceof Node)e.insert(n);else if(n instanceof y.Tag)e.append(n.node);else if(c){if(e.innerHTML!==n){if(n+="",e.innerHTML===n.substring(0,e.innerHTML.length))e.innerHTML+=n.substring(e.innerHTML.length);else{var p,b=C(e.childNodes);try{for(b.s();!(p=b.n()).done;){p.value.remove()}}catch(e){b.e(e)}finally{b.f()}e.innerHTML=n}m.Dom.mapTags(e,!1,function(e){return e[P]=!0})}}else if(e.textContent!==n){var g,w=C(e.childNodes);try{for(w.s();!(g=w.n()).done;){g.value.remove()}}catch(e){w.e(e)}finally{w.f()}e.textContent=n}});i!==this.args&&this.subBindings[n].push(f),this.onRemove(f);var d=e.getAttribute("type"),v=e.getAttribute("multiple"),p=function(t){if(t.target===e)if(d&&"checkbox"===d.toLowerCase())i[a]=!!e.checked&&t.target.getAttribute("value");else if(t.target.matches("[contenteditable=true]"))i[a]=t.target.innerHTML;else if("file"===d&&v){var r=Array.from(t.target.files),n=i[a]||h.Bindable.onDeck(i,a);if(n&&r.length){var o=function(e){if(r[e]!==n[e])return r[e].toJSON=function(){return{name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified}},n[e]=r[e],"break"};for(var s in r){if("break"===o(s))break}}else i[a]=r}else if("file"===d&&!v&&t.target.files.length){var u=t.target.files.item(0);u.toJSON=function(){return{name:u.name,size:u.size,type:u.type,date:u.lastModified}},i[a]=u}else i[a]=t.target.value};return"file"===d||"radio"===d?e.addEventListener("change",p):(e.addEventListener("input",p),e.addEventListener("change",p),e.addEventListener("value-changed",p)),this.onRemove(function(){"file"===d||"radio"===d?e.removeEventListener("change",p):(e.removeEventListener("input",p),e.removeEventListener("change",p),e.removeEventListener("value-changed",p))}),e.removeAttribute("cv-bind"),e}},{key:"mapOnTag",value:function(e){var t=this;return(e.getAttribute("cv-on")+"").split(";").map(function(e){return e.split(":")}).forEach(function(r){var n,i=(r=r.map(function(e){return e.trim()})).length,o=(r.shift()+"").trim(),s=((r.shift()||o)+"").trim(),u=((r.shift()||"")+"").trim(),l=[],c=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(s);c&&(s=c[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),c[2]&&(l=c[2].split(",").map(function(e){return e.trim()}))),l.length||l.push("$event"),o&&1!==i||(o=s);for(var f=t,d=function(){var e=f.controller;return"function"==typeof e[s]?(n=function(){e[s].apply(e,arguments)},"break"):"function"==typeof f[s]?(n=function(){var e;(e=f)[s].apply(e,arguments)},"break"):f.parent?void(f=f.parent):"break"};f;){if("break"===d())break}var h=function(r){var i=l.map(function(n){var i;return+n==n?n:"event"===n||"$event"===n?r:"$view"===n?f:"$controller"===n?controller:"$tag"===n?e:"$parent"===n?t.parent:"$subview"===n?t:n in t.args?t.args[n]:(i=/^['"]([\w-]+?)["']$/.exec(n))?i[1]:void 0});if("function"!=typeof n)throw new Error("".concat(s," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));n.apply(void 0,(0,a.default)(i))},v={};switch(u.includes("p")?v.passive=!0:u.includes("P")&&(v.passive=!1),u.includes("c")?v.capture=!0:u.includes("C")&&(v.capture=!1),u.includes("o")?v.once=!0:u.includes("O")&&(v.once=!1),o){case"_init":h();break;case"_attach":t.nodesAttached.add(h);break;case"_detach":t.nodesDetached.add(h);break;default:e.addEventListener(o,h,v),t.onRemove(function(){e.removeEventListener(o,h,v)})}return[o,s,l]}),e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var r=function(r){return r.preventDefault(),"http"===t.substring(0,4)||"//"===t.substring(0,2)?void window.open(e.getAttribute("href",t)):void p.Router.go(e.getAttribute("href"))};return e.addEventListener("click",r),this.onRemove(function(e,t){return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,r)),e.removeAttribute("cv-link"),e}},{key:"compileLinkTag",value:function(e){var t=e.getAttribute("cv-link");return e.removeAttribute("cv-link"),function(r){var n=e.cloneNode(!0);return n.setAttribute("href",t),n}}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),r=window.prerenderer||navigator.userAgent.match(/prerender/i);return r&&(window.prerenderer=window.prerenderer||!0),("never"===t&&r||"only"===t&&!r)&&e.parentNode.removeChild(e),e}},{key:"mapWithTag",value:function(e){var t=this,n=e.getAttribute("cv-with"),o=e.getAttribute("cv-carry"),s=e.getAttribute("cv-view");e.removeAttribute("cv-with"),e.removeAttribute("cv-carry"),e.removeAttribute("cv-view");var u=s?this.stringToClass(s):r,l=new DocumentFragment;(0,a.default)(e.childNodes).forEach(function(e){return l.appendChild(e)});var c=[];o&&(c=o.split(",").map(function(e){return e.trim()}));var f=this.args.bindTo(n,function(r,n,a,o){for(t.withViews.has(e)&&t.withViews.delete(e);e.firstChild;)e.removeChild(e.firstChild);var s=new u({},t);t.onRemove(function(e){return function(){e.remove()}}(s)),s.template=l;var f=function(){var e=t.args.bindTo(c[d],function(e,t){s.args[t]=e});s.onRemove(e),t.onRemove(function(){e(),s.remove()})};for(var d in c)f();var v=function(){if("object"!==(0,i.default)(r))return"continue";var e=(r=h.Bindable.make(r)).bindTo(p,function(e,t,r,n){n?t in s.args&&delete s.args[t]:s.args[t]=e});s.args.bindTo(p,function(e,t,n,i){i?t in r&&delete r[t]:r[t]=e});t.onRemove(function(){e(),r.isBound()||h.Bindable.clearBindings(r),s.remove()}),s.onRemove(function(){e(),r.isBound()||h.Bindable.clearBindings(r)})};for(var p in r)v();s.render(e),t.withViews.set(e,s)});return this.onRemove(function(){t.withViews.delete(e),f()}),e}},{key:"mapViewTag",value:function(e){var t=this,n=e.getAttribute("cv-view");e.removeAttribute("cv-view");var i=new DocumentFragment;(0,a.default)(e.childNodes).forEach(function(e){return i.appendChild(e)});var o=n.split(":"),s=o.pop()?this.stringToClass(n):r,u=o.shift(),l=new s(this.args,this);return this.views.set(e,l),u&&this.views.set(u,l),this.onRemove(function(r){return function(){r.remove(),t.views.delete(e),t.views.delete(u)}}(l)),l.template=i,l.render(e),e}},{key:"mapEachTag",value:function(e){var t=this,n=e.getAttribute("cv-each"),i=e.getAttribute("cv-view");e.removeAttribute("cv-each"),e.removeAttribute("cv-view");var s=i?this.stringToClass(i):r,u=new DocumentFragment;(0,a.default)(e.childNodes).forEach(function(e){return u.appendChild(e)});var l=n.split(":"),c=(0,o.default)(l,3),f=c[0],d=c[1],p=c[2],b=this.args,m=f;if(f.match(/\./)){var y=h.Bindable.resolve(this.args,f,!0),w=(0,o.default)(y,2);b=w[0],m=w[1]}var k=b.bindTo(m,function(r,n,i,a,o){r instanceof g.Bag&&(r=r.list),t.viewLists.has(e)&&t.viewLists.get(e).remove();var l=new v.ViewList(u,d,r,t,p,s),c=function(){return l.remove()};t.onRemove(c),l.onRemove(function(){return t._onRemove.remove(c)});var f=t.args.bindTo(function(e,t,r,n){"_id"===t||(n?t in l.subArgs&&delete l.subArgs[t]:l.subArgs[t]=e)}),h=l.args.bindTo(function(e,r,n,i,a){"_id"===r||"value"===r||"___"===(r+"").substring(0,3)||(i?delete t.args[r]:r in t.args&&(t.args[r]=e))});for(l.onRemove(f),l.onRemove(h),t.onRemove(f),t.onRemove(h);e.firstChild;)e.removeChild(e.firstChild);t.viewLists.set(e,l),l.render(e)});return this.onRemove(k),e}},{key:"mapIfTag",value:function(e){var t=this,n=e,i=n.getAttribute("cv-view"),s=n.getAttribute("cv-if"),u=n.getAttribute("cv-is"),l=!1,c=!1;n.removeAttribute("cv-view"),n.removeAttribute("cv-if"),n.removeAttribute("cv-is");var f=i?this.stringToClass(i):r;"!"===s.substr(0,1)&&(s=s.substr(1),l=!0),"?"===s.substr(0,1)&&(s=s.substr(1),c=!0);var d=new DocumentFragment;(0,a.default)(n.childNodes).forEach(function(e){return d.appendChild(e)});var v=this,p=new DocumentFragment,b=new f(Object.assign({},this.args),v);b.tags.bindTo(function(e,r){return t.tags[r]=e},{removeWith:this}),b.template=d;var y=v.args,w=s;if(s.match(/\./)){var k=h.Bindable.resolve(v.args,s,!0),R=(0,o.default)(k,2);y=R[0],w=R[1]}b.render(p);var C=y.bindTo(w,function(r,n){var i=r;c&&(r=null!==r&&void 0!==r),r instanceof g.Bag&&(r=r.list),Array.isArray(r)&&(r=!!r.length),null!==u&&(r=i==u),l&&(r=!r),r?(e.appendChild(p),(0,a.default)(p.childNodes).forEach(function(e){return m.Dom.mapTags(e,!1,function(e,r){e.matches&&e.dispatchEvent(new CustomEvent("cvDomAttached",{target:e,detail:{view:b||t,mainView:t}}))})})):(b.nodes.forEach(function(e){return p.appendChild(e)}),m.Dom.mapTags(p,!1,function(e,r){e.matches&&new CustomEvent("cvDomDetached",{target:e,detail:{view:b||t,mainView:t}})}))},{children:Array.isArray(y[w])});v.onRemove(C);var O=this.args.bindTo(function(e,t,r,n){"_id"===t||(n?t in b.args&&delete b.args[t]:b.args[t]=e)}),_=b.args.bindTo(function(e,r,n,i,a){"_id"===r||"___"===(r+"").substring(0,3)||r in t.args&&(i?delete t.args[r]:t.args[r]=e)});return v.onRemove(function(){C(),O(),_(),v._onRemove.remove(C)}),this.onRemove(function(){O(),_(),b.remove(),v!==t&&v.remove()}),e}},{key:"compileIfTag",value:function(e){var t=e.getAttribute("cv-if"),n=!1;e.removeAttribute("cv-if"),"!"===t.substr(0,1)&&(t=t.substr(1),n=!0);var i=new DocumentFragment;return(0,a.default)(e.childNodes).forEach(function(e){return i.appendChild(e.cloneNode(!0))}),function(a){var s=e.cloneNode(),u=new DocumentFragment,l=new r({},a);l.template=i,a.syncBind(l);var c=a.args,f=t;if(t.match(/\./)){var d=h.Bindable.resolve(a.args,t,!0),v=(0,o.default)(d,2);c=v[0],f=v[1]}var p=!1,b=c.bindTo(f,function(e,t){if(!p){var r=a.args[f]||n?s:u;return l.render(r),void(p=!0)}Array.isArray(e)&&(e=!!e.length),n&&(e=!e),e?s.appendChild(u):l.nodes.forEach(function(e){return u.appendChild(e)})});a.onRemove(b);var m=function(){c.isBound()||h.Bindable.clearBindings(c)};return l.onRemove(function(){b(),m(),a._onRemove.remove(b),a._onRemove.remove(m)}),s}}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");return e.removeAttribute("cv-template"),this.templates[t]=function(){return"TEMPLATE"===e.tagName?e.content.cloneNode(!0):new DocumentFragment(e.innerHTML)},this.rendered.then(function(){return e.remove()}),e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),r=this.templates[t];if(!r){for(var n=this;n&&!(r=n.templates[t]);)n=this.parent;if(!r)return void console.error("Template ".concat(t," not found."))}var i=r();for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return e.appendChild(i),e}},{key:"syncBind",value:function(e){var t=this,n=this.args.bindTo(function(t,r,n,i){"_id"===r||e.args[r]!==t&&(e.args[r]=t)}),i=e.args.bindTo(function(e,n,i,a,o){if("_id"!==n){var s=e,u=o;s instanceof r&&(s=s.___ref___),u instanceof r&&(u=u.___ref___),s!==u&&u instanceof r&&o.remove(),n in t.args&&(t.args[n]=e)}});this.onRemove(n),this.onRemove(i),e.onRemove(function(){t._onRemove.remove(n),t._onRemove.remove(i)})}},{key:"postRender",value:function(e){}},{key:"attached",value:function(e){}},{key:"interpolatable",value:function(e){return!!(e+"").match(this.interpolateRegex)}},{key:"remove",value:function(){var e=this,t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];if(this.dispatchEvent(new CustomEvent("remove",{detail:{view:this},cancelable:!0}))){var r=function(){for(var t in e.tags)Array.isArray(e.tags[t])?(e.tags[t]&&e.tags[t].forEach(function(e){return e.remove()}),e.tags[t].splice(0)):(e.tags[t]&&e.tags[t].remove(),e.tags[t]=void 0);for(var r in e.nodes)e.nodes[r]&&e.nodes[r].dispatchEvent(new Event("cvDomDetached")),e.nodes[r]&&e.nodes[r].remove(),e.nodes[r]=void 0;e.nodes.splice(0),e.firstNode=e.lastNode=void 0};t?r():requestAnimationFrame(r);var n,i=C(this._onRemove.items());try{for(i.s();!(n=i.n()).done;){var a=n.value;a(),this._onRemove.remove(a)}}catch(e){i.e(e)}finally{i.f()}var s,u=C(this.cleanup);try{for(u.s();!(s=u.n()).done;){var l=s.value;l&&l()}}catch(e){u.e(e)}finally{u.f()}this.cleanup.length=0;var c,f=C(this.viewLists);try{for(f.s();!(c=f.n()).done;){var d=(0,o.default)(c.value,2);d[0];d[1].remove()}}catch(e){f.e(e)}finally{f.f()}this.viewLists.clear();var h,v=C(this.timeouts);try{for(v.s();!(h=v.n()).done;){var p=(0,o.default)(h.value,2),b=(p[0],p[1]);clearTimeout(b.timeout),this.timeouts.delete(b.timeout)}}catch(e){v.e(e)}finally{v.f()}var m,y=C(this.intervals);try{for(y.s();!(m=y.n()).done;){var g=m.value;clearInterval(g)}}catch(e){y.e(e)}finally{y.f()}this.intervals.length=0;var w,k=C(this.frames);try{for(k.s();!(w=k.n()).done;){(0,w.value)()}}catch(e){k.e(e)}finally{k.f()}this.frames.length=0,this.preRuleSet.purge(),this.ruleSet.purge(),this.removed=!0,this.dispatchEvent(new CustomEvent("removed",{detail:{view:this},cancelable:!0}))}}},{key:"findTag",value:function(e){for(var t in this.nodes){var r=void 0;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return new y.Tag(this.nodes[t],this,void 0,void 0,this);if(r=this.nodes[t].querySelector(e))return new y.Tag(r,this,void 0,void 0,this)}}}},{key:"findTags",value:function(e){var t=this;return this.nodes.filter(function(e){return e.querySelectorAll}).map(function(t){return(0,a.default)(t.querySelectorAll(e))}).flat().map(function(e){return new y.Tag(e,t,void 0,void 0,t)})||[]}},{key:"onRemove",value:function(e){e instanceof Event||this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"stringTransformer",value:function(e){var t=this;return function(r){for(var n in e){for(var i=t,a=e[n];i&&!i[a];)i=i.parent;if(!i)return;r=i[e[n]](r)}return r}}},{key:"stringToClass",value:function(e){if(r.refClasses.has(e))return r.refClasses.get(e);var n=e.split("/"),i=n[n.length-1],a=t(e);return r.refClasses.set(e,a[i]),a[i]}},{key:"preventParsing",value:function(e){e[P]=!0}},{key:"toString",value:function(){return this.nodes.map(function(e){return e.outerHTML}).join(" ")}},{key:"listen",value:function(e,t,n,i){var a=this;if("string"==typeof e&&(i=n,n=t,t=e,e=this),e instanceof r)return this.listen(e.nodes,t,n,i);if(Array.isArray(e))return e.map(function(e){return a.listen(e,t,n,i)}).forEach(function(e){return e()});if(e instanceof y.Tag)return this.listen(e.element,t,n,i);e.addEventListener(t,n,i);var o=function(){return e.removeEventListener(t,n,i)},s=function(){o(),o=function(){}};return this.onRemove(function(){return s()}),s}},{key:"detach",value:function(){for(var e in this.nodes)this.nodes[e].remove();return this.nodes}}],[{key:"from",value:function(e){var t=new this(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null);return t.template=e,t}},{key:"isView",value:function(){return r}},{key:"uuid",value:function(){return new b.Uuid}}]),r}(k.Mixin.with(R.EventTargetMixin));e.View=x,Object.defineProperty(x,"templates",{value:new Map}),Object.defineProperty(x,"refClasses",{value:new Map})}),require.register("curvature/base/ViewList.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/typeof")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/createClass")),s=t("./Bindable"),u=t("./SetMap"),l=t("./Bag");function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.ViewList=void 0;var d=function(){function e(t,r,n,o){var u=this,c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,f=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null;(0,a.default)(this,e),this.removed=!1,this.args=s.Bindable.makeBindable({}),this.args.value=s.Bindable.makeBindable(n||{}),this.subArgs=s.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.viewClass=f,this._onRemove=new l.Bag,this.template=t,this.subProperty=r,this.keyProperty=c,this.tag=null,this.downDebind=[],this.upDebind=[],this.paused=!1,this.parent=o,this.rendered=new Promise(function(e){Object.defineProperty(u,"renderComplete",{configurable:!1,writable:!0,value:e})}),this.willReRender=!1,this.args.___before(function(e,t){"bindTo"==t||(u.paused=!0)}),this.args.___after(function(e,t,r){"bindTo"==t||(u.paused=1<r.length,u.reRender())});var d=this.args.value.bindTo(function(e,t,r,n){if(!u.paused){var a=t;if("symbol"!==(0,i.default)(t))if(isNaN(t)&&(a="_"+t),n)for(var o in u.views[a]&&u.views[a].remove(),delete u.views[a],u.views)isNaN(o)?u.views[o].args[u.keyProperty]=o.substr(1):u.views[o].args[u.keyProperty]=o;else u.views[a]?u.views[a]&&u.views[a].args&&(u.views[a].args[u.keyProperty]=t,u.views[a].args[u.subProperty]=e):(cancelAnimationFrame(u.willReRender),u.willReRender=requestAnimationFrame(function(){u.reRender()}))}});this._onRemove.add(d),Object.preventExtensions(this)}return(0,o.default)(e,[{key:"render",value:function(e){var t,r=this,n=[],i=c(this.views);try{var a=function(){var r=t.value;r.render(e),n.push(r.rendered.then(function(){return r}))};for(i.s();!(t=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}this.tag=e,Promise.all(n).then(function(e){return r.renderComplete(e)}),this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[],r=new u.SetMap;for(var n in this.views){var i=this.views[n],a=i.args[this.subProperty];r.add(a,i),t[n]=i}var o=[],s=new Set;this.downDebind.length&&this.downDebind.forEach(function(e){return e&&e()}),this.upDebind.length&&this.upDebind.forEach(function(e){return e&&e()}),this.upDebind.length=0,this.downDebind.length=0;var l=1/0,f=1/0,d=function(){var t=!1,n=h;if(isNaN(n)?n="_"+h:(n+"").length&&(n=+n),void 0!==e.args.value[h]&&r.has(e.args.value[h])){var i=r.getOne(e.args.value[h]);i&&(i.args[e.keyProperty]=h,o[n]=i,s.add(i),t=!0,!isNaN(n)&&(l=Math.min(l,n),0<n&&(f=Math.min(f,n))),r.remove(e.args.value[h],i))}if(!t){var a={},u=o[n]=new e.viewClass(a,e.parent);isNaN(n)||(l=Math.min(l,n),0<n&&(f=Math.min(f,n))),o[n].template=e.template,o[n].viewList=e,o[n].args[e.keyProperty]=h,o[n].args[e.subProperty]=e.args.value[h],e.upDebind[n]=a.bindTo(e.subProperty,function(t,r,n,i){var o=a[e.keyProperty];return i?void delete e.args.value[o]:void(e.args.value[o]=t)}),e.downDebind[n]=e.subArgs.bindTo(function(e,t,r,n){return n?void delete a[t]:void(a[t]=e)});var c=function(){e.upDebind.filter(function(e){return e}).forEach(function(e){return e()}),e.upDebind.length=0},d=function(){e.downDebind.filter(function(e){return e}).forEach(function(e){return e()}),e.downDebind.length=0};u.onRemove(function(){e._onRemove.remove(c),e._onRemove.remove(d),e.upDebind[n]&&e.upDebind[n](),e.downDebind[n]&&e.downDebind[n](),delete e.upDebind[n],delete e.downDebind[n]}),e._onRemove.add(c),e._onRemove.add(d),a[e.subProperty]=e.args.value[h]}};for(var h in this.args.value)d();for(var v in t)s.has(t[v])||t[v].remove();if(Array.isArray(this.args.value)){var p=0===l&&void 0!==o[1]&&1<o.length||f===1/0?l:f,b=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=o.length-t-1;r>p&&void 0===o[r];)r--;if(r<p)return Promise.resolve();if(o[r]===e.views[r]){if(o[r]&&!o[r].firstNode)return o[r].render(e.tag,o[r+1]),o[r].rendered.then(function(){return b(+t+1)});return 0===t||t%500?b(+t+1):new Promise(function(e){return requestAnimationFrame(function(){return e(b(+t+1))})})}return o[r].render(e.tag,o[r+1]),e.views.splice(r,0,o[r]),o[r].rendered.then(function(){return b(t+1)})};this.rendered=b()}else{var m,y=[],g=Object.assign({},o),w=function(e){return parseInt(e)===e-0},k=c(Object.keys(o).sort(function(e,t){return w(e)&&w(t)?Math.sign(e-t):w(e)||w(t)?!w(e)&&w(t)?-1:w(e)&&!w(t)?1:void 0:0}));try{var R=function(){var t=m.value;return delete g[t],o[t].firstNode&&o[t]===e.views[t]?"continue":(o[t].render(e.tag),void y.push(o[t].rendered.then(function(){return o[t]})))};for(k.s();!(m=k.n()).done;)R()}catch(e){k.e(e)}finally{k.f()}for(var C in g)delete this.args.views[C],g.remove();this.rendered=Promise.all(y)}for(var O in o)isNaN(O)?o[O].args[this.keyProperty]=O.substr(1):o[O].args[this.keyProperty]=O;this.views=Array.isArray(this.args.value)?[].concat(o):o,s.clear(),this.willReRender=!1,this.rendered.then(function(){e.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:e.subProperty,value:e.args.value,tag:e.tag}}})),e.tag.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:e.subProperty,value:e.args.value,tag:e.tag}}}))})}}},{key:"pause",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var e in this.views)this.views[e].remove();var t=this._onRemove.items();for(var r in t)this._onRemove.remove(t[r]),t[r]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&s.Bindable.clearBindings(this.subArgs),s.Bindable.clearBindings(this.args),this.args.value&&!this.args.value.isBound()&&s.Bindable.clearBindings(this.args.value),this.removed=!0}}]),e}();e.ViewList=d}),require.register("curvature/form/ButtonField.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("./Field");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonField=void 0;var f=function(e){function t(e,n,a,o){var s;(0,i.default)(this,t),(s=r.call(this,e,n,a,o)).args.title=s.args.title||s.args.value,s._onClick=[];var u=s.args.attrs||{};return u.type=u.type||s.args.type,s.args.name=u.name=s.args.name||o,s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(s.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(s.getName(),'"\n\t\t\t\t\ttype      = "').concat(u.type,'"\n\t\t\t\t\tvalue     = "[[value]]"\n\t\t\t\t\tcv-on     = "click:clicked(event)"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),s}(0,o.default)(t,e);var r=c(t);return(0,a.default)(t,[{key:"clicked",value:function(e){return this._onClick.map(function(t){return!1===t(e)}).filter(function(e){return e}).length?void("submit"==this.args.attrs.type&&(e.preventDefault(),e.stopPropagation())):void("submit"==this.args.attrs.type&&(e.preventDefault(),e.stopPropagation(),this.form.tags.formTag.element.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))))}},{key:"onClick",value:function(e){this._onClick.push(e)}}]),t}(l.Field);e.ButtonField=f}),require.register("curvature/form/Field.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("../base/View");t("../base/Bindable");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Field=void 0;var f=function(e){function t(e,n,a,o){var s,u,l,c;(0,i.default)(this,t);var f=Object.assign({},e);(c=r.call(this,f,a)).args.title=null!==(s=c.args.title)&&void 0!==s?s:o,c.args.value=null!==(u=c.args.value)&&void 0!==u?u:"",c.value=null!==(l=c.args.value)&&void 0!==l?l:"",c.skeleton=f,c.disabled=null,c.args.valueString="",c.form=n,c.key=o,c.ignore=!!c.args.attrs&&(c.args.attrs["data-cv-ignore"]||!1);var d="",h=c.args.attrs||{};h.type=h.type||f.type||null,c.args.name=h.name=h.name||c.args.name||o,"checkbox"==h.type&&(d='value = "1"'),c.template='\n\t\t\t<label\n\t\t\t\tfor           = "'.concat(c.getName(),'"\n\t\t\t\tdata-type     = "').concat(h.type||"text",'"\n\t\t\t\tcv-ref        = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(c.getName(),'"\n\t\t\t\t\ttype      = "').concat(h.type||"text",'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t').concat(d,'\n\t\t\t\t/>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t');var v=null;return c.args.bindTo("value",function(e,t){if(!isNaN(e)&&null!==e&&e.length&&e==+e&&e.length===(+e+"").length&&(e=+e),c.value=e,v!=t){if(v=o,c.args.valueString=JSON.stringify(e||"",null,4),c.valueString=c.args.valueString,"file"==h.type&&c.tags.input&&c.tags.input.element.files&&c.tags.input.element.length)if(c.tags.input.node.removeAttribute("title"),h.multiple){var r=Array.from(c.tags.input.element.files);if(c.parent.args.value[t]&&r.length){for(var n in r)r[n]!==c.parent.args.value[o][n]&&(c.parent.args.value[o]=r);c.parent.args.value.splice(r.length)}else c.parent.args.value[o]=r}else c.parent.args.value[o]=c.tags.input.element.files[0];else"file"==h.type&&c.tags.input?!e&&c.tags.input?(c.tags.input.node.value=null,h.placeholder?c.tags.input.node.setAttribute("title",h.placeholder):c.tags.input.node.removeAttribute("title")):e instanceof File&&c.tags.input.node.setAttribute("title",e.name):(c.parent.args.value||(c.parent.args.value={}),c.parent.args.value[o]=e);c.args.errors=[],v=null}}),c.parent.args.value[c.key]=c.args.value,c.parent.args.value.bindTo(o,function(e,t){if(v!=t){if(v=t,"file"!=h.type)c.args.value=e;else if(c.tags.input&&c.tags.input.element.files&&c.tags.input.element.files.length)if(h.multiple){var r=Array.from(c.tags.input.element.files);if(c.parent.args.value[o]&&r.length){for(var n in r)r[n]!==c.parent.args.value[o][n]&&(c.parent.args.value[o]=r);c.parent.args.value[o].splice(r.length)}else c.parent.args.value[o]=r}else c.parent.args.value[o]=c.tags.input.element.files[0];else c.args.value=e;v=null}}),c}(0,o.default)(t,e);var r=c(t);return(0,a.default)(t,[{key:"disable",value:function(){this.hasChildren(),this.disabled="disabled"}},{key:"enable",value:function(){this.hasChildren(),this.disabled=!1}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];if(this.tags.input)return this.tags.input.element.getAttribute("name");var t=this.key;if(e){for(var r=this.parent,n=[t];r&&r.array&&void 0!==r.key;)n.unshift(r.key),r=r.parent;t=n.shift(),n.length&&(t+="[".concat(n.join("]["),"]"))}return t}}]),t}(l.View);e.Field=f}),require.register("curvature/form/FieldSet.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=t("./Field"),f=t("./Form");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.FieldSet=void 0;var h=function(e){function t(e,n,a,s){var u;(0,i.default)(this,t);var l=(u=r.call(this,e,n,a,s)).args.attrs||{};return l.type=l.type||"fieldset",u.array=!1,(e.array||l["data-array"]||l["data-multi"])&&(u.array=l["data-array"]=!0),u.args.value={},u.args.fields=f.Form.renderFields(e.children,(0,o.default)(u)),u.fields=u.args.fields,u.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(u.getName(),'"\n\t\t\t\tdata-type  = "').concat(l.type,'"\n\t\t\t\tdata-multi = "').concat(l["data-multi"]?"true":"false",'"\n\t\t\t\tcv-ref     = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<fieldset\n\t\t\t\t\tname   = "').concat(u.getName(),'"\n\t\t\t\t\tcv-ref = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand="attrs"\n\t\t\t\t\tcv-each = "fields:field"\n\t\t\t\t>\n\t\t\t\t\t[[field]]\n\t\t\t\t</fieldset>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),u}(0,s.default)(t,e);var r=d(t);return(0,a.default)(t,[{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}},{key:"wrapSubfield",value:function(e){return e}}]),t}(c.Field);e.FieldSet=h}),require.register("curvature/form/FileField.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("./Field");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.FileField=void 0;var f=function(e){function t(e,n,i,o){var s;(0,a.default)(this,t);var u=(s=r.call(this,e,n,i,o)).args.attrs||{};return u.type=u.type||s.args.type||"file",s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(s.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\tname    = "').concat(s.getName(),'"\n\t\t\t\t\ttype    = "').concat(u.type,'"\n\t\t\t\t\tcv-bind = "value"\n\t\t\t\t\tcv-ref  = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t\t<span style = "display:none" cv-if = "value">[[[value]]]</span>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),s}(0,o.default)(t,e);var r=c(t);return(0,i.default)(t)}(l.Field);e.FileField=f}),require.register("curvature/form/Form.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=t("../base/View"),f=t("./Field"),d=t("./FieldSet"),h=t("./SelectField"),v=t("./RadioField"),p=t("./HtmlField"),b=t("./HiddenField"),m=t("./ButtonField"),y=t("./TextareaField"),g=t("./multiField/View"),w=t("../base/Bindable");function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Form=void 0;var R=function(e){function t(e){var n,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,t),(n=r.call(this,{})).args.flatValue=n.args.flatValue||{},n.args.value=n.args.value||{},n.args.method=e._method||"GET",n.args.classes=n.args.classes||[],n.skeleton=e,n.args.bindTo("classes",function(e){n.args._classes=e.join(" ")}),n.action="",n.template='\n\t\t\t<form\n\t\t\t\tclass     = "[[_classes]]"\n\t\t\t\tmethod    = "[[method]]"\n\t\t\t\tenctype   = "multipart/form-data"\n\t\t\t\tcv-on     = "submit:submit(event)"\n\t\t\t\tcv-ref    = "formTag:curvature/base/Tag"\n\t\t\t\tcv-each   = "fields:field"\n\t\t\t\tcv-expand = "attrs"\n\t\t\t>\n\t\t\t\t[[field]]\n\t\t\t</form>\n\t\t',n.args.fields=t.renderFields(e,(0,o.default)(n),a),n.fields=n.args.fields;var s=w.Bindable.makeBindable((0,o.default)(n));return n.args.bindTo("value",function(e){s.value=e}),n.args.bindTo("valueString",function(e){s.json=e}),(0,u.default)(n,s)}(0,s.default)(t,e);var r=k(t);return(0,a.default)(t,[{key:"submit",value:function(e){this.args.valueString=JSON.stringify(this.args.value,null,4),this.dispatchEvent(new CustomEvent("submit",{details:{view:this}}))||(e.preventDefault(),e.stopPropagation())}},{key:"buttonClick",value:function(){}},{key:"formData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];for(var n in e||(e=new FormData),t||(t=this),t.args.fields)if(!t.args.fields[n]||!t.args.fields[n].disabled){var i=r.slice(0);if(i.push(n),t.args.fields[n]&&t.args.fields[n].hasChildren())this.formData(e,t.args.fields[n],i);else if(t.args.fields[n]){var a=t.args.fields[n].getName();if("file"==t.args.fields[n].args.type&&t.args.fields[n].tags.input.element.files&&t.args.fields[n].tags.input.element.files.length)if(t.args.fields[n].args.attrs.multiple)for(var o=t.args.fields[n].tags.input.element.files,s=0;s<o.length;s++)o[s]&&e.append(a+"[]",o[s]);else t.args.fields[n].tags.input.element.files[0]&&e.append(a,t.args.fields[n].tags.input.element.files[0]);else("file"!==t.args.fields[n].args.type||t.args.fields[n].args.value)&&e.append(a,void 0===t.args.fields[n].args.value?"":t.args.fields[n].args.value)}}return e}},{key:"queryString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var r in this.args.flatValue)e[r]=e[r]||this.args.flatValue[r];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}},{key:"populate",value:function(e){for(var t in e)this.args.value[t]=e[t]}},{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}}],[{key:"renderFields",value:function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i={},a=function(){if(i[o])return"continue";if("_"==o.substr(0,1))return"continue";var a=null,s=null;if(r&&(s=r instanceof t?r:r.form),n&&e[o].name in n)a=new n[e[o].name](e[o],s,r,o);else switch(e[o].type){case"fieldset":a=e[o].attrs&&e[o].attrs["data-multi"]?new g.View(e[o],s,r,o):new d.FieldSet(e[o],s,r,o);break;case"select":a=new h.SelectField(e[o],s,r,o);break;case"radios":a=new v.RadioField(e[o],s,r,o);break;case"html":a=new p.HtmlField(e[o],s,r,o);break;case"submit":case"button":a=new m.ButtonField(e[o],s,r,o);break;case"hidden":a=new b.HiddenField(e[o],s,r,o);break;case"textarea":a=new y.TextareaField(e[o],s,r,o);break;default:a=new f.Field(e[o],s,r,o)}i[o]=w.Bindable.make(a);var u=a.key;a.args.bindTo("value",function(e,t,n,i){if(!isNaN(e)&&null!==e&&e.length&&e==+e&&e.length===(+e+"").length&&(e=+e),("html"!=n.type||n.contentEditable)&&"fieldset"!=n.type){if(n.disabled)return void delete s.args.flatValue[u];n.attrs=n.attrs||{};n.attrs.multiple;var a=Array.isArray(e),o=r.args.value[u];if(n.attrs.multiple&&a&&Array.isArray(o))for(var l in e)e[l]!==r.args.value[u][l]&&(r.args.value[u][l]=e[l]),r.args.value[u].splice(e.length);else r.args.value[u]=e;s.args.flatValue[u]=e,s.args.valueString=JSON.stringify(s.args.value,null,4)}}),a.render()};for(var o in e)a();return i}},{key:"_updateFields",value:function(e,t){for(var r in e.args.fields){var n=e.args.fields[r];t[r]&&(t[r].value&&(n.args.value=t[r].value),t[r].errors&&(n.args.errors=t[r].errors),t[r].title&&(n.args.title=t[r].title),t[r].options&&(n.args.options=t[r].options),t[r].attrs&&(n.args.attrs=t[r].attrs),n.children&&t[r].children&&this._updateFields(n,t[r].children))}}}]),t}(c.View);e.Form=R}),require.register("curvature/form/HiddenField.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("./Field");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.HiddenField=void 0;var f=function(e){function t(e,n,i,o){var s;(0,a.default)(this,t),e.type="hidden";var u=(s=r.call(this,e,n,i,o)).args.attrs||{};return s.args.type=u.type="hidden",s.args.name=u.name=u.name||s.args.name||o,s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(s.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tstyle     = "display:none"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\t\tname      = "').concat(s.getName(),'"\n\t\t\t\t\t\ttype      = "hidden"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),s}(0,o.default)(t,e);var r=c(t);return(0,i.default)(t)}(l.Field);e.HiddenField=f}),require.register("curvature/form/HtmlField.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("./Field");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.HtmlField=void 0;var f=function(e){function t(e,n,a,o){var s;return(0,i.default)(this,t),(s=r.call(this,e,n,a,o)).key=o,s.args.tagName=s.args.tagName||"div",s.args.displayValue=s.args.value,s.args.attrs=s.args.attrs||{},s.ignore=s.args.attrs["data-cv-ignore"]||!1,s.args.contentEditable=s.args.attrs.contenteditable||!1,s.args.bindTo("value",function(e){s.tags.input&&s.tags.input.element!==document.activeElement&&(s.args.displayValue=e)}),s.template="<".concat(s.args.tagName,'\n\t\t\tname            = "').concat(s.getName(),'"\n\t\t\tcv-ref          = "input:curvature/base/Tag"\n\t\t\tcontenteditable = "[[contentEditable]]"\n\t\t\tcv-expand       = "attrs"\n\t\t\tcv-bind         = "$displayValue"\n\t\t\tcv-on           = "input:inputProvided(event);"\n\t\t></').concat(s.args.tagName,">"),s}(0,o.default)(t,e);var r=c(t);return(0,a.default)(t,[{key:"inputProvided",value:function(e){this.args.value=e.target.innerHTML}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){return this.key}}]),t}(l.Field);e.HtmlField=f}),require.register("curvature/form/RadioField.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("./Field");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.RadioField=void 0;var f=function(e){function t(e,n,a,o){var s;(0,i.default)(this,t);var u=(s=r.call(this,e,n,a,o)).args.attrs||{};return s.args.name=u.name=u.name||s.args.name||o,s.args.value=s.args.value||"",s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(s.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each  = "options:option:optionText"/>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname      = "').concat(s.args.name,'"\n\t\t\t\t\t\t\ttype      = "radio"\n\t\t\t\t\t\t\tvalue     = "[[option]]"\n\t\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t\t\tcv-on     = "change:changed(event)"\n\t\t\t\t\t/>\n\t\t\t\t\t\t[[optionText]]\n\t\t\t\t\t</label>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),s}(0,o.default)(t,e);var r=c(t);return(0,a.default)(t,[{key:"getLabel",value:function(){for(var e in this.args.options)if(this.args.options[e]==this.args.value)return e}},{key:"changed",value:function(e){this.args.value=e.target.value}},{key:"postRender",value:function(){var e=this;this.args.bindTo("value",function(t){return e.selectOptionByValue(t)}),this.args.options.bindTo(function(){return e.selectOptionByValue(e.args.value)},{frame:1})}},{key:"selectOptionByValue",value:function(e){this.findTags("input").forEach(function(t){t.value==e&&(t.checked=!0)})}}]),t}(l.Field);e.RadioField=f}),require.register("curvature/form/SelectField.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("./Field");function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.SelectField=void 0;var h=function(e){function t(e,n,a,o){var s;(0,i.default)(this,t);var u=(s=r.call(this,e,n,a,o)).args.attrs||{};return s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(s.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type||"select",'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<select\n\t\t\t\t\tname      = "').concat(s.getName(),'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-each   = "options:option:optionText"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t\t\t<option value = "[[option]]">[[optionText]]</option>\n\t\t\t\t</select>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),s}(0,o.default)(t,e);var r=d(t);return(0,a.default)(t,[{key:"postRender",value:function(){var e=this;this.args.bindTo("value",function(t){return e.selectOptionByValue(t)}),this.args.options.bindTo(function(){return e.selectOptionByValue(e.args.value)},{frame:1})}},{key:"selectOptionByValue",value:function(e){var t,r=this.tags.input.element,n=c(r.options);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.value==e&&(r.selectedIndex=i.index)}}catch(e){n.e(e)}finally{n.f()}}},{key:"getLabel",value:function(){for(var e in this.args.options)if(this.args.options[e]==this.args.value)return e}}]),t}(l.Field);e.SelectField=h}),require.register("curvature/form/TextareaField.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("./Field");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.TextareaField=void 0;var f=function(e){function t(e,n,i,o){var s;(0,a.default)(this,t);var u=(s=r.call(this,e,n,i,o)).args.attrs||{};return u.type=u.type||"textarea",s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(s.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<textarea\n\t\t\t\t\t\tname      = "').concat(s.getName(),'"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t></textarea>\n\t\t\t\t<cv-template cv-if = "attrs.data-caption">\n\t\t\t\t\t<p>[[attrs.data-caption]]</p>\n\t\t\t\t</cv-template>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),s}(0,o.default)(t,e);var r=c(t);return(0,i.default)(t)}(l.Field);e.TextareaField=f}),require.register("curvature/form/multiField/CreateForm.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/get")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=t("./FormWrapper");t("../../form/HiddenField");function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.CreateForm=void 0;var d=function(e){function t(e,n){var a;!(2<arguments.length&&void 0!==arguments[2])||arguments[2];var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return(0,i.default)(this,t),(a=r.call(this,e,n,"POST",o||{})).creating=!!e.publicId,a}(0,s.default)(t,e);var r=f(t);return(0,a.default)(t,[{key:"onLoad",value:function(e){for(var r in e.args.fields)if(e.args.fields[r].tags.input&&"hidden"!=e.args.fields[r].args.attrs.type){e.args.fields[r].tags.input.element.focus();break}(0,o.default)((0,l.default)(t.prototype),"onLoad",this).call(this,e)}},{key:"onRequest",value:function(){return this.args.view.args.loading=!0,this.args.view.args.classes+=" loading",(0,o.default)((0,l.default)(t.prototype),"onRequest",this).call(this)}},{key:"onResponse",value:function(e){return this.args.view.args.loading=!1,this.args.view.args.classes="",e.body?(this.args.wrapper?this.args.wrapper.refresh(e.body):this.args.view.addRecord(e.body),this.args.view.args.creating="",void(0,o.default)((0,l.default)(t.prototype),"onResponse",this).call(this,e)):void(0,o.default)((0,l.default)(t.prototype),"onResponse",this).call(this,e)}}]),t}(c.FormWrapper);e.CreateForm=d}),require.register("curvature/form/multiField/Form.js",function(e,t,r){"use strict"}),require.register("curvature/form/multiField/FormWrapper.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("../../base/Repository"),c=t("../../form/Form"),f=t("../../toast/Toast"),d=(t("../../toast/ToastAlert"),t("../../base/View")),h=t("../../base/Router");function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.FormWrapper=void 0;var m=function(e){function t(e,n){var a,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"GET",s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return(0,i.default)(this,t),(a=r.call(this,e)).path=n,a.args.method=o,a.args.action=a.args.action||null,a.args.form=null,a.args.title=null,a.args.class="",a.template='\n\t\t\t<div class = "form constrict [[class]]">\n\t\t\t\t<div cv-if = "title"><label>[[title]]</label></div>\n\t\t\t\t[[form]]\n\t\t\t</div>\n\t\t',a._onLoad=[],a._onSubmit=[],a._onRender=[],a._onRequest=[],a._onError=[],a._onResponse=[],n instanceof c.Form?a.loadForm(form,s):l.Repository.request(n).then(function(e){return e&&e.meta&&e.meta.form&&e.meta.form instanceof Object?(a.loadForm(new c.Form(e.meta.form,s)),void a.onLoad(a.args.form,e.body)):void console.warn("Cannot render form with ",e)}),a}(0,o.default)(t,e);var r=b(t);return(0,a.default)(t,[{key:"loadForm",value:function(e){var t=this;this.args.form=e,this.args.form.addEventListener("submit",function(r){r&&(r.preventDefault(),r.stopPropagation());var n=e.tags.formTag.element,i=n.getAttribute("action")||t.args.action||t.path,a=n.getAttribute("method")||t.args.method,o=e.args.flatValue;if("GET"==(a=a.toUpperCase())){var s={};for(var u in t.args.content&&t.args.content.args&&(t.args.content.args.page=0),s.page=0,o)"api"!=u&&(s[u]=o[u]);t.onRequest(s).then(function(){t.onResponse({}),h.Router.go(i+"?"+h.Router.queryToString(s)),t.update(s)}).catch(function(e){t.onRequestError(e)})}else if("POST"==a){var c,f=e.formData(),d=v(f.entries());try{for(d.s();!(c=d.n()).done;)c.value}catch(e){d.e(e)}finally{d.f()}var p=t.onRequest(f);p&&p.then(function(){l.Repository.request(i,{api:"json"},f,!1,{progressDown:function(e){t.progressDown(e)},progressUp:function(e){t.progressUp(e)}}).then(function(e){t.onResponse(e)}).catch(function(e){t.onRequestError(e)})})}})}},{key:"onRequest",value:function(e){var t=[];for(var r in this._onRequest){var n=this._onRequest[r](e,this);n&&t.push(n)}return 0==t.length?Promise.resolve():Promise.all(t)}},{key:"onRequestError",value:function(e){for(var t in this._onError)this._onError[t](e,this);if(e.messages)for(var r in e.messages)f.Toast.instance().alert(e.body&&e.body.id?"Success!":"Error!",e.messages[r],3500)}},{key:"onResponse",value:function(e){for(var t in this._onResponse)this._onResponse[t](e,this);if(e.messages)for(var r in e.messages)f.Toast.instance().alert(e.body&&e.body.id?"Success!":"Error!",e.messages[r],3500)}},{key:"onLoad",value:function(e,t){for(var r in this._onLoad)this._onLoad[r](this,e,t)}},{key:"customFields",value:function(){return{}}},{key:"submit",value:function(){}},{key:"progressUp",value:function(e){console.log(e.loaded,e.total,e.loaded/e.total)}},{key:"progressDown",value:function(e){console.log(e.loaded,e.total,e.loaded/e.total)}}]),t}(d.View);e.FormWrapper=m}),require.register("curvature/form/multiField/SearchForm.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/get")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=t("../../base/Config"),f=t("./FormWrapper"),d=t("../../form/HiddenField"),h=t("../../base/Repository");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.SearchForm=void 0;var p=c.Config.get("backend")||"//",b=function(e){function t(e,n){var a;return!(2<arguments.length&&void 0!==arguments[2])||arguments[2],!(3<arguments.length&&void 0!==arguments[3])||arguments[3],(0,i.default)(this,t),(a=r.call(this,e,n,"POST",{search:d.HiddenField})).superTemplate=a.template,a.args.records=[],a.selected=null,a.template="\n\t\t\t".concat(a.superTemplate,'\n\t\t\t<div cv-each = "records:record:r" class = "dropdown-results">\n\t\t\t\t<div\n\t\t\t\t\tcv-on         = "click:select(event)"\n\t\t\t\t\tdata-index    = "[[r]]"\n\t\t\t\t\tdata-publicId = "[[record.publicId]]"\n\t\t\t\t\tclass         = "[[record.classes]]"\n\t\t\t\t>\n\t\t\t\t\t[[record.title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'),a}(0,s.default)(t,e);var r=v(t);return(0,a.default)(t,[{key:"onLoad",value:function(e){var r=this;for(var n in e.args.fields)if(e.args.fields[n].tags.input&&"hidden"!=e.args.fields[n].args.attrs.type){e.args.fields[n].tags.input.element.focus();break}e.args.flatValue.bindTo("keyword",function(e){r.args.records=[],r.selected=null,e&&(console.log(r.path,e),h.Repository.request(p+r.path,{keyword:e}).then(function(t){console.log(t.body),t.body&&(r.args.records=t.body.map(function(t){return t.classes="",t.title==e&&(t.classes="selected",r.selected=t),t}))}))}),(0,o.default)((0,l.default)(t.prototype),"onLoad",this).call(this,e)}},{key:"onRequest",value:function(){return(0,o.default)((0,l.default)(t.prototype),"onRequest",this).call(this)}},{key:"onResponse",value:function(e){(0,o.default)((0,l.default)(t.prototype),"onResponse",this).call(this,e)}},{key:"select",value:function(e){var t=e.target.getAttribute("data-index"),r=(e.target.getAttribute("data-publicId"),this.args.records[t]);return console.log(r),this.args.view.addRecord(r),void this.args.view.addButtonClicked()}},{key:"onSubmit",value:function(e,t){return t.preventDefault(),t.stopPropagation(),this.selected&&(this.args.view.addRecord(this.selected),this.args.view.addButtonClicked()),!1}}]),t}(f.FormWrapper);e.SearchForm=b}),require.register("curvature/form/multiField/View.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/typeof")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/createClass")),s=n(t("@babel/runtime/helpers/assertThisInitialized")),u=n(t("@babel/runtime/helpers/inherits")),l=n(t("@babel/runtime/helpers/possibleConstructorReturn")),c=n(t("@babel/runtime/helpers/getPrototypeOf")),f=t("../../base/Config"),d=t("../../form/Form"),h=t("../../form/FieldSet"),v=t("./CreateForm"),p=t("./SearchForm"),b=(t("./FormWrapper"),t("./Wrapper"));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;var y=function(e){function t(e,n,i,o){var u;for(var l in(0,a.default)(this,t),(u=r.call(this,e,n,i,o)).args._fields=[],u.dragging=!1,u.dropping=!1,u.args.fields)u.args._fields[+l+1]=u.wrapSubfield(u.args.fields[l]);return u.args.fields[-1].disable(),u.args._fields[0].addEventListener("attach",function(e){return e.preventDefault()}),u.args.creating="",u.args.fieldType="",u.args.createForm=u.args.createForm||"",u.args.searchForm=u.args.searchForm||"",u.args.createFormReady=!1,u.setCreateForm({view:(0,s.default)(u)}),u.args.loader="...",u.args.addIcon="&#215;",u.args.addIcon="a",u.args.addIcon="+",u.args.draggable="true",u.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(u.args.name,'"\n\t\t\t\tdata-type  = "').concat(u.args.attrs.type,'"\n\t\t\t\tdata-multi = "').concat(u.args.attrs["data-multi"]?"true":"false",'"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\n\t\t\t\t<fieldset\n\t\t\t\t\tname  = "').concat(u.args.name,'"\n\t\t\t\t\tclass = "multi-field [[creating]] [[fieldType]]"\n\t\t\t\t>\n\n\t\t\t\t\t<div class = "record-list" cv-each = "_fields:field:f">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass     = "single-record"\n\t\t\t\t\t\t\tdata-for  = "[[f]]"\n\t\t\t\t\t\t>[[field]]</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = "overlay create">\n\t\t\t\t\t\t<div class = "form constrict">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcv-on = "click:addButtonClicked(event)"\n\t\t\t\t\t\t\t\tclass = "bubble bottom left-margin close"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t&#215;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t[[createForm]]\n\t\t\t\t\t\t[[searchForm]]\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = "overlay loading">\n\t\t\t\t\t\t[[loader]]\n\t\t\t\t\t</div>\n\t\t\t\t\t<div cv-if = "createFormReady" class="add-button-holder">\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcv-on = "click:addButtonClicked(event)"\n\t\t\t\t\t\t\tclass = "bubble bottom left-margin add"\n\t\t\t\t\t\t\ttab-index = "0"\n\t\t\t\t\t\t>[[addIcon]]</div>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t</fieldset>\n\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\n\t\t\t</label>\n\t\t'),u}(0,u.default)(t,e);var r=m(t);return(0,o.default)(t,[{key:"setCreateForm",value:function(e){var t=this,r="";f.Config.get("backend")&&(r=f.Config.get("backend")),!1!==this.args.attrs["data-create-endpoint"]&&void 0!==this.args.attrs["data-create-endpoint"]?(this.args.createForm=new v.CreateForm(Object.assign({},e),this.args.attrs["data-create-endpoint"]?r+this.args.attrs["data-create-endpoint"]:e.publicId?r+"".concat(this.args.attrs["data-endpoint"],"/").concat(e.publicId,"/edit"):r+"".concat(this.args.attrs["data-endpoint"],"/create")),this.args.createForm._onLoad.push(function(){t.args.createFormReady=!0})):this.args.createFormReady=!0,this.args.attrs["data-endpoint"]&&(this.args.searchForm=new p.SearchForm(Object.assign({},e),r+this.args.attrs["data-endpoint"]))}},{key:"wrapSubfield",value:function(e){return new b.Wrapper({field:e,parent:this})}},{key:"addButtonClicked",value:function(){this.args.creating||(this.args.creating="creating")}},{key:"addRecord",value:function(e){for(var t in this.args.creating="",Array.isArray(e)||(e=[e]),e){var r;this.args.fields[-1].constructor;var n=Object.assign({},this.args.fields[-1].skeleton),i=Object.values(this.args.fields).length-1;n=this.cloneSkeleton(n),(n=this.correctNames(n,i)).attrs=null!==(r=n.attrs)&&void 0!==r?r:{},n.attrs["data-array"]=!0;var a={};a[i]=n;var o=d.Form.renderFields(a,this)[i];this.args.fields[i]=o;var s=this.wrapSubfield(o);o.args.value.id=e[t].id||"",o.args.value.class=e[t].class||"",o.args.value.title=e[t].title||"",o.args.value.key=this.args._fields.length,console.log(this.args._fields),this.args._fields.push(s),s.refresh(e[t])}}},{key:"editRecord",value:function(e,t){this.setCreateForm({view:this,publicId:e.publicId,wrapper:t}),this.args.creating=this.args.creating?"":"creating"}},{key:"deleteImage",value:function(e){console.log(e,this.args.fields),this.args.fields[e].disable(),this.args._fields[e].args.classes="deleted"}},{key:"undeleteImage",value:function(e){this.args.fields[e].enable(),this.args._fields[e].args.classes=""}},{key:"cloneSkeleton",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r={};for(var n in Array.isArray(e)&&(r=[]),e)if("fields"!=n){if(!e[n]||"object"!==(0,i.default)(e[n])){r[n]=e[n];continue}r[n]=Object.assign({},this.cloneSkeleton(e[n],t+1))}return r}},{key:"correctNames",value:function(e,t){if(e.name=e.name.replace(/\[-1\]/,"[".concat(t,"]")),e.attrs.name=e.name,"children"in e)for(var r in e.children)e.children[r]=this.correctNames(e.children[r],t);return e}},{key:"drag",value:function(e){this.dragging=e.target}},{key:"dragOver",value:function(e){if(!this.dragging)return!1;for(var t=e.target;t&&!t.matches('[draggable="true"]');)t=t.parentNode;t&&(this.dropping=t,e.preventDefault())}},{key:"drop",value:function(e){e.stopPropagation();var t=this.dragging.querySelector("label"),r=this.dropping.querySelector("label"),n=t.getAttribute("for"),i=r.getAttribute("for"),a=this.extractIndex(n),o=this.extractIndex(i);if(a==o||a==o-1)return this.dragging=!1,void(this.dropping=!1);var s,u,l=t.querySelectorAll('[name^="'+n+'"]'),c=t.querySelectorAll('[for^="'+n+'"]'),f=r.querySelectorAll('[name^="'+i+'"]'),d=r.querySelectorAll('[for^="'+i+'"]'),h=this.dropping,v=0;for(var p in this.args.fields){var b=this.args.fields[p].tags.input.element,m=this.args.fields[p].tags.label.element,y=b.getAttribute("name");t==m&&(s=this.args.fields[p]),r==m&&(u=this.args.fields[p]);var g=this.extractIndex(y),w=!1;if(!(0>g)&&(a>o&&g>=o&&g<=a?(w=this.changeIndex(y,g+1),v=-1):a<o&&g<=o&&g>=a&&(w=this.changeIndex(y,g-1),v=0),!1!==w)){this.changeAttributePrefix(m,"for",y,w),this.args.fields[p].args.fieldName=w,this.changeAttributePrefix(b,"name",y,w);for(var k=b.parentNode.querySelectorAll('[name^="'+y+'"]'),R=0;R<k.length;R++)this.changeAttributePrefix(k[R],"name",y,w);for(var C=b.parentNode.querySelectorAll('[for^="'+y+'"]'),O=0;O<C.length;O++)this.changeAttributePrefix(C[O],"for",y,w)}}n=t.getAttribute("for"),i=r.getAttribute("for"),a=this.extractIndex(n),o=this.extractIndex(i),this.changeAttributePrefix(t,"for",n,this.changeIndex(n,o+v));for(var _=0;_<l.length;_++)this.changeAttributePrefix(l[_],"name",n,this.changeIndex(n,o+v));for(var P=0;P<c.length;P++)this.changeAttributePrefix(c[P],"for",n,this.changeIndex(n,o+v));s.args.fieldName=t.getAttribute("for"),this.changeAttributePrefix(r,"for",i,this.changeIndex(i,o+v+1));for(var j=0;j<f.length;j++)this.changeAttributePrefix(f[j],"name",i,this.changeIndex(i,o+v+1));for(var E=0;E<d.length;E++)this.changeAttributePrefix(d[E],"for",i,this.changeIndex(i,o+v+1));u.args.fieldName=r.getAttribute("for"),this.dragging.parentNode.insertBefore(this.dragging,h),this.dragging=!1,this.dropping=!1}},{key:"dragStop",value:function(){this.dragging=!1,this.dropping=!1}},{key:"changeAttributePrefix",value:function(e,t,r,n){e.getAttribute(t);var i=n+e.getAttribute(t).substring(r.length);e.setAttribute(t,i)}},{key:"extractIndex",value:function(e){var t;return!!(t=/\[(-?\d+)\]$/.exec(e))&&parseInt(t[1])}},{key:"changeIndex",value:function(e,t){return e.replace(/\[(-?\d+)\]$/,"["+t+"]")}},{key:"cancel",value:function(e){e.stopPropagation()}}]),t}(h.FieldSet);e.View=y}),require.register("curvature/form/multiField/Wrapper.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("../../base/Config"),c=t("../../base/View"),f=t("../../base/Repository");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Wrapper=void 0;var h=function(e){function t(e){var n;return(0,i.default)(this,t),(n=r.call(this,e)).template='\n\t\t\t<div\n\t\t\t\tclass = "wrapped-field [[classes]]"\n\t\t\t\tcv-on = "click:editRecord(event, key)"\n\t\t\t\ttitle = "[[fieldName]]: [[id]]"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tcv-on = "click:deleteImage(event, key)"\n\t\t\t\t\tstyle = "display: inline; cursor:pointer;"\n\t\t\t\t>\n\t\t\t\t\t[[icon]]\n\t\t\t\t</div>\n\t\t\t\t<div class = "field-content">\n\t\t\t\t\t[[title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style = "display:none">[[field]]</div>\n\t\t',n.args.field=n.args.field||"!",n.args.keyword="",n.args.title="",n.args.record={},n.args.key=n.args.field.key,n.args.classes="",n.args.icon="",n.deleted=!1,n.args.field.args.bindTo("fieldName",function(e){n.args.fieldName=e}),n.args.fieldName=n.args.field.args.name,n.args.id=n.args.field.args.value.id,n.args.bindTo("id",function(e){n.args.field.args.value.id=e}),n.args.field.args.value.bindTo("id",function(e){e&&f.Repository.request(n.backendPath(),{id:e}).then(function(t){n.args.id=e;var r=t.body[0];return r?void n.refresh(r):(n.args.publicId=null,void(n.args.title=null))})},{wait:0}),n.args.field.args.value.bindTo("keyword",function(e){n.args.keyword=e}),n}(0,o.default)(t,e);var r=d(t);return(0,a.default)(t,[{key:"editRecord",value:function(){this.args.parent.editRecord(this.args.record,this)}},{key:"deleteImage",value:function(e,t){e.stopPropagation(),this.deleted?(this.args.icon="",this.args.parent.undeleteImage(t),this.deleted=!1):(this.args.icon="",this.args.parent.deleteImage(t),this.deleted=!0)}},{key:"backendPath",value:function(){return(l.Config.get("backend")||"//")+this.args.parent.args.attrs["data-endpoint"]}},{key:"getRecordTitle",value:function(e){return e._titleField?e[e._titleField]:e.title||e.publicId||e.id}},{key:"refresh",value:function(e){for(var t in e)this.args[t]=e[t];this.args.record=e,this.args.title=this.getRecordTitle(e)}}]),t}(c.View);e.Wrapper=h}),require.register("curvature/input/Axis.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/defineProperty")),s=t("../base/Bindable").Bindable.NoGetters;Object.defineProperty(e,"__esModule",{value:!0}),e.Axis=void 0;var u=function(){function e(t){var r=t.deadZone,n=void 0===r?0:r,a=t.proportional;(0,i.default)(this,e),(0,o.default)(this,s,!0),(0,o.default)(this,"magnitude",0),(0,o.default)(this,"delta",0),this.proportional=void 0===a||a,this.deadZone=n}return(0,a.default)(e,[{key:"tilt",value:function(e){this.deadZone&&Math.abs(e)>=this.deadZone?e=(Math.abs(e)-this.deadZone)/(1-this.deadZone)*Math.sign(e):this.deadZone&&Math.abs(e)<this.deadZone&&(e=0),this.delta=(+(e-this.magnitude)).toFixed(3)-0,this.magnitude=(+e).toFixed(3)-0}},{key:"zero",value:function(){this.magnitude=this.delta=0}}]),e}();e.Axis=u}),require.register("curvature/input/Button.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/defineProperty")),s=t("../base/Bindable").Bindable.NoGetters;Object.defineProperty(e,"__esModule",{value:!0}),e.Button=void 0;var u=function(){function e(){(0,i.default)(this,e),(0,o.default)(this,s,!0),(0,o.default)(this,"active",!1),(0,o.default)(this,"pressure",0),(0,o.default)(this,"delta",0),(0,o.default)(this,"time",0)}return(0,a.default)(e,[{key:"update",value:function(){!(0<arguments.length&&void 0!==arguments[0])||arguments[0],this.pressure?this.time++:!this.pressure&&0<this.time?this.time=-1:!this.pressure&&0>this.time&&this.time--,-1>this.time&&-1===this.delta&&(this.delta=0)}},{key:"press",value:function(e){this.delta=(+(e-this.pressure)).toFixed(3)-0,this.pressure=(+e).toFixed(3)-0,this.active=!0,this.time=0<this.time?this.time:0}},{key:"release",value:function(){this.active&&(this.delta=(+-this.pressure).toFixed(3)-0,this.pressure=0,this.active=!1)}},{key:"zero",value:function(){this.pressure=this.delta=0,this.active=!1}}]),e}();e.Button=u}),require.register("curvature/input/Gamepad.js",function(e,t,r){"use strict";var n,i=t("@babel/runtime/helpers/interopRequireDefault"),a=i(t("@babel/runtime/helpers/classCallCheck")),o=i(t("@babel/runtime/helpers/createClass")),s=i(t("@babel/runtime/helpers/assertThisInitialized")),u=i(t("@babel/runtime/helpers/inherits")),l=i(t("@babel/runtime/helpers/possibleConstructorReturn")),c=i(t("@babel/runtime/helpers/getPrototypeOf")),f=i(t("@babel/runtime/helpers/defineProperty")),d=i(t("@babel/runtime/helpers/toConsumableArray")),h=t("../base/Bindable"),v=t("../base/Mixin"),p=t("../mixin/EventTargetMixin"),b=t("./Axis"),m=t("./Button");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Gamepad=void 0;var g={Space:0,Enter:0,NumpadEnter:0,ControlLeft:1,ControlRight:1,ShiftLeft:2,ShiftRight:2,KeyZ:3,KeyQ:4,KeyE:5,Digit1:6,Digit3:7,KeyW:12,KeyA:14,KeyS:13,KeyD:15,KeyH:112,KeyJ:113,KeyK:114,KeyL:115,KeyP:9,Pause:9,Tab:11,ArrowUp:12,ArrowDown:13,ArrowLeft:14,ArrowRight:15,Numpad4:112,Numpad2:113,Numpad8:114,Numpad6:115,Backquote:1010,NumpadAdd:1011,NumpadSubtract:1012,NumpadMultiply:1013,NumpadDivide:1014,Escape:1020};(0,d.default)(Array(12)).map(function(e,t){return g["F".concat(t)]=2e3+t}),n=h.Bindable.NoGetters;var w=function(e){function t(){var e,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=(i.keys,i.deadZone),u=void 0===o?0:o,l=i.gamepad,c=void 0===l?null:l,d=(i.keyboard,i.axisMap),h=void 0===d?null:d;return(0,a.default)(this,t),e=r.call(this),(0,f.default)((0,s.default)(e),n,!0),(0,f.default)((0,s.default)(e),"axisMap",{12:-1,13:1,14:-0,15:0,112:-2,113:3,114:-3,115:2}),e.deadZone=u,e.gamepad=c,e.index=c.index,e.id=c.id,e.axisMap=h||e.axisMap,Object.defineProperties((0,s.default)(e),{buttons:{value:{}},pressure:{value:{}},axes:{value:{}},keys:{value:{}}}),e}(0,u.default)(t,e);var r=y(t);return(0,o.default)(t,[{key:"update",value:function(){for(var e in this.buttons){this.buttons[e].update()}}},{key:"rumbleEffect",value:function(e){return this.gamepad.vibrationActuator.playEffect("dual-rumble",e)}},{key:"rumble",value:function(){var e;if(this.gamepad.vibrationActuator.pulse)return(e=this.gamepad.vibrationActuator).pulse.apply(e,arguments);this.rumbleEffect({duration:1e3,strongMagnitude:1,weakMagnitude:1})}},{key:"readInput",value:function(){if(this.gamepad){var e=this.gamepad.index+"",t=this.constructor;t.padsRead.has(e)||(t.padsRead=new Map(Object.entries(navigator.getGamepads())));var r=this.gamepad=t.padsRead.get(e);t.padsRead.delete(e);var n={},i={};if(r)for(var a in r.buttons){var o=r.buttons[a];o.pressed&&(this.press(a,o.value),n[a]=!0)}if(this.keyboard){for(var s in(0,d.default)(Array(10)))n[s]||0<this.keyboard.getKeyCode(s)&&(this.press(s,1),n[s]=!0);for(var u in g)if(!n[u]){var l=g[u];0<this.keyboard.getKeyCode(u)&&(this.press(l,1),n[l]=!0)}}if(r)for(var c in r.buttons)if(!n[c]){r.buttons[c].pressed||(this.release(c),i[c]=!0)}if(this.keyboard){for(var f in(0,d.default)(Array(10)))i[f]||n[f]||0>this.keyboard.getKeyCode(f)&&(this.release(f),i[f]=!0);for(var h in g){var v=g[h];i[v]||n[v]||0>this.keyboard.getKeyCode(h)&&(this.release(v),i[h]=!0)}}var p={};if(r)for(var b in r.axes){var y=r.axes[b];p[b]=!0,this.tilt(b,y)}for(var w in this.axisMap){this.buttons[w]||(this.buttons[w]=new m.Button);var k=this.axisMap[w],R=Math.sign(1/k),C=Math.abs(k);this.buttons[w].active?(p[C]=!0,this.tilt(C,R)):!p[C]&&this.tilt(C,0)}}}},{key:"tilt",value:function(e,t){this.axes[e]||(this.axes[e]=new b.Axis({deadZone:this.deadZone})),this.axes[e].tilt(t)}},{key:"press",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.buttons[e]||(this.buttons[e]=new m.Button),this.buttons[e].press(t)}},{key:"release",value:function(e){this.buttons[e]||(this.buttons[e]=new m.Button),this.buttons[e].release()}},{key:"serialize",value:function(){var e={};for(var t in this.buttons)e[t]=this.buttons[t].pressure;var r={};for(var n in this.axes)r[n]=this.axes[n].magnitude;return{axes:r,buttons:e}}},{key:"replay",value:function(e){if(e.buttons)for(var t in e.buttons)0<e.buttons[t]?this.press(t,e.buttons[t]):this.release(t);if(e.axes)for(var r in e.axes)e.axes[r].magnitude!==e.axes[r]&&this.tilt(r,e.axes[r])}},{key:"zero",value:function(){for(var e in this.axes)this.axes[e].zero();for(var t in this.buttons)this.buttons[t].zero()}}],[{key:"getPad",value:function(e){var t=this,r=e.index,n=void 0===r?void 0:r,i=e.deadZone,a=void 0===i?0:i,o=e.keys,s=void 0===o?{}:o,u=e.keyboard,l=void 0===u?null:u,c=e.axisMap,f=void 0===c?null:c;if(this.padsConnected.has(n))return this.padsConnected.get(n);var d=new Promise(function(e){addEventListener("gamepadconnected",function(r){r.stopImmediatePropagation();var n=new t({gamepad:r.gamepad,deadZone:a,keys:s,keyboard:l,axisMap:f});t.padsConnected.set(r.gamepad.index,d),e(n)},{once:!0})});return d}}]),t}(v.Mixin.with(p.EventTargetMixin));e.Gamepad=w,(0,f.default)(w,"padsConnected",new Map),(0,f.default)(w,"padsRead",new Map)}),require.register("curvature/input/Keyboard.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=t("../base/Bindable");Object.defineProperty(e,"__esModule",{value:!0}),e.Keyboard=void 0;var s=function(){function e(){var t=this;(0,i.default)(this,e),this.maxDecay=120,this.comboTime=500,this.listening=!1,this.focusElement=document.body,this[o.Bindable.NoGetters]=!0,Object.defineProperty(this,"combo",{value:o.Bindable.make([])}),Object.defineProperty(this,"whichs",{value:o.Bindable.make({})}),Object.defineProperty(this,"codes",{value:o.Bindable.make({})}),Object.defineProperty(this,"keys",{value:o.Bindable.make({})}),Object.defineProperty(this,"pressedWhich",{value:o.Bindable.make({})}),Object.defineProperty(this,"pressedCode",{value:o.Bindable.make({})}),Object.defineProperty(this,"pressedKey",{value:o.Bindable.make({})}),Object.defineProperty(this,"releasedWhich",{value:o.Bindable.make({})}),Object.defineProperty(this,"releasedCode",{value:o.Bindable.make({})}),Object.defineProperty(this,"releasedKey",{value:o.Bindable.make({})}),Object.defineProperty(this,"keyRefs",{value:o.Bindable.make({})}),document.addEventListener("keyup",function(e){t.listening&&(0<t.keys[e.key]||!t.focusElement||document.activeElement===t.focusElement||t.focusElement.contains(document.activeElement)&&!document.activeElement.matches("input,textarea"))&&(e.preventDefault(),t.releasedWhich[e.which]=Date.now(),t.releasedCode[e.code]=Date.now(),t.releasedKey[e.key]=Date.now(),t.whichs[e.which]=-1,t.codes[e.code]=-1,t.keys[e.key]=-1)}),document.addEventListener("keydown",function(e){t.listening&&(t.focusElement&&document.activeElement!==t.focusElement&&(!t.focusElement.contains(document.activeElement)||document.activeElement.matches("input,textarea"))||(e.preventDefault(),!e.repeat&&(t.combo.push(e.code),clearTimeout(t.comboTimer),t.comboTimer=setTimeout(function(){return t.combo.splice(0)},t.comboTime),t.pressedWhich[e.which]=Date.now(),t.pressedCode[e.code]=Date.now(),t.pressedKey[e.key]=Date.now(),0<t.keys[e.key]||(t.whichs[e.which]=1,t.codes[e.code]=1,t.keys[e.key]=1))))});var r=function(){for(var e in t.keys)0>t.keys[e]||(t.releasedKey[e]=Date.now(),t.keys[e]=-1);for(var r in t.codes)0>t.codes[r]||(t.releasedCode[r]=Date.now(),t.codes[r]=-1);for(var n in t.whichs)0>t.whichs[n]||(t.releasedWhich[n]=Date.now(),t.whichs[n]=-1)};window.addEventListener("blur",r),window.addEventListener("visibilitychange",function(){"visible"===document.visibilityState||r()})}return(0,a.default)(e,[{key:"getKeyRef",value:function(e){return this.keyRefs[e]=this.keyRefs[e]||o.Bindable.make({})}},{key:"getKeyTime",value:function(e){var t=this.releasedKey[e],r=this.pressedKey[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getCodeTime",value:function(e){var t=this.releasedCode[e],r=this.pressedCode[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getWhichTime",value:function(e){var t=this.releasedWhich[e],r=this.pressedWhich[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getKey",value:function(e){return this.keys[e]?this.keys[e]:0}},{key:"getKeyCode",value:function(e){return this.codes[e]?this.codes[e]:0}},{key:"reset",value:function(){for(var e in this.keys)delete this.keys[e];for(var e in this.codes)delete this.codes[e];for(var e in this.whichs)delete this.whichs[e]}},{key:"update",value:function(){for(var e in this.keys)0<this.keys[e]?this.keys[e]++:this.keys[e]>-this.maxDecay?this.keys[e]--:delete this.keys[e];for(var e in this.codes){var t=this.releasedCode[e],r=this.pressedCode[e],n=this.getKeyRef(e);if(0<this.codes[e])return n.frames=this.codes[e]++,n.time=r?Date.now()-r:0,n.down=!0,!t||t<r?void 0:-1*(Date.now()-t);this.codes[e]>-this.maxDecay?(n.frames=this.codes[e]--,n.time=t-Date.now(),n.down=!1):(n.frames=0,n.time=0,n.down=!1,delete this.codes[e])}for(var e in this.whichs)0<this.whichs[e]?this.whichs[e]++:this.whichs[e]>-this.maxDecay?this.whichs[e]--:delete this.whichs[e]}}],[{key:"get",value:function(){return this.instance=this.instance||o.Bindable.make(new this)}}]),e}();e.Keyboard=s}),require.register("curvature/input/Mouse.js",function(e,t,r){"use strict"}),require.register("curvature/input/Sequence.js",function(e,t,r){"use strict";var n,i=t("@babel/runtime/helpers/interopRequireDefault"),a=i(t("@babel/runtime/helpers/toConsumableArray")),o=i(t("@babel/runtime/helpers/classCallCheck")),s=i(t("@babel/runtime/helpers/createClass")),u=i(t("@babel/runtime/helpers/assertThisInitialized")),l=i(t("@babel/runtime/helpers/inherits")),c=i(t("@babel/runtime/helpers/possibleConstructorReturn")),f=i(t("@babel/runtime/helpers/getPrototypeOf")),d=i(t("@babel/runtime/helpers/defineProperty")),h=t("../base/Bindable"),v=t("../base/Mixin"),p=t("../mixin/EventTargetMixin");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var i=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Sequence=void 0,n=h.Bindable.NoGetters;var m=function(e){function t(e){var i,a=e.callback,s=e.keys,l=e.timing,c=e.gamepad;(0,o.default)(this,t),i=r.call(this),(0,d.default)((0,u.default)(i),n,!0),(0,d.default)((0,u.default)(i),"lastTap",!1),(0,d.default)((0,u.default)(i),"recent",[]),(0,d.default)((0,u.default)(i),"callback",function(){}),(0,d.default)((0,u.default)(i),"timing",500),(0,d.default)((0,u.default)(i),"keys","");var f=[a,l,s,c];return i.callback=f[0],i.timing=f[1],i.keys=f[2],i.gamepad=f[3],i}(0,l.default)(t,e);var r=b(t);return(0,s.default)(t,[{key:"check",value:function(e){var t=this.recent,r=Date.now();r+-this.lastTap>this.timing&&t.splice(0),t.push({code:e,time:Date.now()});var n=t.map(function(e){return e.code}).join(","),i=this.keys.join(",");this.lastTap=r;var o=[];for(var s in t){t[s];var u=t.slice(s),l=u.map(function(e){return e.code}).join(",");if(l===i.substr(0,l.length)){o.push.apply(o,(0,a.default)(u)),this.dispatchEvent(new CustomEvent("advance",{detail:{matched:o,recent:t,keys:this.keys,length:u.length}}));break}}return o.length?void(i===n.substr(-i.length)&&this.dispatchEvent(new CustomEvent("complete",{detail:{matched:o,recent:t,keys:this.keys,length:o.length}}))):void this.dispatchEvent(new CustomEvent("cancel",{detail:{matched:o,recent:t,keys:this.keys,length:o.length}}))}}]),t}(v.Mixin.with(p.EventTargetMixin));e.Sequence=m}),require.register("curvature/mixin/EventTargetMixin.js",function(e,t,r){"use strict";var n,i=t("@babel/runtime/helpers/interopRequireDefault"),a=i(t("@babel/runtime/helpers/defineProperty")),o=i(t("@babel/runtime/helpers/slicedToArray")),s=i(t("@babel/runtime/helpers/toConsumableArray")),u=t("../base/Mixin");function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.EventTargetMixin=void 0;var f=Symbol("EventTargetParent"),d=Symbol("CallHandler"),h=Symbol("Capture"),v=Symbol("Bubble"),p=(Symbol("Target"),Symbol("HandlersBubble")),b=Symbol("HandlersCapture"),m=(n={},(0,a.default)(n,u.Mixin.Constructor,function(){this[b]=new Map,this[p]=new Map}),(0,a.default)(n,"dispatchEvent",function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];"string"==typeof i&&(i=new CustomEvent(i),r[0]=i),i.cvPath=i.cvPath||[],i.cvTarget=i.cvCurrentTarget=this;var a=this[h].apply(this,r);if(i.cancelable&&(!1===a||i.cancelBubble))return a;var u=[];if(this[b].has(i.type)){var l=this[b].get(i.type),c=(0,s.default)(l);c.forEach(function(e){return e.push(l)}),u.push.apply(u,(0,s.default)(c))}if(this[p].has(i.type)){var m=this[p].get(i.type),y=(0,s.default)(m);y.forEach(function(e){return e.push(m)}),u.push.apply(u,(0,s.default)(y))}u.push([function(){return e[d].apply(e,r)},{},null]);for(var g=0,w=u;g<w.length;g++){var k=(0,o.default)(w[g],3),R=k[0],C=k[1],O=k[2];if(C.once&&O.delete(R),a=R(i),i.cancelable&&!1===a)break}return i.cancelable&&(i.cancelBubble||!1===a)||this[v].apply(this,r),this[f]||Object.freeze(i.cvPath),i.returnValue}),(0,a.default)(n,"addEventListener",function(e,t){var r=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!0===n&&(n={useCapture:!0});var i=p;n.useCapture&&(i=b),this[i].has(e)||this[i].set(e,new Map),this[i].get(e).set(t,n),n.signal&&n.signal.addEventListener("abort",function(){return r.removeEventListener(e,t,n)},{once:!0})}),(0,a.default)(n,"removeEventListener",function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!0===r&&(r={useCapture:!0});var n=p;r.useCapture&&(n=b),this[n].has(e)&&this[n].get(e).delete(t)}),(0,a.default)(n,h,function(){var e,t=0>=arguments.length?void 0:arguments[0];if(t.cvPath.push(this),this[f]){var r=(e=this[f])[h].apply(e,arguments);if((!t.cancelable||!1!==r&&!t.cancelBubble)&&this[f][b].has(t.type)){t.cvCurrentTarget=this[f];var n,i=t.type,a=this[f][b].get(i),s=l(a);try{for(s.s();!(n=s.n()).done;){var u=(0,o.default)(n.value,2),c=u[0];if(u[1].once&&a.delete(c),r=c(t),t.cancelable&&(!1===r||t.cancelBubble))break}}catch(e){s.e(e)}finally{s.f()}return r}}}),(0,a.default)(n,v,function(){var e,t,r=0>=arguments.length?void 0:arguments[0];if(r.bubbles&&this[f]&&!r.cancelBubble){var n,i;if(!this[f][p].has(r.type))return(n=this[f])[v].apply(n,arguments);r.cvCurrentTarget=this[f],r.type;var a,s=this[f][p].get(r.type),u=l(s);try{for(u.s();!(a=u.n()).done;){var c=(0,o.default)(a.value,2),h=c[0];if(c[1].once&&s.delete(h),i=h(r),r.cancelable&&!1===i)return i}}catch(e){u.e(e)}finally{u.f()}return i=(e=this[f])[d].apply(e,arguments),r.cancelable&&(!1===i||r.cancelBubble)?i:(t=this[f])[v].apply(t,arguments)}}),(0,a.default)(n,d,function(){var e=0>=arguments.length?void 0:arguments[0];if(!e.defaultPrevented){var t="on".concat(e.type[0].toUpperCase()+e.type.slice(1));if("function"==typeof this[t])return this[t](e)}}),n);e.EventTargetMixin=m,Object.defineProperty(m,"Parent",{value:f})}),require.register("curvature/mixin/PromiseMixin.js",function(e,t,r){"use strict";var n,i=t("@babel/runtime/helpers/interopRequireDefault")(t("@babel/runtime/helpers/defineProperty")),a=t("../base/Mixin");Object.defineProperty(e,"__esModule",{value:!0}),e.PromiseMixin=void 0;var o=Symbol("Promise"),s=Symbol("Accept"),u=Symbol("Reject"),l=(n={},(0,i.default)(n,a.Mixin.Constructor,function(){var e=this;this[o]=new Promise(function(t,r){e[s]=t,e[u]=r})}),(0,i.default)(n,"then",function(){var e;return(e=this[o]).then.apply(e,arguments)}),(0,i.default)(n,"catch",function(){var e;return(e=this[o]).catch.apply(e,arguments)}),(0,i.default)(n,"finally",function(){var e;return(e=this[o]).finally.apply(e,arguments)}),n);e.PromiseMixin=l,Object.defineProperty(l,"Reject",{value:u}),Object.defineProperty(l,"Accept",{value:s})}),require.register("curvature/model/Database.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/toConsumableArray")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/createClass")),s=n(t("@babel/runtime/helpers/assertThisInitialized")),u=n(t("@babel/runtime/helpers/inherits")),l=n(t("@babel/runtime/helpers/possibleConstructorReturn")),c=n(t("@babel/runtime/helpers/getPrototypeOf")),f=t("../base/Bindable"),d=t("../base/Mixin"),h=t("../mixin/EventTargetMixin");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Database=void 0;var p=Symbol("BeforeWrite"),b=Symbol("AfterWrite"),m=Symbol("BeforeDelete"),y=Symbol("AfterDelete"),g=Symbol("BeforeInsert"),w=Symbol("AfterInsert"),k=Symbol("BeforeUpdate"),R=Symbol("AfterUpdate"),C=Symbol("BeforeRead"),O=Symbol("AfterRead"),_=Symbol("PrimaryKey"),P=Symbol("Connection"),j=Symbol("Instances"),E=(Symbol("HighWater"),Symbol("Metadata")),x=Symbol("Timers"),T=Symbol("Target"),S=(Symbol("Store"),Symbol("Each")),A=Symbol("Name"),M=Symbol("Bank"),B=function(e){function t(e){var n;return(0,a.default)(this,t),n=r.call(this),Object.defineProperty((0,s.default)(n),P,{value:e}),Object.defineProperty((0,s.default)(n),A,{value:e.name}),Object.defineProperty((0,s.default)(n),x,{value:{}}),Object.defineProperty((0,s.default)(n),E,{value:{}}),Object.defineProperty((0,s.default)(n),M,{value:{}}),n}(0,u.default)(t,e);var r=v(t);return(0,o.default)(t,[{key:"select",value:function(e){var t=this,r=e.store,n=e.index,i=e.range,a=void 0===i?null:i,o=e.ranges,s=void 0===o?[]:o,u=e.direction,l=void 0===u?"next":u,c=e.limit,f=void 0===c?0:c,d=e.offset,h=void 0===d?0:d,v=e.type,p=void 0!==v&&v,b=e.origin,m=void 0===b?void 0:b,y=e.map,g=void 0===y?void 0:y,w=this[P].transaction(r,"readonly").objectStore(r),k=n?w.index(n):w;return s&&s.length||(s=[a]),{each:this[S](p,k,l,s,f,h,m,g),one:this[S](p,k,l,s,1,h,m,g),then:function(e){return t[S](p,k,l,s,f,h,m,g)(function(e){return e}).then(e)}}}},{key:"insert",value:function(e,r){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this[M][e]=this[M][e]||{};var a=this[P].transaction([e],"readwrite"),o=a.objectStore(e),s=this[M][e],u=!0;Array.isArray(r)||(r=[r],u=!1);var l,c=r.map(function(r){return new Promise(function(u,l){r=f.Bindable.make(r);var c={database:n[A],record:r,store:e,type:"write",subType:"insert",origin:i},d=r[t.BeforeWrite]?r[t.BeforeWrite](c):null,h=r[t.BeforeInsert]?r[t.BeforeInsert](c):null,v=o.add(Object.assign({},f.Bindable.shuck(r)));!1===d||!1===h||(v.onerror=function(e){n.dispatchEvent(new CustomEvent("writeError",{detail:c})),l(e)},v.onsuccess=function(o){var l=o.target.result;if(s[l]=r,c.key=t.getPrimaryKey(r),n.dispatchEvent(new CustomEvent("write",{cancelable:!0,detail:c}))){if(r[_]=Symbol.for(l),n[E][e]||(n[E][e]=n.getStoreMeta(e,"store",{})),n[E][e]){var f=n.checkHighWaterMark(e,r),d=n.checkLowWaterMark(e,r),h=n[E][e],v=r[h.highWater];i.setHighWater&&f<v&&n.setHighWaterMark(e,r,i,"insert"),i.setLowWater&&d>v&&n.setLowWaterMark(e,r,i,"insert")}r[t.AfterInsert]&&r[t.AfterInsert](c),r[t.AfterWrite]&&r[t.AfterWrite](c)}else a.abort();u(r)})})});return l=u?Promise.allSettled(c):c[0],Promise.all(c).then(function(){return a.commit&&a.commit()}),l}},{key:"update",value:function(e,r){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!r[_])throw Error("Value provided is not a DB record!");return new Promise(function(a,o){var s=n[P].transaction([e],"readwrite"),u=s.objectStore(e),l={database:n[A],key:t.getPrimaryKey(r),record:r,store:e,type:"write",subType:"update",origin:i};r[t.AfterInsert]&&r[t.AfterInsert](l),r[t.AfterWrite]&&r[t.AfterWrite](l);var c=r[t.BeforeWrite]?r[t.BeforeWrite](l):null,d=r[t.BeforeUpdate]?r[t.BeforeUpdate](l):null;if(!1!==c&&!1!==d){var h=u.put(Object.assign({},f.Bindable.shuck(r)));h.onerror=function(e){n.dispatchEvent(new CustomEvent("writeError",{detail:l})),o(e)},h.onsuccess=function(t){if(n.dispatchEvent(new CustomEvent("write",{cancelable:!0,detail:l}))){if(n[E][e]||(n[E][e]=n.getStoreMeta(e,"store",{})),n[E][e]){var o=n.checkHighWaterMark(e,r),u=n.checkLowWaterMark(e,r),c=n[E][e],f=r[c.highWater];i.setHighWater&&o<f&&n.setHighWaterMark(e,r,i,"insert"),i.setLowWater&&u>f&&n.setLowWaterMark(e,r,i,"insert")}s.commit&&s.commit()}else s.abort();a(t)}}})}},{key:"delete",value:function(e,r){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;if(!r[_])throw Error("Value provided is not a DB record!");return new Promise(function(a,o){var s=n[P].transaction([e],"readwrite"),u=s.objectStore(e),l={database:n[A],record:r,key:t.getPrimaryKey(r),store:e,type:"write",subType:"delete",origin:i};if(!1!==(r[t.BeforeDelete]?r[t.BeforeDelete](l):null)){var c=u.delete(r.id);r[_]=void 0,r[t.AfterDelete]&&r[t.AfterDelete](l),c.onerror=function(e){l.original=e;var t=new CustomEvent("writeError",{detail:l});n.dispatchEvent(t),o(e)},c.onsuccess=function(e){l.original=e;var t=new CustomEvent("write",{detail:l});n.dispatchEvent(t),s.commit&&s.commit(),a(t)}}})}},{key:"clear",value:function(e){var t=this;return new Promise(function(r,n){var i=t[P].transaction([e],"readwrite"),a=i.objectStore(e).clear(),o={database:t[A],store:e,type:"write",subType:"clear",origin:origin};a.onerror=function(e){o.original=e;var r=new CustomEvent("writeError",{detail:o});t.dispatchEvent(r),n(e)},a.onsuccess=function(e){o.original=e;var n=new CustomEvent("write",{detail:o});t.dispatchEvent(n),i.commit&&i.commit(),r(n)}})}},{key:"listStores",value:function(){return(0,i.default)(this[P].objectStoreNames)}},{key:"listIndexes",value:function(e){var t=this[P].transaction([e]).objectStore(e);return(0,i.default)(t.indexNames)}},{key:S,value:function(e,r,n,i,a,o,s,u){var l=this;return function(c){return Promise.all(i.map(function(i){return new Promise(function(d){var h=0;r.openCursor(i,n).addEventListener("success",function(n){var i=n.target.result;if(!i)return d({record:null,result:null,index:h});var v=i.source,p=v.objectStore?v.objectStore.name:r.name;l[M][p]=l[M][p]||{};var b=l[M][p],m=i.primaryKey,y=e?e.from(i.value):i.value,g=f.Bindable.makeBindable(y),w={database:l[A],key:t.getPrimaryKey(g),record:y,store:r.name,type:"read",subType:"select",origin:s},k=y[t.BeforeRead]?y[t.BeforeRead](w):null;if(o>h++||!1===k)return i.continue();b[m]?Object.assign(b[m],y):(y[_]=Symbol.for(m),b[m]=y),w.record=y,b[m][t.AfterRead]&&b[m][t.AfterRead](w);if(l.dispatchEvent(new CustomEvent("read",{detail:w,cancelable:!0}))){var R=e?e.from(b[m]):b[m];R[_]=Symbol.for(m);var C=u?u(R):R,O=c?c(C,h):C;if(a&&h-o>=a)return o+=a,d({mapped:C,result:O,index:h})}i.continue()})})})).then(function(e){return 1===e.length?e[0]:e})}}},{key:"setStoreMeta",value:function(e,t,r){localStorage.setItem("::::cvdb::".concat(e,"::").concat(t),JSON.stringify(r))}},{key:"getStoreMeta",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=localStorage.getItem("::::cvdb::".concat(e,"::").concat(t)),i=null===n?r:JSON.parse(n);return null===i?r:i}},{key:"createObjectStore",value:function(e,t){var r=this[P].createObjectStore(e,t);return this.setStoreMeta(e,"store",t),r}},{key:"deleteObjectStore",value:function(e){return this[P].deleteObjectStore(e)}},{key:"checkHighWaterMark",value:function(e,t){2<arguments.length&&void 0!==arguments[2]&&arguments[2];return this.getStoreMeta(e,"highWater",0)}},{key:"setHighWaterMark",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,i=t[this[E][e].highWater],a=this.getStoreMeta(e,"highWater",0);this.setStoreMeta(e,"highWater",i),this.dispatchEvent(new CustomEvent("highWaterMoved",{detail:{database:this[A],record:t,store:e,type:"highWaterMoved",subType:n,origin:r,oldValue:a,value:i}}))}},{key:"checkLowWaterMark",value:function(e,t){2<arguments.length&&void 0!==arguments[2]&&arguments[2];return this.getStoreMeta(e,"lowWater",1/0)}},{key:"setLowWaterMark",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,i=t[this[E][e].highWater],a=this.getStoreMeta(e,"lowWater",null);this.setStoreMeta(e,"lowWater",i),this.dispatchEvent(new CustomEvent("lowWaterMoved",{detail:{database:this[A],record:t,store:e,type:"lowWaterMoved",subType:n,origin:r,oldValue:a,value:i}}))}}],[{key:"open",value:function(e){var r=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this[j][e]?this[j][e]:this[j][e]=new Promise(function(i,a){var o=indexedDB.open(e,n);o.onerror=function(e){t.dispatchEvent(new CustomEvent("error",{detail:{database:r[A],error:e,store:void 0,type:"read",subType:"select"}})),a(e)},o.onsuccess=function(e){var t=new r(e.target.result);i(t)},o.onupgradeneeded=function(e){var t=e.target.result;t.addEventListener("error",function(e){return console.error(e)});for(var i=new r(t),a=e.oldVersion+1;a<=n;a+=1)i["_version_"+a](t)}})}},{key:"getPrimaryKey",value:function(e){return e[_]?e[_]:null}},{key:"destroyDatabase",value:function(){var e=this;return new Promise(function(r,n){var i=indexedDB.delete(dbName);i.onerror=function(e){t.dispatchEvent(new CustomEvent("error",{detail:{database:dbName,error:e,type:"destroy"}})),n(e)},i.onsuccess=function(t){delete e[j][dbName],r(dbName)}})}}]),t}(d.Mixin.with(h.EventTargetMixin));e.Database=B,Object.defineProperty(B,j,{value:[]}),Object.defineProperty(B,"BeforeDelete",{value:m}),Object.defineProperty(B,"AfterDelete",{value:y}),Object.defineProperty(B,"BeforeWrite",{value:p}),Object.defineProperty(B,"AfterWrite",{value:b}),Object.defineProperty(B,"BeforeInsert",{value:g}),Object.defineProperty(B,"AfterInsert",{value:w}),Object.defineProperty(B,"BeforeUpdate",{value:k}),Object.defineProperty(B,"AfterUpdate",{value:R}),Object.defineProperty(B,"BeforeRead",{value:C}),Object.defineProperty(B,"AfterRead",{value:O}),Object.defineProperty(B,"PKSymbol",{value:_});try{Object.defineProperty(B,T,{value:new EventTarget})}catch(e){Object.defineProperty(B,T,{value:document.createDocumentFragment()})}for(var D=function(){var e=I[q];Object.defineProperty(B,e,{value:function(){var t;return(t=B[T])[e].apply(t,arguments)}})},q=0,I=["addEventListener","removeEventListener","dispatchEvent"];q<I.length;q++)D()}),require.register("curvature/model/Model.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/toConsumableArray")),a=n(t("@babel/runtime/helpers/typeof")),o=n(t("@babel/runtime/helpers/classCallCheck")),s=n(t("@babel/runtime/helpers/createClass")),u=n(t("@babel/runtime/helpers/defineProperty")),l=t("../base/Cache"),c=t("../base/Bindable"),f=t("./Database");function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var v=Symbol("Changed"),p=Symbol("Deleted"),b=Symbol("Saved"),m=Symbol("Keys"),y=function(){function e(){return(0,o.default)(this,e),(0,u.default)(this,"id",void 0),(0,u.default)(this,"class",void 0),Object.defineProperty(this,v,{value:c.Bindable.make({})}),Object.defineProperty(this,p,{writable:!0,value:!1}),Object.defineProperty(this,b,{writable:!0,value:!1}),Object.defineProperty(this,m,{writable:!0,value:new Set}),c.Bindable.make(this)}return(0,s.default)(e,[{key:"consume",value:function(t){var r=this,n=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],o=e.keyProps,s=function(e,t){if(t&&"object"===(0,a.default)(t)&&t.constructor.keyProps){var i=t.constructor.keyProps.map(function(e){return t[e]}).join("::"),o=l.Cache.load(i,!1,"models-by-type-and-publicId");o&&(o.consume(t),t=o)}!n&&r[v][e]||(r[e]=t)};f.Database.PKSymbol in t&&s(f.Database.PKSymbol,t[f.Database.PKSymbol]),this[m]=new Set([].concat((0,i.default)(this[m]),(0,i.default)(Object.keys(this)),(0,i.default)(Object.keys(t))));var u,c=d(this[m]);try{for(c.s();!(u=c.n()).done;){var h=u.value;(n||!this[v][h])&&(o.includes(h)||h in t&&s(h,t[h]))}}catch(e){c.e(e)}finally{c.f()}}},{key:"changed",value:function(){this[b]=!1}},{key:"markDeleted",value:function(){for(var e in this[v])this[v][e]=!1;this[p]=!0,this[b]=!1}},{key:"markStored",value:function(){for(var e in this)this[v][e]=!1;this[p]=!1,this[b]=!0}},{key:"isSaved",value:function(){return this[b]}}],[{key:"keyProps",get:function(){return["id","class"]}},{key:"from",value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],r=this.keyProps,n=r.map(function(t){return e[t]});n.unshift(this.name);var i,o=n.join("::"),s=l.Cache.load(o,!1,"models-by-type-and-publicId"),u=s||new this,c=d(r);try{for(c.s();!(i=c.n()).done;){var f,h,p=i.value;u[p]=null!==(f=null!==(h=u[p])&&void 0!==h?h:e[p])&&void 0!==f?f:null}}catch(e){c.e(e)}finally{c.f()}if(u.consume(e),!s){l.Cache.store(o,u,0,"models-by-type-and-publicId");var m=!1;u.bindTo(function(e,t,r){"symbol"===(0,a.default)(t)||e===r[t]||(u[v][t]=m,u[b]=!m&&u[b])}),0===Object.keys(u[v]).length&&(u[b]=t),m=!0}return u}}]),e}();e.Model=y,Object.defineProperty(y,"Changed",{value:v}),Object.defineProperty(y,"Deleted",{value:p}),Object.defineProperty(y,"Saved",{value:b})}),require.register("curvature/model/SourceWorker.js",function(e,t,r){"use strict"}),require.register("curvature/model/Store.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/defineProperty"));Object.defineProperty(e,"__esModule",{value:!0}),e.Store=void 0;var s=function(){function e(){(0,i.default)(this,e),(0,o.default)(this,"storeName","test-store")}return(0,a.default)(e,[{key:"select",value:function(e){e.index,e.range,e.ranges,e.direction,e.limit,e.offset,e.type,e.origin,e.map}},{key:"insert",value:function(){!(1<arguments.length&&void 0!==arguments[1])||arguments[1]}},{key:"update",value:function(){!(1<arguments.length&&void 0!==arguments[1])||arguments[1]}},{key:"delete",value:function(){1<arguments.length&&void 0!==arguments[1]&&arguments[1]}},{key:"getMeta",value:function(){1<arguments.length&&void 0!==arguments[1]&&arguments[1]}},{key:"setMeta",value:function(){}},{key:"listIndexes",value:function(){}},{key:"clear",value:function(){}}],[{key:"setHighWaterMark",value:function(){1<arguments.length&&void 0!==arguments[1]&&arguments[1],2<arguments.length&&void 0!==arguments[2]&&arguments[2]}},{key:"setLowWaterMark",value:function(){1<arguments.length&&void 0!==arguments[1]&&arguments[1],2<arguments.length&&void 0!==arguments[2]&&arguments[2]}},{key:"checkHighWaterMark",value:function(){1<arguments.length&&void 0!==arguments[1]&&arguments[1]}},{key:"checkLowWaterMark",value:function(){1<arguments.length&&void 0!==arguments[1]&&arguments[1]}},{key:"create",value:function(){}},{key:"delete",value:function(){}}]),e}();e.Store=s}),require.register("curvature/net/Elicit.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("curvature/base/Mixin"),c=t("curvature/mixin/EventTargetMixin"),f=t("curvature/mixin/PromiseMixin");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Elicit=void 0;var h=Symbol("IterateDownload"),v=Symbol("Retry"),p=Symbol("HandleFirstByte"),b=Symbol("HandleProgress"),m=Symbol("HandleComplete"),y=Symbol("HandleHeaders"),g=Symbol("HandleClose"),w=Symbol("HandleError"),k=Symbol("HandleOpen"),R=Symbol("HandleFail"),C=Symbol("LastChunkSize"),O=Symbol("LastChunkTime"),_=Symbol("Options"),P=Symbol("Fetch"),j=Symbol("Type"),E=Symbol("Url"),x=Symbol("RetriesLeft"),T=Symbol("TimeoutLeft"),S=Symbol("Timeout"),A=Symbol("Timer"),M=Symbol("Canecller"),B=Symbol("Caneclled"),D=Symbol("Paused"),q=Symbol("Received"),I=Symbol("Length"),L=Symbol("Opened"),N=Symbol("Closed"),F=Symbol("Start"),W=Symbol("First"),V=Symbol("End"),U=function(e){function t(e){var n,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(n=r.call(this))[x]=a.retries||5,n[S]=a.timeout||4500,n[T]=a.maxTimeout||n[S]*n[x],n[O]=0,n[C]=0,n[B]=!1,n[q]=0,n[D]=!1,n[N]=0,n[_]=Object.assign({},a),n[E]=e,a.defer||n.open(),n}(0,o.default)(t,e);var r=d(t);return(0,a.default)(t,[{key:"open",value:function(){var e=this;if(!this[L]||this[N]){this[F]||(this[F]=Date.now()),this[M]=new AbortController,this[_].signal=this[M].signal,this[L]=Date.now(),this[N]=0,this[W]=0,this[P]=fetch(this[E],this[_]).then(function(t){return e[k](t)}).catch(function(t){return e[w](t)});this[A]=setTimeout(function(){if(!e[W]){if(e[M].abort(),e[g](),e[T]=Math.max(0,e[T]-e[S]),!e[T])return;e[R](new Error("Timed out."))}},this[S])}}},{key:"headers",value:function(){return this[P].then(function(e){var t=e.response;e.stream;return t.headers})}},{key:"json",value:function(){var e=this;return this[P].then(function(t){t.response;var r=t.stream;return new Response(r,{headers:{"Content-Type":e.type}}).json()})}},{key:"text",value:function(){var e=this;return this[P].then(function(t){t.response;var r=t.stream;return new Response(r,{headers:{"Content-Type":e.type}}).text()})}},{key:"css",value:function(){return this.text().then(function(e){var t=new CSSStyleSheet;return t.replace(e),t})}},{key:"blob",value:function(){var e=this;return this[P].then(function(t){t.response;var r=t.stream;return new Response(r,{headers:{"Content-Type":e.type}}).blob()})}},{key:"objectUrl",value:function(){return this.blob().then(function(e){return URL.createObjectURL(e)})}},{key:"dataUri",value:function(){return this.blob().then(function(e){return new Promise(function(t,r){var n=new FileReader;n.onload=function(){return t(n.result)},n.onerror=function(){return r(n.error)},n.onabort=function(){return r(new Error("Read aborted"))},n.readAsDataURL(e)})})}},{key:"buffer",value:function(){return this.blob().then(function(e){return e.arrayBuffer()})}},{key:"bytes",value:function(){return this.buffer().then(function(e){return new Uint8Array(e)})}},{key:"cancel",value:function(){this.emitCancelEvent()&&(this[M].abort(),this[B]=!0,this.emitCancelledEvent())}},{key:"pause",value:function(){this[V]||this[D]||this[N]||!this.emitPauseEvent()||(this[D]=!0,this.emitPausedEvent())}},{key:"unpause",value:function(){!this[V]&&this[D]&&this.emitUnpauseEvent()&&(this[D]=!1,this.emitUnpausedEvent())}},{key:"done",get:function(){return!!this[V]}},{key:"type",get:function(){return this[j]}},{key:"totalTime",get:function(){return this[V]?this[V]-this[F]:Date.now()-this[F]}},{key:"waitTime",get:function(){return this[W]?this[W]-this[L]:Date.now()-this[L]}},{key:"loadTime",get:function(){return this[L]?this[N]?this[N]-this[W]:Date.now()-this[W]:0}},{key:"speed",get:function(){return this[L]?((e=this[V]?this[V]-this[O]:Date.now()-this[O])||(e=.01),this[C]/e):0;var e}},{key:"received",get:function(){return this[q]}},{key:"length",get:function(){return this[I]}},{key:"isPaused",get:function(){return this[D]}},{key:h,value:function(e,t,r){var n=this;this[b](r,0,null);var i=Date.now(),a=1,o=function(){return n[B]?e.cancel():n[D]?new Promise(function(e){setTimeout(function(){return e(o())},100)}):e.read().then(function(e){return function(e){var s=e.done,u=e.value;return s?(t.close(),n[m]()):(t.enqueue(u),n[q]+=u.length,n[W]||n[p](u),n[b](r,n[q]),n[O]=i,n[C]=a,i=Date.now(),a=u.length,o())}(e)}).catch(function(e){return n[w](e)})};return o()}},{key:v,value:function(){if(this.emitRetryEvent())return 0>=this[x]?void 0:(this[M].abort(),this[g](),this[q]=0,this[x]--,this.open())}},{key:k,value:function(e){var t=e.body.getReader(),r=this[I]||+e.headers.get("Content-Length"),n=this[n]||e.headers.get("Content-Type");this[I]=r,this[j]=n,this[y](e.headers);var i=this;return{response:e,stream:new ReadableStream({start:function(e){i[h](t,e,r)}})}}},{key:g,value:function(){this[N]=Date.now(),this.emitCloseEvent()}},{key:y,value:function(e){this.emitHeadersEvent(e)}},{key:b,value:function(e,t,r){this.emitProgressEvent(e,t,r)}},{key:m,value:function(){this[V]=Date.now(),this[g](),this.emitCompleteEvent(),this[f.PromiseMixin.Accept]()}},{key:w,value:function(e){return console.warn(e),this.emitErrorEvent(e)?this[R](e):this[v]()}},{key:R,value:function(e){return this[V]=Date.now(),this[g](),this.emitFailEvent(e),this[f.PromiseMixin.Reject](e)}},{key:p,value:function(e){clearInterval(this[A]),this[W]=Date.now(),this.emitFirstByteEvent(e)}},{key:"emitProgressEvent",value:function(e,t,r){var n=e?t/e:0,i=this.totalTime,a=this.loadTime,o=this.waitTime,s=this.speed;return this.dispatchEvent(new CustomEvent("progress",{detail:{length:e,received:t,done:n,speed:s,loadTime:a,waitTime:o,totalTime:i,value:r}}))}},{key:"emitOpenEvent",value:function(){return this.dispatchEvent(new CustomEvent("open"))}},{key:"emitCloseEvent",value:function(){return this.dispatchEvent(new CustomEvent("close"))}},{key:"emitFirstByteEvent",value:function(e){return this.dispatchEvent(new CustomEvent("firstByte",{detail:{received:e}}))}},{key:"emitHeadersEvent",value:function(e){return this.dispatchEvent(new CustomEvent("headers",{detail:{headers:e}}))}},{key:"emitCompleteEvent",value:function(){return this.dispatchEvent(new CustomEvent("complete"))}},{key:"emitErrorEvent",value:function(){return this.dispatchEvent(new CustomEvent("error",{cancelable:0<this[x]}))}},{key:"emitRetryEvent",value:function(){return this.dispatchEvent(new CustomEvent("retry",{cancelable:!0}))}},{key:"emitFailEvent",value:function(){return this.dispatchEvent(new CustomEvent("fail"))}},{key:"emitPauseEvent",value:function(){return this.dispatchEvent(new CustomEvent("pause",{cancelable:!0}))}},{key:"emitPausedEvent",value:function(){this.dispatchEvent(new CustomEvent("paused"))}},{key:"emitUnpauseEvent",value:function(){return this.dispatchEvent(new CustomEvent("unpause",{cancelable:!0}))}},{key:"emitUnpausedEvent",value:function(){this.dispatchEvent(new CustomEvent("unpaused"))}},{key:"emitCancelEvent",value:function(){return this.dispatchEvent(new CustomEvent("cancel",{cancelable:!0}))}},{key:"emitCancelledEvent",value:function(){return this.dispatchEvent(new CustomEvent("cancelled"))}}]),t}(l.Mixin.with(c.EventTargetMixin,f.PromiseMixin));e.Elicit=U}),require.register("curvature/net/RtcClient.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("curvature/base/Mixin"),d=t("curvature/mixin/EventTargetMixin");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.RtcClient=void 0;var v=function(e){function t(e){var n;return(0,i.default)(this,t),n=r.call(this),(0,c.default)((0,o.default)(n),"candidateTimeout",500),n.peerClient=new RTCPeerConnection(e),n.peerClientChannel=n.peerClient.createDataChannel("chat"),n.peerClientChannel.addEventListener("open",function(e){var t=new CustomEvent("open",{detail:e.data});t.originalEvent=e,n.dispatchEvent(t),n.connected=!0}),n.peerClientChannel.addEventListener("close",function(e){var t=new CustomEvent("close",{detail:e.data});t.originalEvent=e,n.dispatchEvent(t),n.connected=!1}),n.peerClientChannel.addEventListener("message",function(e){var t=new CustomEvent("message",{detail:e.data});t.originalEvent=e,n.dispatchEvent(t)}),n}(0,s.default)(t,e);var r=h(t);return(0,a.default)(t,[{key:"send",value:function(e){this.peerClientChannel&&this.peerClientChannel.send(e)}},{key:"close",value:function(){this.peerClientChannel&&this.peerClientChannel.close()}},{key:"offer",value:function(){var e=this;this.peerClient.createOffer().then(function(t){e.peerClient.setLocalDescription(t)});var t=new Set;return new Promise(function(r){var n=null;e.peerClient.addEventListener("icecandidate",function(i){i.candidate&&(t.add(i.candidate),n&&clearTimeout(n),n=setTimeout(function(){return r(e.peerClient.localDescription)},e.candidateTimeout))})})}},{key:"accept",value:function(e){var t=new RTCSessionDescription(e);this.peerClient.setRemoteDescription(t)}}]),t}(f.Mixin.with(d.EventTargetMixin));e.RtcClient=v}),require.register("curvature/net/RtcServer.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/assertThisInitialized")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=n(t("@babel/runtime/helpers/defineProperty")),f=t("curvature/base/Mixin"),d=t("curvature/mixin/EventTargetMixin");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.RtcServer=void 0;var v=function(e){function t(e){var n;return(0,i.default)(this,t),n=r.call(this),(0,c.default)((0,o.default)(n),"candidateTimeout",500),n.peerServer=new RTCPeerConnection(e),n.peerServer.addEventListener("datachannel",function(e){n.peerServerChannel=e.channel,n.peerServerChannel.addEventListener("open",function(e){var t=new CustomEvent("open",{detail:e.data});t.originalEvent=e,n.dispatchEvent(t),n.connected=!0}),n.peerServerChannel.addEventListener("close",function(e){var t=new CustomEvent("close",{detail:e.data});t.originalEvent=e,n.dispatchEvent(t),n.connected=!1}),n.peerServerChannel.addEventListener("message",function(e){var t=new CustomEvent("message",{detail:e.data});t.originalEvent=e,n.dispatchEvent(t)})}),n}(0,s.default)(t,e);var r=h(t);return(0,a.default)(t,[{key:"send",value:function(e){this.peerServerChannel&&this.peerServerChannel.send(e)}},{key:"close",value:function(){this.peerServerChannel&&this.peerServerChannel.close()}},{key:"answer",value:function(e){var t=this;return new Promise(function(r){t.peerServer.setRemoteDescription(e),t.peerServer.createAnswer(function(e){return t.peerServer.setLocalDescription(e)},function(e){return console.error(e)});var n=new Set,i=null;t.peerServer.addEventListener("icecandidate",function(e){e.candidate&&(n.add(e.candidate),i&&clearTimeout(i),i=setTimeout(function(){return r(t.peerServer.localDescription)},t.candidateTimeout))})})}}]),t}(f.Mixin.with(d.EventTargetMixin));e.RtcServer=v}),require.register("curvature/service/CloudService.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/typeof")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/createClass")),s=t("curvature/base/Router");function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.CloudService=void 0;var c=function(){function e(){(0,a.default)(this,e)}return(0,o.default)(e,null,[{key:"handleFetch",value:function(e){var t,r=new URL(e.request.url),n=r.pathname+r.search,a=u(this.routeHandlers);try{for(a.s();!(t=a.n()).done;){var o=t.value;return s.Router.match(n,{routes:o}).then(function(e){return"object"===(0,i.default)(e)&&e instanceof Response||(e=new Response(e)),e})}}catch(e){a.e(e)}finally{a.f()}}}]),e}();e.CloudService=c,Object.defineProperty(c,"routeHandlers",{value:new Set}),globalThis.addEventListener("fetch",function(e){e.respondWith(c.handleFetch(e))})}),require.register("curvature/service/EventPipe.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/typeof")),a=n(t("@babel/runtime/helpers/readOnlyError"));function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.EventPipe=void 0;e.EventPipe=function(e){var t=new Headers;t.set("Access-Control-Allow-Methods","GET, OPTIONS"),t.set("Access-Control-Allow-Origin","*"),t.set("Cache-Control","no-cache"),t.set("Content-Type","text/event-stream"),t.set("Connection","keep-alive");var r,n=new TransformStream,s=n.readable,u=n.writable.getWriter(),l=new TextEncoder,c=[],f=o(e);try{for(f.s();!(r=f.n()).done;){var d=r.value;d instanceof Promise||(Promise.resolve(d),(0,a.default)("getEvent")),d.then(function(e){var t,r;e&&"object"===(0,i.default)(e)||(e={data:e}),u.write(l.encode("event:  ".concat(null!==(t=e.type)&&void 0!==t?t:"ServerEvent","\n")+"data: ".concat(JSON.stringify(e.data),"\n")+"id:   ".concat(null!==(r=e.id)&&void 0!==r?r:Date.now(),"\n\n")))}),c.push(d)}}catch(e){f.e(e)}finally{f.f()}return Promise.all(c).then(function(){return u.close()}),new Response(s,{status:"200",statusText:"OK",headers:t})}}),require.register("curvature/service/Service.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/defineProperty")),a=n(t("@babel/runtime/helpers/typeof")),o=n(t("@babel/runtime/helpers/toConsumableArray")),s=n(t("@babel/runtime/helpers/slicedToArray")),u=n(t("@babel/runtime/helpers/classCallCheck")),l=n(t("@babel/runtime/helpers/createClass")),c=t("../base/Router");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null==arguments[t]?{}:arguments[t];t%2?f(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,e},f:function e(){try{a||null==r.return||r.return()}finally{if(o)throw e}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.Service=void 0;var p=function(){function e(){(0,u.default)(this,e)}return(0,l.default)(e,null,[{key:"register",value:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/";if(!("serviceWorker"in navigator))return Promise.reject("Service Workers not supported.");var n=navigator.serviceWorker;return n.register(e,{scope:r}),n.ready.then(function(e){var r=e.active;r&&(t.workers.set(r.scriptURL,r),n.addEventListener("message",function(e){return t.handleResponse(e)}))}),n.ready}},{key:"request",value:function(e){var t,r=this,n=e.command,i=e.args,a=e.echo,o=e.notify,u=e.to,l=void 0===u?null:u,c=e.broadcast,f=(1/Math.random()).toString(36),d=new Promise(function(e){r.incomplete.set(f,e)}),v=h(this.workers);try{for(v.s();!(t=v.n()).done;){var p=(0,s.default)(t.value,2),b=(p[0],p[1]);if("redundant"===b.state)return Promise.reject("Worker has been updated, connection lost. Please refresh the page.");b.postMessage({correlationId:f,broadcast:void 0!==c&&c,command:n,notify:o,args:i,echo:a,to:l})}}catch(e){v.e(e)}finally{v.f()}return d}},{key:"broadcast",value:function(e){var t=e.command,r=e.args,n=e.echo,i=e.notify;this.request({command:t,args:r,echo:n,notify:i,broadcast:!0})}},{key:"handleResponse",value:function(e){var t=this;e.target.ready.then(function(e){var r=e.active;t.workers.set(r.scriptURL,r)});var r=e.data;if(r.to||r.correlationId){if(!this.incomplete.has(r.correlationId))return void(r.broadcast?this.handleBroadcast(e):r.to&&this.handleMessage(e));var n=this.incomplete.get(r.correlationId);this.incomplete.delete(r.correlationId),n(r.result)}}},{key:"handleRequest",value:function(e){var t=this;if(e.origin===globalThis.origin){var r=e.data,n=Promise.resolve("Unexpected request.");if(r.echo)n=Promise.resolve(r.echo);else if(r.notify){var i=r.args||[];n=globalThis.registration.getNotifications().then(function(e){var r;return e.forEach(function(e){return t.notifications.set(e.tag,e)}),(r=globalThis.registration).showNotification.apply(r,(0,o.default)(i))}).then(function(){return globalThis.registration.getNotifications()}).then(function(){var r=e.data.args&&e.data.args[1]&&e.data.args[1].tag;return new Promise(function(n){var i;t.notifyClients.has(r)?i=t.notifyClients.get(r):(i=new Map,t.notifyClients.set(r,i)),i.set(e.source,n)})})}else if(r.command){var s,u=r.command,l=r.args||[],c=h(this.serviceHandlers);try{for(c.s();!(s=c.n()).done;){var f=s.value;if("function"==typeof f[u]){n=f[u].apply(f,(0,o.default)(l));break}}}catch(e){c.e(e)}finally{c.f()}}if((0,a.default)(n)!==Promise&&(n=Promise.resolve(n)),r.broadcast){var v=e.source.id;globalThis.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(e){e.forEach(function(e){n.then(function(t){return e.postMessage(d(d({},r),{},{result:t,source:v}))})})})}else if(r.to){var p=e.source.id;globalThis.clients.get(r.to).then(function(e){n.then(function(t){e.postMessage(d(d({},r),{},{result:t,source:p}))})})}else n.then(function(t){return e.source.postMessage(d(d({},r),{},{result:t}))})}}},{key:"handleInstall",value:function(e){globalThis.skipWaiting();var t,r=h(this.pageHandlers);try{for(r.s();!(t=r.n()).done;){var n=t.value;"function"==typeof n.handleInstall&&n.handleInstall(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"handleActivate",value:function(e){var t,r=h(this.pageHandlers);try{for(r.s();!(t=r.n()).done;){var n=t.value;"function"==typeof n.handleActivate&&n.handleActivate(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"handleError",value:function(e){console.error(e);var t,r=h(this.pageHandlers);try{for(r.s();!(t=r.n()).done;){var n=t.value;"function"==typeof n.handleError&&n.handleError(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"handlePush",value:function(){}},{key:"handleSync",value:function(){}},{key:"handlePeriodicSync",value:function(){}},{key:"handleFetch",value:function(e){var t,r=new URL(e.request.url),n=r.pathname+r.search,i=h(this.routeHandlers);try{for(i.s();!(t=i.n()).done;){var o=t.value;return c.Router.match(n,{routes:o},{event:e}).then(function(e){if(void 0!==e)return"object"===(0,a.default)(e)&&e instanceof Response||(e=new Response(e)),e})}}catch(e){i.e(e)}finally{i.f()}}},{key:"handleBroadcast",value:function(e){var t,r=h(this.pageHandlers);try{for(r.s();!(t=r.n()).done;){var n=t.value;"function"==typeof n.handleBroadcast&&n.handleBroadcast(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"handleMessage",value:function(e){var t,r=h(this.pageHandlers);try{for(r.s();!(t=r.n()).done;){var n=t.value;"function"==typeof n.handleMessage&&n.handleMessage(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"notify",value:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];return r.tag=r.tag||"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}),new Promise(function(e){Notification.requestPermission(function(t){e(t)})}).then(function(){return t.request({notify:!0,args:[e,r],broadcast:n})})}},{key:"handleNotifyClicked",value:function(e){if(this.notifyClients.has(e.notification.tag)){var t=[];for(this.notifyClients.get(e.notification.tag).forEach(function(r,n){r({action:e.action,data:e.notification.data,click:Date.now(),time:e.notification.timestamp,tag:e.notification.tag}),t.push(n)});t.length;){if(t.pop().focus())break}this.notifyClients.delete(e.notification.tag)}var r,n=h(this.pageHandlers);try{for(n.s();!(r=n.n()).done;){var i=r.value;"function"==typeof i.handleNotifyClicked&&i.handleNotifyClicked(e)}}catch(e){n.e(e)}finally{n.f()}e.notification.close()}},{key:"handleNotifyClosed",value:function(e){this.notifyClients.has(e.notification.tag)&&this.notifyClients.get(e.notification.tag).forEach(function(t){return t({action:void 0,data:e.notification.data,close:Date.now(),time:e.notification.timestamp,tag:e.notification.tag})});if(this.notifyClients.delete(e.notification.tag)){var t,r=h(this.pageHandlers);try{for(r.s();!(t=r.n()).done;){var n=t.value;"function"==typeof n.handleNotifyDismissed&&n.handleNotifyDismissed(e)}}catch(e){r.e(e)}finally{r.f()}}var i,a=h(this.pageHandlers);try{for(a.s();!(i=a.n()).done;){var o=i.value;"function"==typeof o.handleNotifyClosed&&o.handleNotifyClosed(e)}}catch(e){a.e(e)}finally{a.f()}}}]),e}();e.Service=p,Object.defineProperty(p,"serviceHandlers",{value:new Set}),Object.defineProperty(p,"routeHandlers",{value:new Set}),Object.defineProperty(p,"pageHandlers",{value:new Set}),Object.defineProperty(p,"notifications",{value:new Map}),Object.defineProperty(p,"notifyClients",{value:new Map}),Object.defineProperty(p,"incomplete",{value:new Map}),Object.defineProperty(p,"workers",{value:new Map}),globalThis.document||(globalThis.addEventListener("install",function(e){return p.handleInstall(e)}),globalThis.addEventListener("activate",function(e){return p.handleActivate(e)}),globalThis.addEventListener("error",function(e){return p.handleActivate(e)}),globalThis.addEventListener("message",function(e){return p.handleRequest(e)}),globalThis.addEventListener("fetch",function(e){e.waitUntil(new Promise(function(t){p.handleFetch(e).then(function(r){r&&e.respondWith(r),t()})}))}),globalThis.addEventListener("push",function(e){return p.handlePush(e)}),globalThis.addEventListener("notificationclose",function(e){return p.handleNotifyClosed(e)}),globalThis.addEventListener("notificationclick",function(e){return p.handleNotifyClicked(e)}),globalThis.addEventListener("sync",function(e){return p.handleSync(e)}),globalThis.addEventListener("periodicsync",function(e){return p.handlePeriodicSync(e)}))}),require.register("curvature/strings/Parser.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/typeof")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/classCallCheck")),s=(0,a.default)(function e(){(0,o.default)(this,e),this.depth=0,this.match=null,this.type="normal",this.list=[]});!function(){function e(t,r){(0,o.default)(this,e),this.index=0,this.mode="normal",this.stack=[],this.tokens=t||{},this.modes=r||{}}(0,a.default)(e,[{key:"parse",value:function(e){if(!(this.mode in this.modes))throw new Error("Mode ".concat(this.mode," does not exist on parser."),this);var t=new s,r=this.modes[this.mode];for(t.type=this.mode;this.index<e.length;){var n=!1;for(var a in r){var o=this.tokens[a].exec(e.substr(this.index));if(o&&!(0<o.index)){if(!r[a])throw new Error('Invalid token type "'.concat(a,'" found in mode "').concat(this.mode,'".'));var u=o[0],l="object"===(0,i.default)(r[a])?r[a]:[r[a]];n=!0,console.log(t.type,t.depth,u),this.index+=u.length;var c="normal";for(var f in l){var d=l[f];if("string"!=typeof d)switch(d){case 1:t.list.push(u);break;case 2:var h=new s;h.depth=t.depth+1,h.match=u,h.type=c,t.list.push(h),this.stack.push(t),t=h;break;case 3:if(!this.stack.length)throw console.log(this.mode,'"'.concat(u,'"'),t),new Error("Already at the top of the stack.");t=this.stack.pop(),this.mode=t.type,r=this.modes[this.mode]}else{if(!(d in this.modes))throw new Error('Mode "'.concat(d,'" does not exist.'));this.mode=d,r=this.modes[this.mode],c=d}}break}}if(!n)break}if(this.stack.length)throw new Error("Did not return to top of stack!");return this.stack.shift()||t}}])}()}),require.register("curvature/tag/LazyTag.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/createClass")),a=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("./ScrollTag"),c=t("../base/Dom");function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.LazyTag=void 0;var d=function(e){function t(e,n,i,o,s){var u;return(0,a.default)(this,t),(u=r.call(this,e,n,i,o,s)).element.classList.remove("cv-visible"),u.element.classList.add("cv-not-visible"),u.bindTo("visible",function(e){e&&(u.afterScroll&&clearTimeout(u.afterScroll),u.afterScroll=setTimeout(function(){u.element&&(u.element.classList.add("cv-visible"),u.element.classList.remove("cv-not-visible"),c.Dom.mapTags(u.element,"[cv-lazy-style]",function(e){var t=e.getAttribute("cv-lazy-style"),r=e.getAttribute("style");e.setAttribute("style",r+";"+t),e.removeAttribute("cv-lazy-style")}))},.5*(u.offsetTop||u.element.offsetTop)+.5*u.element.offsetLeft))}),u}(0,o.default)(t,e);var r=f(t);return(0,i.default)(t)}(l.ScrollTag);e.LazyTag=d}),require.register("curvature/tag/PopOutTag.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/get")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),l=n(t("@babel/runtime/helpers/getPrototypeOf")),c=(t("../base/Bindable"),t("../base/Dom"),t("../base/Tag"));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.PopOutTag=void 0;var d=function(e){function t(e,n,a,o,s){var u;return(0,i.default)(this,t),(u=r.call(this,e,n,a,o,s)).defaultStyle=e.getAttribute("style")||"",u.poppedOut=!1,u.moving=!1,u.hostSelector=e.getAttribute("cv-pop-to"),u.popMargin=e.getAttribute("cv-pop-margin")||0,u.popSpeed=e.getAttribute("data-pop-speed")||1750,e.removeAttribute("cv-pop-to"),e.removeAttribute("cv-pop-margin"),e.removeAttribute("data-pop-speed"),u.verticalDuration=.4,u.horizontalDuration=.1,u.unpoppedStyle="",u.previousScroll=0,u.bodyStyle="",u.bodyScroll=0,u.element.classList.add("unpopped"),u.scrollStyle="",u.existingStyle="",u.popTimeout=null,u.rect=null,u.transformRect=null,u.clickListener=function(e){if(u.rect=u.element.getBoundingClientRect(),!u.poppedOut){u.distance=Math.sqrt(Math.pow(u.rect.top,2)+Math.pow(u.rect.left,2));var t=u.popSpeed,r=window.innerWidth-u.rect.right,n=window.innerHeight-u.rect.bottom,i=(u.rect.left+r)/2,a=(u.rect.top+n)/2;u.horizontalDuration=i/t,u.verticalDuration=a/t,.1>u.horizontalDuration&&(u.horizontalDuration=.1),.1>u.verticalDuration&&(u.verticalDuration=.1),.4<u.horizontalDuration&&(u.horizontalDuration=.4),.4<u.verticalDuration&&(u.verticalDuration=.4)}u.element.contains(e.target)&&(e.stopPropagation(),e.preventDefault(),u.moving||(u.poppedOut?e.target.matches(".closeButton")&&u.poppedOut&&u.unpop():u.pop()))},u.escapeListener=function(e){u.poppedOut&&"Escape"===e.key&&u.unpop()},u.resizeListener=function(){if(u.poppedOut){for(var e=u.element;e.parentNode&&!e.matches(u.hostSelector)&&e.parentNode!=document;)e=e.parentNode;var t=e.getBoundingClientRect(),r=u.existingStyle+u.unpoppedStyle,n=t.x,i=t.y+document.documentElement.scrollTop,a=t.width,o=t.height;u.transformRect&&(n-=u.transformRect.x,i-=u.transformRect.y),u.popMargin,u.popMargin,u.popMargin,u.popMargin,r+=";\n\t\t\t\tz-index:    99999;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t\toverflow: hidden;\n\t\t\t\tposition:  fixed;\n\t\t\t\tleft:      ".concat(n,"px;\n\t\t\t\ttop:        ").concat(i,"px;\n\t\t\t\twidth:      ").concat(a,"px;\n\t\t\t\theight:     ").concat(o,"px;\n\t\t\t\toverflow-y: auto;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t"),u.element.setAttribute("style",r)}},u.element.___clickListener___||(Object.defineProperty(u.element,"___scrollListeners___",{enumerable:!1,writable:!0}),e.___clickListener___=u.clickListener,e.___escapeListener___=u.escapeListener,e.___resizeListener___=u.resizeListener,u.element.addEventListener("click",e.___clickListener___),window.addEventListener("keyup",e.___escapeListener___),window.addEventListener("resize",e.___resizeListener___),u.cleanup.push(function(e){return function(){e.removeEventListener("click",e.___clickListener___),window.removeEventListener("keyup",e.___escapeListener___),window.removeEventListener("resize",e.___resizeListener___)}}(e))),u}(0,s.default)(t,e);var r=f(t);return(0,a.default)(t,[{key:"pause",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];(0,o.default)((0,l.default)(t.prototype),"pause",this).call(this,e),e&&(document.body.setAttribute("style",this.bodyStyle),document.body.setAttribute("style",""))}},{key:"pop",value:function(){var e=this;t.popLevel(),this.previousScroll=window.scrollY,this.rect=this.element.getBoundingClientRect(),this.existingStyle=this.element.getAttribute("style");var r=this.element;for(this.transformRect=null;r.parentNode&&!r.matches(this.hostSelector)&&r.parentNode!=document;)r=r.parentNode,this.transformRect||"none"===getComputedStyle(r).transform||(this.transformRect=r.getBoundingClientRect());var n=r.getBoundingClientRect();this.element.classList.add("popping");var i=this.rect.x,a=this.rect.y,o=this.rect.width,s=this.rect.height;this.transformRect&&(i-=this.transformRect.x,a-=this.transformRect.y),window.requestAnimationFrame(function(){e.unpoppedStyle="\n\t\t\t\t;position:  fixed;\n\t\t\t\tleft:       ".concat(i,"px;\n\t\t\t\ttop:        ").concat(a,"px;\n\t\t\t\twidth:      ").concat(o,"px;\n\t\t\t\theight:     ").concat(s,"px;\n\t\t\t\tz-index:    99999;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t\toverflow: hidden;\n\t\t\t");var t=n.x,r=n.y+document.documentElement.scrollTop,u=n.width,l=n.height;e.transformRect&&(t-=e.transformRect.x,r-=e.transformRect.y),e.popMargin,e.popMargin,e.popMargin,e.popMargin;var c=e.existingStyle+e.unpoppedStyle;e.element.setAttribute("style",c),setTimeout(function(){c+="\n\t\t\t\t\t;left:      ".concat(t,"px;\n\t\t\t\t\ttop:        ").concat(r+document.documentElement.scrollTop,"px;\n\t\t\t\t\twidth:      ").concat(u,"px;\n\t\t\t\t\theight:     ").concat(l,"px;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t\ttransition: width ").concat(e.horizontalDuration,"s ease-out\n\t\t\t\t\t\t, top ").concat(e.verticalDuration,"s           ease-out\n\t\t\t\t\t\t, left ").concat(e.horizontalDuration,"s        ease-out\n\t\t\t\t\t\t, height ").concat(e.verticalDuration,"s        ease-out\n\t\t\t\t\t\t, all ").concat(e.horizontalDuration,"s         ease-out;\n\t\t\t\t"),e.moving=!0,e.element.setAttribute("style",c),e.element.classList.add("popped"),e.element.classList.remove("unpopped"),e.element.classList.remove("popping"),e.popTimeout=setTimeout(function(){if(e.element){e.bodyStyle=document.body.getAttribute("style"),document.body.setAttribute("style","height:100%;overflow:hidden;"),e.moving=!1;var t=new CustomEvent("cvPopped");e.element.dispatchEvent(t),e.scrollStyle=e.element.getAttribute("style")}},1e3*e.horizontalDuration)},33.4),e.poppedOut=!0});var u=new CustomEvent("cvPop",{bubbles:!0,detail:{tag:this,view:this.parent,publicId:this.parent.args.publicId}});this.element.dispatchEvent(u)}},{key:"unpop",value:function(){var e=this;this.element.classList.add("unpopping"),this.popTimeout&&clearTimeout(this.popTimeout),0==t.level?document.body.setAttribute("style",""):document.body.setAttribute("style",this.bodyStyle||""),t.unpopLevel(),this.rect||(this.rect=this.element.getBoundingClientRect()),window.scrollTo(0,this.previousScroll);var r=this.existingStyle+this.unpoppedStyle+";transition: width ".concat(this.horizontalDuration,"s ease-out\n\t\t\t\t\t, height ").concat(this.verticalDuration,"s        ease-out\n\t\t\t\t\t, all ").concat(this.horizontalDuration,"s         ease-out;");this.element.setAttribute("style",r),this.moving=!0,setTimeout(function(){e.element&&e.element.classList.remove("popped")},1e3*this.horizontalDuration),setTimeout(function(){if(e.element.classList.add("unpopped"),e.element.classList.remove("unpopping"),e.element){e.element.setAttribute("style",e.defaultStyle),e.moving=!1;var t=new CustomEvent("cvUnpopped");e.element.dispatchEvent(t)}},1e3*this.horizontalDuration);var n=new CustomEvent("cvUnpop",{bubbles:!0,detail:{tag:this,view:this.parent,publicId:this.parent.args.publicId}});this.element.dispatchEvent(n),this.poppedOut=!1}},{key:"remove",value:function(){document.body.setAttribute("style",this.bodyStyle),(0,o.default)((0,l.default)(t.prototype),"remove",this).call(this)}}],[{key:"popLevel",value:function(){return this.level||(this.level=0),this.level++,this.level}},{key:"unpopLevel",value:function(){return this.level||(this.level=0),this.level--,0>this.level&&(this.level=0),this.level}}]),t}(c.Tag);e.PopOutTag=d}),require.register("curvature/tag/ScrollTag.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("../base/Tag"),c=t("../base/Dom");t("../base/Bindable");function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollTag=void 0;var d=function(e){function t(e,n,a,o,s){var u;return(0,i.default)(this,t),(u=r.call(this,e,n,a,o,s)).visible=!1,u.offsetTop=!1,u.offsetBottom=!1,u.attachListener=function(t){for(var r=t.target;r.parentNode;)r=r.parentNode;r!==window&&r!==document||t.target!==e||(u.addScrollListener(t.target),u.addResizeListener(t.target),u.scrolled(t.target),t.target.removeEventListener("cvDomAttached",u.attachListener))},u.element.addEventListener("cvDomAttached",u.attachListener),u.cleanup.push(function(e){return function(){e.removeEventListener("cvDomAttached",u.attachListener)}}(u.element)),u.bindTo("visible",function(e){var t;t=e?new Event("cvScrolledIn"):new Event("cvScrolledOut"),c.Dom.mapTags(u.element,!1,function(e){e.dispatchEvent(t)}),u.element.dispatchEvent(t)}),u.bindTo("offsetTop",function(e){var t=new CustomEvent("cvScrolled",{detail:{offset:e}});c.Dom.mapTags(u.element,!1,function(e){e.dispatchEvent(t)}),u.element.dispatchEvent(t)}),u}(0,o.default)(t,e);var r=f(t);return(0,a.default)(t,[{key:"scrolled",value:function(){var e=this.element;if(e){var t=!1,r=e.getBoundingClientRect();0<r.bottom&&r.top<window.innerHeight&&(t=!0),this.proxy.visible=t,this.proxy.offsetTop=r.top||0,this.proxy.offsetBottom=r.bottom||0}}},{key:"addScrollListener",value:function(e){var t=this;if(!e.___scrollListener___){Object.defineProperty(e,"___scrollListener___",{enumerable:!1,writable:!0}),e.___scrollListener___=function(e){t.scrolled(e.target)};for(var r=e,n={passive:!0,capture:!0};r.parentNode;)(r=r.parentNode).addEventListener("scroll",e.___scrollListener___,n),this.direct.cleanup.push(function(e,t,r){return function(){e.removeEventListener("scroll",t.___scrollListener___,r),t=e=null}}(r,e,n))}}},{key:"addResizeListener",value:function(e){var t=this;e.___resizeListener___||(Object.defineProperty(e,"___resizeListener___",{enumerable:!1,writable:!0}),e.___resizeListener___=function(e){t.scrolled(e.target)},window.addEventListener("resize",this.resizeListener),this.direct.cleanup.push(function(t){return function(){window.removeEventListener("resize",t.___resizeListener___),e.___resizeListener___=null,e=null}}(e)))}}]),t}(l.Tag);e.ScrollTag=d}),require.register("curvature/toast/Toast.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("../base/View"),c=t("../base/Bindable"),f=t("./ToastAlert");function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Toast=void 0;var h=function(e){function t(){var e;return(0,i.default)(this,t),(e=r.call(this)).template='\n\t\t\t<div id = "[[_id]]" cv-each = "alerts:alert" class = "toast">\n\t\t\t\t[[alert]]\n\t\t\t</div>\n\t\t',e.args.alerts=[],e}(0,o.default)(t,e);var r=d(t);return(0,a.default)(t,[{key:"pop",value:function(e){var t=this;this.args.alerts.length,this.args.alerts.push(e),e.decay(function(e){return function(){for(var r in t.args.alerts)if(c.Bindable.ref(t.args.alerts[r])===c.Bindable.ref(e))return e.remove(),void delete t.args.alerts[r]}}(e))}},{key:"alert",value:function(e,t,r){return this.pop(new f.ToastAlert({title:e,body:t,time:r}))}}],[{key:"instance",value:function(){return this.inst||(this.inst=new this),this.inst}}]),t}(l.View);e.Toast=h}),require.register("curvature/toast/ToastAlert.js",function(e,t,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault"),i=n(t("@babel/runtime/helpers/classCallCheck")),a=n(t("@babel/runtime/helpers/createClass")),o=n(t("@babel/runtime/helpers/inherits")),s=n(t("@babel/runtime/helpers/possibleConstructorReturn")),u=n(t("@babel/runtime/helpers/getPrototypeOf")),l=t("../base/View");function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.ToastAlert=void 0;var f=function(e){function t(e){var n;return(0,i.default)(this,t),(n=r.call(this,e)).args.running=!1,n.args.time=n.args.time||16e3,n.init=n.args.time,n.args.title=n.args.title||"Standard alert",n.args.status="new",n.args.body=n.args.body||"This is a standard alert.",n.template='\n\t\t\t<div id = "[[_id]]" class = "alert toast-[[status]]">\n\t\t\t\t<h3>[[title]]</h3>\n\t\t\t\t<p>[[body]]</p>\n\t\t\t</div>\n\t\t',n}(0,o.default)(t,e);var r=c(t);return(0,a.default)(t,[{key:"decay",value:function(){var e=this;this.args.running=!0,this.onTimeout(50,function(){e.args.status=""}),this.onTimeout(300,function(){e.args.status="decaying"}),this.onTimeout(2400,function(){e.args.status="imminent"}),this.onTimeout(3500,function(){e.remove()})}}]),t}(l.View);e.ToastAlert=f}),require.register("___globals___",function(e,t,r){})}(),require("___globals___");
