!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},r={},n={},o={}.hasOwnProperty,i=/^\.\.?(\/|$)/,a=function(e,t){for(var r,n=[],o=(i.test(t)?e+"/"+t:t).split("/"),a=0,u=o.length;a<u;a++)".."===(r=o[a])?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},s=function(t,n){var o,i={id:t,exports:{},hot:y&&y.createHot(t)};return r[t]=i,n(i.exports,(o=t,function(t){var r=a(u(o),t);return e.require(r,o)}),i),i.exports},c=function(e){var t=n[e];return t&&e!==t?c(t):e},l=function(e,n){null==n&&(n="/");var i=c(e);if(o.call(r,i))return r[i].exports;if(o.call(t,i))return s(i,t[i]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};l.alias=function(e,t){n[t]=e};var f=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/;l.register=l.define=function(e,i){if(e&&"object"==typeof e)for(var a in e)o.call(e,a)&&l.register(a,e[a]);else t[e]=i,delete r[e],function(e){if(f.test(e)){var t=e.replace(f,"");o.call(n,t)&&n[t].replace(f,"")!==t+"/index"||(n[t]=e)}if(p.test(e)){var r=e.replace(p,"");o.call(n,r)||(n[r]=e)}}(e)},l.list=function(){var e=[];for(var r in t)o.call(t,r)&&e.push(r);return e};var y=e._hmr&&new e._hmr(function(e,t){return c(a(u(e),t))},l,t,r);l._cache=r,l.hmr=y&&y.wrap,l.brunch=!0,e.require=l}}(),function(){"undefined"==typeof window||window;require.register("curvature/Config.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;e.Config={title:"Curvature 0.0.66-r"}}),require.register("curvature/access/LoginView.js",function(e,t,r){"use strict";var n=t("../base/Config"),o=t("../base/View"),i=t("../base/Router"),a=t("../base/Repository"),u=t("./UserRepository"),s=t("../toast/Toast"),c=t("../toast/ToastAlert");function l(e){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function p(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:t+""}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.LoginView=void 0;var d=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=r.call(this)).template='\n\t\t\t<a cv-link = "user">User</a>\n\t\t\t<br />\n\t\t\t\n\t\t\t<a cv-link = "user/login">Login</a>\n\t\t\t<br />\n\n\t\t\t<a cv-link = "user/register">Register</a>\n\t\t\t<br />\n\n\t\t\t<a cv-link = "user/logout">Logout</a>\n\t\t\t<br />\n\n\t\t\t<input\n\t\t\t\ttype  = "button"\n\t\t\t\tvalue = "Login via FaceBook"\n\t\t\t \tcv-on = "click:facebookLogin(event)"\n\t\t\t />\n\t\t\t <input\n\t\t\t\ttype  = "button"\n\t\t\t\tvalue = "Log Out"\n\t\t\t \tcv-on = "click:logout(event)"\n\t\t\t />\n\t\t',e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,o.View);var r=v(t);return function(e,t,r){t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"facebookLogin",value:function(e){console.log("fb!"),e.preventDefault(),window.open(n.Config.get("backend")+"/facebookLogin"),this.userCheck&&this.clearInterval(this.userCheck),this.userCheck=this.onInterval(333,()=>{u.UserRepository.getCurrentUser(!0).then(e=>{var t=e.body;t.id&&t&&(this.clearInterval(this.userCheck),i.Router.clearCache(),a.Repository.clearCache(),s.Toast.instance().pop(new c.ToastAlert({title:"Logged in as "+t.username,body:"ID: "+t.publicId,time:2400})))})})}},{key:"logout",value:function(){window.open(n.Config.get("backend")+"/user/logout?page=app%3Fclose%3D1")}}]),t}();e.LoginView=d}),require.register("curvature/access/UserRepository.js",function(e,t,r){"use strict";var n=t("../base/Config"),o=t("../base/Bindable"),i=t("../base/Repository");function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:t+""}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.UserRepository=void 0;var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,i.Repository);var r=l(t);return function(e,t,r){t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,null,[{key:"uri",get:function(){return n.Config.get("backend")+"/user/"}},{key:"getCurrentUser",value:function(e=null){return window.prerenderer||navigator.userAgent.match(/prerender/i)?void(window.prerenderer=window.prerenderer||!0):this.args.response&&!1===e?Promise.resolve(this.args.response):this.request(this.uri+"current",!1,!1).then(e=>{if(e.body&&e.body.roles)for(var t in e.body.roles)"SeanMorris\\Access\\Role\\Administrator"==e.body.roles[t].class&&(e.body.isAdmin=!0);return e.body&&e.body.id&&(this.args.response=e,this.args.current=e.body),e}).catch(e=>{console.error(e)})}},{key:"login",value:function(){return this.request(this.uri+"/login")}},{key:"logout",value:function(){var e=this.args.current;return delete this.args.current,this.request(this.uri+"logout",!1,{},!1).then(()=>(this.args.current=null,e))}},{key:"onChange",value:function(e){return this.args.bindTo("current",e)}}]),t}();e.UserRepository=p,Object.defineProperty(p,"args",{configurable:!1,writable:!1,value:o.Bindable.makeBindable({})}),i.Repository.onResponse(e=>{e&&e.meta&&"currentUser"in e.meta&&(!p.args.current||e.meta.currentUser.id!==p.args.current.id)&&(p.args.current=e.meta.currentUser)})}),require.register("curvature/animate/Chain.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Chain=void 0;var a,u,s,c=(a=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},u&&o(a.prototype,u),s&&o(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a);e.Chain=c}),require.register("curvature/animate/Ease.js",function(e,t,r){"use strict";var n=t("../base/Mixin"),o=t("../mixin/PromiseMixin");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:t+""}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Ease=void 0;var f=function(e){function t(e,n={}){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=r.call(this)).interval=e,o.terminal=!1,o.initial=!1,o.timeout=!1,o.final=!1,o.canceled=!1,o.done=!1,o.calculate=!!(o.calculate||"calculate"in n)&&n.calculate,o.bounded=!("bounded"in n)||n.bounded,o.repeat="repeat"in n?n.repeat:1,o.reverse=!!("reverse"in n)&&n.reverse,o}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,n.Mixin.with(o.PromiseMixin));var r=c(t);return function(e,t,r){t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"start",value:function(){this.done=!1,requestAnimationFrame(()=>{this.initial=Date.now(),this.terminal=this.initial+this.interval,0<=this.repeat&&(this.terminal=this.initial+this.interval*this.repeat,this.timeout=setTimeout(()=>this.done?this.reverse?0:1:(this.done=!0,void this[o.PromiseMixin.Accept](this.reverse?0:1)),this.interval*this.repeat))})}},{key:"cancel",value:function(){return this.done?this.final:(clearTimeout(this.timeout),this.final=this.current(),this.canceled=this.done=!0,this[o.PromiseMixin.Reject](this.final),this.final)}},{key:"fraction",value:function(){if(this.done)return this.reverse?0:1;if(!1===this.initial)return this.reverse?1:0;var e=Date.now()-this.initial;if(e/this.interval>=this.repeat)return this.reverse?0:1;var t=e%this.interval/this.interval;return this.reverse?1-t:t}},{key:"current",value:function(){var e=this.fraction();return this.calculate?this.calculate(e):e}}]),t}();e.Ease=f}),require.register("curvature/animate/ease/CubicIn.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.CubicIn=void 0;var f=function(e){function t(...e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(n=r.call(this,...e)),"calculate",e=>e*e*e),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.CubicIn=f}),require.register("curvature/animate/ease/CubicInOut.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.CubicInOut=void 0;var f=function(e){function t(...e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(n=r.call(this,...e)),"calculate",e=>.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.CubicInOut=f}),require.register("curvature/animate/ease/CubicOut.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.CubicOut=void 0;var f=function(e){function t(...e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(n=r.call(this,...e)),"calculate",e=>--e*e*e+1),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.CubicOut=f}),require.register("curvature/animate/ease/ElasticOut.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.ElasticOut=void 0;var f=function(e){function t(e,n={}){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(o=r.call(this,e,n)),"calculate",e=>Math.pow(2,-10*e)*Math.sin((e-o.friction/4)*(2*Math.PI)/o.friction)+1),o.friction=o.friction||"friction"in n?n.friction:.3,o}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.ElasticOut=f}),require.register("curvature/animate/ease/GeoIn.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.GeoIn=void 0;var l=function(e){function t(e,n={}){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r.call(this,e,n)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.Ease);var r=s(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.GeoIn=l}),require.register("curvature/animate/ease/GeoInOut.js",function(e,t,r){"use strict";var n=t("../Ease"),o=t("./GeoIn");t("./GeoOut");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.GeoInOut=void 0,console.log(o.GeoIn);var f,p,y,v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.Ease);var r=s(t);return function(e,t,r){t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"calculate",value:function(e){return.5>e?EaseIn(power)(2*e)/2:EaseOut(power)(2*e-1)/2+.5}}]),t}();e.GeoInOut=v,f=v,y=1,(p=l(p="power"))in f?Object.defineProperty(f,p,{value:y,enumerable:!0,configurable:!0,writable:!0}):f[p]=y}),require.register("curvature/animate/ease/GeoOut.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.GeoOut=void 0;var f=function(e){function t(e,n={}){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(o=r.call(this,e,n)),"calculate",e=>1-Math.abs(e-Math.pow(1,o.power))),o.power=o.power||"power"in n?n.power:1,o}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.GeoOut=f}),require.register("curvature/animate/ease/Linear.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Linear=void 0;var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.Ease);var r=s(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.Linear=l}),require.register("curvature/animate/ease/QuadIn.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.QuadIn=void 0;var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.Ease);var r=s(t);return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"current",value:function(){var e=this.fraction();return e*e}}]),t}();e.QuadIn=l}),require.register("curvature/animate/ease/QuadInOut.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.QuadInOut=void 0;var f=function(e){function t(...e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(n=r.call(this,...e)),"calculate",e=>.5>e?2*e*e:(4-2*e)*e-1),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.QuadInOut=f}),require.register("curvature/animate/ease/QuadOut.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.QuadOut=void 0;var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.Ease);var r=s(t);return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"current",value:function(){var e=this.fraction();return e*(2-e)}}]),t}();e.QuadOut=l}),require.register("curvature/animate/ease/QuartIn.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.QuartIn=void 0;var f=function(e){function t(...e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(n=r.call(this,...e)),"calculate",e=>e*e*e*e),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.QuartIn=f}),require.register("curvature/animate/ease/QuartInOut.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.QuartInOut=void 0;var f=function(e){function t(...e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(n=r.call(this,...e)),"calculate",e=>.5>e?8*e*e*e*e:1-8*--e*e*e*e),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.QuartInOut=f}),require.register("curvature/animate/ease/QuartOut.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.QuartOut=void 0;var f=function(e){function t(...e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(n=r.call(this,...e)),"calculate",e=>1- --e*e*e*e),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.QuartOut=f}),require.register("curvature/animate/ease/QuintIn.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.QuintIn=void 0;var f=function(e){function t(...e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(n=r.call(this,...e)),"calculate",e=>e*e*e*e*e),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.QuintIn=f}),require.register("curvature/animate/ease/QuintInOut.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.QuintInOut=void 0;var f=function(e){function t(...e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(n=r.call(this,...e)),"calculate",e=>.5>e?16*e*e*e*e*e:1+16*--e*e*e*e*e),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.QuintInOut=f}),require.register("curvature/animate/ease/QuintOut.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.QuintOut=void 0;var f=function(e){function t(...e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(n=r.call(this,...e)),"calculate",e=>1+--e*e*e*e*e),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.QuintOut=f}),require.register("curvature/animate/ease/SineIn.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.SineIn=void 0;var f=function(e){function t(...e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(n=r.call(this,...e)),"calculate",e=>1+Math.sin(Math.PI/2*e-Math.PI/2)),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.SineIn=f}),require.register("curvature/animate/ease/SineInOut.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.SineInOut=void 0;var f=function(e){function t(...e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(n=r.call(this,...e)),"calculate",e=>(1+Math.sin(Math.PI*e-Math.PI/2))/2),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.SineInOut=f}),require.register("curvature/animate/ease/SineOut.js",function(e,t,r){"use strict";var n=t("../Ease");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.SineOut=void 0;var f=function(e){function t(...e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(s(n=r.call(this,...e)),"calculate",e=>Math.sin(Math.PI/2*e)),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,n.Ease);var r=u(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.SineOut=f}),require.register("curvature/base/Bag.js",function(e,t,r){"use strict";var n=t("./Bindable"),o=t("./Mixin"),i=t("../mixin/EventTargetMixin");function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:t+""}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Bag=void 0;var p=Symbol("Mapped"),y=Symbol("Has"),v=Symbol("Add"),b=Symbol("Remove"),d=Symbol("Delete"),h=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=r.call(this)).changeCallback=e,o.content=new Map,o.current=0,o.length=0,o.list=n.Bindable.makeBindable([]),o.meta=Symbol("meta"),o.type=void 0,o}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,o.Mixin.with(i.EventTargetMixin));var r=l(t);return function(e,t,r){t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"has",value:function(e){return this[p]?this[p].has(e):this[y](e)}},{key:y,value:function(e){return this.content.has(e)}},{key:"add",value:function(e){return this[p]?this[p].add(e):this[v](e)}},{key:v,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(e=n.Bindable.make(e),!this.content.has(e)){var r=new CustomEvent("adding",{detail:{item:e}});if(this.dispatchEvent(r)){var o=(e=>+e)(this.current++);this.content.set(e,o),this.list[o]=e,this.changeCallback&&this.changeCallback(e,this.meta,t.ITEM_ADDED,o);var i=new CustomEvent("added",{detail:{item:e,id:o}});return this.dispatchEvent(i),this.length=this.size,o}}}},{key:"remove",value:function(e){return this[p]?this[p].remove(e):this[b](e)}},{key:b,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(e=n.Bindable.make(e),!this.content.has(e))return this.changeCallback&&this.changeCallback(e,this.meta,0,void 0),!1;var r=new CustomEvent("removing",{detail:{item:e}});if(this.dispatchEvent(r)){var o=this.content.get(e);delete this.list[o],this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,t.ITEM_REMOVED,o);var i=new CustomEvent("removed",{detail:{item:e,id:o}});return this.dispatchEvent(i),this.length=this.size,e}}},{key:"delete",value:function(e){return this[p]?this[p].delete(e):void this[d](e)}},{key:d,value:function(e){this.remove(e)}},{key:"map",value:function(e=(e=>e),r=(e=>e)){var n=new WeakMap,o=new t;return o[p]=this,this.addEventListener("added",t=>{var i=t.detail.item;if(r(i)&&!n.has(i)){var a=e(i);n.set(i,a),o[v](a)}}),this.addEventListener("removed",e=>{var t=e.detail.item;if(n.has(t)){var r=n.get(t);n.delete(t),o[b](r)}}),o}},{key:"size",get:function(){return this.content.size}},{key:"items",value:function(){return Array.from(this.content.entries()).map(e=>e[0])}}]),t}();e.Bag=h,Object.defineProperty(h,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(h,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}),require.register("curvature/base/Bindable.js",function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function o(e,t,r){return(t=i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:t+""}function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Bindable=void 0;var u=Symbol("ref"),s=Symbol("original"),c=Symbol("deck"),l=Symbol("binding"),f=Symbol("subBinding"),p=Symbol("bindingAll"),y=Symbol("isBindable"),v=Symbol("wrapping"),b=Symbol("Names"),d=Symbol("executing"),h=Symbol("stack"),m=(Symbol("object"),Symbol("wrapped")),g=Symbol("unwrapped"),w=Symbol("getProto"),O=Symbol("onGet"),j=Symbol("onAllGet"),P=Symbol("bindChain"),S=Symbol("Descriptors"),_=Symbol("Before"),k=Symbol("After"),E=Symbol("NoGetters"),T=Symbol("Prevent"),R=Object.getPrototypeOf(Int8Array),C=Set.prototype[Symbol.iterator],x=Map.prototype[Symbol.iterator],B="object"===("undefined"==typeof globalThis?"undefined":a(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":a(window))?window:"object"===("undefined"==typeof self?"undefined":a(self))?self:void 0,M=e=>"function"==typeof B.Map&&e instanceof B.Map||"function"==typeof B.Set&&e instanceof B.Set||"function"==typeof B.Node&&e instanceof B.Node||"function"==typeof B.WeakMap&&e instanceof B.WeakMap||"function"==typeof B.Location&&e instanceof B.Location||"function"==typeof B.Storage&&e instanceof B.Storage||"function"==typeof B.WeakSet&&e instanceof B.WeakSet||"function"==typeof B.ArrayBuffer&&e instanceof B.ArrayBuffer||"function"==typeof B.Promise&&e instanceof B.Promise||"function"==typeof B.File&&e instanceof B.File||"function"==typeof B.Event&&e instanceof B.Event||"function"==typeof B.CustomEvent&&e instanceof B.CustomEvent||"function"==typeof B.Gamepad&&e instanceof B.Gamepad||"function"==typeof B.ResizeObserver&&e instanceof B.ResizeObserver||"function"==typeof B.MutationObserver&&e instanceof B.MutationObserver||"function"==typeof B.PerformanceObserver&&e instanceof B.PerformanceObserver||"function"==typeof B.IntersectionObserver&&e instanceof B.IntersectionObserver||"function"==typeof B.IDBCursor&&e instanceof B.IDBCursor||"function"==typeof B.IDBCursorWithValue&&e instanceof B.IDBCursorWithValue||"function"==typeof B.IDBDatabase&&e instanceof B.IDBDatabase||"function"==typeof B.IDBFactory&&e instanceof B.IDBFactory||"function"==typeof B.IDBIndex&&e instanceof B.IDBIndex||"function"==typeof B.IDBKeyRange&&e instanceof B.IDBKeyRange||"function"==typeof B.IDBObjectStore&&e instanceof B.IDBObjectStore||"function"==typeof B.IDBOpenDBRequest&&e instanceof B.IDBOpenDBRequest||"function"==typeof B.IDBRequest&&e instanceof B.IDBRequest||"function"==typeof B.IDBTransaction&&e instanceof B.IDBTransaction||"function"==typeof B.IDBVersionChangeEvent&&e instanceof B.IDBVersionChangeEvent||"function"==typeof B.FileSystemFileHandle&&e instanceof B.FileSystemFileHandle||"function"==typeof B.RTCPeerConnection&&e instanceof B.RTCPeerConnection||"function"==typeof B.ServiceWorkerRegistration&&e instanceof B.ServiceWorkerRegistration,A=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"isBindable",value:function(t){return!!(t&&t[y]&&t[T])&&t[y]===e}},{key:"onDeck",value:function(e,t){return e[c].get(t)||!1}},{key:"ref",value:function(e){return e[u]||e||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"shuck",value:function(t,r){r=r||new Map;var n=Object.create({});if(t instanceof R||t instanceof ArrayBuffer){var o=t.slice(0);return r.set(t,o),o}var i=Object.keys(t);for(var u in i){var c=i[u];if("___"!==c.substring(0,3)){var l=r.get(t[c]);if(l){n[c]=l;continue}if(t[c]===t){r.set(t[c],n),n[c]=n;continue}if(t[c]&&"object"===a(t[c])){var f=t[c];e.isBindable(t[c])&&(f=t[c][s]),n[c]=this.shuck(f,r)}else n[c]=t[c];r.set(t[c],n[c])}}return e.isBindable(t)&&(delete n.bindTo,delete n.isBound),n}},{key:"make",value:function(t){if(t[T])return t;if(!t||!["function","object"].includes(a(t)))return t;if(u in t)return t[u];if(t[y])return t;if(Object.isSealed(t)||Object.isFrozen(t)||!Object.isExtensible(t)||M(t))return t;Object.defineProperty(t,y,{configurable:!1,enumerable:!1,writable:!1,value:e}),Object.defineProperty(t,u,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(t,s,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(t,c,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(t,l,{configurable:!1,enumerable:!1,writable:!1,value:Object.create(null)}),Object.defineProperty(t,f,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(t,p,{configurable:!1,enumerable:!1,writable:!1,value:new Set}),Object.defineProperty(t,d,{enumerable:!1,writable:!0}),Object.defineProperty(t,v,{enumerable:!1,writable:!0}),Object.defineProperty(t,h,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(t,_,{configurable:!1,enumerable:!1,writable:!1,value:new Set}),Object.defineProperty(t,k,{configurable:!1,enumerable:!1,writable:!1,value:new Set}),Object.defineProperty(t,m,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)}),Object.defineProperty(t,g,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)}),Object.defineProperty(t,S,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)});var r=(n,o=null,i={})=>{var u=!1;if(Array.isArray(n)){var s=n.map(e=>r(e,o,i));return()=>s.forEach(e=>e())}if(n instanceof Function&&(i=o||{},o=n,u=!0),0<=i.delay&&(o=this.wrapDelayCallback(o,i.delay)),0<=i.throttle&&(o=this.wrapThrottleCallback(o,i.throttle)),0<=i.wait&&(o=this.wrapWaitCallback(o,i.wait)),i.frame&&(o=this.wrapFrameCallback(o,i.frame)),i.idle&&(o=this.wrapIdleCallback(o)),u){if(t[p].add(o),!("now"in i)||i.now)for(var c in t)o(t[c],c,t,!1);return()=>{t[p].delete(o)}}if(t[l][n]||(t[l][n]=new Set),i.children){var y=o;o=((...r)=>{var n=r[0],o=t[f].get(y);if(o&&(t[f].delete(y),o()),"object"===a(n)){var u=e.make(n);e.isBindable(u)&&t[f].set(y,u.bindTo((...e)=>y(...r,...e),Object.assign({},i,{children:!1}))),y(...r)}else y(...r)})}t[l][n].add(o),(!("now"in i)||i.now)&&o(t[n],n,t,!1);var v=()=>{var e=t[f].get(o);e&&(t[f].delete(o),e()),t[l][n]&&t[l][n].has(o)&&t[l][n].delete(o)};return i.removeWith&&i.removeWith instanceof View&&i.removeWith.onRemove(()=>v),v};Object.defineProperty(t,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:r}),Object.defineProperty(t,P,{configurable:!1,enumerable:!1,writable:!1,value:(e,r)=>{var n=e.split("."),o=n.shift(),i=n.slice(0),a=[];return a.push(t.bindTo(o,(e,t,n,o)=>{var u=i.join(".");return 0===i.length?void r(e,t,n,o):(void 0===e&&(e=n[t]=this.make({})),void(a=a.concat(e[P](u,r))))})),()=>a.forEach(e=>e())}}),Object.defineProperty(t,"___before",{configurable:!1,enumerable:!1,writable:!1,value:e=>(t[_].add(e),()=>t[_].delete(e))}),Object.defineProperty(t,"___after",{configurable:!1,enumerable:!1,writable:!1,value:e=>(t[k].add(e),()=>t[k].delete(e))});for(var n in Object.defineProperty(t,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:()=>{if(t[p].size)return!0;for(var e of Object.values(t[l]))if(e.size)return!0;return!1}}),t)t[n]&&"object"===a(t[n])&&(t[n][u]||t[n]instanceof Promise||Object.isExtensible(t[n])&&!Object.isSealed(t[n])&&(M(t[n])||(t[n]=e.make(t[n]))));var o=t[S],i=t[m],A=t[h],D=Object.create(null);return D.set=((r,n,o)=>{if(o&&"object"===a(o)&&(o=e.make(o),r[n]===o))return!0;i.has(n)&&i.delete(n);var u=t[c],s=u.has(n),f=s&&u.get(n);if(s&&f===o)return!0;if(n.slice&&"___"===n.slice(-3))return!0;if(r[n]===o||"number"==typeof o&&isNaN(f)&&isNaN(o))return!0;for(var y of(u.set(n,o),t[p]))y(o,n,r,!1);if(n in t[l])for(var v of t[l][n])v(o,n,r,!1,r[n]);if(u.delete(n),B.File&&r instanceof B.File&&"lastModifiedDate"==n||Reflect.set(r,n,o),Array.isArray(r)&&t[l].length)for(var b in t[l].length)(0,t[l].length[b])(r.length,"length",r,!1,r.length);return!0}),D.construct=((r,n)=>{for(var o of r[_])o(r,"constructor",t[h],void 0,n);var i=e.make(new r[s](...n));for(var a of r[k])a(r,"constructor",t[h],i,n);return i}),D.deleteProperty=((e,r)=>{var n=t[c];if(n.has(r))return!0;if(!(r in e))return!0;if(o.has(r)){var a=o.get(r);if(a&&!a.configurable)return!1;o.delete(r)}for(var u of(n.set(r,null),i.has(r)&&i.delete(r),t[p]))u(void 0,r,e,!0,e[r]);if(r in t[l])for(var s of t[l][r])s(void 0,r,e,!0,e[r]);return Reflect.deleteProperty(e,r),n.delete(r),!0}),t[E]||(D.getPrototypeOf=(e=>w in t?t[w]:Reflect.getPrototypeOf(e)),D.get=((r,n)=>{if(i.has(n))return i.get(n);if(n===u||n===s||"apply"===n||"isBound"===n||"bindTo"===n||"__proto__"===n||"constructor"===n)return t[n];var a;if(o.has(n)?a=o.get(n):(a=Object.getOwnPropertyDescriptor(t,n),o.set(n,a)),a&&!a.configurable&&!a.writable)return t[n];if(j in t)return t[j](n);if(O in t&&!(n in t))return t[O](n);if(a&&!a.configurable&&!a.writable)return i.set(n,t[n]),t[n];if("function"==typeof t[n]){if(b in t[n])return t[n];t[g].set(n,t[n]);var c=Object.getPrototypeOf(t)[n]===t[n],l=M(t)||"function"==typeof t[Symbol.iterator]&&"next"===n||"function"==typeof R&&t instanceof R||"function"==typeof EventTarget&&t instanceof EventTarget||"function"==typeof Date&&t instanceof Date||"function"==typeof x&&t.prototype===x||"function"==typeof C&&t.prototype===C?t:t[u],f=function(...e){for(var r of(t[d]=n,A.unshift(n),t[_]))r(t,n,A,t,e);var o;if(new.target)o=new(t[g].get(n))(...e);else{var i=t[g].get(n);o=c?i.apply(l||t,e):i(...e)}for(var a of t[k])a(t,n,A,t,e);return t[d]=null,A.shift(),o};f[j]=(e=>t[n][e]);var p=e.make(f);return i.set(n,p),p}return t[n]})),Object.defineProperty(t,u,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(t,D)}),t[u]}},{key:"clearBindings",value:function(e){var t=(e=>(...t)=>t.map(e))(e=>Object.keys(e).map(t=>delete e[t]));e[p].clear(),t(e[m],e[l],e[k],e[_])}},{key:"resolve",value:function(e,t,r=!1){for(var n,o=t.split("."),i=o[0];o.length;){if(r&&1===o.length)return[this.make(e),o.shift(),i];(n=o.shift())in e&&e[n]&&"object"===a(e[n])||(e[n]=Object.create(null)),e=this.make(e[n])}return[this.make(e),n,i]}},{key:"wrapDelayCallback",value:function(e,t){return(...r)=>setTimeout(()=>e(...r),t)}},{key:"wrapThrottleCallback",value:function(e,t){return this.throttles.set(e,!1),(...r)=>{this.throttles.get(e,!0)||(e(...r),this.throttles.set(e,!0),setTimeout(()=>{this.throttles.set(e,!1)},t))}}},{key:"wrapWaitCallback",value:function(e,t){return(...r)=>{var n;(n=this.waiters.get(e))&&(this.waiters.delete(e),clearTimeout(n)),n=setTimeout(()=>e(...r),t),this.waiters.set(e,n)}}},{key:"wrapFrameCallback",value:function(e,t){return(...t)=>{requestAnimationFrame(()=>e(...t))}}},{key:"wrapIdleCallback",value:function(e){return(...t)=>{(window.requestIdleCallback||requestAnimationFrame)(()=>e(...t))}}}]),e}();e.Bindable=A,o(A,"waiters",new WeakMap),o(A,"throttles",new WeakMap),Object.defineProperty(A,"Prevent",{configurable:!1,enumerable:!1,writable:!1,value:T}),Object.defineProperty(A,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:O}),Object.defineProperty(A,"NoGetters",{configurable:!1,enumerable:!1,writable:!1,value:E}),Object.defineProperty(A,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:w}),Object.defineProperty(A,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:j})}),require.register("curvature/base/Cache.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Cache=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"store",value:function(e,t,r,n="standard"){var o=0;r&&(o=1e3*r+(new Date).getTime()),this.buckets||(this.buckets=new Map),this.buckets.has(n)||this.buckets.set(n,new Map);var i=new CustomEvent("cvCacheStore",{cancelable:!0,detail:{key:e,value:t,expiry:r,bucket:n}});document.dispatchEvent(i)&&this.buckets.get(n).set(e,{value:t,expiration:o})}},{key:"load",value:function(e,t=!1,r="standard"){var n=new CustomEvent("cvCacheLoad",{cancelable:!0,detail:{key:e,defaultvalue:t,bucket:r}});if(!document.dispatchEvent(n))return t;if(this.buckets&&this.buckets.has(r)&&this.buckets.get(r).has(e)){var o=this.buckets.get(r).get(e);if(0===o.expiration||o.expiration>(new Date).getTime())return this.buckets.get(r).get(e).value}return t}}]),e}();e.Cache=a}),require.register("curvature/base/Config.js",function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:t+""}function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var a={},u=t,s="object"===("undefined"==typeof globalThis?"undefined":i(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":i(window))?window:"object"===("undefined"==typeof self?"undefined":i(self))?self:void 0;try{a=u("/Config").Config}catch(e){!0===s.devMode&&console.error(e),a={}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"get",value:function(e){return this.configs[e]}},{key:"set",value:function(e,t){return this.configs[e]=t,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(...e){for(var t in e){var r=e[t];for(var n in"string"==typeof r&&(r=JSON.parse(r)),r){var o=r[n];return this.configs[n]=o}}return this}}]),e}();e.Config=c,Object.defineProperty(c,"configs",{configurable:!1,enumerable:!1,writable:!1,value:a})}),require.register("curvature/base/Cookie.js",function(e,t,r){"use strict";var n=t("./Bindable");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Cookie=void 0;var c,l,f,p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"set",value:function(e,t){this.jar[e]=t}},{key:"get",value:function(e){return this.jar[e]}},{key:"delete",value:function(e){delete this.jar[e]}}]),e}();e.Cookie=p,c=p,l="jar",f=n.Bindable.make({}),(l=s(l))in c?Object.defineProperty(c,l,{value:f,enumerable:!0,configurable:!0,writable:!0}):c[l]=f,"string"==typeof document.cookie&&"data"!==window.location.href.substr(0,4)&&(document.cookie.split(";").map(e=>{var t=i(e.split("="),2),r=t[0],n=t[1];try{n=JSON.parse(n)}catch(e){n=n}r=r.trim(),p.jar[decodeURIComponent(r)]=n}),p.jar.bindTo((e,t,r,n)=>{document.cookie=n?"".concat(encodeURIComponent(t),"=;expires=").concat(new Date(0)):"".concat(encodeURIComponent(t),"=").concat(e)}))}),require.register("curvature/base/Dom.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Dom=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"mapTags",value:function(e,t,r,n,o){var i=[],a=!0;n&&(a=!1);var u=!1,s=globalThis.window,c=(s.Node,s.Element),l=s.NodeFilter,f=s.document.createTreeWalker(e,l.SHOW_ELEMENT|l.SHOW_TEXT,{acceptNode:e=>{if(!a){if(e!==n)return l.FILTER_SKIP;a=!0}return o&&e===o&&(u=!0),u?l.FILTER_SKIP:t?e instanceof c&&e.matches(t)?l.FILTER_ACCEPT:l.FILTER_SKIP:l.FILTER_ACCEPT}},!1);for(0;f.nextNode();)i.push(r(f.currentNode,f));return i}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t),this.mapTags(e,!1,e=>{e.dispatchEvent(t)})}}]),e}();e.Dom=a}),require.register("curvature/base/Import.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Import=void 0;var a=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),console.log(this.__proto__.constructor),this.__proto__.constructor.instances[t])return this.__proto__.constructor.instances[t];this.uri=t;var r=document.createElement("script");r.setAttribute("src",this.uri),this.ready=new Promise((e,t)=>{r.addEventListener("load",()=>e(r)),r.addEventListener("error",e=>{console.error(e),t(e)})}),this.tag=r,this.attached=!1,this.__proto__.constructor.instances[t]=this}return function(e,t,r){t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"attach",value:function(e=null){this.attached||((e=e||document.head).append(this.tag),this.attached=!0)}}]),e}();e.Import=a,a.instances={}}),require.register("curvature/base/Mixin.js",function(e,t,r){"use strict";var n=t("./Bindable");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function p(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Mixin=void 0;var v=Symbol("constructor"),b=(Symbol("mixinList"),function(){function e(){l(this,e)}return p(e,null,[{key:"from",value:function(t,...r){return function(n){function c(...n){var i;l(this,c);var a=t.constructor?i=f.call(this,...n):null;for(var p of r)switch(p[e.Constructor]&&p[e.Constructor].apply(s(i)),o(p)){case"function":e.mixClass(p,c);break;case"object":e.mixObject(p,s(i))}return u(i,a)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(c,t);var f=a(c);return p(c)}()}},{key:"make",value:function(...t){var r=t.pop();return e.to(r,...t)}},{key:"to",value:function(e,...t){var r={};t.map(t=>{switch(o(t)){case"object":Object.assign(r,Object.getOwnPropertyDescriptors(t));break;case"function":Object.assign(r,Object.getOwnPropertyDescriptors(t.prototype))}delete r.constructor,Object.defineProperties(e.prototype,r)})}},{key:"with",value:function(...e){return this.from(function(){return p(function e(){l(this,e)})}(),...e)}},{key:"mixObject",value:function(e,t){for(var r of Object.getOwnPropertyNames(e))"function"!=typeof e[r]?t[r]=e[r]:t[r]=e[r].bind(t);for(var n of Object.getOwnPropertySymbols(e))"function"!=typeof e[n]?t[n]=e[n]:t[n]=e[n].bind(t)}},{key:"mixClass",value:function(e,t){for(var r of Object.getOwnPropertyNames(e.prototype))if(!["name","prototype","length"].includes(r)){var n=Object.getOwnPropertyDescriptor(t,r);if(!n||n.writable){if("function"!=typeof e[r]){t.prototype[r]=e.prototype[r];continue}t.prototype[r]=e.prototype[r].bind(t.prototype)}}for(var o of Object.getOwnPropertySymbols(e.prototype))"function"==typeof e[o]?t.prototype[o]=e.prototype[o].bind(t.prototype):t.prototype[o]=e.prototype[o];var i=function(){if(["name","prototype","length"].includes(a))return"continue";var r=Object.getOwnPropertyDescriptor(t,a);if(r&&!r.writable)return"continue";if("function"!=typeof e[a])return t[a]=e[a],"continue";var n=t[a]||!1,o=e[a].bind(t);t[a]=((...e)=>(n&&n(...e),o(...e)))};for(var a of Object.getOwnPropertyNames(e))i();var u=function(){if("function"!=typeof e[s])return t.prototype[s]=e[s],"continue";var r=t[s]||!1,n=e[s].bind(t);t[s]=((...e)=>(r&&r(...e),n(...e)))};for(var s of Object.getOwnPropertySymbols(e))u()}},{key:"mix",value:function(e){for(var t={},r={},o=n.Bindable.makeBindable(e),i=function(e){var n=Object.getOwnPropertyNames(e.prototype),i=Object.getOwnPropertyNames(e),a=/^(before|after)__(.+)/,u=function(r){var n=r.match(a);if(n){switch(n[1]){case"before":o.___before((t,o,i,a,u)=>{if(o===n[2])return e[r].bind(a)(...u)});break;case"after":o.___after((t,o,i,a,u)=>{if(o===n[2])return e[r].bind(a)(...u)})}return"continue"}return t[r]?"continue":"function"==typeof e[r]?void(t[r]=e[r]):"continue"};for(var s of i)u(s);var c=function(t){var n=t.match(a);if(n){switch(n[1]){case"before":o.___before((r,o,i,a,u)=>{if(o===n[2])return e.prototype[t].bind(a)(...u)});break;case"after":o.___after((r,o,i,a,u)=>{if(o===n[2])return e.prototype[t].bind(a)(...u)})}return"continue"}return r[t]?"continue":"function"==typeof e.prototype[t]?void(r[t]=e.prototype[t]):"continue"};for(var l of n)c(l)},a=this;a&&a.prototype;a=Object.getPrototypeOf(a))i(a);for(var u in t)e[u]=t[u].bind(e);var s=function(t){e.prototype[t]=function(...e){return r[t].apply(this,e)}};for(var c in r)s(c);return o}}]),e}());e.Mixin=b,b.Constructor=v}),require.register("curvature/base/Model.js",function(e,t,r){"use strict";var n=t("./Cache"),o=t("./Bindable");t("./Repository");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var s=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.repository=t}return function(e,t,r){t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"consume",value:function(t){for(var r in t){var i=t[r];if(t[r]instanceof Object&&t[r].class&&t[r].publicId){var a="".concat(t[r].class,"::").concat(t[r].publidId),u=n.Cache.load(a,!1,"model-type-repo");i=o.Bindable.makeBindable(new e(this.repository)),u&&(i=u),i.consume(t[r]),n.Cache.store(a,i,0,"model-type-repo")}this[r]=i}}}]),e}();e.Model=s}),require.register("curvature/base/Pool.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function i(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Pool=void 0;var u=function(){function e({max:t,init:r}){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),i(this,"backlog",[]),i(this,"running",new Set),i(this,"max",1),i(this,"init",e=>new Promise(e)),this.init=r||this.init,this.max=t||this.max}return function(e,t,r){t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"add",value:function(e){var t=()=>{if(this.running.delete(e),this.backlog.length){var r=this.backlog.shift();this.init(r).finally(t),this.running.add(r)}};this.running.size<this.max?(this.init(e).finally(t),this.running.add(e)):this.backlog.push(e)}}]),e}();e.Pool=u}),require.register("curvature/base/Repository.js",function(e,t,r){"use strict";var n=t("./Bindable"),o=t("./Router"),i=t("./Cache"),a=t("./Model"),u=t("./Bag"),s=t("../form/Form"),c=t("../form/multiField/FormWrapper");function l(e){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function p(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Repository=void 0;var y=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.uri=t}return function(e,t,r){t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"get",value:function(t,r=!1,n={}){var a=this.uri+"/"+t,u=i.Cache.load(a+o.Router.queryToString(o.Router.queryOver(n),!0),!1,"model-uri-repo");return!r&&u?Promise.resolve(u):e.request(a,n).then(e=>this.extractModel(e.body))}},{key:"page",value:function(t=0,r){return e.request(this.uri,r).then(e=>{var t=[];for(var r in e.body){var n=e.body[r];t.push(this.extractModel(n))}return e.body=t,e})}},{key:"edit",value:function(t=null,r=null,n={}){var o=this.uri+"/create";return t&&(o=this.uri+"/"+t+"/edit"),r?e.request(o,{api:"json"},r).then(e=>e.body):e.request(o).then(e=>{var t=new s.Form(e.meta.form,n);return new c.FormWrapper(t,o,"POST",n)})}},{key:"extractModel",value:function(e){var t=n.Bindable.makeBindable(new a.Model(this));if(t.consume(e),this.uri,t.publicId,t.class){var r="".concat(t.class,"::").concat(t.publidId);i.Cache.load(r,!1,"model-type-repo")}return t}}],[{key:"loadPage",value:function(e={},t=!1){return this.request(this.uri,e).then(e=>e)}},{key:"domCache",value:function(){}},{key:"load",value:function(e,t=!1){return this.objects=this.objects||{},this.objects[this.uri]=this.objects[this.uri]||{},this.objects[this.uri][e]?Promise.resolve(this.objects[this.uri][e]):this.request(this.uri+"/"+e).then(()=>{})}},{key:"form",value:function(e=null){var t=this.uri+"/create";return e&&(t=this.uri+"/"+e+"/edit"),this.request(t).then(e=>e)}},{key:"clearCache",value:function(){this.objects&&this.objects[this.uri]&&(this.objects[this.uri]={})}},{key:"encode",value:function(e,t=null,r=null){for(var n in r||(r=new FormData),e){var o=n;t&&(o="".concat(t,"[").concat(o,"]")),e[n]&&"object"!==l(e[n])?r.append(o,e[n]):this.encode(e[n],o,r)}return r}},{key:"onResponse",value:function(e){return this._onResponse||(this._onResponse=new u.Bag),this._onResponse.add(e)}},{key:"request",value:function(e,t=null,r=null,n=!0,o={}){var i,a="GET",s=null,c={};t&&(c=t),this._onResponse||(this._onResponse=new u.Bag),this.runningRequests||(this.runningRequests={}),c.api=c.api||"json",i=Object.keys(c).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(c[e])).join("&");var l;if(l=e+"?"+i,!r&&this.runningRequests[l])return this.runningRequests[l];r&&(n=!1,a="POST",s=r instanceof FormData?r:this.encode(r));var f=new XMLHttpRequest;if("responseType"in o&&(f.responseType=o.responseType),!r&&n&&this.cache&&this.cache[l])return Promise.resolve(this.cache[l]);var p='script[data-uri="'+l+'"]',y=document.querySelector(p);if(!r&&n&&y){var v=JSON.parse(y.innerText);return Promise.resolve(v)}f.withCredentials=!("withCredentials"in o)||o.withCredentials,document.createElement("a").href=l,r||(f.timeout=o.timeout||15e3,this.xhrs[l]=f);var b=new Promise((e,t)=>{if(r&&"progressUp"in o&&(f.upload.onprogress=o.progressUp),"progressDown"in o&&(f.onprogress=o.progressDown),f.onreadystatechange=(()=>{var r;if(4===f.readyState)if(delete this.xhrs[l],delete this.runningRequests[l],this.cache||(this.cache={}),"application/json"!=f.getResponseHeader("Content-Type")&&"application/json; charset=utf-8"!=f.getResponseHeader("Content-Type")&&"text/json"!=f.getResponseHeader("Content-Type")&&"text/json; charset=utf-8"!=f.getResponseHeader("Content-Type")){var n=this._onResponse.items();for(var o in n)n[o](f,!0);200===f.status?e(f):t(f)}else if((r=JSON.parse(f.responseText))&&0==r.code){var i=document.querySelector('script[data-uri="'+l+'"]');(window.prerenderer||navigator.userAgent.match(/prerender/i))&&(window.prerenderer=window.prerenderer||!0,!i&&((i=document.createElement("script")).type="text/json",i.setAttribute("data-hack","application/ld+json-NOT!"),i.setAttribute("data-uri",l),document.head.appendChild(i)),i.innerText=JSON.stringify(r));var a=this._onResponse.items();for(var u in a)a[u](r,!0);r._http=f.status,200===f.status?e(r):t(r)}else{var s=this._onResponse.items();for(var c in s)s[c](r,!0);t(r)}}),f.open(a,l,!0),o.headers)for(var n in o.headers)f.setRequestHeader(n,o.headers[n]);f.send(s)});return r||(this.runningRequests[l]=b),b}},{key:"cancel",value:function(e=/^.$/){for(var t in this.xhrs)this.xhrs[t]&&t.match(e)&&(this.xhrs[t].abort(),delete this.xhrs[t])}}]),e}();e.Repository=y,y.xhrs=[]}),require.register("curvature/base/Router.js",function(e,t,r){"use strict";var n,o=t("./View"),i=(t("./Cache"),t("./Config")),a=t("./Routes");function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:t+""}function f(e){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;var p=Symbol("NotFound"),y=Symbol("Internal"),v="object"===("undefined"==typeof globalThis?"undefined":f(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":f(window))?window:"object"===("undefined"==typeof self?"undefined":f(self))?self:void 0;v.CustomEvent=null!==(n=v.CustomEvent)&&void 0!==n?n:v.Event;var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"wait",value:function(e,t="DOMContentLoaded",r=document){r.addEventListener(t,()=>{this.listen(e)})}},{key:"listen",value:function(e,t=!1){this.listener=e||this.listener,this.routes=t||e.routes,Object.assign(this.query,this.queryOver({}));var r=t=>{t.preventDefault(),t.state&&"routedId"in t.state?(t.state.routedId<=this.routeCount?(this.history.splice(t.state.routedId),this.routeCount=t.state.routedId):t.state.routedId>this.routeCount&&(this.history.push(t.state.prev),this.routeCount=t.state.routedId),this.state=t.state):null!==this.prevPath&&this.prevPath!==location.pathname&&this.history.push(this.prevPath),this.isOriginLimited(location)?this.match(this.nextPath,e):this.match(location.pathname,e)};window.addEventListener("cvUrlChanged",r),window.addEventListener("popstate",r);var n=!this.isOriginLimited(location)&&location.pathname+location.search;!this.isOriginLimited(location)&&location.hash&&(n+=location.hash);var o={routedId:this.routeCount,url:location.pathname,prev:this.prevPath};this.isOriginLimited(location)||history.replaceState(o,null,location.pathname),this.go(!1===n?"/":n)}},{key:"go",value:function(e,t=!1){var r=i.Config.get("title");r&&(document.title=r);var n={routedId:this.routeCount,prev:this.prevPath,url:location.pathname};-1===t?this.match(e,this.listener,!0):this.isOriginLimited(location)?this.nextPath=e:2===t&&location.pathname!==e?history.replaceState(n,null,e):location.pathname!==e&&history.pushState(n,null,e),(!t||0>t)&&(!1===t&&(this.path=null),!t&&("#"===e.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged")))),this.prevPath=e}},{key:"processRoute",value:function(e,t,r){return"function"==typeof e[t]?e[t].prototype instanceof o.View?new e[t](r):e[t](r):e[t]}},{key:"handleError",value:function(e,t,r,n,o,i,a,u){"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:i,prev:a,view:o,routes:t,selected:r}}));var s=v.devMode?"Unexpected error: "+e:"Unexpected error.";t[y]&&(n[y]=e,s=this.processRoute(t,y,n)),this.update(o,i,s,t,r,n,u)}},{key:"match",value:function(e,t,r=!1){var n=null,o=!1;if(!0===r&&(o=r),r&&"object"===f(r)&&(o=r.forceRefresh,n=r.event),"undefined"==typeof document||this.path!==e||o){var i="http://example.com";"undefined"!=typeof document&&(i=this.isOriginLimited(location)?i:location.origin,this.queryString=location.search);var s=new URL(e,i);e=this.path=s.pathname,"undefined"==typeof document&&(this.queryString=s.search);var c=this.prevPath,l=t&&t.args?t.args.content:null,y=this.routes||t&&t.routes||a.Routes.dump(),v=new URLSearchParams(this.queryString);for(var b in n&&n.request&&(this.request=n.request),Object.keys(this.query))delete this.query[b];for(var d of v){var h=u(d,2),m=h[0],g=h[1];this.query[m]=g}var w={},O=!1,j="";for(var P in"/"===e.substring(0,1)&&(e=e.substring(1)),e=e.split("/"),this.query)w[P]=this.query[P];e:for(var S in y){var _=S.split("/");if(!(_.length<e.length&&"*"!==_[_.length-1])){for(var k in _)if("%"==_[k].substr(0,1)){var E=null,T=/^%(\w+)\??/.exec(_[k]);if(T&&T[1]&&(E=T[1]),!E)throw new Error("".concat(_[k],' is not a valid argument segment in route "').concat(S,'"'));if(e[k])w[E]=e[k];else{if("?"!=_[k].substr(_[k].length-1,1))continue e;w[E]=""}}else if("*"!==_[k]&&e[k]!==_[k])continue e;O=S,j=y[S],"*"===_[_.length-1]&&(w.pathparts=e.slice(_.length-1));break}}var R=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:e,prev:c,root:t,selected:O,routes:y}});if("undefined"==typeof document||document.dispatchEvent(R)){if(!o&&t&&l&&"object"===f(j)&&l.constructor===j.constructor&&!(j instanceof Promise)&&l.update(w))return t.args.content=l,!0;O in y||(y[O]=y[p]);try{return!1===(j=this.processRoute(y,O,w))&&(j=this.processRoute(y,p,w)),"undefined"==typeof document?j instanceof Promise?j:Promise.resolve(j):j instanceof Promise?j.then(r=>this.update(t,e,r,y,O,w,o)).catch(r=>{this.handleError(r,y,O,w,t,e,c,o)}):this.update(t,e,j,y,O,w,o)}catch(r){this.handleError(r,y,O,w,t,e,c,o)}}}}},{key:"update",value:function(e,t,r,n,i,a,u){if(e){var s=this.prevPath,c=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:r,path:t,prev:s,view:e,routes:n,selected:i}});!1!==r&&(e.args.content instanceof o.View&&(e.args.content.pause(!0),e.args.content.remove()),document.dispatchEvent(c)&&(e.args.content=r),r instanceof o.View&&(r.pause(!1),r.update(a,u)));var l=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:r,path:t,prev:s,view:e,routes:n,selected:i}});document.dispatchEvent(l)}}},{key:"isOriginLimited",value:function({origin:e}){return"null"===e||"file://"===e}},{key:"queryOver",value:function(e={}){var t=new URLSearchParams(location.search),r={},n={};for(var o of t)n[o[0]]=o[1];return delete(r=Object.assign(r,n,e)).api,r}},{key:"queryToString",value:function(e={},t=!1){var r=[],n=e;for(var o in t||(n=this.queryOver(e)),n)""!==n[o]&&r.push(o+"="+encodeURIComponent(n[o]));return r.join("&")}},{key:"setQuery",value:function(e,t,r){var n=this.queryOver();n[e]=t,void 0===t&&delete n[e];var o=this.queryToString(n,!0);this.go(location.pathname+(o?"?"+o:"?"),r)}}]),e}();e.Router=b,Object.defineProperty(b,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(b,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(b,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(b,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(b,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(b,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:y}),Object.defineProperty(b,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:p})}),require.register("curvature/base/Routes.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Routes=void 0;var a={},u=t,s=!1,c=()=>{if(!s){try{Object.assign(a,u("Routes").Routes||{})}catch(e){!0===globalThis.devMode&&console.warn(e)}s=!0}},l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"get",value:function(e){return c(),this.routes[e]}},{key:"dump",value:function(){return c(),this.routes}}]),e}();e.Routes=l,Object.defineProperty(l,"routes",{configurable:!1,enumerable:!1,writable:!1,value:a})}),require.register("curvature/base/RuleSet.js",function(e,t,r){"use strict";t("./Dom");var n=t("./Tag"),o=t("./View");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.RuleSet=void 0;var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(t=document,r=null){for(var n in e.apply(t,r),this.rules)for(var o in this.rules[n]){var i=this.rules[n][o],a=e.wrap(t,i,r),u=t.querySelectorAll(n);for(var s of u)a(s)}}},{key:"purge",value:function(){if(this.rules)for(var e of Object.entries(this.rules)){var t=a(e,2),r=t[0];if(t[1],this.rules[r])for(var n in this.rules[r])delete this.rules[r][n]}}}],[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(e=document,t=null){for(var r in this.globalRules)for(var n in this.globalRules[r]){var o=this.globalRules[r][n],i=this.wrap(e,o,t),a=e.querySelectorAll(r);for(var u of a)i(u)}}},{key:"wait",value:function(e="DOMContentLoaded",t=document){var r=((e,t)=>()=>(t.removeEventListener(e,r),this.apply()))(e,t);t.addEventListener(e,r)}},{key:"wrap",value:function(e,t,r=null){var i=t;return(t instanceof o.View||t&&t.prototype&&t.prototype instanceof o.View)&&(i=(()=>t)),e=>{if(void 0===e.___cvApplied___&&Object.defineProperty(e,"___cvApplied___",{enumerable:!1,writable:!1,value:new WeakSet}),!e.___cvApplied___.has(t)){var a,u;r&&(a=u=r,r.viewList&&(u=r.viewList.parent));var s=new n.Tag(e,u,null,void 0,a),c=s.element.parentNode,l=s.element.nextSibling,f=i(s);if(!1!==f&&e.___cvApplied___.add(t),f instanceof HTMLElement&&(f=new n.Tag(f)),f instanceof n.Tag){if(!f.element.contains(s.element)){for(;s.element.firstChild;)f.element.appendChild(s.element.firstChild);s.remove()}l?c.insertBefore(f.element,l):c.appendChild(f.element)}f&&f.prototype&&f.prototype instanceof o.View&&(f=new f({},r)),f instanceof o.View&&(r&&(r.cleanup.push(()=>f.remove()),r.cleanup.push(r.args.bindTo((e,t,r)=>{r[t]=e,f.args[t]=e})),r.cleanup.push(f.args.bindTo((e,t,n)=>{n[t]=e,r.args[t]=e}))),s.clear(),f.render(s.element))}}}}]),e}();e.RuleSet=l}),require.register("curvature/base/SetMap.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.SetMap=void 0;var a=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),function(e,t,r){(t=i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"_map",new Map)}return function(e,t,r){t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"getOne",value:function(e){var t=this.get(e);for(var r of t)return r}},{key:"add",value:function(e,t){var r=this._map.get(e);return r||this._map.set(e,r=new Set),r.add(t)}},{key:"remove",value:function(e,t){var r=this._map.get(e);if(r){var n=r.delete(t);return r.size||this._map.delete(e),n}}},{key:"values",value:function(){return new Set(...[...this._map.values()].map(e=>[...e.values()]))}}]),e}();e.SetMap=a}),require.register("curvature/base/Tag.js",function(e,t,r){"use strict";var n=t("./Bindable");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=void 0;var u=Symbol("CurrentStyle"),s=function(e){if(this.node)for(var t in e){var r=e[t]+"";this[u].has(t)&&this[u].get(t)===e[t]||("-"===t[0]?this.node.style.setProperty(t,r):this.node.style[t]=r,void 0===e[t]?this[u].delete(t):this[u].set(t,e[t]))}},c=function(e){return"function"==typeof this[e]?this[e]:this.node&&"function"==typeof this.node[e]?this[e]=((...t)=>this.node[e](...t)):"style"===e?this.proxy.style:this.node&&e in this.node?this.node[e]:this[e]},l=function(){function e(t,r,o,i,a){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t){var l=document.createRange().createContextualFragment(t);t=l.firstChild}this.element=n.Bindable.makeBindable(t),this.node=this.element,this.parent=r,this.direct=a,this.ref=o,this.index=i,this.cleanup=[],this[n.Bindable.OnAllGet]=c.bind(this),this[u]=new Map;var f=n.Bindable.make(s.bind(this));return Object.defineProperty(this,"style",{value:f}),this.proxy=n.Bindable.make(this),this.proxy.style.bindTo((e,t,r,n)=>{this[u].has(t)&&this[u].get(t)===e||(this.node.style[t]=e,n||void 0===e?this[u].delete(t):this[u].set(t,e))}),this.proxy.bindTo((e,r)=>{if("index"!==r)return r in t&&t[r]!==e&&(t[r]=e),!1}),this.proxy}return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"attr",value:function(e){for(var t in e)void 0===e[t]?this.node.removeAttribute(t):null===e[t]?this.node.setAttribute(t,""):this.node.setAttribute(t,e[t]);return this}},{key:"remove",value:function(){this.node&&this.node.remove(),n.Bindable.clearBindings(this);for(var e;e=this.cleanup.shift();)e();if(this.clear(),this.node){var t=new Event("cvDomDetached");this.node.dispatchEvent(t),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var e=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(e),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(e=!0){}},{key:"listen",value:function(e,t,r){var n=this.node;n.addEventListener(e,t,r);var o=()=>{n.removeEventListener(e,t,r)},i=()=>{o(),o=(()=>console.warn("Already removed!"))};return this.parent.onRemove(()=>i()),i}}]),e}();e.Tag=l}),require.register("curvature/base/Theme.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function s(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Theme=void 0;var f=function(){function e(t){a(this,e),c(this,"themes",[]),this.themes.push(...t)}return s(e,[{key:"getTemplate",value:function(e){for(var t in this.themes){var r=this.themes[t].getTemplate(e);if(r)return r}}},{key:"getView",value:function(e){for(var t in this.themes){var r=this.themes[t].getView(e);if(r)return r}}}]),e}(),p=function(){function e(t){a(this,e),this.key=t,this.viewMap=new Map,this.templateMap=new Map,this.fallbacks=[]}return s(e,[{key:"setFallback",value:function(...e){return this.fallbacks.push(...e),this}},{key:"setView",value:function(e,t){return this.viewMap.set(e,t),this}},{key:"getView",value:function(e){var t=this.resolve(e,"viewMap");return t?new t(e):null}},{key:"setTemplate",value:function(e,t){return this.templateMap.set(e,t),this}},{key:"getTemplate",value:function(e){return this.resolve(e,"templateMap")}},{key:"resolve",value:function(e,t){e.___object___&&e.isBound&&(e=e.___object___);var r=e.__proto__.constructor,n=this[t];if(n.has(r,e))return n.get(r);var i=null;for(var a of n){var u=o(a,2),s=u[0],c=u[1];e instanceof s&&(i=c)}if(!i)for(var l of this.fallbacks)if(i=l.resolve(e,t))return i;return i&&n.set(r,i),i}}],[{key:"get",value:function(...e){if(1>=e.length){var t=(e[0]||"")+"";return this.instances[t]||(this.instances[t]=new this(t)),this.instances[t]}var r=[];for(var n in e)r.push(this.get(e[n]));return new f(r)}}]),e}();e.Theme=p,c(p,"instances",{})}),require.register("curvature/base/Uuid.js",function(e,t,r){"use strict";var n;function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function i(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:t+""}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Uuid=void 0;var s=("object"===("undefined"==typeof globalThis?"undefined":u(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":u(window))?window:"object"===("undefined"==typeof self?"undefined":u(self))?self:void 0).crypto;n=Symbol.toPrimitive;var c=function(){function e(t=null,r=4){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"uuid",null),i(this,"version",4),t){if("string"!=typeof t&&!(t instanceof e)||!t.match(/[0-9A-Fa-f]{8}(-[0-9A-Fa-f]{4}){3}-[0-9A-Fa-f]{12}/))throw new Error('Invalid input for Uuid: "'.concat(t,'"'));this.version=r,this.uuid=t}else if(s&&"function"==typeof s.randomUUID)this.uuid=s.randomUUID();else{var n=s&&"function"==typeof s.randomUUID?()=>s.getRandomValues(new Uint8Array(1))[0]:()=>Math.trunc(256*Math.random());this.uuid="10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^n()&15>>e/4).toString(16))}Object.freeze(this)}return function(e,t,r){t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:n,value:function(){return this.toString()}},{key:"toString",value:function(){return this.uuid}},{key:"toJson",value:function(){return{version:this.version,uuid:this.uuid}}}]),e}();e.Uuid=c}),require.register("curvature/base/View.js",function(e,t,r){"use strict";var n=t("./Bindable"),o=t("./ViewList"),i=t("./Router"),a=t("./Uuid"),u=t("./Dom"),s=t("./Tag"),c=t("./Bag"),l=t("./RuleSet"),f=t("./Mixin"),p=t("../mixin/EventTargetMixin");function y(e){"@babel/helpers - typeof";return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:t+""}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,r)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;var j=Symbol("dontParse"),P=Symbol("expandBind"),S=Symbol("uuid"),_=function(e){function r(e={},t=null){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(o=b.call(this,e,t))[p.EventTargetMixin.Parent]=t,Object.defineProperty(w(o),"args",{value:n.Bindable.make(e)}),Object.defineProperty(w(o),S,{value:o.constructor.uuid()}),Object.defineProperty(w(o),"nodesAttached",{value:new c.Bag(()=>{})}),Object.defineProperty(w(o),"nodesDetached",{value:new c.Bag(()=>{})}),Object.defineProperty(w(o),"_onRemove",{value:new c.Bag(()=>{})}),Object.defineProperty(w(o),"cleanup",{value:[]}),Object.defineProperty(w(o),"parent",{value:t,writable:!0}),Object.defineProperty(w(o),"views",{value:new Map}),Object.defineProperty(w(o),"viewLists",{value:new Map}),Object.defineProperty(w(o),"withViews",{value:new Map}),Object.defineProperty(w(o),"tags",{value:n.Bindable.make({})}),Object.defineProperty(w(o),"nodes",{value:n.Bindable.make([])}),Object.defineProperty(w(o),"timeouts",{value:new Map}),Object.defineProperty(w(o),"intervals",{value:new Map}),Object.defineProperty(w(o),"frames",{value:[]}),Object.defineProperty(w(o),"ruleSet",{value:new l.RuleSet}),Object.defineProperty(w(o),"preRuleSet",{value:new l.RuleSet}),Object.defineProperty(w(o),"subBindings",{value:{}}),Object.defineProperty(w(o),"templates",{value:{}}),Object.defineProperty(w(o),"postMapping",{value:new Set}),Object.defineProperty(w(o),"eventCleanup",{value:[]}),Object.defineProperty(w(o),"unpauseCallbacks",{value:new Map}),Object.defineProperty(w(o),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(w(o),"rendered",{value:new Promise(e=>Object.defineProperty(w(o),"renderComplete",{value:e}))}),o.onRemove(()=>{o[p.EventTargetMixin.Parent]&&(o[p.EventTargetMixin.Parent]=null)}),o.controller=w(o),o.template="",o.firstNode=null,o.lastNode=null,o.viewList=null,o.mainView=null,o.preserve=!1,o.removed=!1,o.loaded=Promise.resolve(w(o)),o}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(r,f.Mixin.with(p.EventTargetMixin));var b=g(r);return function(e,t,r){t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(r,[{key:"_id",get:function(){return this[S]}},{key:"onFrame",value:function(e){var t=!1,r=()=>{t=!0},n=()=>{this.removed||t||(!this.paused&&e(Date.now()),requestAnimationFrame(n))};return requestAnimationFrame(()=>n(Date.now())),this.frames.push(r),r}},{key:"onNextFrame",value:function(e){return requestAnimationFrame(()=>e(Date.now()))}},{key:"onIdle",value:function(e){return requestIdleCallback(()=>e(Date.now()))}},{key:"onTimeout",value:function(e,t){var r={timeout:null,callback:null,time:e,fired:!1,created:(new Date).getTime(),paused:!1},n=()=>{t(),r.fired=!0,this.timeouts.delete(r.timeout)},o=setTimeout(n,e);return r.callback=n,r.timeout=o,this.timeouts.set(r.timeout,r),o}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){if(this.timeouts.has(e)){var t=this.timeouts.get(e);clearTimeout(t.timeout),this.timeouts.delete(t.timeout)}})},{key:"onInterval",value:function(e,t){var r=setInterval(t,e);return this.intervals.set(r,{timeout:r,callback:t,time:e,paused:!1}),r}},{key:"clearInterval",value:function(e){if(this.intervals.has(e)){var t=this.intervals.get(e);clearTimeout(t.timeout),this.intervals.delete(t.timeout)}}},{key:"pause",value:function(e){if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){for(var t of this.timeouts){var r=v(t,2);r[0];var n=r[1];n.fired?this.timeouts.delete(n.timeout):(clearTimeout(n.timeout),n.paused=!0,n.time=Math.max(0,n.time-(Date.now()-n.created)))}for(var o of this.intervals){var i=v(o,2);i[0];var a=i[1];clearInterval(a.timeout),a.paused=!0}}else{for(var u of this.timeouts){var s=v(u,2);s[0];var c=s[1];if(c.paused){if(c.fired){this.timeouts.delete(c.timeout);continue}c.timeout=setTimeout(c.callback,c.time),c.paused=!1}}for(var l of this.intervals){var f=v(l,2);f[0];var p=f[1];p.paused&&(p.timeout=setInterval(p.callback,p.time),p.paused=!1)}for(var y of this.unpauseCallbacks){(0,v(y,2)[1])()}this.unpauseCallbacks.clear()}for(var b of this.viewLists){var d=v(b,2);d[0],d[1].pause(!!e)}for(var h in this.tags)if(Array.isArray(this.tags[h]))for(var m in this.tags[h])this.tags[h][m].pause(!!e);else this.tags[h].pause(!!e)}},{key:"render",value:function(e=null,t=null,n=null){var o=globalThis.window.document;if(e instanceof r&&(e=e.firstNode.parentNode),t instanceof r&&(t=t.firstNode),this.firstNode)return this.reRender(e,t,n);this.dispatchEvent(new CustomEvent("render"));var i,a="object"===y(this.template)&&"function"==typeof this.template.cloneNode,u=a||r.templates.has(this.template);if(i=u?a?this.template.cloneNode(!0):r.templates.get(this.template).cloneNode(!0):o.createRange().createContextualFragment(this.template),u||a||r.templates.set(this.template,i.cloneNode(!0)),this.mainView||this.preRuleSet.apply(i,this),this.mapTags(i),this.mainView||this.ruleSet.apply(i,this),!0===globalThis.devMode?(this.firstNode=o.createComment("Template ".concat(this._id," Start")),this.lastNode=o.createComment("Template ".concat(this._id," End"))):(this.firstNode=o.createTextNode(""),this.lastNode=o.createTextNode("")),this.nodes.push(this.firstNode,...Array.from(i.childNodes),this.lastNode),this.postRender(e),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(i,this.lastNode);var s=e.getRootNode();if(s.isConnected)this.attached(s,e),this.dispatchAttached(s,e,n);else if(n){var c=()=>{var t=e.getRootNode();this.attached(t,e),this.dispatchAttached(t,e,n),n.removeEventListener("attached",c)};n.addEventListener("attached",c)}}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){var e=globalThis.window.CustomEvent;return this.dispatchEvent(new e("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(e,t,r){var n=globalThis.window.CustomEvent;for(var o of(this.dispatchEvent(new n("attached",{detail:{view:r||this,node:t,root:e,mainView:this}})),this.dispatchDomAttached(r),this.nodesAttached.items()))o(e,t)}},{key:"dispatchDomAttached",value:function(e){var t=globalThis.window,r=t.Node,n=t.CustomEvent;this.nodes.filter(e=>e.nodeType!==r.COMMENT_NODE).forEach(t=>{t.matches&&(t.dispatchEvent(new n("cvDomAttached",{target:t,detail:{view:e||this,mainView:this}})),u.Dom.mapTags(t,!1,t=>{t.matches&&t.dispatchEvent(new n("cvDomAttached",{target:t,detail:{view:e||this,mainView:this}}))}))})}},{key:"reRender",value:function(e,t,r){var n=globalThis.window.CustomEvent;if(this.dispatchEvent(new n("reRender"),{cancelable:!0,target:this,view:r})){var o=new DocumentFragment;if(this.firstNode.isConnected){var i=this.nodesDetached.items();for(var a in i)i[a]()}if(o.append(...this.nodes),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(o,this.lastNode),this.dispatchEvent(new n("reRendered"),{cancelable:!0,target:this,view:r});var u=e.getRootNode();u.isConnected&&(this.attached(u,e),this.dispatchAttached(u,e))}return this.nodes}}},{key:"mapTags",value:function(e){u.Dom.mapTags(e,!1,(e,t)=>{e[j]||(e.matches?e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=this.mapInterpolatableTag(e)).matches("[cv-template]")&&this.mapTemplateTag(e)||e).matches("[cv-slot]")&&this.mapSlotTag(e)||e).matches("[cv-prerender]")&&this.mapPrendererTag(e)||e).matches("[cv-link]")&&this.mapLinkTag(e)||e).matches("[cv-attr]")&&this.mapAttrTag(e)||e).matches("[cv-expand]")&&this.mapExpandableTag(e)||e).matches("[cv-ref]")&&this.mapRefTag(e)||e).matches("[cv-on]")&&this.mapOnTag(e)||e).matches("[cv-each]")&&this.mapEachTag(e)||e).matches("[cv-bind]")&&this.mapBindTag(e)||e).matches("[cv-with]")&&this.mapWithTag(e)||e).matches("[cv-if]")&&this.mapIfTag(e)||e).matches("[cv-view]")&&this.mapViewTag(e)||e:e=this.mapInterpolatableTag(e),e!==t.currentNode&&(t.currentNode=e))}),this.postMapping.forEach(e=>e())}},{key:"mapExpandableTag",value:function(e){var t=e[P];t&&(t(),e[P]=!1);var r=v(n.Bindable.resolve(this.args,e.getAttribute("cv-expand"),!0),2),o=r[0],i=r[1];return e.removeAttribute("cv-expand"),o[i]||(o[i]={}),o[i]=n.Bindable.make(o[i]),this.onRemove(e[P]=o[i].bindTo((t,r,n,o)=>o||void 0===t?void e.removeAttribute(r,t):null===t?void e.setAttribute(r,""):void e.setAttribute(r,t))),e}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(e){var t=e.getAttribute("cv-attr").split(/[,;]/).map(e=>e.split(":"));return e.removeAttribute("cv-attr"),r=>{var o=e.cloneNode(!0),i=function(){var e=t[a][1]||t[a][0],i=v(n.Bindable.resolve(r.args,e,!0),2),u=i[0],s=i[1],c=t[a][0];r.onRemove(u.bindTo(s,(e,t,r,n)=>n||void 0===e?void o.removeAttribute(c,e):null===e?void o.setAttribute(c,""):void o.setAttribute(c,e)))};for(var a in t)i();return o}}},{key:"mapInterpolatableTag",value:function(e){var t=this,o=this.interpolateRegex,i=globalThis.window,a=i.Node,u=i.document;if(e.nodeType===a.TEXT_NODE){var c=e.nodeValue;if(!this.interpolatable(c))return e;for(var l,f=0,b=function(){var o=l[2],i=!1,b=!1,d=o.split("|"),h=!1;if(1<d.length&&(h=t.stringTransformer(d.slice(1)),o=d[0]),"$$"===o.substr(0,2)&&(i=!0,b=!0,o=o.substr(2)),"$"===o.substr(0,1)&&(i=!0,o=o.substr(1)),"000"===o.substr(0,3))return expand=!0,o=o.substr(3),"continue";var m=c.substring(f,l.index);f=l.index+l[1].length;var g,w=u.createTextNode(m);w[j]=!0,e.parentNode.insertBefore(w,e),(g=i?u.createElement("div"):u.createTextNode(""))[j]=!0;var O=t.args,P=o;if(o.match(/\./)){var S=v(n.Bindable.resolve(t.args,o,!0),2);O=S[0],P=S[1]}if(e.parentNode.insertBefore(g,e),"object"!==y(O))return"break";var _=(O=n.Bindable.make(O)).bindTo(P,(n,o,u)=>{if(u[o]!==n&&(u[o]instanceof r||u[o]instanceof a||u[o]instanceof s.Tag)&&!u[o].preserve&&u[o].remove(),g.nodeValue="",b&&!(n instanceof r)){var c,l=null!==(c=n)&&void 0!==c?c:"";(n=new r(t.args,t)).template=l}if(h&&(n=h(n)),n instanceof r){n[p.EventTargetMixin.Parent]=t,n.render(e.parentNode,g,t);var f=()=>{n.preserve||n.remove()};t.onRemove(f),n.onRemove(()=>t._onRemove.remove(f))}else n instanceof a?(e.parentNode.insertBefore(n,g),t.onRemove(()=>n.remove())):n instanceof s.Tag?n.node?(e.parentNode.insertBefore(n.node,g),t.onRemove(()=>n.remove())):n.remove():(n instanceof Object&&n.__toString instanceof Function&&(n=n.__toString()),i?g.innerHTML=n:g.nodeValue=n);g[j]=!0});t.onRemove(_)};l=o.exec(c);){var d=b();if("continue"!==d&&"break"===d)break}var h=c.substring(f),m=u.createTextNode(h);m[j]=!0,e.parentNode.insertBefore(m,e),e.nodeValue=""}else if(e.nodeType===a.ELEMENT_NODE)for(var g=function(){if(!t.interpolatable(e.attributes[w].value))return"continue";for(var r,i=0,a=e.attributes[w].value,u=e.attributes[w],s={},c=[];r=o.exec(a);)c.push(a.substring(i,r.index)),s[r[2]]||(s[r[2]]=[]),s[r[2]].push(c.length),c.push(r[1]),i=r.index+r[1].length;c.push(a.substring(i));var l=function(){var r=t.args,o=f,i=f.split("|"),a=!1,l=f;if(1<i.length&&(a=t.stringTransformer(i.slice(1)),o=i[0]),o.match(/\./)){var p=v(n.Bindable.resolve(t.args,o,!0),2);r=p[0],o=p[1]}s[l];t.onRemove(r.bindTo(o,(r,n,i,f)=>{for(var p in a&&(r=a(r)),s)for(var y in s[l])c[s[l][y]]=i[p],n===o&&(c[s[l][y]]=r);t.paused?t.unpauseCallbacks.set(u,()=>e.setAttribute(u.name,c.join(""))):e.setAttribute(u.name,c.join(""))}))};for(var f in s)l()},w=0;w<e.attributes.length;w++)g();return e}},{key:"mapRefTag",value:function(e){var t=v(e.getAttribute("cv-ref").split(":"),3),r=t[0],n=t[1],o=void 0===n?null:n,i=t[2],a=void 0===i?null:i,u=s.Tag;o&&(u=this.stringToClass(o)),e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(()=>{e.___tag___=null,e.remove()});var c=this;this.viewList&&(c=this.viewList.parent);var l=new u(e,this,r,void 0,this);for(e.___tag___=l,this.tags[r]=l;c;){var f=this.args[a];if(void 0===f?c.tags[r]=l:(!c.tags[r]&&(c.tags[r]=[]),c.tags[r][f]=l),!c.parent)break;c=c.parent}return e}},{key:"mapBindTag",value:function(e){var t=e.getAttribute("cv-bind"),o=this.args,i=t,a=null;if(t.match(/\./)){var c=v(n.Bindable.resolve(this.args,t,!0),3);o=c[0],i=c[1],a=c[2]}o!==this.args&&(this.subBindings[t]=this.subBindings[t]||[],this.onRemove(this.args.bindTo(a,()=>{for(;this.subBindings.length;)this.subBindings.shift()()})));var l=!1;"$"===i.substr(0,1)&&(i=i.substr(1),l=!0);var f=!1,y=o.bindTo(i,(t,n,o,i,a)=>{if((a instanceof r||a instanceof Node||a instanceof s.Tag)&&a!==t&&a.remove(),["INPUT","SELECT","TEXTAREA"].includes(e.tagName)){var c=e.getAttribute("type");if(c&&"checkbox"===c.toLowerCase())e.checked=!!t;else if(c&&"radio"===c.toLowerCase())e.checked=t==e.value;else if("file"!==c)if("SELECT"===e.tagName){var y=()=>{for(var r=0;r<e.options.length;r++){e.options[r].value==t&&(e.selectedIndex=r)}};y(),this.nodesAttached.add(y)}else e.value=null==t?"":t;f&&e.dispatchEvent(new CustomEvent("cvAutoChanged",{bubbles:!0})),f=!0}else if(t instanceof r){for(var v of e.childNodes)v.remove();t[p.EventTargetMixin.Parent]=this,t.render(e,null,this)}else if(t instanceof Node)e.insert(t);else if(t instanceof s.Tag)e.append(t.node);else if(l){if(e.innerHTML!==t){if(t+="",e.innerHTML===t.substring(0,e.innerHTML.length))e.innerHTML+=t.substring(e.innerHTML.length);else{for(var b of e.childNodes)b.remove();e.innerHTML=t}u.Dom.mapTags(e,!1,e=>e[j]=!0)}}else if(e.textContent!==t){for(var d of e.childNodes)d.remove();e.textContent=t}});o!==this.args&&this.subBindings[t].push(y),this.onRemove(y);var b=e.getAttribute("type"),d=e.getAttribute("multiple"),h=t=>{if(t.target===e)if(b&&"checkbox"===b.toLowerCase())o[i]=!!e.checked&&t.target.getAttribute("value");else if(t.target.matches("[contenteditable=true]"))o[i]=t.target.innerHTML;else if("file"===b&&d){var r=Array.from(t.target.files),a=o[i]||n.Bindable.onDeck(o,i);if(a&&r.length){var u=function(e){if(r[e]!==a[e])return r[e].toJSON=(()=>({name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified})),a[e]=r[e],"break"};for(var s in r){if("break"===u(s))break}}else o[i]=r}else if("file"===b&&!d&&t.target.files.length){var c=t.target.files.item(0);c.toJSON=(()=>({name:c.name,size:c.size,type:c.type,date:c.lastModified})),o[i]=c}else o[i]=t.target.value};return"file"===b||"radio"===b?e.addEventListener("change",h):(e.addEventListener("input",h),e.addEventListener("change",h),e.addEventListener("value-changed",h)),this.onRemove(()=>{"file"===b||"radio"===b?e.removeEventListener("change",h):(e.removeEventListener("input",h),e.removeEventListener("change",h),e.removeEventListener("value-changed",h))}),e.removeAttribute("cv-bind"),e}},{key:"mapOnTag",value:function(e){return(e.getAttribute("cv-on")+"").split(";").map(e=>e.split(":")).forEach(t=>{var r=(t=t.map(e=>e.trim())).length,n=(t.shift()+"").trim(),o=((t.shift()||n)+"").trim(),i=((t.shift()||"")+"").trim(),a=[],u=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(o);u&&(o=u[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),u[2]&&(a=u[2].split(",").map(e=>e.trim()))),a.length||a.push("$event"),n&&1!==r||(n=o);var s=t=>{for(var r,n=this,i=function(){var e=n.controller;return"function"==typeof e[o]?(r=((...t)=>{e[o](...t)}),"break"):"function"==typeof n[o]?(r=((...e)=>{n[o](...e)}),"break"):n.parent?void(n=n.parent):"break"};n;){if("break"===i())break}var u=a.map(r=>{var o;return+r==r?r:"event"===r||"$event"===r?t:"$view"===r?n:"$controller"===r?controller:"$tag"===r?e:"$parent"===r?this.parent:"$subview"===r?this:r in this.args?this.args[r]:(o=/^['"]([\w-]+?)["']$/.exec(r))?o[1]:void 0});if("function"!=typeof r)throw new Error("".concat(o," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));r(...u)},c={};switch(i.includes("p")?c.passive=!0:i.includes("P")&&(c.passive=!1),i.includes("c")?c.capture=!0:i.includes("C")&&(c.capture=!1),i.includes("o")?c.once=!0:i.includes("O")&&(c.once=!1),n){case"_init":s();break;case"_attach":this.nodesAttached.add(s);break;case"_detach":this.nodesDetached.add(s);break;default:e.addEventListener(n,s,c),this.onRemove(()=>{e.removeEventListener(n,s,c)})}return[n,o,a]}),e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var r=r=>(r.preventDefault(),"http"===t.substring(0,4)||"//"===t.substring(0,2)?void globalThis.open(e.getAttribute("href",t)):void i.Router.go(e.getAttribute("href")));return e.addEventListener("click",r),this.onRemove(((e,t)=>()=>{e.removeEventListener("click",t),e=void 0,t=void 0})(e,r)),e.removeAttribute("cv-link"),e}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),r=globalThis.prerenderer||navigator.userAgent.match(/prerender/i);return e.removeAttribute("cv-prerender"),r&&(globalThis.prerenderer=globalThis.prerenderer||!0),("never"===t&&r||"only"===t&&!r)&&this.postMapping.add(()=>e.parentNode.removeChild(e)),e}},{key:"mapWithTag",value:function(e){var t=this,o=e.getAttribute("cv-with"),i=e.getAttribute("cv-carry"),a=e.getAttribute("cv-view");e.removeAttribute("cv-with"),e.removeAttribute("cv-carry"),e.removeAttribute("cv-view");var u=a?this.stringToClass(a):r,s=new DocumentFragment;[...e.childNodes].forEach(e=>s.appendChild(e));var c=[];i&&(c=i.split(",").map(e=>e.trim()));var l=this.args.bindTo(o,(r,o,i,a)=>{for(this.withViews.has(e)&&this.withViews.delete(e);e.firstChild;)e.removeChild(e.firstChild);var l=new u({},this);this.onRemove((e=>()=>{e.remove()})(l)),l.template=s;var f=function(){var e=t.args.bindTo(c[p],(e,t)=>{l.args[t]=e});l.onRemove(e),t.onRemove(()=>{e(),l.remove()})};for(var p in c)f();var v=function(){if("object"!==y(r))return"continue";var e=(r=n.Bindable.make(r)).bindTo(b,(e,t,r,n)=>{n?t in l.args&&delete l.args[t]:l.args[t]=e});l.args.bindTo(b,(e,t,n,o)=>{o?t in r&&delete r[t]:r[t]=e});t.onRemove(()=>{e(),r.isBound()||n.Bindable.clearBindings(r),l.remove()}),l.onRemove(()=>{e(),r.isBound()||n.Bindable.clearBindings(r)})};for(var b in r)v();l.render(e,null,this),this.withViews.set(e,l)});return this.onRemove(()=>{this.withViews.delete(e),l()}),e}},{key:"mapViewTag",value:function(e){var t=e.getAttribute("cv-view");e.removeAttribute("cv-view");var n=new DocumentFragment;[...e.childNodes].forEach(e=>n.appendChild(e));var o=t.split(":"),i=o.shift(),a=new(o.length?this.stringToClass(o[0]):r)(this.args,this);return this.views.set(e,a),this.views.set(i,a),this.onRemove(()=>{a.remove(),this.views.delete(e),this.views.delete(i)}),a.template=n,a.render(e,null,this),e}},{key:"mapEachTag",value:function(e){var t=e.getAttribute("cv-each"),i=e.getAttribute("cv-view");e.removeAttribute("cv-each"),e.removeAttribute("cv-view");var a=i?this.stringToClass(i):r,u=new DocumentFragment;[...e.childNodes].forEach(e=>u.appendChild(e));var s=v(t.split(":"),3),l=s[0],f=s[1],p=s[2],y=this.args,b=l;if(l.match(/\./)){var d=v(n.Bindable.resolve(this.args,l,!0),2);y=d[0],b=d[1]}var h=y.bindTo(b,(t,r,n,i,s)=>{t instanceof c.Bag&&(t=t.list),this.viewLists.has(e)&&this.viewLists.get(e).remove();var l=new o.ViewList(u,f,t,this,p,a),y=()=>l.remove();this.onRemove(y),l.onRemove(()=>this._onRemove.remove(y));var v=this.args.bindTo((e,t,r,n)=>{"_id"===t||(n?t in l.subArgs&&delete l.subArgs[t]:l.subArgs[t]=e)}),b=l.args.bindTo((e,t,r,n,o)=>{"_id"===t||"value"===t||"___"===(t+"").substring(0,3)||(n?delete this.args[t]:t in this.args&&(this.args[t]=e))});for(l.onRemove(v),l.onRemove(b),this.onRemove(v),this.onRemove(b);e.firstChild;)e.removeChild(e.firstChild);this.viewLists.set(e,l),l.render(e,null,this),"SELECT"===e.tagName&&l.reRender()});return this.onRemove(h),e}},{key:"mapIfTag",value:function(e){var t=e,o=t.getAttribute("cv-view"),i=t.getAttribute("cv-if"),a=t.getAttribute("cv-is"),s=!1,l=!1;t.removeAttribute("cv-view"),t.removeAttribute("cv-if"),t.removeAttribute("cv-is");var f=o?this.stringToClass(o):r;"!"===i.substr(0,1)&&(i=i.substr(1),s=!0),"?"===i.substr(0,1)&&(i=i.substr(1),l=!0);var p=new DocumentFragment;[...t.childNodes].forEach(e=>p.appendChild(e));var y=this,b=new DocumentFragment,d=new f(this.args,y);d.tags.bindTo((e,t)=>this.tags[t]=e,{removeWith:this}),d.template=p;var h=y.args,m=i;if(i.match(/\./)){var g=v(n.Bindable.resolve(y.args,i,!0),2);h=g[0],m=g[1]}d.render(b,null,this);var w=h.bindTo(m,(t,r)=>{var n=t;l&&(t=null!==t&&void 0!==t),t instanceof c.Bag&&(t=t.list),Array.isArray(t)&&(t=!!t.length),null!==a&&(t=n==a),s&&(t=!t),t?(e.appendChild(b),[...b.childNodes].forEach(e=>u.Dom.mapTags(e,!1,(e,t)=>{e.matches&&e.dispatchEvent(new CustomEvent("cvDomAttached",{target:e,detail:{view:d||this,mainView:this}}))}))):(d.nodes.forEach(e=>b.appendChild(e)),u.Dom.mapTags(b,!1,(e,t)=>{e.matches&&new CustomEvent("cvDomDetached",{target:e,detail:{view:d||this,mainView:this}})}))},{children:Array.isArray(h[m])});y.onRemove(w);return y.onRemove(()=>{w(),y._onRemove.remove(w)}),this.onRemove(()=>{d.remove(),y!==this&&y.remove()}),e}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");e.removeAttribute("cv-template");var n=e.innerHTML;return r.templates.has(n)||r.templates.set(n,document.createRange().createContextualFragment(e.innerHTML)),this.templates[t]=r.templates.get(n),this.postMapping.add(()=>e.remove()),e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),n=this.templates[t];if(!n){for(var o=this;o&&!(n=o.templates[t]);)o=o.parent;if(!n)return void console.error("Template ".concat(t," not found."))}for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return"string"==typeof n&&(!r.templates.has(n)&&r.templates.set(n,document.createRange().createContextualFragment(n)),n=r.templates.get(n)),e.appendChild(n.cloneNode(!0)),e}},{key:"postRender",value:function(e){}},{key:"attached",value:function(e){}},{key:"interpolatable",value:function(e){return!!(e+"").match(this.interpolateRegex)}},{key:"remove",value:function(e=!1){if(this.dispatchEvent(new CustomEvent("remove",{detail:{view:this},cancelable:!0}))){var t=()=>{for(var e in this.tags)Array.isArray(this.tags[e])?(this.tags[e]&&this.tags[e].forEach(e=>e.remove()),this.tags[e].splice(0)):(this.tags[e]&&this.tags[e].remove(),this.tags[e]=void 0);for(var t in this.nodes)this.nodes[t]&&this.nodes[t].dispatchEvent(new Event("cvDomDetached")),this.nodes[t]&&this.nodes[t].remove(),this.nodes[t]=void 0;this.nodes.splice(0),this.firstNode=this.lastNode=void 0};e?t():requestAnimationFrame(t);var r=this._onRemove.items();for(var n of r)n(),this._onRemove.remove(n);for(var o of this.cleanup)o&&o();for(var i of(this.cleanup.length=0,this.viewLists)){var a=v(i,2);a[0];a[1].remove()}for(var u of(this.viewLists.clear(),this.timeouts)){var s=v(u,2),c=(s[0],s[1]);clearTimeout(c.timeout),this.timeouts.delete(c.timeout)}for(var l of this.intervals)clearInterval(l);for(var f of(this.intervals.length=0,this.frames))f();this.frames.length=0,this.preRuleSet.purge(),this.ruleSet.purge(),this.removed=!0,this.dispatchEvent(new CustomEvent("removed",{detail:{view:this},cancelable:!0}))}}},{key:"findTag",value:function(e){for(var t in this.nodes){var r=void 0;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return new s.Tag(this.nodes[t],this,void 0,void 0,this);if(r=this.nodes[t].querySelector(e))return new s.Tag(r,this,void 0,void 0,this)}}}},{key:"findTags",value:function(e){var t=this.nodes.filter(t=>t.matches&&t.matches(e)),r=this.nodes.filter(e=>e.querySelectorAll).map(t=>[...t.querySelectorAll(e)]).flat().map(e=>new s.Tag(e,this,void 0,void 0,this))||[];return t.concat(r)}},{key:"onRemove",value:function(e){e instanceof Event||this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"stringTransformer",value:function(e){return t=>{for(var r in e){for(var n=this,o=e[r];n&&!n[o];)n=n.parent;if(!n)return;t=n[e[r]](t)}return t}}},{key:"stringToClass",value:function(e){if(r.refClasses.has(e))return r.refClasses.get(e);var n=e.split("/"),o=n[n.length-1],i=t(e);return r.refClasses.set(e,i[o]),i[o]}},{key:"preventParsing",value:function(e){e[j]=!0}},{key:"toString",value:function(){return this.nodes.map(e=>e.outerHTML).join(" ")}},{key:"listen",value:function(e,t,n,o){if("string"==typeof e&&(o=n,n=t,t=e,e=this),e instanceof r)return this.listen(e.nodes,t,n,o);if(Array.isArray(e))return e.map(e=>this.listen(e,t,n,o));if(e instanceof s.Tag)return this.listen(e.element,t,n,o);e.addEventListener(t,n,o);var i=()=>e.removeEventListener(t,n,o),a=()=>{i(),i=(()=>{})};return this.onRemove(()=>a()),a}},{key:"detach",value:function(){for(var e in this.nodes)this.nodes[e].remove();return this.nodes}}],[{key:"from",value:function(e,t={},r=null){var n=new this(t,r);return n.template=e,n}},{key:"isView",value:function(){return r}},{key:"uuid",value:function(){return new a.Uuid}}]),r}();e.View=_,Object.defineProperty(_,"templates",{value:new Map}),Object.defineProperty(_,"refClasses",{value:new Map})}),require.register("curvature/base/ViewList.js",function(e,t,r){"use strict";var n=t("./Bindable"),o=t("./SetMap"),i=t("./Bag");function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.ViewList=void 0;var c=function(){function e(t,r,o,u,s=null,c=null){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.removed=!1,this.args=n.Bindable.makeBindable(Object.create(null)),this.args.value=n.Bindable.makeBindable(o||Object.create(null)),this.subArgs=n.Bindable.makeBindable(Object.create(null)),this.views=[],this.cleanup=[],this.viewClass=c,this._onRemove=new i.Bag,this.template=t,this.subProperty=r,this.keyProperty=s,this.tag=null,this.downDebind=[],this.upDebind=[],this.paused=!1,this.parent=u,this.viewCount=0,this.rendered=new Promise(e=>{Object.defineProperty(this,"renderComplete",{configurable:!1,writable:!0,value:e})}),this.willReRender=!1,this.args.___before((e,t)=>{"bindTo"==t||(this.paused=!0)}),this.args.___after((e,t,r)=>{"bindTo"==t||(this.paused=1<r.length,this.reRender())});var l=this.args.value.bindTo((e,t,r,n)=>{if(!this.paused){var o=t;if("symbol"!==a(t))if(isNaN(t)&&(o="_"+t),n){for(var i in this.views[o]&&this.views[o].remove(!0),delete this.views[o],this.views)if(this.views[i]){if(isNaN(i)){this.views[i].args[this.keyProperty]=i.substr(1);continue}this.views[i].args[this.keyProperty]=i}}else this.views[o]?this.views[o]&&this.views[o].args&&(this.views[o].args[this.keyProperty]=t,this.views[o].args[this.subProperty]=e):this.viewCount?!1===this.willReRender&&(this.willReRender=requestAnimationFrame(()=>{this.willReRender=!1,this.reRender()})):this.reRender()}},{wait:0});this._onRemove.add(l),Object.preventExtensions(this)}return function(e,t,r){t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"render",value:function(e){var t=this,r=[],n=function(n){n.viewList=t,n.render(e,null,t.parent),r.push(n.rendered.then(()=>n))};for(var o of this.views)n(o);this.tag=e,Promise.all(r).then(e=>this.renderComplete(e)),this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[],r=new o.SetMap;for(var n in this.views){var i=this.views[n];if(void 0!==i){var a=i.args[this.subProperty];r.add(a,i),t[n]=i}else t[n]=i}var u=[],s=new Set;this.downDebind.length&&this.downDebind.forEach(e=>e&&e()),this.upDebind.length&&this.upDebind.forEach(e=>e&&e()),this.upDebind.length=0,this.downDebind.length=0;var c=1/0,l=1/0,f=function(){var t=!1,n=p;if(isNaN(n)?n="_"+p:(n+"").length&&(n=+n),void 0!==e.args.value[p]&&r.has(e.args.value[p])){var o=r.getOne(e.args.value[p]);o&&(o.args[e.keyProperty]=p,u[n]=o,s.add(o),t=!0,!isNaN(n)&&(c=Math.min(c,n),0<n&&(l=Math.min(l,n))),r.remove(e.args.value[p],o))}if(!t){var i=Object.create(null),a=u[n]=new e.viewClass(i,e.parent);isNaN(n)||(c=Math.min(c,n),0<n&&(l=Math.min(l,n))),u[n].template=e.template,u[n].viewList=e,u[n].args[e.keyProperty]=p,u[n].args[e.subProperty]=e.args.value[p],e.upDebind[n]=i.bindTo(e.subProperty,(t,r,n,o)=>{var a=i[e.keyProperty];return o?void delete e.args.value[a]:void(e.args.value[a]=t)}),e.downDebind[n]=e.subArgs.bindTo((e,t,r,n)=>n?void delete i[t]:void(i[t]=e));var f=()=>{e.upDebind.filter(e=>e).forEach(e=>e()),e.upDebind.length=0},y=()=>{e.downDebind.filter(e=>e).forEach(e=>e()),e.downDebind.length=0};a.onRemove(()=>{e._onRemove.remove(f),e._onRemove.remove(y),e.upDebind[n]&&e.upDebind[n](),e.downDebind[n]&&e.downDebind[n](),delete e.upDebind[n],delete e.downDebind[n]}),e._onRemove.add(f),e._onRemove.add(y),i[e.subProperty]=e.args.value[p]}};for(var p in this.args.value)f();for(var y in t)t[y]&&!s.has(t[y])&&t[y].remove(!0);if(Array.isArray(this.args.value)){var v=0===c&&void 0!==u[1]&&1<u.length||l===1/0?c:l,b=(e=0)=>{for(var t=u.length-e-1;t>v&&void 0===u[t];)t--;if(t<v)return Promise.resolve();if(u[t]===this.views[t]){if(u[t]&&!u[t].firstNode)return u[t].render(this.tag,u[t+1],this.parent),u[t].rendered.then(()=>b(+e+1));return 0===e||e%500?b(+e+1):new Promise(t=>requestAnimationFrame(()=>t(b(+e+1))))}return u[t].render(this.tag,u[t+1],this.parent),this.views.splice(t,0,u[t]),u[t].rendered.then(()=>b(e+1))};this.rendered=b()}else{var d=[],h=Object.assign(Object.create(null),u),m=e=>parseInt(e)===e-0,g=Object.keys(u).sort((e,t)=>m(e)&&m(t)?Math.sign(e-t):m(e)||m(t)?!m(e)&&m(t)?-1:m(e)&&!m(t)?1:void 0:0),w=function(t){return delete h[t],u[t].firstNode&&u[t]===e.views[t]?"continue":(u[t].render(e.tag,null,e.parent),void d.push(u[t].rendered.then(()=>u[t])))};for(var O of g)w(O);for(var j in h)delete this.args.views[j],h.remove(!0);this.rendered=Promise.all(d)}for(var P in u)isNaN(P)?u[P].args[this.keyProperty]=P.substr(1):u[P].args[this.keyProperty]=P;return this.views=Array.isArray(this.args.value)?[...u]:u,this.viewCount=u.length,s.clear(),this.willReRender=!1,this.rendered.then(()=>{this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value,tag:this.tag}}})),this.tag.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value,tag:this.tag}}}))}),this.rendered}}},{key:"pause",value:function(e=!0){for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var e in this.views)this.views[e]&&this.views[e].remove(!0);var t=this._onRemove.items();for(var r in t)this._onRemove.remove(t[r]),t[r]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&n.Bindable.clearBindings(this.subArgs),n.Bindable.clearBindings(this.args),this.removed=!0}}]),e}();e.ViewList=c}),require.register("curvature/form/ButtonField.js",function(e,t,r){"use strict";var n=t("./Field");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonField=void 0;var l=function(e){function t(e,n,o,i){var a;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),(a=r.call(this,e,n,o,i)).args.title=a.args.title||a.args.value,a._onClick=[];var u=a.args.attrs||{};return u.type=u.type||a.args.type,a.args.name=u.name=a.args.name||i,a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\ttype      = "').concat(u.type,'"\n\t\t\t\t\tvalue     = "[[value]]"\n\t\t\t\t\tcv-on     = "click:clicked(event)"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.Field);var r=s(t);return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"clicked",value:function(e){return this._onClick.map(t=>!1===t(e)).filter(e=>e).length?void("submit"==this.args.attrs.type&&(e.preventDefault(),e.stopPropagation())):void("submit"==this.args.attrs.type&&(e.preventDefault(),e.stopPropagation(),this.form.tags.formTag.element.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))))}},{key:"onClick",value:function(e){this._onClick.push(e)}}]),t}();e.ButtonField=l}),require.register("curvature/form/Field.js",function(e,t,r){"use strict";var n=t("../base/View");t("../base/Bindable");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Field=void 0;var l=function(e){function t(e,n,o,i){var a,u,s,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=Object.assign({},e);(c=r.call(this,l,o)).args.title=null!==(a=c.args.title)&&void 0!==a?a:i,c.args.value=null!==(u=c.args.value)&&void 0!==u?u:"",c.value=null!==(s=c.args.value)&&void 0!==s?s:"",c.skeleton=l,c.disabled=null,c.args.valueString="",c.form=n,c.key=i,c.ignore=!!c.args.attrs&&(c.args.attrs["data-cv-ignore"]||!1);var f="",p=c.args.attrs||{};p.type=p.type||l.type||null,c.args.name=p.name=p.name||c.args.name||i,"checkbox"==p.type&&(f='value = "1"'),c.template='\n\t\t\t<label\n\t\t\t\tfor           = "'.concat(c.getName(),'"\n\t\t\t\tdata-type     = "').concat(p.type||"text",'"\n\t\t\t\tcv-ref        = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(c.getName(),'"\n\t\t\t\t\ttype      = "').concat(p.type||"text",'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t').concat(f,'\n\t\t\t\t/>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t');var y=null;return c.args.bindTo("value",(e,t)=>{if(!isNaN(e)&&null!==e&&e.length&&e==+e&&e.length===(+e+"").length&&(e=+e),c.value=e,y!=t){if(y=i,c.args.valueString=JSON.stringify(e||"",null,4),c.valueString=c.args.valueString,"file"==p.type&&c.tags.input&&c.tags.input.element.files&&c.tags.input.element.length)if(c.tags.input.node.removeAttribute("title"),p.multiple){var r=Array.from(c.tags.input.element.files);if(c.parent.args.value[t]&&r.length){for(var n in r)r[n]!==c.parent.args.value[i][n]&&(c.parent.args.value[i]=r);c.parent.args.value.splice(r.length)}else c.parent.args.value[i]=r}else c.parent.args.value[i]=c.tags.input.element.files[0];else"file"==p.type&&c.tags.input?!e&&c.tags.input?(c.tags.input.node.value=null,p.placeholder?c.tags.input.node.setAttribute("title",p.placeholder):c.tags.input.node.removeAttribute("title")):e instanceof File&&c.tags.input.node.setAttribute("title",e.name):(c.parent.args.value||(c.parent.args.value={}),c.parent.args.value[i]=e);c.args.errors=[],y=null}}),c.parent.args.value[c.key]=c.args.value,c.parent.args.value.bindTo(i,(e,t)=>{if(y!=t){if(y=t,"file"!=p.type)c.args.value=e;else if(c.tags.input&&c.tags.input.element.files&&c.tags.input.element.files.length)if(p.multiple){var r=Array.from(c.tags.input.element.files);if(c.parent.args.value[i]&&r.length){for(var n in r)r[n]!==c.parent.args.value[i][n]&&(c.parent.args.value[i]=r);c.parent.args.value[i].splice(r.length)}else c.parent.args.value[i]=r}else c.parent.args.value[i]=c.tags.input.element.files[0];else c.args.value=e;y=null}}),c}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.View);var r=s(t);return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"disable",value:function(){this.hasChildren(),this.disabled="disabled"}},{key:"enable",value:function(){this.hasChildren(),this.disabled=!1}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(e=!0){if(this.tags.input)return this.tags.input.element.getAttribute("name");var t=this.key;if(e){for(var r=this.parent,n=[t];r&&r.array&&void 0!==r.key;)n.unshift(r.key),r=r.parent;t=n.shift(),n.length&&(t+="[".concat(n.join("]["),"]"))}return t}}]),t}();e.Field=l}),require.register("curvature/form/FieldSet.js",function(e,t,r){"use strict";var n=t("./Field"),o=t("./Form");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:t+""}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}(this,r)}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FieldSet=void 0;var p=function(e){function t(e,n,i,a){var u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=(u=r.call(this,e,n,i,a)).args.attrs||{};return s.type=s.type||"fieldset",u.array=!1,(e.array||s["data-array"]||s["data-multi"])&&(u.array=s["data-array"]=!0),u.args.value={},u.args.fields=o.Form.renderFields(e.children,l(u)),u.fields=u.args.fields,u.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(u.getName(),'"\n\t\t\t\tdata-type  = "').concat(s.type,'"\n\t\t\t\tdata-multi = "').concat(s["data-multi"]?"true":"false",'"\n\t\t\t\tcv-ref     = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<fieldset\n\t\t\t\t\tname   = "').concat(u.getName(),'"\n\t\t\t\t\tcv-ref = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand="attrs"\n\t\t\t\t\tcv-each = "fields:field"\n\t\t\t\t>\n\t\t\t\t\t[[field]]\n\t\t\t\t</fieldset>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),u}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,n.Field);var r=c(t);return function(e,t,r){t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}},{key:"wrapSubfield",value:function(e){return e}}]),t}();e.FieldSet=p}),require.register("curvature/form/FileField.js",function(e,t,r){"use strict";var n=t("./Field");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FileField=void 0;var l=function(e){function t(e,n,o,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=(a=r.call(this,e,n,o,i)).args.attrs||{};return u.type=u.type||a.args.type||"file",a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\tname    = "').concat(a.getName(),'"\n\t\t\t\t\ttype    = "').concat(u.type,'"\n\t\t\t\t\tcv-bind = "value"\n\t\t\t\t\tcv-ref  = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t\t<span style = "display:none" cv-if = "value">[[[value]]]</span>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.Field);var r=s(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.FileField=l}),require.register("curvature/form/Form.js",function(e,t,r){"use strict";var n=t("../base/View"),o=t("./Field"),i=t("./FieldSet"),a=t("./SelectField"),u=t("./RadioField"),s=t("./HtmlField"),c=t("./HiddenField"),l=t("./ButtonField"),f=t("./TextareaField"),p=t("./multiField/View"),y=t("../base/Bindable");function v(e){"@babel/helpers - typeof";return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:t+""}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Form=void 0;var j=function(e){function t(e,n={}){var o;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),(o=r.call(this,{})).args.flatValue=o.args.flatValue||{},o.args.value=o.args.value||{},o.args.method=e._method||"GET",o.args.classes=o.args.classes||[],o.skeleton=e,o.args.bindTo("classes",e=>{o.args._classes=e.join(" ")}),o.action="",o.template='\n\t\t\t<form\n\t\t\t\tclass     = "[[_classes]]"\n\t\t\t\tmethod    = "[[method]]"\n\t\t\t\tenctype   = "multipart/form-data"\n\t\t\t\tcv-on     = "submit:submit(event)"\n\t\t\t\tcv-ref    = "formTag:curvature/base/Tag"\n\t\t\t\tcv-each   = "fields:field"\n\t\t\t\tcv-expand = "attrs"\n\t\t\t>\n\t\t\t\t[[field]]\n\t\t\t</form>\n\t\t',o.args.fields=t.renderFields(e,w(o),n),o.fields=o.args.fields;var i=y.Bindable.makeBindable(w(o));return o.args.bindTo("value",e=>{i.value=e}),o.args.bindTo("valueString",e=>{i.json=e}),g(o,i)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,n.View);var r=m(t);return function(e,t,r){t&&b(e.prototype,t),r&&b(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"submit",value:function(e){this.args.valueString=JSON.stringify(this.args.value,null,4),this.dispatchEvent(new CustomEvent("submit",{details:{view:this}}))||(e.preventDefault(),e.stopPropagation())}},{key:"buttonClick",value:function(){}},{key:"formData",value:function(e=null,t=null,r=[]){for(var n in e||(e=new FormData),t||(t=this),t.args.fields)if(!t.args.fields[n]||!t.args.fields[n].disabled){var o=r.slice(0);if(o.push(n),t.args.fields[n]&&t.args.fields[n].hasChildren())this.formData(e,t.args.fields[n],o);else if(t.args.fields[n]){var i=t.args.fields[n].getName();if("file"==t.args.fields[n].args.type&&t.args.fields[n].tags.input.element.files&&t.args.fields[n].tags.input.element.files.length)if(t.args.fields[n].args.attrs.multiple)for(var a=t.args.fields[n].tags.input.element.files,u=0;u<a.length;u++)a[u]&&e.append(i+"[]",a[u]);else t.args.fields[n].tags.input.element.files[0]&&e.append(i,t.args.fields[n].tags.input.element.files[0]);else("file"!==t.args.fields[n].args.type||t.args.fields[n].args.value)&&e.append(i,void 0===t.args.fields[n].args.value?"":t.args.fields[n].args.value)}}return e}},{key:"queryString",value:function(e={}){var t=[];for(var r in this.args.flatValue)e[r]=e[r]||this.args.flatValue[r];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}},{key:"populate",value:function(e){for(var t in e)this.args.value[t]=e[t]}},{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}}],[{key:"renderFields",value:function(e,r=null,n={}){var v={},b=function(){if(v[d])return"continue";if("_"==d.substr(0,1))return"continue";var b=null,h=null;if(r&&(h=r instanceof t?r:r.form),n&&e[d].name in n)b=new n[e[d].name](e[d],h,r,d);else switch(e[d].type){case"fieldset":b=e[d].attrs&&e[d].attrs["data-multi"]?new p.View(e[d],h,r,d):new i.FieldSet(e[d],h,r,d);break;case"select":b=new a.SelectField(e[d],h,r,d);break;case"radios":b=new u.RadioField(e[d],h,r,d);break;case"html":b=new s.HtmlField(e[d],h,r,d);break;case"submit":case"button":b=new l.ButtonField(e[d],h,r,d);break;case"hidden":b=new c.HiddenField(e[d],h,r,d);break;case"textarea":b=new f.TextareaField(e[d],h,r,d);break;default:b=new o.Field(e[d],h,r,d)}v[d]=y.Bindable.make(b);var m=b.key;b.args.bindTo("value",(e,t,n,o)=>{if(!isNaN(e)&&null!==e&&e.length&&e==+e&&e.length===(+e+"").length&&(e=+e),("html"!=n.type||n.contentEditable)&&"fieldset"!=n.type){if(n.disabled)return void delete h.args.flatValue[m];n.attrs=n.attrs||{};n.attrs.multiple;var i=Array.isArray(e),a=r.args.value[m];if(n.attrs.multiple&&i&&Array.isArray(a))for(var u in e)e[u]!==r.args.value[m][u]&&(r.args.value[m][u]=e[u]),r.args.value[m].splice(e.length);else r.args.value[m]=e;h.args.flatValue[m]=e,h.args.valueString=JSON.stringify(h.args.value,null,4)}}),b.render()};for(var d in e)b();return v}},{key:"_updateFields",value:function(e,t){for(var r in e.args.fields){var n=e.args.fields[r];t[r]&&(t[r].value&&(n.args.value=t[r].value),t[r].errors&&(n.args.errors=t[r].errors),t[r].title&&(n.args.title=t[r].title),t[r].options&&(n.args.options=t[r].options),t[r].attrs&&(n.args.attrs=t[r].attrs),n.children&&t[r].children&&this._updateFields(n,t[r].children))}}}]),t}();e.Form=j}),require.register("curvature/form/HiddenField.js",function(e,t,r){"use strict";var n=t("./Field");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.HiddenField=void 0;var l=function(e){function t(e,n,o,i){var a;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.type="hidden";var u=(a=r.call(this,e,n,o,i)).args.attrs||{};return a.args.type=u.type="hidden",a.args.name=u.name=u.name||a.args.name||i,a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tstyle     = "display:none"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\t\ttype      = "hidden"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.Field);var r=s(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.HiddenField=l}),require.register("curvature/form/HtmlField.js",function(e,t,r){"use strict";var n=t("./Field");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.HtmlField=void 0;var l=function(e){function t(e,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=r.call(this,e,n,o,i)).key=i,a.args.tagName=a.args.tagName||"div",a.args.displayValue=a.args.value,a.args.attrs=a.args.attrs||{},a.ignore=a.args.attrs["data-cv-ignore"]||!1,a.args.contentEditable=a.args.attrs.contenteditable||!1,a.args.bindTo("value",e=>{a.tags.input&&a.tags.input.element!==document.activeElement&&(a.args.displayValue=e)}),a.template="<".concat(a.args.tagName,'\n\t\t\tname            = "').concat(a.getName(),'"\n\t\t\tcv-ref          = "input:curvature/base/Tag"\n\t\t\tcontenteditable = "[[contentEditable]]"\n\t\t\tcv-expand       = "attrs"\n\t\t\tcv-bind         = "$displayValue"\n\t\t\tcv-on           = "input:inputProvided(event);"\n\t\t></').concat(a.args.tagName,">"),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.Field);var r=s(t);return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"inputProvided",value:function(e){this.args.value=e.target.innerHTML}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){return this.key}}]),t}();e.HtmlField=l}),require.register("curvature/form/RadioField.js",function(e,t,r){"use strict";var n=t("./Field");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.RadioField=void 0;var l=function(e){function t(e,n,o,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=(a=r.call(this,e,n,o,i)).args.attrs||{};return a.args.name=u.name=u.name||a.args.name||i,a.args.value=a.args.value||"",a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each  = "options:option:optionText"/>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname      = "').concat(a.args.name,'"\n\t\t\t\t\t\t\ttype      = "radio"\n\t\t\t\t\t\t\tvalue     = "[[option]]"\n\t\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t\t\tcv-on     = "change:changed(event)"\n\t\t\t\t\t/>\n\t\t\t\t\t\t[[optionText]]\n\t\t\t\t\t</label>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.Field);var r=s(t);return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"getLabel",value:function(){for(var e in this.args.options)if(this.args.options[e]==this.args.value)return e}},{key:"changed",value:function(e){this.args.value=e.target.value}},{key:"postRender",value:function(){this.args.bindTo("value",e=>this.selectOptionByValue(e)),this.args.options.bindTo(()=>this.selectOptionByValue(this.args.value),{frame:1})}},{key:"selectOptionByValue",value:function(e){this.findTags("input").forEach(t=>{t.value==e&&(t.checked=!0)})}}]),t}();e.RadioField=l}),require.register("curvature/form/SelectField.js",function(e,t,r){"use strict";var n=t("./Field");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.SelectField=void 0;var l=function(e){function t(e,n,o,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=(a=r.call(this,e,n,o,i)).args.attrs||{};return a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type||"select",'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<select\n\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-each   = "options:option:optionText"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t\t\t<option value = "[[option]]">[[optionText]]</option>\n\t\t\t\t</select>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.Field);var r=s(t);return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"postRender",value:function(){this.args.bindTo("value",e=>this.selectOptionByValue(e)),this.args.options.bindTo(()=>this.selectOptionByValue(this.args.value),{frame:1})}},{key:"selectOptionByValue",value:function(e){var t=this.tags.input.element;for(var r of t.options)r.value==e&&(t.selectedIndex=r.index)}},{key:"getLabel",value:function(){for(var e in this.args.options)if(this.args.options[e]==this.args.value)return e}}]),t}();e.SelectField=l}),require.register("curvature/form/TextareaField.js",function(e,t,r){"use strict";var n=t("./Field");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.TextareaField=void 0;var l=function(e){function t(e,n,o,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=(a=r.call(this,e,n,o,i)).args.attrs||{};return u.type=u.type||"textarea",a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<textarea\n\t\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t></textarea>\n\t\t\t\t<cv-template cv-if = "attrs.data-caption">\n\t\t\t\t\t<p>[[attrs.data-caption]]</p>\n\t\t\t\t</cv-template>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.Field);var r=s(t);return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.TextareaField=l}),require.register("curvature/form/multiField/CreateForm.js",function(e,t,r){"use strict";var n=t("./FormWrapper");t("../../form/HiddenField");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(3>arguments.length?e:r):o.value}}).apply(this,arguments)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.CreateForm=void 0;var f=function(e){function t(e,n,o="GET",i={}){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=r.call(this,e,n,"POST",i||{})).creating=!!e.publicId,a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,n.FormWrapper);var r=c(t);return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"onLoad",value:function(e){for(var r in e.args.fields)if(e.args.fields[r].tags.input&&"hidden"!=e.args.fields[r].args.attrs.type){e.args.fields[r].tags.input.element.focus();break}u(l(t.prototype),"onLoad",this).call(this,e)}},{key:"onRequest",value:function(){return this.args.view.args.loading=!0,this.args.view.args.classes+=" loading",u(l(t.prototype),"onRequest",this).call(this)}},{key:"onResponse",value:function(e){return this.args.view.args.loading=!1,this.args.view.args.classes="",e.body?(this.args.wrapper?this.args.wrapper.refresh(e.body):this.args.view.addRecord(e.body),this.args.view.args.creating="",void u(l(t.prototype),"onResponse",this).call(this,e)):void u(l(t.prototype),"onResponse",this).call(this,e)}}]),t}();e.CreateForm=f}),require.register("curvature/form/multiField/Form.js",function(e,t,r){"use strict"}),require.register("curvature/form/multiField/FormWrapper.js",function(e,t,r){"use strict";var n=t("../../base/Repository"),o=t("../../form/Form"),i=t("../../toast/Toast"),a=(t("../../toast/ToastAlert"),t("../../base/View")),u=t("../../base/Router");function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:t+""}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FormWrapper=void 0;var v=function(e){function t(e,i,a="GET",u={}){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=r.call(this,e)).path=i,s.args.method=a,s.args.action=s.args.action||null,s.args.form=null,s.args.title=null,s.args.class="",s.template='\n\t\t\t<div class = "form constrict [[class]]">\n\t\t\t\t<div cv-if = "title"><label>[[title]]</label></div>\n\t\t\t\t[[form]]\n\t\t\t</div>\n\t\t',s._onLoad=[],s._onSubmit=[],s._onRender=[],s._onRequest=[],s._onError=[],s._onResponse=[],i instanceof o.Form?s.loadForm(form,u):n.Repository.request(i).then(e=>e&&e.meta&&e.meta.form&&e.meta.form instanceof Object?(s.loadForm(new o.Form(e.meta.form,u)),void s.onLoad(s.args.form,e.body)):void console.warn("Cannot render form with ",e)),s}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,a.View);var r=p(t);return function(e,t,r){t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"loadForm",value:function(e){this.args.form=e,this.args.form.addEventListener("submit",t=>{t&&(t.preventDefault(),t.stopPropagation());var r=e.tags.formTag.element,o=r.getAttribute("action")||this.args.action||this.path,i=r.getAttribute("method")||this.args.method,a=e.args.flatValue;if("GET"==(i=i.toUpperCase())){var s={};for(var c in this.args.content&&this.args.content.args&&(this.args.content.args.page=0),s.page=0,a)"api"!=c&&(s[c]=a[c]);this.onRequest(s).then(()=>{this.onResponse({}),u.Router.go(o+"?"+u.Router.queryToString(s)),this.update(s)}).catch(e=>{this.onRequestError(e)})}else if("POST"==i){var l=e.formData();for(var f of l.entries());var p=this.onRequest(l);p&&p.then(()=>{n.Repository.request(o,{api:"json"},l,!1,{progressDown:e=>{this.progressDown(e)},progressUp:e=>{this.progressUp(e)}}).then(e=>{this.onResponse(e)}).catch(e=>{this.onRequestError(e)})})}})}},{key:"onRequest",value:function(e){var t=[];for(var r in this._onRequest){var n=this._onRequest[r](e,this);n&&t.push(n)}return 0==t.length?Promise.resolve():Promise.all(t)}},{key:"onRequestError",value:function(e){for(var t in this._onError)this._onError[t](e,this);if(e.messages)for(var r in e.messages)i.Toast.instance().alert(e.body&&e.body.id?"Success!":"Error!",e.messages[r],3500)}},{key:"onResponse",value:function(e){for(var t in this._onResponse)this._onResponse[t](e,this);if(e.messages)for(var r in e.messages)i.Toast.instance().alert(e.body&&e.body.id?"Success!":"Error!",e.messages[r],3500)}},{key:"onLoad",value:function(e,t){for(var r in this._onLoad)this._onLoad[r](this,e,t)}},{key:"customFields",value:function(){return{}}},{key:"submit",value:function(){}},{key:"progressUp",value:function(e){console.log(e.loaded,e.total,e.loaded/e.total)}},{key:"progressDown",value:function(e){console.log(e.loaded,e.total,e.loaded/e.total)}}]),t}();e.FormWrapper=v}),require.register("curvature/form/multiField/SearchForm.js",function(e,t,r){"use strict";var n=t("../../base/Config"),o=t("./FormWrapper"),i=t("../../form/HiddenField"),a=t("../../base/Repository");function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:t+""}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(3>arguments.length?e:r):o.value}}).apply(this,arguments)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.SearchForm=void 0;var v=n.Config.get("backend")||"//",b=function(e){function t(e,n,o="GET",a={}){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(u=r.call(this,e,n,"POST",{search:i.HiddenField})).superTemplate=u.template,u.args.records=[],u.selected=null,u.template="\n\t\t\t".concat(u.superTemplate,'\n\t\t\t<div cv-each = "records:record:r" class = "dropdown-results">\n\t\t\t\t<div\n\t\t\t\t\tcv-on         = "click:select(event)"\n\t\t\t\t\tdata-index    = "[[r]]"\n\t\t\t\t\tdata-publicId = "[[record.publicId]]"\n\t\t\t\t\tclass         = "[[record.classes]]"\n\t\t\t\t>\n\t\t\t\t\t[[record.title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'),u}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,o.FormWrapper);var r=p(t);return function(e,t,r){t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"onLoad",value:function(e){for(var r in e.args.fields)if(e.args.fields[r].tags.input&&"hidden"!=e.args.fields[r].args.attrs.type){e.args.fields[r].tags.input.element.focus();break}e.args.flatValue.bindTo("keyword",e=>{this.args.records=[],this.selected=null,e&&(console.log(this.path,e),a.Repository.request(v+this.path,{keyword:e}).then(t=>{console.log(t.body),t.body&&(this.args.records=t.body.map(t=>(t.classes="",t.title==e&&(t.classes="selected",this.selected=t),t)))}))}),l(y(t.prototype),"onLoad",this).call(this,e)}},{key:"onRequest",value:function(){return l(y(t.prototype),"onRequest",this).call(this)}},{key:"onResponse",value:function(e){l(y(t.prototype),"onResponse",this).call(this,e)}},{key:"select",value:function(e){var t=e.target.getAttribute("data-index"),r=(e.target.getAttribute("data-publicId"),this.args.records[t]);return console.log(r),this.args.view.addRecord(r),void this.args.view.addButtonClicked()}},{key:"onSubmit",value:function(e,t){return t.preventDefault(),t.stopPropagation(),this.selected&&(this.args.view.addRecord(this.selected),this.args.view.addButtonClicked()),!1}}]),t}();e.SearchForm=b}),require.register("curvature/form/multiField/View.js",function(e,t,r){"use strict";var n=t("../../base/Config"),o=t("../../form/Form"),i=t("../../form/FieldSet"),a=t("./CreateForm"),u=t("./SearchForm"),s=(t("./FormWrapper"),t("./Wrapper"));function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:t+""}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,r)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;var d=function(e){function t(e,n,o,i){var a;for(var u in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=r.call(this,e,n,o,i)).args._fields=[],a.dragging=!1,a.dropping=!1,a.args.fields)a.args._fields[+u+1]=a.wrapSubfield(a.args.fields[u]);return a.args.fields[-1].disable(),a.args._fields[0].addEventListener("attach",e=>e.preventDefault()),a.args.creating="",a.args.fieldType="",a.args.createForm=a.args.createForm||"",a.args.searchForm=a.args.searchForm||"",a.args.createFormReady=!1,a.setCreateForm({view:v(a)}),a.args.loader="...",a.args.addIcon="&#215;",a.args.addIcon="a",a.args.addIcon="+",a.args.draggable="true",a.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(a.args.name,'"\n\t\t\t\tdata-type  = "').concat(a.args.attrs.type,'"\n\t\t\t\tdata-multi = "').concat(a.args.attrs["data-multi"]?"true":"false",'"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\n\t\t\t\t<fieldset\n\t\t\t\t\tname  = "').concat(a.args.name,'"\n\t\t\t\t\tclass = "multi-field [[creating]] [[fieldType]]"\n\t\t\t\t>\n\n\t\t\t\t\t<div class = "record-list" cv-each = "_fields:field:f">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass     = "single-record"\n\t\t\t\t\t\t\tdata-for  = "[[f]]"\n\t\t\t\t\t\t>[[field]]</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = "overlay create">\n\t\t\t\t\t\t<div class = "form constrict">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcv-on = "click:addButtonClicked(event)"\n\t\t\t\t\t\t\t\tclass = "bubble bottom left-margin close"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t&#215;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t[[createForm]]\n\t\t\t\t\t\t[[searchForm]]\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = "overlay loading">\n\t\t\t\t\t\t[[loader]]\n\t\t\t\t\t</div>\n\t\t\t\t\t<div cv-if = "createFormReady" class="add-button-holder">\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcv-on = "click:addButtonClicked(event)"\n\t\t\t\t\t\t\tclass = "bubble bottom left-margin add"\n\t\t\t\t\t\t\ttab-index = "0"\n\t\t\t\t\t\t>[[addIcon]]</div>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t</fieldset>\n\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,i.FieldSet);var r=y(t);return function(e,t,r){t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"setCreateForm",value:function(e){var t="";n.Config.get("backend")&&(t=n.Config.get("backend")),!1!==this.args.attrs["data-create-endpoint"]&&void 0!==this.args.attrs["data-create-endpoint"]?(this.args.createForm=new a.CreateForm(Object.assign({},e),this.args.attrs["data-create-endpoint"]?t+this.args.attrs["data-create-endpoint"]:e.publicId?t+"".concat(this.args.attrs["data-endpoint"],"/").concat(e.publicId,"/edit"):t+"".concat(this.args.attrs["data-endpoint"],"/create")),this.args.createForm._onLoad.push(()=>{this.args.createFormReady=!0})):this.args.createFormReady=!0,this.args.attrs["data-endpoint"]&&(this.args.searchForm=new u.SearchForm(Object.assign({},e),t+this.args.attrs["data-endpoint"]))}},{key:"wrapSubfield",value:function(e){return new s.Wrapper({field:e,parent:this})}},{key:"addButtonClicked",value:function(){this.args.creating||(this.args.creating="creating")}},{key:"addRecord",value:function(e){for(var t in this.args.creating="",Array.isArray(e)||(e=[e]),e){var r;this.args.fields[-1].constructor;var n=Object.assign({},this.args.fields[-1].skeleton),i=Object.values(this.args.fields).length-1;n=this.cloneSkeleton(n),(n=this.correctNames(n,i)).attrs=null!==(r=n.attrs)&&void 0!==r?r:{},n.attrs["data-array"]=!0;var a={};a[i]=n;var u=o.Form.renderFields(a,this)[i];this.args.fields[i]=u;var s=this.wrapSubfield(u);u.args.value.id=e[t].id||"",u.args.value.class=e[t].class||"",u.args.value.title=e[t].title||"",u.args.value.key=this.args._fields.length,console.log(this.args._fields),this.args._fields.push(s),s.refresh(e[t])}}},{key:"editRecord",value:function(e,t){this.setCreateForm({view:this,publicId:e.publicId,wrapper:t}),this.args.creating=this.args.creating?"":"creating"}},{key:"deleteImage",value:function(e){console.log(e,this.args.fields),this.args.fields[e].disable(),this.args._fields[e].args.classes="deleted"}},{key:"undeleteImage",value:function(e){this.args.fields[e].enable(),this.args._fields[e].args.classes=""}},{key:"cloneSkeleton",value:function(e,t=0){var r={};for(var n in Array.isArray(e)&&(r=[]),e)if("fields"!=n){if(!e[n]||"object"!==c(e[n])){r[n]=e[n];continue}r[n]=Object.assign({},this.cloneSkeleton(e[n],t+1))}return r}},{key:"correctNames",value:function(e,t){if(e.name=e.name.replace(/\[-1\]/,"[".concat(t,"]")),e.attrs.name=e.name,"children"in e)for(var r in e.children)e.children[r]=this.correctNames(e.children[r],t);return e}},{key:"drag",value:function(e){this.dragging=e.target}},{key:"dragOver",value:function(e){if(!this.dragging)return!1;for(var t=e.target;t&&!t.matches('[draggable="true"]');)t=t.parentNode;t&&(this.dropping=t,e.preventDefault())}},{key:"drop",value:function(e){e.stopPropagation();var t=this.dragging.querySelector("label"),r=this.dropping.querySelector("label"),n=t.getAttribute("for"),o=r.getAttribute("for"),i=this.extractIndex(n),a=this.extractIndex(o);if(i==a||i==a-1)return this.dragging=!1,void(this.dropping=!1);var u,s,c=t.querySelectorAll('[name^="'+n+'"]'),l=t.querySelectorAll('[for^="'+n+'"]'),f=r.querySelectorAll('[name^="'+o+'"]'),p=r.querySelectorAll('[for^="'+o+'"]'),y=this.dropping,v=0;for(var b in this.args.fields){var d=this.args.fields[b].tags.input.element,h=this.args.fields[b].tags.label.element,m=d.getAttribute("name");t==h&&(u=this.args.fields[b]),r==h&&(s=this.args.fields[b]);var g=this.extractIndex(m),w=!1;if(!(0>g)&&(i>a&&g>=a&&g<=i?(w=this.changeIndex(m,g+1),v=-1):i<a&&g<=a&&g>=i&&(w=this.changeIndex(m,g-1),v=0),!1!==w)){this.changeAttributePrefix(h,"for",m,w),this.args.fields[b].args.fieldName=w,this.changeAttributePrefix(d,"name",m,w);for(var O=d.parentNode.querySelectorAll('[name^="'+m+'"]'),j=0;j<O.length;j++)this.changeAttributePrefix(O[j],"name",m,w);for(var P=d.parentNode.querySelectorAll('[for^="'+m+'"]'),S=0;S<P.length;S++)this.changeAttributePrefix(P[S],"for",m,w)}}n=t.getAttribute("for"),o=r.getAttribute("for"),i=this.extractIndex(n),a=this.extractIndex(o),this.changeAttributePrefix(t,"for",n,this.changeIndex(n,a+v));for(var _=0;_<c.length;_++)this.changeAttributePrefix(c[_],"name",n,this.changeIndex(n,a+v));for(var k=0;k<l.length;k++)this.changeAttributePrefix(l[k],"for",n,this.changeIndex(n,a+v));u.args.fieldName=t.getAttribute("for"),this.changeAttributePrefix(r,"for",o,this.changeIndex(o,a+v+1));for(var E=0;E<f.length;E++)this.changeAttributePrefix(f[E],"name",o,this.changeIndex(o,a+v+1));for(var T=0;T<p.length;T++)this.changeAttributePrefix(p[T],"for",o,this.changeIndex(o,a+v+1));s.args.fieldName=r.getAttribute("for"),this.dragging.parentNode.insertBefore(this.dragging,y),this.dragging=!1,this.dropping=!1}},{key:"dragStop",value:function(){this.dragging=!1,this.dropping=!1}},{key:"changeAttributePrefix",value:function(e,t,r,n){e.getAttribute(t);var o=n+e.getAttribute(t).substring(r.length);e.setAttribute(t,o)}},{key:"extractIndex",value:function(e){var t;return!!(t=/\[(-?\d+)\]$/.exec(e))&&parseInt(t[1])}},{key:"changeIndex",value:function(e,t){return e.replace(/\[(-?\d+)\]$/,"["+t+"]")}},{key:"cancel",value:function(e){e.stopPropagation()}}]),t}();e.View=d}),require.register("curvature/form/multiField/Wrapper.js",function(e,t,r){"use strict";var n=t("../../base/Config"),o=t("../../base/View"),i=t("../../base/Repository");function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:t+""}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Wrapper=void 0;var p=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=r.call(this,e)).template='\n\t\t\t<div\n\t\t\t\tclass = "wrapped-field [[classes]]"\n\t\t\t\tcv-on = "click:editRecord(event, key)"\n\t\t\t\ttitle = "[[fieldName]]: [[id]]"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tcv-on = "click:deleteImage(event, key)"\n\t\t\t\t\tstyle = "display: inline; cursor:pointer;"\n\t\t\t\t>\n\t\t\t\t\t[[icon]]\n\t\t\t\t</div>\n\t\t\t\t<div class = "field-content">\n\t\t\t\t\t[[title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style = "display:none">[[field]]</div>\n\t\t',n.args.field=n.args.field||"!",n.args.keyword="",n.args.title="",n.args.record={},n.args.key=n.args.field.key,n.args.classes="",n.args.icon="",n.deleted=!1,n.args.field.args.bindTo("fieldName",e=>{n.args.fieldName=e}),n.args.fieldName=n.args.field.args.name,n.args.id=n.args.field.args.value.id,n.args.bindTo("id",e=>{n.args.field.args.value.id=e}),n.args.field.args.value.bindTo("id",e=>{e&&i.Repository.request(n.backendPath(),{id:e}).then(t=>{n.args.id=e;var r=t.body[0];return r?void n.refresh(r):(n.args.publicId=null,void(n.args.title=null))})},{wait:0}),n.args.field.args.value.bindTo("keyword",e=>{n.args.keyword=e}),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,o.View);var r=l(t);return function(e,t,r){t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"editRecord",value:function(){this.args.parent.editRecord(this.args.record,this)}},{key:"deleteImage",value:function(e,t){e.stopPropagation(),this.deleted?(this.args.icon="",this.args.parent.undeleteImage(t),this.deleted=!1):(this.args.icon="",this.args.parent.deleteImage(t),this.deleted=!0)}},{key:"backendPath",value:function(){return(n.Config.get("backend")||"//")+this.args.parent.args.attrs["data-endpoint"]}},{key:"getRecordTitle",value:function(e){return e._titleField?e[e._titleField]:e.title||e.publicId||e.id}},{key:"refresh",value:function(e){for(var t in e)this.args[t]=e[t];this.args.record=e,this.args.title=this.getRecordTitle(e)}}]),t}();e.Wrapper=p}),require.register("curvature/input/Axis.js",function(e,t,r){"use strict";var n,o=t("../base/Bindable");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function u(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Axis=void 0,n=o.Bindable.NoGetters;var c=function(){function e({deadZone:t=0,proportional:r=!0}){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),u(this,n,!0),u(this,"magnitude",0),u(this,"delta",0),this.proportional=r,this.deadZone=t}return function(e,t,r){t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"tilt",value:function(e){this.deadZone&&Math.abs(e)>=this.deadZone?e=(Math.abs(e)-this.deadZone)/(1-this.deadZone)*Math.sign(e):this.deadZone&&Math.abs(e)<this.deadZone&&(e=0),this.delta=(+(e-this.magnitude)).toFixed(3)-0,this.magnitude=(+e).toFixed(3)-0}},{key:"zero",value:function(){this.magnitude=this.delta=0}}]),e}();e.Axis=c}),require.register("curvature/input/Button.js",function(e,t,r){"use strict";var n,o=t("../base/Bindable");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function u(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Button=void 0,n=o.Bindable.NoGetters;var c=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),u(this,n,!0),u(this,"active",!1),u(this,"pressure",0),u(this,"delta",0),u(this,"time",0)}return function(e,t,r){t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"update",value:function(e={}){this.pressure?this.time++:!this.pressure&&0<this.time?this.time=-1:!this.pressure&&0>this.time&&this.time--,-1>this.time&&-1===this.delta&&(this.delta=0)}},{key:"press",value:function(e){this.delta=(+(e-this.pressure)).toFixed(3)-0,this.pressure=(+e).toFixed(3)-0,this.active=!0,this.time=0<this.time?this.time:0}},{key:"release",value:function(){this.active&&(this.delta=(+-this.pressure).toFixed(3)-0,this.pressure=0,this.active=!1)}},{key:"zero",value:function(){this.pressure=this.delta=0,this.active=!1}}]),e}();e.Button=c}),require.register("curvature/input/Gamepad.js",function(e,t,r){"use strict";var n,o=t("../base/Bindable"),i=t("../base/Mixin"),a=t("../mixin/EventTargetMixin"),u=t("./Axis"),s=t("./Button");function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(this,r)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Gamepad=void 0;var h={Space:0,Enter:0,NumpadEnter:0,ControlLeft:1,ControlRight:1,ShiftLeft:2,ShiftRight:2,KeyZ:3,KeyQ:4,KeyE:5,Digit1:6,Digit3:7,KeyW:12,KeyA:14,KeyS:13,KeyD:15,KeyH:112,KeyJ:113,KeyK:114,KeyL:115,KeyP:9,Pause:9,Tab:11,ArrowUp:12,ArrowDown:13,ArrowLeft:14,ArrowRight:15,Numpad4:112,Numpad2:113,Numpad8:114,Numpad6:115,Backquote:1010,NumpadAdd:1011,NumpadSubtract:1012,NumpadMultiply:1013,NumpadDivide:1014,Escape:1020};[...Array(12)].map((e,t)=>h["F".concat(t)]=2e3+t),n=o.Bindable.NoGetters;var m=function(e){function t({keys:e={},deadZone:o=0,gamepad:i=null,keyboard:a=null,axisMap:u=null}={}){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(y(s=r.call(this)),n,!0),b(y(s),"axisMap",{12:-1,13:1,14:-0,15:0,112:-2,113:3,114:-3,115:2}),s.deadZone=o,s.gamepad=i,s.index=i.index,s.id=i.id,s.axisMap=u||s.axisMap,Object.defineProperties(y(s),{buttons:{value:{}},pressure:{value:{}},axes:{value:{}},keys:{value:{}}}),s}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,i.Mixin.with(a.EventTargetMixin));var r=p(t);return function(e,t,r){t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"update",value:function(){for(var e in this.buttons){this.buttons[e].update()}}},{key:"rumbleEffect",value:function(e){return this.gamepad.vibrationActuator.playEffect("dual-rumble",e)}},{key:"rumble",value:function(...e){return this.gamepad.vibrationActuator.pulse?this.gamepad.vibrationActuator.pulse(...e):void this.rumbleEffect({duration:1e3,strongMagnitude:1,weakMagnitude:1})}},{key:"readInput",value:function(){if(this.gamepad){var e=this.gamepad.index+"",t=this.constructor;t.padsRead.has(e)||(t.padsRead=new Map(Object.entries(navigator.getGamepads())));var r=this.gamepad=t.padsRead.get(e);t.padsRead.delete(e);var n={},o={};if(r)for(var i in r.buttons){var a=r.buttons[i];a.pressed&&(this.press(i,a.value),n[i]=!0)}if(this.keyboard){for(var u in[...Array(10)])n[u]||0<this.keyboard.getKeyCode(u)&&(this.press(u,1),n[u]=!0);for(var c in h)if(!n[c]){var l=h[c];0<this.keyboard.getKeyCode(c)&&(this.press(l,1),n[l]=!0)}}if(r)for(var f in r.buttons)if(!n[f]){r.buttons[f].pressed||(this.release(f),o[f]=!0)}if(this.keyboard){for(var p in[...Array(10)])o[p]||n[p]||0>this.keyboard.getKeyCode(p)&&(this.release(p),o[p]=!0);for(var y in h){var v=h[y];o[v]||n[v]||0>this.keyboard.getKeyCode(y)&&(this.release(v),o[y]=!0)}}var b={};if(r)for(var d in r.axes){var m=r.axes[d];b[d]=!0,this.tilt(d,m)}for(var g in this.axisMap){this.buttons[g]||(this.buttons[g]=new s.Button);var w=this.axisMap[g],O=Math.sign(1/w),j=Math.abs(w);this.buttons[g].active?(b[j]=!0,this.tilt(j,O)):!b[j]&&this.tilt(j,0)}}}},{key:"tilt",value:function(e,t){this.axes[e]||(this.axes[e]=new u.Axis({deadZone:this.deadZone})),this.axes[e].tilt(t)}},{key:"press",value:function(e,t=1){this.buttons[e]||(this.buttons[e]=new s.Button),this.buttons[e].press(t)}},{key:"release",value:function(e){this.buttons[e]||(this.buttons[e]=new s.Button),this.buttons[e].release()}},{key:"serialize",value:function(){var e={};for(var t in this.buttons)e[t]=this.buttons[t].pressure;var r={};for(var n in this.axes)r[n]=this.axes[n].magnitude;return{axes:r,buttons:e}}},{key:"replay",value:function(e){if(e.buttons)for(var t in e.buttons)0<e.buttons[t]?this.press(t,e.buttons[t]):this.release(t);if(e.axes)for(var r in e.axes)e.axes[r].magnitude!==e.axes[r]&&this.tilt(r,e.axes[r])}},{key:"zero",value:function(){for(var e in this.axes)this.axes[e].zero();for(var t in this.buttons)this.buttons[t].zero()}}],[{key:"getPad",value:function({index:e,deadZone:t=0,keys:r={},keyboard:n=null,axisMap:o=null}){if(this.padsConnected.has(e))return this.padsConnected.get(e);var i=new Promise(e=>{addEventListener("gamepadconnected",a=>{a.stopImmediatePropagation();var u=new this({gamepad:a.gamepad,deadZone:t,keys:r,keyboard:n,axisMap:o});this.padsConnected.set(a.gamepad.index,i),e(u)},{once:!0})});return i}}]),t}();e.Gamepad=m,b(m,"padsConnected",new Map),b(m,"padsRead",new Map)}),require.register("curvature/input/Keyboard.js",function(e,t,r){"use strict";var n=t("../base/Bindable");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Keyboard=void 0;var u=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.maxDecay=120,this.comboTime=500,this.listening=!1,this.focusElement=document.body,this[n.Bindable.NoGetters]=!0,Object.defineProperty(this,"combo",{value:n.Bindable.make([])}),Object.defineProperty(this,"whichs",{value:n.Bindable.make({})}),Object.defineProperty(this,"codes",{value:n.Bindable.make({})}),Object.defineProperty(this,"keys",{value:n.Bindable.make({})}),Object.defineProperty(this,"pressedWhich",{value:n.Bindable.make({})}),Object.defineProperty(this,"pressedCode",{value:n.Bindable.make({})}),Object.defineProperty(this,"pressedKey",{value:n.Bindable.make({})}),Object.defineProperty(this,"releasedWhich",{value:n.Bindable.make({})}),Object.defineProperty(this,"releasedCode",{value:n.Bindable.make({})}),Object.defineProperty(this,"releasedKey",{value:n.Bindable.make({})}),Object.defineProperty(this,"keyRefs",{value:n.Bindable.make({})}),document.addEventListener("keyup",e=>{this.listening&&(0<this.keys[e.key]||!this.focusElement||document.activeElement===this.focusElement||this.focusElement.contains(document.activeElement)&&!document.activeElement.matches("input,textarea"))&&(e.preventDefault(),this.releasedWhich[e.which]=Date.now(),this.releasedCode[e.code]=Date.now(),this.releasedKey[e.key]=Date.now(),this.whichs[e.which]=-1,this.codes[e.code]=-1,this.keys[e.key]=-1)}),document.addEventListener("keydown",e=>{this.listening&&(this.focusElement&&document.activeElement!==this.focusElement&&(!this.focusElement.contains(document.activeElement)||document.activeElement.matches("input,textarea"))||(e.preventDefault(),!e.repeat&&(this.combo.push(e.code),clearTimeout(this.comboTimer),this.comboTimer=setTimeout(()=>this.combo.splice(0),this.comboTime),this.pressedWhich[e.which]=Date.now(),this.pressedCode[e.code]=Date.now(),this.pressedKey[e.key]=Date.now(),0<this.keys[e.key]||(this.whichs[e.which]=1,this.codes[e.code]=1,this.keys[e.key]=1))))});var t=()=>{for(var e in this.keys)0>this.keys[e]||(this.releasedKey[e]=Date.now(),this.keys[e]=-1);for(var t in this.codes)0>this.codes[t]||(this.releasedCode[t]=Date.now(),this.codes[t]=-1);for(var r in this.whichs)0>this.whichs[r]||(this.releasedWhich[r]=Date.now(),this.whichs[r]=-1)};window.addEventListener("blur",t),window.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState||t()})}return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"getKeyRef",value:function(e){return this.keyRefs[e]=this.keyRefs[e]||n.Bindable.make({})}},{key:"getKeyTime",value:function(e){var t=this.releasedKey[e],r=this.pressedKey[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getCodeTime",value:function(e){var t=this.releasedCode[e],r=this.pressedCode[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getWhichTime",value:function(e){var t=this.releasedWhich[e],r=this.pressedWhich[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getKey",value:function(e){return this.keys[e]?this.keys[e]:0}},{key:"getKeyCode",value:function(e){return this.codes[e]?this.codes[e]:0}},{key:"reset",value:function(){for(var e in this.keys)delete this.keys[e];for(var e in this.codes)delete this.codes[e];for(var e in this.whichs)delete this.whichs[e]}},{key:"update",value:function(){for(var e in this.keys)0<this.keys[e]?this.keys[e]++:this.keys[e]>-this.maxDecay?this.keys[e]--:delete this.keys[e];for(var e in this.codes){var t=this.releasedCode[e],r=this.pressedCode[e],n=this.getKeyRef(e);if(0<this.codes[e])return n.frames=this.codes[e]++,n.time=r?Date.now()-r:0,n.down=!0,!t||t<r?void 0:-1*(Date.now()-t);this.codes[e]>-this.maxDecay?(n.frames=this.codes[e]--,n.time=t-Date.now(),n.down=!1):(n.frames=0,n.time=0,n.down=!1,delete this.codes[e])}for(var e in this.whichs)0<this.whichs[e]?this.whichs[e]++:this.whichs[e]>-this.maxDecay?this.whichs[e]--:delete this.whichs[e]}}],[{key:"get",value:function(){return this.instance=this.instance||n.Bindable.make(new this)}}]),e}();e.Keyboard=u}),require.register("curvature/input/Mouse.js",function(e,t,r){"use strict"}),require.register("curvature/input/Sequence.js",function(e,t,r){"use strict";var n,o=t("../base/Bindable"),i=t("../base/Mixin"),a=t("../mixin/EventTargetMixin");function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,r)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Sequence=void 0,n=o.Bindable.NoGetters;var b=function(e){function t({callback:e,keys:o,timing:i,gamepad:a}){var u;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),y(f(u=r.call(this)),n,!0),y(f(u),"lastTap",!1),y(f(u),"recent",[]),y(f(u),"callback",()=>{}),y(f(u),"timing",500),y(f(u),"keys","");var s=[e,i,o,a];return u.callback=s[0],u.timing=s[1],u.keys=s[2],u.gamepad=s[3],u}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,i.Mixin.with(a.EventTargetMixin));var r=l(t);return function(e,t,r){t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"check",value:function(e){var t=this.recent,r=Date.now();r+-this.lastTap>this.timing&&t.splice(0),t.push({code:e,time:Date.now()});var n=t.map(e=>e.code).join(","),o=this.keys.join(",");this.lastTap=r;var i=[];for(var a in t){t[a];var u=t.slice(a),s=u.map(e=>e.code).join(",");if(s===o.substr(0,s.length)){i.push(...u),this.dispatchEvent(new CustomEvent("advance",{detail:{matched:i,recent:t,keys:this.keys,length:u.length}}));break}}return i.length?void(o===n.substr(-o.length)&&this.dispatchEvent(new CustomEvent("complete",{detail:{matched:i,recent:t,keys:this.keys,length:i.length}}))):void this.dispatchEvent(new CustomEvent("cancel",{detail:{matched:i,recent:t,keys:this.keys,length:i.length}}))}}]),t}();e.Sequence=b}),require.register("curvature/mixin/EventTargetMixin.js",function(e,t,r){"use strict";var n,o=t("../base/Mixin");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.EventTargetMixin=void 0;var c=Symbol("EventTargetParent"),l=Symbol("CallHandler"),f=Symbol("Capture"),p=Symbol("Bubble"),y=(Symbol("Target"),Symbol("HandlersBubble")),v=Symbol("HandlersCapture"),b=(a(n={},o.Mixin.Constructor,function(){this[v]=new Map,this[y]=new Map}),a(n,"dispatchEvent",function(...e){var t=e[0];"string"==typeof t&&(t=new CustomEvent(t),e[0]=t),t.cvPath=t.cvPath||[],t.cvTarget=t.cvCurrentTarget=this;var r=this[f](...e);if(t.cancelable&&(!1===r||t.cancelBubble))return r;var n=[];if(this[v].has(t.type)){var o=this[v].get(t.type),i=[...o];i.forEach(e=>e.push(o)),n.push(...i)}if(this[y].has(t.type)){var a=this[y].get(t.type),s=[...a];s.forEach(e=>e.push(a)),n.push(...s)}for(var b of(n.push([()=>this[l](...e),{},null]),n)){var d=u(b,3),h=d[0],m=d[1],g=d[2];if(m.once&&g.delete(h),r=h(t),t.cancelable&&!1===r)break}return t.cancelable&&(t.cancelBubble||!1===r)||this[p](...e),this[c]||Object.freeze(t.cvPath),t.returnValue}),a(n,"addEventListener",function(e,t,r={}){!0===r&&(r={useCapture:!0});var n=y;r.useCapture&&(n=v),this[n].has(e)||this[n].set(e,new Map),this[n].get(e).set(t,r),r.signal&&r.signal.addEventListener("abort",()=>this.removeEventListener(e,t,r),{once:!0})}),a(n,"removeEventListener",function(e,t,r={}){!0===r&&(r={useCapture:!0});var n=y;r.useCapture&&(n=v),this[n].has(e)&&this[n].get(e).delete(t)}),a(n,f,function(...e){var t=e[0];if(t.cvPath.push(this),this[c]){var r=this[c][f](...e);if((!t.cancelable||!1!==r&&!t.cancelBubble)&&this[c][v].has(t.type)){t.cvCurrentTarget=this[c];var n=t.type,o=this[c][v].get(n);for(var i of o){var a=u(i,2),s=a[0];if(a[1].once&&o.delete(s),r=s(t),t.cancelable&&(!1===r||t.cancelBubble))break}return r}}}),a(n,p,function(...e){var t=e[0];if(t.bubbles&&this[c]&&!t.cancelBubble){if(!this[c][y].has(t.type))return this[c][p](...e);var r;t.cvCurrentTarget=this[c],t.type;var n=this[c][y].get(t.type);for(var o of n){var i=u(o,2),a=i[0];if(i[1].once&&n.delete(a),r=a(t),t.cancelable&&!1===r)return r}return r=this[c][l](...e),t.cancelable&&(!1===r||t.cancelBubble)?r:this[c][p](...e)}}),a(n,l,function(...e){var t=e[0];if(!t.defaultPrevented){var r="on".concat(t.type[0].toUpperCase()+t.type.slice(1));if("function"==typeof this[r])return this[r](t)}}),n);e.EventTargetMixin=b,Object.defineProperty(b,"Parent",{value:c})}),require.register("curvature/mixin/PromiseMixin.js",function(e,t,r){"use strict";var n,o=t("../base/Mixin");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(e,"__esModule",{value:!0}),e.PromiseMixin=void 0;var u=Symbol("Promise"),s=Symbol("Accept"),c=Symbol("Reject"),l=(a(n={},o.Mixin.Constructor,function(){this[u]=new Promise((e,t)=>{this[s]=e,this[c]=t})}),a(n,"then",function(...e){return this[u].then(...e)}),a(n,"catch",function(...e){return this[u].catch(...e)}),a(n,"finally",function(...e){return this[u].finally(...e)}),n);e.PromiseMixin=l,Object.defineProperty(l,"Reject",{value:c}),Object.defineProperty(l,"Accept",{value:s})}),require.register("curvature/model/Database.js",function(e,t,r){"use strict";var n=t("../base/Bindable"),o=t("../base/Mixin"),i=t("../mixin/EventTargetMixin");function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:t+""}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,r)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Database=void 0;var d=Symbol("BeforeWrite"),h=Symbol("AfterWrite"),m=Symbol("BeforeDelete"),g=Symbol("AfterDelete"),w=Symbol("BeforeInsert"),O=Symbol("AfterInsert"),j=Symbol("BeforeUpdate"),P=Symbol("AfterUpdate"),S=Symbol("BeforeRead"),_=Symbol("AfterRead"),k=Symbol("PrimaryKey"),E=Symbol("Connection"),T=Symbol("Instances"),R=(Symbol("HighWater"),Symbol("Metadata")),C=Symbol("Timers"),x=Symbol("Target"),B=(Symbol("Store"),Symbol("Each")),M=Symbol("Name"),A=Symbol("Bank"),D=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=r.call(this),Object.defineProperty(v(n),E,{value:e}),Object.defineProperty(v(n),M,{value:e.name}),Object.defineProperty(v(n),C,{value:{}}),Object.defineProperty(v(n),R,{value:{}}),Object.defineProperty(v(n),A,{value:{}}),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,o.Mixin.with(i.EventTargetMixin));var r=y(t);return function(e,t,r){t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"select",value:function({store:e,index:t,range:r,ranges:n=[],direction:o="next",limit:i=0,offset:a=0,type:u=!1,origin:s,map:c}){var l=this[E].transaction(e,"readonly").objectStore(e),f=t?l.index(t):l;void 0===r||n&&n.length||(n=[r]);var p=[u,f,o,n,i,a,s,c],y=null;return{finally:e=>(y||(y=this[B](...p)(e=>e))).finally(e),catch:e=>(y||(y=this[B](...p)(e=>e))).catch(e),then:e=>(y||(y=this[B](...p)(e=>e))).then(e),each:e=>y||(y=this[B](...p)(e)),one:e=>y||(y=this[B](...Object.assign(p,[,,,,1]))(e))}}},{key:"insert",value:function(e,t,r={}){return this.inserts(c({},e,t),r)[0]}},{key:"inserts",value:function(e,r={}){var o=this,i=Object.keys(e),a=this[E].transaction(i,"readwrite"),s=[],c=function(){var e=(f=u(l,2))[0],i=f[1],c=a.objectStore(e),p=o[A][e]=o[A][e]||{},y=!0;Array.isArray(i)||(i=[i],y=!1);var v,b=i.map(i=>new Promise((u,s)=>{i=n.Bindable.make(i);var l={database:o,record:i,store:e,type:"write",subType:"insert",origin:r,key:t.getPrimaryKey(i)},f=new CustomEvent("write",{cancelable:!0,detail:l});if(o.dispatchEvent(f)){var y=i[t.BeforeWrite]?i[t.BeforeWrite](l):null,v=i[t.BeforeInsert]?i[t.BeforeInsert](l):null,b=c.add(Object.assign({},n.Bindable.shuck(i)));return!1===y||!1===v?void(a.abort&&a.abort()):(b.onerror=(e=>{o.dispatchEvent(new CustomEvent("writeError",{detail:l})),a.abort&&a.abort(),s(e)}),void(b.onsuccess=(n=>{var s=n.target.result;a.addEventListener("complete",n=>{if(c.autoIncrement&&(i.id=s),i[t.AfterInsert]&&i[t.AfterInsert](l),i[t.AfterWrite]&&i[t.AfterWrite](l),p[s]=i,i[k]=Symbol.for(s),u(i),o[R][e]||(o[R][e]=o.getStoreMeta(e,"store",{})),o[R][e]){var a=o.checkHighWaterMark(e,i),f=o.checkLowWaterMark(e,i),y=o[R][e],v=i[y.highWater];r.setHighWater&&a<v&&o.setHighWaterMark(e,i,r,"insert"),r.setLowWater&&f>v&&o.setLowWaterMark(e,i,r,"insert")}})})))}a.abort&&a.abort()}));v=y?Promise.all(b):b[0],s.push(v)};for(var l of Object.entries(e)){var f;c()}return s}},{key:"update",value:function(e,t,r={}){return this.updates(c({},e,[t]),r)[0]}},{key:"updates",value:function(e,r={}){var o=this,i=Object.keys(e),a=this[E].transaction(i,"readwrite"),s=[],c=function(){var e=(f=u(l,2))[0],i=f[1],c=a.objectStore(e),p=function(i){if(!i[k])throw Error("Value provided is not a DB record!");s.push(new Promise((u,s)=>{var l={database:o,key:t.getPrimaryKey(i),record:i,store:e,type:"write",subType:"update",origin:r},f=new CustomEvent("write",{cancelable:!0,detail:l});if(o.dispatchEvent(f)){var p=i[t.BeforeWrite]?i[t.BeforeWrite](l):null,y=i[t.BeforeUpdate]?i[t.BeforeUpdate](l):null;if(!1!==p&&!1!==y){var v=c.delete(i.id);v.onerror=(e=>{o.dispatchEvent(new CustomEvent("writeError",{detail:l})),s(e)}),v.onsuccess=(p=>{var y=c.put(Object.assign({},n.Bindable.shuck(i)));y.onerror=(e=>{o.dispatchEvent(new CustomEvent("writeError",{detail:l})),s(e)}),y.onsuccess=(n=>{u(f),a.oncomplete=(n=>{if(i[t.AfterInsert]&&i[t.AfterInsert](l),i[t.AfterWrite]&&i[t.AfterWrite](l),o[R][e]||(o[R][e]=o.getStoreMeta(e,"store",{})),o[R][e]){var a=o.checkHighWaterMark(e,i),u=o.checkLowWaterMark(e,i),s=o[R][e],c=i[s.highWater];r.setHighWater&&a<c&&o.setHighWaterMark(e,i,r,"insert"),r.setLowWater&&u>c&&o.setLowWaterMark(e,i,r,"insert")}})})})}else a.abort&&a.abort()}else a.abort&&a.abort()}))};for(var y of i)p(y)};for(var l of Object.entries(e)){var f;c()}return Promise.all(s).then(()=>a.commit&&a.commit()),s}},{key:"delete",value:function(e,t,r={}){return this.deletes(c({},e,[t]),r)[0]}},{key:"deletes",value:function(e,r={}){var n=this,o=Object.keys(e),i=this[E].transaction(o,"readwrite"),a=[],s=function(){var e=(l=u(c,2))[0],o=l[1],s=i.objectStore(e),f=function(o){if(!o[k])throw Error("Value provided is not a DB record!");a.push(new Promise((a,u)=>{var c={database:n,record:o,key:t.getPrimaryKey(o),store:e,type:"write",subType:"delete",origin:r},l=new CustomEvent("write",{cancelable:!0,detail:c});if(n.dispatchEvent(l))if(!1!==(o[t.BeforeDelete]?o[t.BeforeDelete](c):null)){var f=s.delete(o.id);f.onerror=(e=>{c.original=e;var t=new CustomEvent("writeError",{detail:c});n.dispatchEvent(t),u(e)}),f.onsuccess=(e=>{a(l),i.oncomplete=(e=>{o[k]=void 0,o[t.AfterDelete]&&o[t.AfterDelete](c),c.original=e})})}else i.abort&&i.abort();else i.abort&&i.abort()}))};for(var p of o)f(p)};for(var c of Object.entries(e)){var l;s()}return Promise.all(a).then(()=>i.commit&&i.commit()),a}},{key:"clear",value:function(e){return new Promise((t,r)=>{var n=this[E].transaction([e],"readwrite"),o=n.objectStore(e).clear(),i={database:this[M],store:e,type:"write",subType:"clear",origin:origin};o.onerror=(e=>{i.original=e;var t=new CustomEvent("writeError",{detail:i});this.dispatchEvent(t),r(e)}),o.onsuccess=(e=>{i.original=e;var r=new CustomEvent("write",{detail:i});this.dispatchEvent(r),n.commit&&n.commit(),t(r)})})}},{key:"listStores",value:function(){return[...this[E].objectStoreNames]}},{key:"listIndexes",value:function(e){return[...this[E].transaction([e]).objectStore(e).indexNames]}},{key:B,value:function(e,r,o,i,a,u,s,c){var l=(i,l)=>new Promise((f,p)=>{if(i instanceof IDBKeyRange);else if(Array.isArray(i))if(0===i.length)i=void 0;else if(1===i.length)i=IDBKeyRange.only(i[0]);else if(void 0===i[0]&&void 0===i[1])i=void 0;else if(void 0===i[0]){var y;i=IDBKeyRange.upperBound(i[1],null===(y=i[2])||void 0===y||y)}else if(void 0===i[1]){var v;i=IDBKeyRange.lowerBound(i[0],null!==(v=i[2])&&void 0!==v&&v)}else{var b,d;i=IDBKeyRange.bound(i[0],i[1],null!==(b=i[2])&&void 0!==b&&b,null===(d=i[3])||void 0===d||d)}else void 0!==i&&null!==i&&(i=IDBKeyRange.only(i));var h=0;r.openCursor(i,o).addEventListener("success",o=>{var i=o.target.result;if(!i)return f({record:null,result:null,index:h});var p=i.source,y=p.objectStore?p.objectStore.name:r.name;this[A][y]=this[A][y]||{};var v=this[A][y],b=i.primaryKey,d=e?e.from(i.value):i.value,m=n.Bindable.makeBindable(d),g={database:this[M],key:t.getPrimaryKey(m),record:d,store:r.name,type:"read",subType:"select",origin:s},w=d[t.BeforeRead]?d[t.BeforeRead](g):null;if(u>h++||!1===w)return i.continue();v[b]?Object.assign(v[b],d):(d[k]=Symbol.for(b),v[b]=d),g.record=d,v[b][t.AfterRead]&&v[b][t.AfterRead](g);if(this.dispatchEvent(new CustomEvent("read",{detail:g,cancelable:!0}))){var O=e?e.from(v[b]):v[b];O[k]=Symbol.for(b);var j=c?c(O):O,P=l?l(j,h):j;if(a&&h-u>=a)return u+=a,f({mapped:j,result:P,index:h})}i.continue()})}),f=[];i=i&&i.length?i.slice():[[]];var p=(e,t)=>(f.push(e),i.length?l(i.shift(),t).then(e=>p(e,t)):1===f.length?f[0]:f);return e=>l(i.shift(),e).then(t=>p(t,e))}},{key:"getObjectStores",value:function(e){return[...this[E].objectStoreNames]}},{key:"getStoreIndexes",value:function(e){var t=this[E].transaction([e],"readonly"),r=[...t.objectStore(e).indexNames];return t.abort(),r}},{key:"setStoreMeta",value:function(e,t,r){localStorage.setItem("::::cvdb::".concat(e,"::").concat(t),JSON.stringify(r))}},{key:"getStoreMeta",value:function(e,t,r=null){var n=localStorage.getItem("::::cvdb::".concat(e,"::").concat(t)),o=null===n?r:JSON.parse(n);return null===o?r:o}},{key:"createObjectStore",value:function(e,t){var r=this[E].createObjectStore(e,t);return this.setStoreMeta(e,"store",t),r}},{key:"deleteObjectStore",value:function(e){return this[E].deleteObjectStore(e)}},{key:"checkHighWaterMark",value:function(e,t,r){return this.getStoreMeta(e,"highWater",0)}},{key:"setHighWaterMark",value:function(e,t,r,n){var o=t[this[R][e].highWater],i=this.getStoreMeta(e,"highWater",0);this.setStoreMeta(e,"highWater",o),this.dispatchEvent(new CustomEvent("highWaterMoved",{detail:{database:this[M],record:t,store:e,type:"highWaterMoved",subType:n,origin:r,oldValue:i,value:o}}))}},{key:"checkLowWaterMark",value:function(e,t,r){return this.getStoreMeta(e,"lowWater",1/0)}},{key:"setLowWaterMark",value:function(e,t,r,n){var o=t[this[R][e].highWater],i=this.getStoreMeta(e,"lowWater",null);this.setStoreMeta(e,"lowWater",o),this.dispatchEvent(new CustomEvent("lowWaterMoved",{detail:{database:this[M],record:t,store:e,type:"lowWaterMoved",subType:n,origin:r,oldValue:i,value:o}}))}}],[{key:"open",value:function(e,r=0){return this[T][e]?this[T][e]:this[T][e]=new Promise((n,o)=>{var i=indexedDB.open(e,r);i.onerror=(e=>{t.dispatchEvent(new CustomEvent("error",{detail:{database:this[M],error:e,store:void 0,type:"read",subType:"select"}})),o(e)}),i.onsuccess=(e=>{var t=new this(e.target.result);n(t)}),i.onupgradeneeded=(e=>{var t=e.target.result;t.addEventListener("error",e=>console.error(e));for(var n=new this(t),o=e.oldVersion+1;o<=r;o+=1)n["_version_"+o](t,n,e)})})}},{key:"getPrimaryKey",value:function(e){return e[k]?e[k]:null}},{key:"destroyDatabase",value:function(){return new Promise((e,r)=>{var n=indexedDB.delete(dbName);n.onerror=(e=>{t.dispatchEvent(new CustomEvent("error",{detail:{database:dbName,error:e,type:"destroy"}})),r(e)}),n.onsuccess=(t=>{delete this[T][dbName],e(dbName)})})}}]),t}();e.Database=D,Object.defineProperty(D,T,{value:[]}),Object.defineProperty(D,"BeforeDelete",{value:m}),Object.defineProperty(D,"AfterDelete",{value:g}),Object.defineProperty(D,"BeforeWrite",{value:d}),Object.defineProperty(D,"AfterWrite",{value:h}),Object.defineProperty(D,"BeforeInsert",{value:w}),Object.defineProperty(D,"AfterInsert",{value:O}),Object.defineProperty(D,"BeforeUpdate",{value:j}),Object.defineProperty(D,"AfterUpdate",{value:P}),Object.defineProperty(D,"BeforeRead",{value:S}),Object.defineProperty(D,"AfterRead",{value:_}),Object.defineProperty(D,"PKSymbol",{value:k}),Object.defineProperty(D,"PrimaryKey",{value:k});try{Object.defineProperty(D,x,{value:new EventTarget})}catch(e){Object.defineProperty(D,x,{value:document.createDocumentFragment()})}var N=function(e){Object.defineProperty(D,e,{value:(...t)=>D[x][e](...t)})};for(var L of["addEventListener","removeEventListener","dispatchEvent"])N(L)}),require.register("curvature/model/Model.js",function(e,t,r){"use strict";var n=t("../base/Cache"),o=t("../base/Bindable"),i=t("./Database");function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function s(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var l=Symbol("Changed"),f=Symbol("Deleted"),p=Symbol("Saved"),y=Symbol("Keys"),v=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"id",void 0),s(this,"class",void 0),Object.defineProperty(this,l,{value:o.Bindable.make({})}),Object.defineProperty(this,f,{writable:!0,value:!1}),Object.defineProperty(this,p,{writable:!0,value:!1}),Object.defineProperty(this,y,{writable:!0,value:new Set}),o.Bindable.make(this)}return function(e,t,r){t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"consume",value:function(t,r=!1){var o=e.keyProps,u=(e,t)=>{if(t&&"object"===a(t)&&t.constructor.keyProps){var o=t.constructor.keyProps.map(e=>t[e]).join("::"),i=n.Cache.load(o,!1,"models-by-type-and-publicId");i&&(i.consume(t),t=i)}!r&&this[l][e]||(this[e]=t)};for(var s of(i.Database.PKSymbol in t&&u(i.Database.PKSymbol,t[i.Database.PKSymbol]),this[y]=new Set([...this[y],...Object.keys(this),...Object.keys(t)]),this[y]))(r||!this[l][s])&&(o.includes(s)||s in t&&u(s,t[s]))}},{key:"changed",value:function(){this[p]=!1}},{key:"markDeleted",value:function(){for(var e in this[l])this[l][e]=!1;this[f]=!0,this[p]=!1}},{key:"markStored",value:function(){for(var e in this)this[l][e]=!1;this[f]=!1,this[p]=!0}},{key:"isSaved",value:function(){return this[p]}}],[{key:"keyProps",get:function(){return["id","class"]}},{key:"from",value:function(e,t=!1){var r=this.keyProps,o=r.map(t=>e[t]);o.unshift(this.name);var i=o.join("::"),u=n.Cache.load(i,!1,"models-by-type-and-publicId"),s=u||new this;for(var c of r){var f,y;s[c]=null!==(f=null!==(y=s[c])&&void 0!==y?y:e[c])&&void 0!==f?f:null}if(s.consume(e),!u){n.Cache.store(i,s,0,"models-by-type-and-publicId");var v=!1;s.bindTo((e,t,r)=>{"symbol"===a(t)||e===r[t]||(s[l][t]=v,s[p]=!v&&s[p])}),0===Object.keys(s[l]).length&&(s[p]=t),v=!0}return s}}]),e}();e.Model=v,Object.defineProperty(v,"Changed",{value:l}),Object.defineProperty(v,"Deleted",{value:f}),Object.defineProperty(v,"Saved",{value:p})}),require.register("curvature/model/SourceWorker.js",function(e,t,r){"use strict"}),require.register("curvature/model/Store.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Store=void 0;var a=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),function(e,t,r){(t=i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"storeName","test-store")}return function(e,t,r){t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"select",value:function({index:e,range:t=null,ranges:r=[],direction:n="next",limit:o=0,offset:i=0,type:a=!1,origin:u,map:s}){}},{key:"insert",value:function(e={}){}},{key:"update",value:function(e={}){}},{key:"delete",value:function(e){}},{key:"getMeta",value:function(e=null){}},{key:"setMeta",value:function(){}},{key:"listIndexes",value:function(){}},{key:"clear",value:function(){}}],[{key:"setHighWaterMark",value:function(e,t){}},{key:"setLowWaterMark",value:function(e,t){}},{key:"checkHighWaterMark",value:function(e){}},{key:"checkLowWaterMark",value:function(e){}},{key:"create",value:function(){}},{key:"delete",value:function(){}}]),e}();e.Store=a}),require.register("curvature/net/Elicit.js",function(e,t,r){"use strict";var n=t("curvature/base/Mixin"),o=t("curvature/mixin/EventTargetMixin"),i=t("curvature/mixin/PromiseMixin");function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return(t=p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Elicit=void 0;var y=Symbol("IterateDownload"),v=Symbol("Retry"),b=Symbol("HandleFirstByte"),d=Symbol("HandleProgress"),h=Symbol("HandleComplete"),m=Symbol("HandleHeaders"),g=Symbol("HandleClose"),w=Symbol("HandleError"),O=Symbol("HandleOpen"),j=Symbol("HandleFail"),P=Symbol("FetchDeferrer"),S=Symbol("LastChunkSize"),_=Symbol("LastChunkTime"),k=Symbol("Options"),E=Symbol("Fetch"),T=Symbol("Type"),R=Symbol("Url"),C=Symbol("RetriesLeft"),x=Symbol("TimeoutLeft"),B=Symbol("Timeout"),M=Symbol("Timer"),A=Symbol("Canecller"),D=Symbol("Caneclled"),N=Symbol("Paused"),L=Symbol("Received"),I=Symbol("Length"),F=Symbol("Opened"),q=Symbol("Closed"),W=Symbol("Start"),V=Symbol("First"),H=Symbol("End"),U=function(e){function t(e,n={}){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=r.call(this))[C]=n.retries||5,o[B]=n.timeout||4500,o[x]=n.maxTimeout||o[B]*o[C],o[P]=null,o[_]=0,o[S]=0,o[D]=!1,o[L]=0,o[N]=!1,o[q]=0,o[k]=Object.assign({},n),o[R]=e,n.defer?o[E]=new Promise(e=>o[P]=e):o.open(),o}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,n.Mixin.with(o.EventTargetMixin,i.PromiseMixin));var r=c(t);return function(e,t,r){t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"open",value:function(){if(!this[F]||this[q]){this[W]||(this[W]=Date.now()),this[A]=new AbortController,this[k].signal=this[A].signal,this[F]=Date.now(),this[q]=0,this[V]=0,this[E]=fetch(this[R],this[k]).then(e=>this[O](e)).catch(e=>this[w](e));this[M]=setTimeout(()=>{if(!this[V]){if(this[A].abort(),this[g](),this[x]=Math.max(0,this[x]-this[B]),this[x])return;this[j](new Error("Timed out."))}},this[B])}}},{key:"headers",value:function(){return this[E].then(({response:e,stream:t})=>e.headers)}},{key:"json",value:function(){return this[E].then(({response:e,stream:t})=>{return new Response(t,{headers:{"Content-Type":"application/json"}}).json()})}},{key:"text",value:function(){return this[E].then(({response:e,stream:t})=>{return new Response(t,{headers:{"Content-Type":this.type}}).text()})}},{key:"css",value:function(){return this.text().then(e=>{var t=new CSSStyleSheet;return t.replace(e),t})}},{key:"blob",value:function(){return this[E].then(({response:e,stream:t})=>{return new Response(t,{headers:{"Content-Type":e.headers.get("Content-Type")}}).blob()})}},{key:"objectUrl",value:function(){return this.blob().then(e=>URL.createObjectURL(e))}},{key:"dataUri",value:function(){return this.blob().then(e=>new Promise((t,r)=>{var n=new FileReader;n.onload=(()=>t(n.result)),n.onerror=(()=>r(n.error)),n.onabort=(()=>r(new Error("Read aborted"))),n.readAsDataURL(e)}))}},{key:"buffer",value:function(){return this[E].then(({response:e,stream:t})=>{return new Response(t,{headers:{"Content-Type":e.headers.get("Content-Type")}}).arrayBuffer()})}},{key:"bytes",value:function(){return this.buffer().then(e=>new Uint8Array(e))}},{key:"cancel",value:function(){this.emitCancelEvent()&&(this[A].abort(),this[D]=!0,this.emitCancelledEvent())}},{key:"pause",value:function(){this[H]||this[N]||this[q]||!this.emitPauseEvent()||(this[N]=!0,this.emitPausedEvent())}},{key:"unpause",value:function(){!this[H]&&this[N]&&this.emitUnpauseEvent()&&(this[N]=!1,this.emitUnpausedEvent())}},{key:"done",get:function(){return!!this[H]}},{key:"type",get:function(){return this[T]}},{key:"totalTime",get:function(){return this[H]?this[H]-this[W]:Date.now()-this[W]}},{key:"waitTime",get:function(){return this[V]?this[V]-this[F]:Date.now()-this[F]}},{key:"loadTime",get:function(){return this[F]?this[q]?this[q]-this[V]:Date.now()-this[V]:0}},{key:"speed",get:function(){return this[F]?((e=this[H]?this[H]-this[_]:Date.now()-this[_])||(e=.01),this[S]/e):0;var e}},{key:"received",get:function(){return this[L]}},{key:"length",get:function(){return this[I]}},{key:"isPaused",get:function(){return this[N]}},{key:y,value:function(e,t,r){this[d](r,0,null);var n=Date.now(),o=1,i=({done:e,value:i})=>e?(t.close(),this[h]()):(t.enqueue(i),this[L]+=i.length,this[V]||this[b](i),this[d](r,this[L],i),this[_]=n,this[S]=o,n=Date.now(),o=i.length,a()),a=()=>this[D]?e.cancel():this[N]?new Promise(e=>{setTimeout(()=>e(a()),100)}):e.read().then(e=>i(e)).catch(e=>this[w](e));return a()}},{key:v,value:function(){if(this.emitRetryEvent())return 0>=this[C]?void 0:(this[A].abort(),this[g](),this[L]=0,this[C]--,this.open())}},{key:O,value:function(e){var t=e.body.getReader(),r=this[I]||+e.headers.get("Content-Length"),n=this[n]||e.headers.get("Content-Type");this[I]=r,this[T]=n,this[m](e.headers),this[P]&&this[P](this[E]);var o=this;return{response:e,stream:new ReadableStream({start:function(e){o[y](t,e,r)}})}}},{key:g,value:function(){this[q]=Date.now(),this.emitCloseEvent()}},{key:m,value:function(e){this.emitHeadersEvent(e)}},{key:d,value:function(e,t,r){this.emitProgressEvent(e,t,r)}},{key:h,value:function(){this[H]=Date.now(),this[g](),this.emitCompleteEvent(),this[i.PromiseMixin.Accept]()}},{key:w,value:function(e){return console.warn("[".concat(e.constructor.name,"] ").concat(e.code,": ").concat(e.message),e),this.emitErrorEvent(e)?this[j](e):this[v]()}},{key:j,value:function(e){return this[H]=Date.now(),this[g](),this.emitFailEvent(e),this[i.PromiseMixin.Reject](e)}},{key:b,value:function(e){clearInterval(this[M]),this[V]=Date.now(),this.emitFirstByteEvent(e)}},{key:"emitProgressEvent",value:function(e,t,r){var n=e?t/e:0,o=this.totalTime,i=this.loadTime,a=this.waitTime,u=this.speed;return this.dispatchEvent(new CustomEvent("progress",{detail:{length:e,received:t,done:n,speed:u,loadTime:i,waitTime:a,totalTime:o,value:r}}))}},{key:"emitOpenEvent",value:function(){return this.dispatchEvent(new CustomEvent("open"))}},{key:"emitCloseEvent",value:function(){return this.dispatchEvent(new CustomEvent("close"))}},{key:"emitFirstByteEvent",value:function(e){return this.dispatchEvent(new CustomEvent("firstByte",{detail:{received:e}}))}},{key:"emitHeadersEvent",value:function(e){return this.dispatchEvent(new CustomEvent("headers",{detail:{headers:e}}))}},{key:"emitCompleteEvent",value:function(){return this.dispatchEvent(new CustomEvent("complete"))}},{key:"emitErrorEvent",value:function(){return this.dispatchEvent(new CustomEvent("error",{cancelable:0<this[C]}))}},{key:"emitRetryEvent",value:function(){return this.dispatchEvent(new CustomEvent("retry",{cancelable:!0}))}},{key:"emitFailEvent",value:function(){return this.dispatchEvent(new CustomEvent("fail"))}},{key:"emitPauseEvent",value:function(){return this.dispatchEvent(new CustomEvent("pause",{cancelable:!0}))}},{key:"emitPausedEvent",value:function(){this.dispatchEvent(new CustomEvent("paused"))}},{key:"emitUnpauseEvent",value:function(){return this.dispatchEvent(new CustomEvent("unpause",{cancelable:!0}))}},{key:"emitUnpausedEvent",value:function(){this.dispatchEvent(new CustomEvent("unpaused"))}},{key:"emitCancelEvent",value:function(){return this.dispatchEvent(new CustomEvent("cancel",{cancelable:!0}))}},{key:"emitCancelledEvent",value:function(){return this.dispatchEvent(new CustomEvent("cancelled"))}}],[{key:"pool",value:function(e){e.finally(()=>{if(this.running.delete(e),this.backlog.length){var t=this.backlog.shift();this.running.add(t),t.open()}}),5>this.running.size?(this.running.add(e),e.open()):this.backlog.push(e)}}]),t}();e.Elicit=U,f(U,"backlog",[]),f(U,"running",new Set)}),require.register("curvature/net/RtcClient.js",function(e,t,r){"use strict";var n=t("curvature/base/Mixin"),o=t("curvature/mixin/EventTargetMixin");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}(this,r)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.RtcClient=void 0;var p=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(c(n=r.call(this)),"candidateTimeout",500),n.peerClient=new RTCPeerConnection(e),n.peerClientChannel=n.peerClient.createDataChannel("chat"),n.peerClientChannel.addEventListener("open",e=>{var t=new CustomEvent("open",{detail:e.data});t.originalEvent=e,n.dispatchEvent(t),n.connected=!0}),n.peerClientChannel.addEventListener("close",e=>{var t=new CustomEvent("close",{detail:e.data});t.originalEvent=e,n.dispatchEvent(t),n.connected=!1}),n.peerClientChannel.addEventListener("message",e=>{var t=new CustomEvent("message",{detail:e.data});t.originalEvent=e,n.dispatchEvent(t)}),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.Mixin.with(o.EventTargetMixin));var r=s(t);return function(e,t,r){t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"send",value:function(e){console.log(this.peerClientChannel.readyState),this.peerClientChannel&&this.peerClientChannel.send(e)}},{key:"close",value:function(){this.peerClientChannel&&this.peerClientChannel.close()}},{key:"offer",value:function(){this.peerClient.createOffer().then(e=>{this.peerClient.setLocalDescription(e)});var e=new Set;return new Promise(t=>{var r=null;this.peerClient.addEventListener("icecandidate",n=>{n.candidate&&(e.add(n.candidate),r&&clearTimeout(r),r=setTimeout(()=>t(this.peerClient.localDescription),this.candidateTimeout))})})}},{key:"accept",value:function(e){var t=new RTCSessionDescription(e);this.peerClient.setRemoteDescription(t)}}]),t}();e.RtcClient=p}),require.register("curvature/net/RtcServer.js",function(e,t,r){"use strict";var n=t("curvature/base/Mixin"),o=t("curvature/mixin/EventTargetMixin");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}(this,r)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.RtcServer=void 0;var p=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(c(n=r.call(this)),"candidateTimeout",500),n.peerServer=new RTCPeerConnection(e),n.peerServer.addEventListener("datachannel",e=>{n.peerServerChannel=e.channel,n.peerServerChannel.addEventListener("open",e=>{var t=new CustomEvent("open",{detail:e.data});t.originalEvent=e,n.dispatchEvent(t),n.connected=!0}),n.peerServerChannel.addEventListener("close",e=>{var t=new CustomEvent("close",{detail:e.data});t.originalEvent=e,n.dispatchEvent(t),n.connected=!1}),n.peerServerChannel.addEventListener("message",e=>{var t=new CustomEvent("message",{detail:e.data});t.originalEvent=e,n.dispatchEvent(t)})}),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.Mixin.with(o.EventTargetMixin));var r=s(t);return function(e,t,r){t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"send",value:function(e){this.peerServerChannel&&"open"===this.peerServerChannel.readyState&&this.peerServerChannel.send(e)}},{key:"close",value:function(){this.peerServerChannel&&this.peerServerChannel.close()}},{key:"answer",value:function(e){return new Promise(t=>{this.peerServer.setRemoteDescription(e),this.peerServer.createAnswer(e=>this.peerServer.setLocalDescription(e),e=>console.error(e));var r=new Set,n=null;this.peerServer.addEventListener("icecandidate",e=>{e.candidate&&(r.add(e.candidate),n&&clearTimeout(n),n=setTimeout(()=>t(this.peerServer.localDescription),this.candidateTimeout))})})}}]),t}();e.RtcServer=p}),require.register("curvature/service/CloudService.js",function(e,t,r){"use strict";var n=t("curvature/base/Router");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.CloudService=void 0;var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"handleFetch",value:function(e){var t=new URL(e.request.url),r=t.pathname+t.search;for(var i of this.routeHandlers)return n.Router.match(r,{routes:i}).then(e=>("object"===o(e)&&e instanceof Response||(e=new Response(e)),e))}}]),e}();e.CloudService=u,Object.defineProperty(u,"routeHandlers",{value:new Set}),globalThis.addEventListener("fetch",e=>{e.respondWith(u.handleFetch(e))})}),require.register("curvature/service/EventPipe.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){throw new TypeError('"'+e+'" is read-only')}Object.defineProperty(e,"__esModule",{value:!0}),e.EventPipe=void 0;e.EventPipe=(e=>{var t=new Headers;t.set("Access-Control-Allow-Methods","GET, OPTIONS"),t.set("Access-Control-Allow-Origin","*"),t.set("Cache-Control","no-cache"),t.set("Content-Type","text/event-stream"),t.set("Connection","keep-alive");var r=new TransformStream,i=r.readable,a=r.writable.getWriter(),u=new TextEncoder,s=[];for(var c of e)c instanceof Promise||(Promise.resolve(c),o("getEvent")),c.then(e=>{var t,r;e&&"object"===n(e)||(e={data:e}),a.write(u.encode("event: ".concat(null!==(t=e.type)&&void 0!==t?t:"ServerEvent","\n")+"data: ".concat(JSON.stringify(e.data),"\n")+"id: ".concat(null!==(r=e.id)&&void 0!==r?r:Date.now(),"\n\n")))}),s.push(c);return Promise.all(s).then(()=>a.close()),new Response(i,{status:"200",statusText:"OK",headers:t})})}),require.register("curvature/service/Service.js",function(e,t,r){"use strict";var n=t("../base/Router");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null==arguments[t]?{}:arguments[t];t%2?o(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function a(e,t,r){return(t=p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){throw new TypeError('"'+e+'" is read-only')}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function p(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:t+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Service=void 0;var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"register",value:function(e,t="/"){if(!("serviceWorker"in navigator))return Promise.reject("Service Workers not supported.");var r=navigator.serviceWorker;return r.register(e,{scope:t}),r.ready.then(e=>{var t=e.active;t&&this.setupWorker(t)}),r.ready}},{key:"request",value:function({command:e,args:t,echo:r,notify:n,to:o=null,broadcast:i=!1}){var a=(1/Math.random()).toString(36),u=new Promise(e=>{this.incomplete.set(a,e)});for(var l of this.workers){var f=c(l,2),p=f[0],y=f[1];if("redundant"===y.state){if(!navigator.serviceWorker.controller||navigator.serviceWorker.controller.scriptURL!==p||"activated"!==navigator.serviceWorker.controller.state)return Promise.reject("Worker has been updated, connection lost. Please refresh the page.");navigator.serviceWorker.controller,s("worker"),this.setupWorker(y)}y.postMessage({correlationId:a,broadcast:i,command:e,notify:n,args:t,echo:r,to:o})}return u}},{key:"broadcast",value:function({command:e,args:t,echo:r,notify:n}){this.request({command:e,args:t,echo:r,notify:n,broadcast:!0})}},{key:"handleResponse",value:function(e){e.target.ready.then(e=>this.setupWorker(e.active));var t=e.data;if(t.to||t.correlationId){if(!this.incomplete.has(t.correlationId))return void(t.broadcast?this.handleBroadcast(e):t.to&&this.handleMessage(e));var r=this.incomplete.get(t.correlationId);this.incomplete.delete(t.correlationId),r(t.result)}}},{key:"handleRequest",value:function(e){if(e.origin===globalThis.origin){var t=e.data,r=Promise.resolve("Unexpected request.");if(t.echo)r=Promise.resolve(t.echo);else if(t.notify){var n=t.args||[];r=globalThis.registration.getNotifications().then(e=>(e.forEach(e=>this.notifications.set(e.tag,e)),globalThis.registration.showNotification(...n))).then(()=>globalThis.registration.getNotifications()).then(()=>{var t=e.data.args&&e.data.args[1]&&e.data.args[1].tag;return new Promise(r=>{var n;this.notifyClients.has(t)?n=this.notifyClients.get(t):(n=new Map,this.notifyClients.set(t,n)),n.set(e.source,r)})})}else if(t.command){var o=t.command,a=t.args||[];for(var s of this.serviceHandlers)if("function"==typeof s[o]){r=s[o](...a);break}}if(u(r)!==Promise&&(r=Promise.resolve(r)),t.broadcast){var c=e.source.id;globalThis.clients.matchAll({type:"window",includeUncontrolled:!0}).then(e=>{e.forEach(e=>{r.then(r=>e.postMessage(i(i({},t),{},{result:r,source:c})))})})}else if(t.to){var l=e.source.id;globalThis.clients.get(t.to).then(e=>{r.then(r=>{e.postMessage(i(i({},t),{},{result:r,source:l}))})})}else r.then(r=>e.source.postMessage(i(i({},t),{},{result:r})))}}},{key:"setupWorker",value:function(e){this.workers.set(e.scriptURL,e),navigator.serviceWorker.addEventListener("message",e=>this.handleResponse(e))}},{key:"handleInstall",value:function(e){for(var t of(globalThis.skipWaiting(),this.pageHandlers))"function"==typeof t.handleInstall&&t.handleInstall(e)}},{key:"handleActivate",value:function(e){for(var t of this.pageHandlers)"function"==typeof t.handleActivate&&t.handleActivate(e)}},{key:"handleError",value:function(e){for(var t of(console.error(e),this.pageHandlers))"function"==typeof t.handleError&&t.handleError(e)}},{key:"handlePush",value:function(){}},{key:"handleSync",value:function(){}},{key:"handlePeriodicSync",value:function(){}},{key:"handleFetch",value:function(e){var t=new URL(e.request.url),r=t.pathname+t.search;for(var o of this.routeHandlers)return n.Router.match(r,{routes:o},{event:e}).then(e=>{if(void 0!==e)return"object"===u(e)&&e instanceof Response||(e=new Response(e)),e})}},{key:"handleBroadcast",value:function(e){for(var t of this.pageHandlers)"function"==typeof t.handleBroadcast&&t.handleBroadcast(e)}},{key:"handleMessage",value:function(e){for(var t of this.pageHandlers)"function"==typeof t.handleMessage&&t.handleMessage(e)}},{key:"notify",value:function(e,t={},r=!1){return t.tag=t.tag||"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),new Promise(e=>{Notification.requestPermission(t=>{e(t)})}).then(()=>this.request({notify:!0,args:[e,t],broadcast:r}))}},{key:"handleNotifyClicked",value:function(e){if(this.notifyClients.has(e.notification.tag)){var t=[];for(this.notifyClients.get(e.notification.tag).forEach((r,n)=>{r({action:e.action,data:e.notification.data,click:Date.now(),time:e.notification.timestamp,tag:e.notification.tag}),t.push(n)});t.length;){if(t.pop().focus())break}this.notifyClients.delete(e.notification.tag)}for(var r of this.pageHandlers)"function"==typeof r.handleNotifyClicked&&r.handleNotifyClicked(e);e.notification.close()}},{key:"handleNotifyClosed",value:function(e){this.notifyClients.has(e.notification.tag)&&this.notifyClients.get(e.notification.tag).forEach(t=>t({action:void 0,data:e.notification.data,close:Date.now(),time:e.notification.timestamp,tag:e.notification.tag}));if(this.notifyClients.delete(e.notification.tag))for(var t of this.pageHandlers)"function"==typeof t.handleNotifyDismissed&&t.handleNotifyDismissed(e);for(var r of this.pageHandlers)"function"==typeof r.handleNotifyClosed&&r.handleNotifyClosed(e)}}]),e}();e.Service=y,Object.defineProperty(y,"serviceHandlers",{value:new Set}),Object.defineProperty(y,"routeHandlers",{value:new Set}),Object.defineProperty(y,"pageHandlers",{value:new Set}),Object.defineProperty(y,"notifications",{value:new Map}),Object.defineProperty(y,"notifyClients",{value:new Map}),Object.defineProperty(y,"incomplete",{value:new Map}),Object.defineProperty(y,"workers",{value:new Map}),globalThis.document||(globalThis.addEventListener("install",e=>y.handleInstall(e)),globalThis.addEventListener("activate",e=>y.handleActivate(e)),globalThis.addEventListener("error",e=>y.handleActivate(e)),globalThis.addEventListener("message",e=>y.handleRequest(e)),globalThis.addEventListener("fetch",e=>{e.waitUntil(new Promise(t=>{y.handleFetch(e).then(r=>{r&&e.respondWith(r),t()})}))}),globalThis.addEventListener("push",e=>y.handlePush(e)),globalThis.addEventListener("notificationclose",e=>y.handleNotifyClosed(e)),globalThis.addEventListener("notificationclick",e=>y.handleNotifyClicked(e)),globalThis.addEventListener("sync",e=>y.handleSync(e)),globalThis.addEventListener("periodicsync",e=>y.handlePeriodicSync(e)))}),require.register("curvature/strings/Parser.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:t+""}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=i(function e(){u(this,e),this.depth=0,this.match=null,this.type="normal",this.list=[]});!function(){function e(t,r){u(this,e),this.index=0,this.mode="normal",this.stack=[],this.tokens=t||{},this.modes=r||{}}i(e,[{key:"parse",value:function(e){if(!(this.mode in this.modes))throw new Error("Mode ".concat(this.mode," does not exist on parser."),this);var t=new s,r=this.modes[this.mode];for(t.type=this.mode;this.index<e.length;){var o=!1;for(var i in r){var a=this.tokens[i].exec(e.substr(this.index));if(a&&!(0<a.index)){if(!r[i])throw new Error('Invalid token type "'.concat(i,'" found in mode "').concat(this.mode,'".'));var u=a[0],c="object"===n(r[i])?r[i]:[r[i]];o=!0,console.log(t.type,t.depth,u),this.index+=u.length;var l="normal";for(var f in c){var p=c[f];if("string"!=typeof p)switch(p){case 1:t.list.push(u);break;case 2:var y=new s;y.depth=t.depth+1,y.match=u,y.type=l,t.list.push(y),this.stack.push(t),t=y;break;case 3:if(!this.stack.length)throw console.log(this.mode,'"'.concat(u,'"'),t),new Error("Already at the top of the stack.");t=this.stack.pop(),this.mode=t.type,r=this.modes[this.mode]}else{if(!(p in this.modes))throw new Error('Mode "'.concat(p,'" does not exist.'));this.mode=p,r=this.modes[this.mode],l=p}}break}}if(!o)break}if(this.stack.length)throw new Error("Did not return to top of stack!");return this.stack.shift()||t}}])}()}),require.register("curvature/tag/LazyTag.js",function(e,t,r){"use strict";var n=t("./ScrollTag"),o=t("../base/Dom");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:t+""}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.LazyTag=void 0;var f=function(e){function t(e,n,i,a,u){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=r.call(this,e,n,i,a,u)).element.classList.remove("cv-visible"),s.element.classList.add("cv-not-visible"),s.bindTo("visible",e=>{e&&(s.afterScroll&&clearTimeout(s.afterScroll),s.afterScroll=setTimeout(()=>{s.element&&(s.element.classList.add("cv-visible"),s.element.classList.remove("cv-not-visible"),o.Dom.mapTags(s.element,"[cv-lazy-style]",e=>{var t=e.getAttribute("cv-lazy-style"),r=e.getAttribute("style");e.setAttribute("style",r+";"+t),e.removeAttribute("cv-lazy-style")}))},.5*(s.offsetTop||s.element.offsetTop)+.5*s.element.offsetLeft))}),s}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,n.ScrollTag);var r=c(t);return function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}();e.LazyTag=f}),require.register("curvature/tag/PopOutTag.js",function(e,t,r){"use strict";t("../base/Bindable"),t("../base/Dom");var n=t("../base/Tag");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(3>arguments.length?e:r):o.value}}).apply(this,arguments)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.PopOutTag=void 0;var f=function(e){function t(e,n,o,i,a){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(u=r.call(this,e,n,o,i,a)).defaultStyle=e.getAttribute("style")||"",u.poppedOut=!1,u.moving=!1,u.hostSelector=e.getAttribute("cv-pop-to"),u.popMargin=e.getAttribute("cv-pop-margin")||0,u.popSpeed=e.getAttribute("data-pop-speed")||1750,e.removeAttribute("cv-pop-to"),e.removeAttribute("cv-pop-margin"),e.removeAttribute("data-pop-speed"),u.verticalDuration=.4,u.horizontalDuration=.1,u.unpoppedStyle="",u.previousScroll=0,u.bodyStyle="",u.bodyScroll=0,u.element.classList.add("unpopped"),u.scrollStyle="",u.existingStyle="",u.popTimeout=null,u.rect=null,u.transformRect=null,u.clickListener=(e=>{if(u.rect=u.element.getBoundingClientRect(),!u.poppedOut){u.distance=Math.sqrt(Math.pow(u.rect.top,2)+Math.pow(u.rect.left,2));var t=u.popSpeed,r=window.innerWidth-u.rect.right,n=window.innerHeight-u.rect.bottom,o=(u.rect.left+r)/2,i=(u.rect.top+n)/2;u.horizontalDuration=o/t,u.verticalDuration=i/t,.1>u.horizontalDuration&&(u.horizontalDuration=.1),.1>u.verticalDuration&&(u.verticalDuration=.1),.4<u.horizontalDuration&&(u.horizontalDuration=.4),.4<u.verticalDuration&&(u.verticalDuration=.4)}u.element.contains(e.target)&&(e.stopPropagation(),e.preventDefault(),u.moving||(u.poppedOut?e.target.matches(".closeButton")&&u.poppedOut&&u.unpop():u.pop()))}),u.escapeListener=(e=>{u.poppedOut&&"Escape"===e.key&&u.unpop()}),u.resizeListener=(()=>{if(u.poppedOut){for(var e=u.element;e.parentNode&&!e.matches(u.hostSelector)&&e.parentNode!=document;)e=e.parentNode;var t=e.getBoundingClientRect(),r=u.existingStyle+u.unpoppedStyle,n=t.x,o=t.y+document.documentElement.scrollTop,i=t.width,a=t.height;u.transformRect&&(n-=u.transformRect.x,o-=u.transformRect.y),u.popMargin,u.popMargin,u.popMargin,u.popMargin,r+=";\n\t\t\t\tz-index:    99999;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t\toverflow: hidden;\n\t\t\t\tposition:  fixed;\n\t\t\t\tleft:      ".concat(n,"px;\n\t\t\t\ttop:        ").concat(o,"px;\n\t\t\t\twidth:      ").concat(i,"px;\n\t\t\t\theight:     ").concat(a,"px;\n\t\t\t\toverflow-y: auto;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t"),u.element.setAttribute("style",r)}}),u.element.___clickListener___||(Object.defineProperty(u.element,"___scrollListeners___",{enumerable:!1,writable:!0}),e.___clickListener___=u.clickListener,e.___escapeListener___=u.escapeListener,e.___resizeListener___=u.resizeListener,u.element.addEventListener("click",e.___clickListener___),window.addEventListener("keyup",e.___escapeListener___),window.addEventListener("resize",e.___resizeListener___),u.cleanup.push((e=>()=>{e.removeEventListener("click",e.___clickListener___),window.removeEventListener("keyup",e.___escapeListener___),window.removeEventListener("resize",e.___resizeListener___)})(e))),u}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,n.Tag);var r=c(t);return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"pause",value:function(e=!0){u(l(t.prototype),"pause",this).call(this,e),e&&(document.body.setAttribute("style",this.bodyStyle),document.body.setAttribute("style",""))}},{key:"pop",value:function(){t.popLevel(),this.previousScroll=window.scrollY,this.rect=this.element.getBoundingClientRect(),this.existingStyle=this.element.getAttribute("style");var e=this.element;for(this.transformRect=null;e.parentNode&&!e.matches(this.hostSelector)&&e.parentNode!=document;)e=e.parentNode,this.transformRect||"none"===getComputedStyle(e).transform||(this.transformRect=e.getBoundingClientRect());var r=e.getBoundingClientRect();this.element.classList.add("popping");var n=this.rect.x,o=this.rect.y,i=this.rect.width,a=this.rect.height;this.transformRect&&(n-=this.transformRect.x,o-=this.transformRect.y),window.requestAnimationFrame(()=>{this.unpoppedStyle="\n\t\t\t\t;position:  fixed;\n\t\t\t\tleft:       ".concat(n,"px;\n\t\t\t\ttop:        ").concat(o,"px;\n\t\t\t\twidth:      ").concat(i,"px;\n\t\t\t\theight:     ").concat(a,"px;\n\t\t\t\tz-index:    99999;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t\toverflow: hidden;\n\t\t\t");var e=r.x,t=r.y+document.documentElement.scrollTop,u=r.width,s=r.height;this.transformRect&&(e-=this.transformRect.x,t-=this.transformRect.y),this.popMargin,this.popMargin,this.popMargin,this.popMargin;var c=this.existingStyle+this.unpoppedStyle;this.element.setAttribute("style",c),setTimeout(()=>{c+="\n\t\t\t\t\t;left:      ".concat(e,"px;\n\t\t\t\t\ttop:        ").concat(t+document.documentElement.scrollTop,"px;\n\t\t\t\t\twidth:      ").concat(u,"px;\n\t\t\t\t\theight:     ").concat(s,"px;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t\ttransition: width ").concat(this.horizontalDuration,"s ease-out\n\t\t\t\t\t\t, top ").concat(this.verticalDuration,"s           ease-out\n\t\t\t\t\t\t, left ").concat(this.horizontalDuration,"s        ease-out\n\t\t\t\t\t\t, height ").concat(this.verticalDuration,"s        ease-out\n\t\t\t\t\t\t, all ").concat(this.horizontalDuration,"s         ease-out;\n\t\t\t\t"),this.moving=!0,this.element.setAttribute("style",c),this.element.classList.add("popped"),this.element.classList.remove("unpopped"),this.element.classList.remove("popping"),this.popTimeout=setTimeout(()=>{if(this.element){this.bodyStyle=document.body.getAttribute("style"),document.body.setAttribute("style","height:100%;overflow:hidden;"),this.moving=!1;var e=new CustomEvent("cvPopped");this.element.dispatchEvent(e),this.scrollStyle=this.element.getAttribute("style")}},1e3*this.horizontalDuration)},33.4),this.poppedOut=!0});var u=new CustomEvent("cvPop",{bubbles:!0,detail:{tag:this,view:this.parent,publicId:this.parent.args.publicId}});this.element.dispatchEvent(u)}},{key:"unpop",value:function(){this.element.classList.add("unpopping"),this.popTimeout&&clearTimeout(this.popTimeout),0==t.level?document.body.setAttribute("style",""):document.body.setAttribute("style",this.bodyStyle||""),t.unpopLevel(),this.rect||(this.rect=this.element.getBoundingClientRect()),window.scrollTo(0,this.previousScroll);var e=this.existingStyle+this.unpoppedStyle+";transition: width ".concat(this.horizontalDuration,"s ease-out\n\t\t\t\t\t, height ").concat(this.verticalDuration,"s        ease-out\n\t\t\t\t\t, all ").concat(this.horizontalDuration,"s         ease-out;");this.element.setAttribute("style",e),this.moving=!0,setTimeout(()=>{this.element&&this.element.classList.remove("popped")},1e3*this.horizontalDuration),setTimeout(()=>{if(this.element.classList.add("unpopped"),this.element.classList.remove("unpopping"),this.element){this.element.setAttribute("style",this.defaultStyle),this.moving=!1;var e=new CustomEvent("cvUnpopped");this.element.dispatchEvent(e)}},1e3*this.horizontalDuration);var r=new CustomEvent("cvUnpop",{bubbles:!0,detail:{tag:this,view:this.parent,publicId:this.parent.args.publicId}});this.element.dispatchEvent(r),this.poppedOut=!1}},{key:"remove",value:function(){document.body.setAttribute("style",this.bodyStyle),u(l(t.prototype),"remove",this).call(this)}}],[{key:"popLevel",value:function(){return this.level||(this.level=0),this.level++,this.level}},{key:"unpopLevel",value:function(){return this.level||(this.level=0),this.level--,0>this.level&&(this.level=0),this.level}}]),t}();e.PopOutTag=f}),require.register("curvature/tag/ScrollTag.js",function(e,t,r){"use strict";var n=t("../base/Tag"),o=t("../base/Dom");t("../base/Bindable");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:t+""}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollTag=void 0;var f=function(e){function t(e,n,i,a,u){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=r.call(this,e,n,i,a,u)).visible=!1,s.offsetTop=!1,s.offsetBottom=!1,s.attachListener=(t=>{for(var r=t.target;r.parentNode;)r=r.parentNode;r!==window&&r!==document||t.target!==e||(s.addScrollListener(t.target),s.addResizeListener(t.target),s.scrolled(t.target),t.target.removeEventListener("cvDomAttached",s.attachListener))}),s.element.addEventListener("cvDomAttached",s.attachListener),s.cleanup.push((e=>()=>{e.removeEventListener("cvDomAttached",s.attachListener)})(s.element)),s.bindTo("visible",e=>{var t;t=e?new Event("cvScrolledIn"):new Event("cvScrolledOut"),o.Dom.mapTags(s.element,!1,e=>{e.dispatchEvent(t)}),s.element.dispatchEvent(t)}),s.bindTo("offsetTop",e=>{var t=new CustomEvent("cvScrolled",{detail:{offset:e}});o.Dom.mapTags(s.element,!1,e=>{e.dispatchEvent(t)}),s.element.dispatchEvent(t)}),s}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,n.Tag);var r=c(t);return function(e,t,r){t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"scrolled",value:function(){var e=this.element;if(e){var t=!1,r=e.getBoundingClientRect();0<r.bottom&&r.top<window.innerHeight&&(t=!0),this.proxy.visible=t,this.proxy.offsetTop=r.top||0,this.proxy.offsetBottom=r.bottom||0}}},{key:"addScrollListener",value:function(e){if(!e.___scrollListener___){Object.defineProperty(e,"___scrollListener___",{enumerable:!1,writable:!0}),e.___scrollListener___=(e=>{this.scrolled(e.target)});for(var t=e,r={passive:!0,capture:!0};t.parentNode;)(t=t.parentNode).addEventListener("scroll",e.___scrollListener___,r),this.direct.cleanup.push(((e,t,r)=>()=>{e.removeEventListener("scroll",t.___scrollListener___,r),t=e=null})(t,e,r))}}},{key:"addResizeListener",value:function(e){e.___resizeListener___||(Object.defineProperty(e,"___resizeListener___",{enumerable:!1,writable:!0}),e.___resizeListener___=(e=>{this.scrolled(e.target)}),window.addEventListener("resize",this.resizeListener),this.direct.cleanup.push((t=>()=>{window.removeEventListener("resize",t.___resizeListener___),e.___resizeListener___=null,e=null})(e)))}}]),t}();e.ScrollTag=f}),require.register("curvature/toast/Toast.js",function(e,t,r){"use strict";var n=t("../base/View"),o=t("../base/Bindable"),i=t("./ToastAlert");function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:t+""}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Toast=void 0;var p=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=r.call(this)).template='\n\t\t\t<div id = "[[_id]]" cv-each = "alerts:alert" class = "toast">\n\t\t\t\t[[alert]]\n\t\t\t</div>\n\t\t',e.args.alerts=[],e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,n.View);var r=l(t);return function(e,t,r){t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"pop",value:function(e){this.args.alerts.length,this.args.alerts.push(e),e.decay((e=>()=>{for(var t in this.args.alerts)if(o.Bindable.ref(this.args.alerts[t])===o.Bindable.ref(e))return e.remove(),void delete this.args.alerts[t]})(e))}},{key:"alert",value:function(e,t,r){return this.pop(new i.ToastAlert({title:e,body:t,time:r}))}}],[{key:"instance",value:function(){return this.inst||(this.inst=new this),this.inst}}]),t}();e.Toast=p}),require.register("curvature/toast/ToastAlert.js",function(e,t,r){"use strict";var n=t("../base/View");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:t+""}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ToastAlert=void 0;var l=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=r.call(this,e)).args.running=!1,n.args.time=n.args.time||16e3,n.init=n.args.time,n.args.title=n.args.title||"Standard alert",n.args.status="new",n.args.body=n.args.body||"This is a standard alert.",n.template='\n\t\t\t<div id = "[[_id]]" class = "alert toast-[[status]]">\n\t\t\t\t<h3>[[title]]</h3>\n\t\t\t\t<p>[[body]]</p>\n\t\t\t</div>\n\t\t',n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,n.View);var r=s(t);return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"decay",value:function(){this.args.running=!0,this.onTimeout(50,()=>{this.args.status=""}),this.onTimeout(300,()=>{this.args.status="decaying"}),this.onTimeout(2400,()=>{this.args.status="imminent"}),this.onTimeout(3500,()=>{this.remove()})}}]),t}();e.ToastAlert=l}),require.register("___globals___",function(e,t,r){})}(),require("___globals___");
