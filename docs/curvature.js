!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},r={},o={}.hasOwnProperty,i=/^\.\.?(\/|$)/,a=function(e,t){for(var n,r=[],o=(i.test(t)?e+"/"+t:t).split("/"),a=0,u=o.length;a<u;a++)".."===(n=o[a])?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},c=function(t,r){var o,i={id:t,exports:{},hot:v&&v.createHot(t)};return n[t]=i,r(i.exports,(o=t,function(t){var n=a(u(o),t);return e.require(n,o)}),i),i.exports},s=function(e){var t=r[e];return t&&e!==t?s(t):e},l=function(e,r){null==r&&(r="/");var i=s(e);if(o.call(n,i))return n[i].exports;if(o.call(t,i))return c(i,t[i]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};l.alias=function(e,t){r[t]=e};var f=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/;l.register=l.define=function(e,i){if(e&&"object"==typeof e)for(var a in e)o.call(e,a)&&l.register(a,e[a]);else t[e]=i,delete n[e],function(e){if(f.test(e)){var t=e.replace(f,"");o.call(r,t)&&r[t].replace(f,"")!==t+"/index"||(r[t]=e)}if(p.test(e)){var n=e.replace(p,"");o.call(r,n)||(r[n]=e)}}(e)},l.list=function(){var e=[];for(var n in t)o.call(t,n)&&e.push(n);return e};var v=e._hmr&&new e._hmr(function(e,t){return s(a(u(e),t))},l,t,n);l._cache=n,l.hmr=v&&v.wrap,l.brunch=!0,e.require=l}}(),function(){"undefined"==typeof window||window;var e=function(e,t,n){var r={},o=function(t,n){try{return e(n+"/node_modules/"+t)}catch(e){if(-1===e.toString().indexOf("Cannot find module"))throw e;if(-1!==n.indexOf("node_modules")){var i=n.split("/"),a=i.lastIndexOf("node_modules"),u=i.slice(0,a).join("/");return o(t,u)}}return r};return function(i){if(i in t&&(i=t[i]),i){if("."!==i[0]&&n){var a=o(i,n);if(a!==r)return a}return e(i)}}};require.register("curvature/base/Bindable.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t,n,r){return(e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(o,n.prototype),o}).apply(null,arguments)}function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Bindable=void 0;var s=Symbol("ref"),l=Symbol("original"),f=Symbol("deck"),p=Symbol("binding"),v=Symbol("subBinding"),d=Symbol("bindingAll"),y=Symbol("isBindable"),h=Symbol("wrapping"),b=Symbol("Names"),m=Symbol("executing"),g=Symbol("stack"),w=(Symbol("object"),Symbol("wrapped")),_=Symbol("unwrapped"),O=Symbol("getProto"),j=Symbol("onGet"),k=Symbol("onAllGet"),S=Symbol("bindChain"),P=Symbol("Descriptors"),T=Symbol("NoGetters"),R=Object.getPrototypeOf(Int8Array),E=Set.prototype[Symbol.iterator],A=Map.prototype[Symbol.iterator],C=globalThis,B=[C.Node,C.File,C.Map,C.Set,C.WeakMap,C.WeakSet,C.ArrayBuffer,C.ResizeObserver,C.MutationObserver,C.PerformanceObserver,C.IntersectionObserver].filter(function(e){return"function"==typeof e}),x=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var o,i;return o=t,i=[{key:"isBindable",value:function(e){return!(!e||!e[y])&&e[y]===t}},{key:"onDeck",value:function(e,t){return e[f][t]||!1}},{key:"ref",value:function(e){return e[s]||e||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"shuck",value:function(e,n){n=n||new Map;var r={};if(e instanceof R||e instanceof ArrayBuffer){var o=e.slice(0);return n.set(e,o),o}var i=Object.keys(e);for(var u in i){var c=i[u];if("___"!==c.substring(0,3)){var s=n.get(e[c]);if(s)r[c]=s;else if(e[c]!==e){if(e[c]&&"object"===a(e[c])){var f=e[c];t.isBindable(e[c])&&(f=e[c][l]),r[c]=this.shuck(f,n)}else r[c]=e[c];n.set(e[c],r[c])}else n.set(e[c],r),r[c]=r}}return t.isBindable(e)&&(delete r.bindTo,delete r.isBound),r}},{key:"make",value:function(o){var i=this;if(!o||!["function","object"].includes(a(o)))return o;if(B.filter(function(e){return o instanceof e}).length||Object.isSealed(o)||!Object.isExtensible(o))return o;if(o[s])return o[s];if(o[p])return o;if(Object.defineProperty(o,s,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(o,l,{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.defineProperty(o,f,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(o,p,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(o,v,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(o,d,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(o,y,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(o,m,{enumerable:!1,writable:!0}),Object.defineProperty(o,h,{enumerable:!1,writable:!0}),Object.defineProperty(o,g,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(o,"___before___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(o,"___after___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(o,w,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(o,_,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(o,P,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(o,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=!1;if(Array.isArray(n)){var s=n.map(function(t){return e(t,r,u)});return function(){return s.map(function(e){return e()})}}if(n instanceof Function&&(u=r||{},r=n,c=!0),u.delay>=0&&(r=i.wrapDelayCallback(r,u.delay)),u.throttle>=0&&(r=i.wrapThrottleCallback(r,u.throttle)),u.wait>=0&&(r=i.wrapWaitCallback(r,u.wait)),u.frame&&(r=i.wrapFrameCallback(r,u.frame)),u.idle&&(r=i.wrapIdleCallback(r)),c){var l=o[d].length;if(o[d].push(r),!("now"in u)||u.now)for(var f in o)r(o[f],f,o,!1);return function(){delete o[d][l]}}if(o[p][n]||(o[p][n]=new Set),u.children){var y=r;r=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],c=o[v].get(y);if(c&&(o[v].delete(y),c()),"object"===a(i)){var s=t.make(i);t.isBindable(s)&&o[v].set(y,s.bindTo(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y.apply(void 0,n.concat(t))},Object.assign({},u,{children:!1}))),y.apply(void 0,n)}else y.apply(void 0,n)}}o[p][n].add(r),"now"in u&&!u.now||r(o[n],n,o,!1);var h=function(){var e=o[v].get(r);e&&(o[v].delete(r),e()),o[p][n]&&o[p][n].has(r)&&o[p][n].delete(r)};return u.removeWith&&u.removeWith instanceof View&&u.removeWith.onRemove(function(){return h}),h}}),Object.defineProperty(o,S,{configurable:!1,enumerable:!1,writable:!1,value:function(e,t){var n=e.split("."),r=n.shift(),a=n.slice(0),u=[];return u.push(o.bindTo(r,function(e,n,r,o){var c=a.join(".");0!==a.length?(void 0===e&&(e=r[n]=i.makeBindable({})),u=u.concat(e[S](c,t))):t(e,n,r,o)})),function(){return u.map(function(e){return e()})}}}),Object.defineProperty(o,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=o.___before___.length;o.___before___.push(e);var n=!1;return function(){n||(n=!0,delete o.___before___[t])}}}),Object.defineProperty(o,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=o.___after___.length;o.___after___.push(e);var n=!1;return function(){n||(n=!0,delete o.___after___[t])}}}),Object.defineProperty(o,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e in o[d])if(o[d][e])return!0;for(var t in o[p])for(var n in o[p][t])if(o[p][t][n])return!0;return!1}}),!o[T]){var u=function(e){o[e]&&o[e]instanceof Object&&!o[e]instanceof Promise&&(B.filter(function(t){return o[e]instanceof t}).length||!Object.isExtensible(o[e])||Object.isSealed(o[e])||(o[e]=t.make(o[e])))};for(var c in o)u(c)}var C=o[P],x=o[w],M=o[g],D={get:function(n,i){if(x.has(i))return x.get(i);if(i===s||i===l||"apply"===i||"isBound"===i||"bindTo"===i||"__proto__"===i||"constructor"===i)return o[i];var a;if(C.has(i)?a=C.get(i):(a=Object.getOwnPropertyDescriptor(o,i),C.set(i,a)),a&&!a.configurable&&!a.writable)return o[i];if(k in o)return o[k](i);if(j in o&&!(i in o))return o[j](i);if(a&&!a.configurable&&!a.writable)return x.set(i,o[i]),o[i];if("function"==typeof o[i]){if(b in o[i])return o[i];Object.defineProperty(o[_],i,{configurable:!1,enumerable:!1,writable:!1,value:o[i]});var u=Object.getPrototypeOf(o)[i]===o[i],c="function"==typeof Promise&&o instanceof Promise||"function"==typeof Map&&o instanceof Map||"function"==typeof Set&&o instanceof Set||"function"==typeof A&&o.prototype===A||"function"==typeof E&&o.prototype===E||"function"==typeof E&&o.prototype===E||"function"==typeof WeakMap&&o instanceof WeakMap||"function"==typeof WeakSet&&o instanceof WeakSet||"function"==typeof Date&&o instanceof Date||"function"==typeof R&&o instanceof R||"function"==typeof ArrayBuffer&&o instanceof ArrayBuffer||"function"==typeof EventTarget&&o instanceof EventTarget||"function"==typeof ResizeObserver&&o instanceof ResizeObserver||"function"==typeof MutationObserver&&o instanceof MutationObserver||"function"==typeof PerformanceObserver&&o instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&o instanceof IntersectionObserver||"function"==typeof o[Symbol.iterator]&&"next"===i?o:o[s],f=function(){o[m]=i,M.unshift(i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s,l,f=r(o.___before___);try{for(f.s();!(s=f.n()).done;){(0,s.value)(o,i,M,o,n)}}catch(e){f.e(e)}finally{f.f()}if(new.target)l=e(o[_][i],n);else{var p=o[_][i];l=u?p.apply(c||o,n):p.apply(void 0,n)}var v,d=r(o.___after___);try{for(d.s();!(v=d.n()).done;){(0,v.value)(o,i,M,o,n)}}catch(e){d.e(e)}finally{d.f()}return o[m]=null,M.shift(),l};(f[b]=f[b]||new WeakMap).set(o,i),f[k]=function(e){var t=f[b].get(o);return o[t][e]};var p=t.make(f);return x.set(i,p),p}return o[i]},set:function(e,n,i){if(n===l)return!0;if(void 0!==o[f][n]&&o[f][n]===i)return!0;if("string"==typeof n&&"___"===n.substring(0,3)&&"___"===n.slice(-3))return!0;if(e[n]===i)return!0;for(var a in i&&i instanceof Object&&(B.filter(function(e){return o instanceof e}).length||!Object.isExtensible(o)||Object.isSealed(o)||o[T]||(i=t.makeBindable(i))),o[f][n]=i,o[d])o[d][a]&&o[d][a](i,n,e,!1);var u=!1;if(n in o[p]){var c,s=r(o[p][n]);try{for(s.s();!(c=s.n()).done;)!1===(0,c.value)(i,n,e,!1,e[n])&&(u=!0)}catch(e){s.e(e)}finally{s.f()}}if(delete o[f][n],!u){var v=Object.getOwnPropertyDescriptor(e,n);e instanceof File&&"lastModifiedDate"==n||v&&!v.writable||e[n]!==i||(e[n]=i)}var y=Reflect.set(e,n,i);if(Array.isArray(e)&&o[p].length)for(var h in o[p].length)(0,o[p].length[h])(e.length,"length",e,!1,e.length);return y},construct:function(r,i){var a="constructor";for(var u in r.___before___)r.___before___[u](r,a,o[g],void 0,i);var c=t.make(e(r[l],n(i)));for(var s in r.___after___)r.___after___[s](r,a,o[g],c,i);return c},getPrototypeOf:function(e){return O in o?o[O]:Reflect.getPrototypeOf(e)},deleteProperty:function(e,t){if(!(t in e))return!0;if(C.has(t)){var n=C.get(t);if(n&&!n.configurable)return!1;C.delete(t)}for(var r in o[d])o[d][r](void 0,t,e,!0,e[t]);if(t in o[p])for(var i in o[p][t])o[p][t][i]&&o[p][t][i](void 0,t,e,!0,e[t]);return delete e[t],!0}};return o[T]&&delete D.get,Object.defineProperty(o,s,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(o,D)}),o[s]}},{key:"clearBindings",value:function(e){var t;(t=function(e){return Object.keys(e).map(function(t){return delete e[t]})},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.map(t)})(e[w],e[p],e[d],e.___after___,e.___before___)}},{key:"resolve",value:function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.split("."),i=o[0];o.length;){if(r&&1===o.length)return[e.NoGetters?this.make(e):e,o.shift(),i];!(!(n=o.shift())in e)&&e[n]&&e[n]instanceof Object||(e[n]={}),e=e.NoGetters?this.make(e[n]):e[n]}return[this.make(e),n,i]}},{key:"wrapDelayCallback",value:function(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return setTimeout(function(){return e.apply(void 0,r)},t)}}},{key:"wrapThrottleCallback",value:function(e,t){var n=this;return this.throttles.set(e,!1),function(){n.throttles.get(e,!0)||(e.apply(void 0,arguments),n.throttles.set(e,!0),setTimeout(function(){n.throttles.set(e,!1)},t))}}},{key:"wrapWaitCallback",value:function(e,t){var n=this;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a;(a=n.waiters.get(e))&&(n.waiters.delete(e),clearTimeout(a)),a=setTimeout(function(){return e.apply(void 0,o)},t),n.waiters.set(e,a)}}},{key:"wrapFrameCallback",value:function(e,t){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];requestAnimationFrame(function(){return e.apply(void 0,n)})}}},{key:"wrapIdleCallback",value:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(window.requestIdleCallback||requestAnimationFrame)(function(){return e.apply(void 0,n)})}}}],null&&u(o.prototype,null),i&&u(o,i),t}();t.Bindable=x,c(x,"waiters",new WeakMap),c(x,"throttles",new WeakMap),Object.defineProperty(x,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:j}),Object.defineProperty(x,"NoGetters",{configurable:!1,enumerable:!1,writable:!1,value:T}),Object.defineProperty(x,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:O}),Object.defineProperty(x,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:k})}()}),require.register("curvature/base/Cache.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r;return n=t,r=[{key:"store",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",o=0;n&&(o=1e3*n+(new Date).getTime()),this.buckets||(this.buckets=new Map),this.buckets.has(r)||this.buckets.set(r,new Map);var i=new CustomEvent("cvCacheStore",{cancelable:!0,detail:{key:e,value:t,expiry:n,bucket:r}});document.dispatchEvent(i)&&this.buckets.get(r).set(e,{value:t,expiration:o})}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard",r=new CustomEvent("cvCacheLoad",{cancelable:!0,detail:{key:e,defaultvalue:t,bucket:n}});if(!document.dispatchEvent(r))return t;if(this.buckets&&this.buckets.has(n)&&this.buckets.get(n).has(e)){var o=this.buckets.get(n).get(e);if(0===o.expiration||o.expiration>(new Date).getTime())return this.buckets.get(n).get(e).value}return t}}],null&&e(n.prototype,null),r&&e(n,r),t}();t.Cache=n}()}),require.register("curvature/model/Model.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var e=n("../base/Cache"),r=n("../base/Bindable");function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=Symbol("Saved"),s=Symbol("Changed"),l=function(){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,s,{value:r.Bindable.make({})}),Object.defineProperty(this,c,{writable:!0,value:!1}),r.Bindable.makeBindable(this)}var n,i,l;return n=t,l=[{key:"keyProps",get:function(){return["id","class"]}},{key:"from",value:function(t){var n=this,r=this.prototype.constructor.keyProps,i=r.map(function(e){return t[e]});i.unshift(this.prototype.constructor.name);var u,l=i.join("::"),f="models-by-type-and-publicId",p=e.Cache.load(l,!1,f),v=p||new this,d=o(r);try{for(d.s();!(u=d.n()).done;){var y,h,b=u.value;v[b]=null!==(y=null!==(h=v[b])&&void 0!==h?h:t[b])&&void 0!==y?y:null}}catch(e){d.e(e)}finally{d.f()}if(v.consume(t),e.Cache.store(l,v,0,f),!p){var m=!1;v.bindTo(function(e,t,r){"symbol"!==a(t)&&e!==r[t]&&(v[s][t]=m,v[c]=!(m||!n[c]))}),m=!0}return v}}],(i=[{key:"consume",value:function(n){var r=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.keyProps,u=function(t,n){if(n&&"object"===a(n)&&n.constructor.keyProps){var o=n.constructor.keyProps.map(function(e){return n[e]}).join("::"),i=e.Cache.load(o,!1,"models-by-type-and-publicId");i&&(i.consume(n),n=i)}r[t]=n};for(var c in n)!o&&this[s][c]||i.includes(c)||u(c,n[c])}},{key:"changed",value:function(){this[c]=!1}},{key:"stored",value:function(){for(var e in this[s])this[s][e]=!1;this[c]=!0}},{key:"isSaved",value:function(){return this[c]}}])&&u(n.prototype,i),l&&u(n,l),t}();t.Model=l,Object.defineProperty(l,"Saved",{value:c}),Object.defineProperty(l,"Changed",{value:s})}()}),require.register("Config.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0,e.Config={title:"Curvature 0.0.61"}}),require.register("access/LoginView.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.LoginView=void 0;var o=t("Config"),i=t("../base/View"),a=t("../base/Router"),u=t("../base/Repository"),c=t("./UserRepository"),s=t("../toast/Toast"),l=t("../toast/ToastAlert");function f(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=n.call(this)).template='\n\t\t\t<a cv-link = "user">User</a>\n\t\t\t<br />\n\t\t\t\n\t\t\t<a cv-link = "user/login">Login</a>\n\t\t\t<br />\n\n\t\t\t<a cv-link = "user/register">Register</a>\n\t\t\t<br />\n\n\t\t\t<a cv-link = "user/logout">Logout</a>\n\t\t\t<br />\n\n\t\t\t<input\n\t\t\t\ttype  = "button"\n\t\t\t\tvalue = "Login via FaceBook"\n\t\t\t \tcv-on = "click:facebookLogin(event)"\n\t\t\t />\n\t\t\t <input\n\t\t\t\ttype  = "button"\n\t\t\t\tvalue = "Log Out"\n\t\t\t \tcv-on = "click:logout(event)"\n\t\t\t />\n\t\t',e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}(t);return function(e,t,n){t&&f(e.prototype,t)}(t,[{key:"facebookLogin",value:function(e){var t=this;console.log("fb!"),e.preventDefault(),window.open(o.Config.backend+"/facebookLogin"),this.userCheck&&this.clearInterval(this.userCheck),this.userCheck=this.onInterval(333,function(){c.UserRepository.getCurrentUser(!0).then(function(e){var n=e.body;n.id&&n&&(t.clearInterval(t.userCheck),a.Router.clearCache(),u.Repository.clearCache(),s.Toast.instance().pop(new l.ToastAlert({title:"Logged in as "+n.username,body:"ID: "+n.publicId,time:2400})))})})}},{key:"logout",value:function(){window.open(o.Config.backend+"/user/logout?page=app%3Fclose%3D1")}}]),t}();e.LoginView=y}),require.register("access/UserRepository.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.UserRepository=void 0;var o=t("../base/Config"),i=t("../base/Bindable"),a=t("../base/Repository");function u(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,a.Repository);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}(t);return function(e,t,n){n&&u(e,n)}(t,0,[{key:"uri",get:function(){return o.Config.get("backend")+"/user/"}},{key:"getCurrentUser",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return window.prerenderer||navigator.userAgent.match(/prerender/i)?void(window.prerenderer=window.prerenderer||!0):this.args.response&&!1===t?Promise.resolve(this.args.response):this.request(this.uri+"current",!1,!1).then(function(t){if(t.body&&t.body.roles)for(var n in t.body.roles)"SeanMorris\\Access\\Role\\Administrator"==t.body.roles[n].class&&(t.body.isAdmin=!0);return t.body&&t.body.id&&(e.args.response=t,e.args.current=t.body),t}).catch(function(e){console.error(e)})}},{key:"login",value:function(){return this.request(this.uri+"/login")}},{key:"logout",value:function(){var e=this,t=this.args.current;return delete this.args.current,this.request(this.uri+"logout",!1,{},!1).then(function(){return e.args.current=null,t})}},{key:"onChange",value:function(e){return this.args.bindTo("current",e)}}]),t}();e.UserRepository=f,Object.defineProperty(f,"args",{configurable:!1,writable:!1,value:i.Bindable.makeBindable({})}),a.Repository.onResponse(function(e){e&&e.meta&&"currentUser"in e.meta&&(!f.args.current||e.meta.currentUser.id!==f.args.current.id)&&(f.args.current=e.meta.currentUser)})}),require.register("animate/Chain.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chain=void 0,e.Chain=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}}),require.register("animate/Ease.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Ease=void 0;var o=t("../base/Mixin"),i=t("../mixin/PromiseMixin");function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){function t(e){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=n.call(this)).interval=e,r.terminal=!1,r.initial=!1,r.timeout=!1,r.final=!1,r.canceled=!1,r.done=!1,r.calculate=!!(r.calculate||"calculate"in o)&&o.calculate,r.bounded=!("bounded"in o)||o.bounded,r.repeat="repeat"in o?o.repeat:1,r.reverse=!!("reverse"in o)&&o.reverse,r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o.Mixin.with(i.PromiseMixin));var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}(t);return function(e,t,n){t&&a(e.prototype,t)}(t,[{key:"start",value:function(){var e=this;this.done=!1,requestAnimationFrame(function(){e.initial=Date.now(),e.terminal=e.initial+e.interval,0<=e.repeat&&(e.terminal=e.initial+e.interval*e.repeat,e.timeout=setTimeout(function(){return e.done?e.reverse?0:1:(e.done=!0,void e[i.PromiseMixin.Accept](e.reverse?0:1))},e.interval*e.repeat))})}},{key:"cancel",value:function(){return this.done||(clearTimeout(this.timeout),this.final=this.current(),this.canceled=this.done=!0,this[i.PromiseMixin.Reject](this.final)),this.final}},{key:"fraction",value:function(){if(this.done)return this.reverse?0:1;if(!1===this.initial)return this.reverse?1:0;var e=Date.now()-this.initial;if(e/this.interval>=this.repeat)return this.reverse?0:1;var t=e%this.interval/this.interval;return this.reverse?1-t:t}},{key:"current",value:function(){var e=this.fraction();return this.calculate?this.calculate(e):e}}]),t}();e.Ease=l}),require.register("animate/ease/CubicIn.js",function(e,t,n){"use strict";var r=t("../Ease");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.CubicIn=void 0;var s=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(u(e=n.call.apply(n,[this].concat(o))),"calculate",function(e){return e*e*e}),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,r.Ease);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}(t);return t}();e.CubicIn=s}),require.register("animate/ease/CubicInOut.js",function(e,t,n){"use strict";var r=t("../Ease");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.CubicInOut=void 0;var s=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(u(e=n.call.apply(n,[this].concat(o))),"calculate",function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,r.Ease);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}(t);return t}();e.CubicInOut=s}),require.register("animate/ease/CubicOut.js",function(e,t,n){"use strict";var r=t("../Ease");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.CubicOut=void 0;var s=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(u(e=n.call.apply(n,[this].concat(o))),"calculate",function(e){return--e*e*e+1}),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,r.Ease);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}(t);return t}();e.CubicOut=s}),require.register("base/Bag.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Bag=void 0;var o=t("./Bindable"),i=t("./Mixin"),a=t("../mixin/EventTargetMixin");function u(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){function t(){var e,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=n.call(this)).meta=Symbol("meta"),e.content=new Map,e.list=o.Bindable.makeBindable([]),e.current=0,e.type=void 0,e.length=0,e.changeCallback=r,e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,i.Mixin.with(a.EventTargetMixin));var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}(t);return function(e,t,n){t&&u(e.prototype,t)}(t,[{key:"has",value:function(e){return this.content.has(e)}},{key:"add",value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(!this.content.has(e)){var n=new CustomEvent("adding",{detail:{item:e}});if(this.dispatchEvent(n)){var r=function(e){return+e}(this.current++);this.content.set(e,r),this.list[r]=e,this.changeCallback&&this.changeCallback(e,this.meta,t.ITEM_ADDED,r);var o=new CustomEvent("added",{detail:{item:e,id:r}});this.dispatchEvent(o),this.length=this.size}}}},{key:"remove",value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(!this.content.has(e))return this.changeCallback&&this.changeCallback(e,this.meta,0,void 0),!1;var n=new CustomEvent("removing",{detail:{item:e}});if(this.dispatchEvent(n)){var r=this.content.get(e);delete this.list[r],this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,t.ITEM_REMOVED,r);var o=new CustomEvent("removed",{detail:{item:e,id:r}});return this.dispatchEvent(o),this.length=this.size,e}}},{key:"size",get:function(){return this.content.size}},{key:"items",value:function(){return Array.from(this.content.entries()).map(function(e){return e[0]})}}]),t}();e.Bag=f,Object.defineProperty(f,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(f,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}),require.register("base/Bindable.js",function(e,t,n){"use strict";function r(){return(r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(o,n.prototype),o}).apply(null,arguments)}function o(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0},f:function e(){try{i||null==n.return||n.return()}finally{if(u)throw e}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.Bindable=void 0;var f=Symbol("ref"),p=Symbol("original"),v=Symbol("deck"),d=Symbol("binding"),y=Symbol("subBinding"),h=Symbol("bindingAll"),b=Symbol("isBindable"),m=Symbol("wrapping"),g=Symbol("Names"),w=Symbol("executing"),_=Symbol("stack"),O=(Symbol("object"),Symbol("wrapped")),j=Symbol("unwrapped"),k=Symbol("getProto"),S=Symbol("onGet"),P=Symbol("onAllGet"),T=Symbol("bindChain"),R=Symbol("Descriptors"),E=Symbol("NoGetters"),A=Object.getPrototypeOf(Int8Array),C=Set.prototype[Symbol.iterator],B=Map.prototype[Symbol.iterator],x=globalThis,M=[x.Node,x.File,x.Map,x.Set,x.WeakMap,x.WeakSet,x.ArrayBuffer,x.ResizeObserver,x.MutationObserver,x.PerformanceObserver,x.IntersectionObserver].filter(function(e){return"function"==typeof e}),D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){n&&s(e,n)}(e,0,[{key:"isBindable",value:function(t){return!(!t||!t[b])&&t[b]===e}},{key:"onDeck",value:function(e,t){return e[v][t]||!1}},{key:"ref",value:function(e){return e[f]||e||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"shuck",value:function(t,n){n=n||new Map;var r={};if(t instanceof A||t instanceof ArrayBuffer){var o=t.slice(0);return n.set(t,o),o}var i=Object.keys(t);for(var a in i){var u=i[a];if("___"!==u.substring(0,3)){var s=n.get(t[u]);if(s){r[u]=s;continue}if(t[u]===t){n.set(t[u],r),r[u]=r;continue}if(t[u]&&"object"===c(t[u])){var l=t[u];e.isBindable(t[u])&&(l=t[u][p]),r[u]=this.shuck(l,n)}else r[u]=t[u];n.set(t[u],r[u])}}return e.isBindable(t)&&(delete r.bindTo,delete r.isBound),r}},{key:"make",value:function(t){var n=this;if(!t||!["function","object"].includes(c(t)))return t;if(M.filter(function(e){return t instanceof e}).length||Object.isSealed(t)||!Object.isExtensible(t))return t;if(t[f])return t[f];if(t[d])return t;Object.defineProperty(t,f,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(t,p,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(t,v,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(t,d,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(t,y,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(t,h,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(t,b,{configurable:!1,enumerable:!1,writable:!1,value:e}),Object.defineProperty(t,w,{enumerable:!1,writable:!0}),Object.defineProperty(t,m,{enumerable:!1,writable:!0}),Object.defineProperty(t,_,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(t,"___before___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(t,"___after___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(t,O,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(t,j,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(t,R,{configurable:!1,enumerable:!1,writable:!1,value:new Map});var a=function(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},u=!1;if(Array.isArray(r)){var s=r.map(function(e){return a(e,o,i)});return function(){return s.map(function(e){return e()})}}if(r instanceof Function&&(i=o||{},o=r,u=!0),0<=i.delay&&(o=n.wrapDelayCallback(o,i.delay)),0<=i.throttle&&(o=n.wrapThrottleCallback(o,i.throttle)),0<=i.wait&&(o=n.wrapWaitCallback(o,i.wait)),i.frame&&(o=n.wrapFrameCallback(o,i.frame)),i.idle&&(o=n.wrapIdleCallback(o)),u){var l=t[h].length;if(t[h].push(o),!("now"in i)||i.now)for(var f in t)o(t[f],f,t,!1);return function(){delete t[h][l]}}if(t[d][r]||(t[d][r]=new Set),i.children){var p=o;o=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=r[0],u=t[y].get(p);if(u&&(t[y].delete(p),u()),"object"===c(a)){var s=e.make(a);e.isBindable(s)&&t[y].set(p,s.bindTo(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.apply(void 0,r.concat(t))},Object.assign({},i,{children:!1}))),p.apply(void 0,r)}else p.apply(void 0,r)}}t[d][r].add(o),(!("now"in i)||i.now)&&o(t[r],r,t,!1);var v=function(){var e=t[y].get(o);e&&(t[y].delete(o),e()),t[d][r]&&t[d][r].has(o)&&t[d][r].delete(o)};return i.removeWith&&i.removeWith instanceof View&&i.removeWith.onRemove(function(){return v}),v};if(Object.defineProperty(t,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.defineProperty(t,T,{configurable:!1,enumerable:!1,writable:!1,value:function(e,r){var o=e.split("."),i=o.shift(),a=o.slice(0),u=[];return u.push(t.bindTo(i,function(e,t,o,i){var c=a.join(".");return 0===a.length?void r(e,t,o,i):(void 0===e&&(e=o[t]=n.makeBindable({})),void(u=u.concat(e[T](c,r))))})),function(){return u.map(function(e){return e()})}}}),Object.defineProperty(t,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var n=t.___before___.length;t.___before___.push(e);var r=!1;return function(){r||(r=!0,delete t.___before___[n])}}}),Object.defineProperty(t,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var n=t.___after___.length;t.___after___.push(e);var r=!1;return function(){r||(r=!0,delete t.___after___[n])}}}),Object.defineProperty(t,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e in t[h])if(t[h][e])return!0;for(var n in t[d])for(var r in t[d][n])if(t[d][n][r])return!0;return!1}}),!t[E]){var u=function(n){t[n]&&t[n]instanceof Object&&!t[n]instanceof Promise&&!M.filter(function(e){return t[n]instanceof e}).length&&Object.isExtensible(t[n])&&!Object.isSealed(t[n])&&(t[n]=e.make(t[n]))};for(var s in t)u(s)}var l=t[R],x=t[O],D=t[_],L={get:function(n,o){if(x.has(o))return x.get(o);if(o===f||o===p||"apply"===o||"isBound"===o||"bindTo"===o||"__proto__"===o||"constructor"===o)return t[o];var a;if(l.has(o)?a=l.get(o):(a=Object.getOwnPropertyDescriptor(t,o),l.set(o,a)),a&&!a.configurable&&!a.writable)return t[o];if(P in t)return t[P](o);if(S in t&&!(o in t))return t[S](o);if(a&&!a.configurable&&!a.writable)return x.set(o,t[o]),t[o];if("function"==typeof t[o]){if(g in t[o])return t[o];Object.defineProperty(t[j],o,{configurable:!1,enumerable:!1,writable:!1,value:t[o]});var u=Object.getPrototypeOf(t)[o]===t[o],c="function"==typeof Promise&&t instanceof Promise||"function"==typeof Map&&t instanceof Map||"function"==typeof Set&&t instanceof Set||"function"==typeof B&&t.prototype===B||"function"==typeof C&&t.prototype===C||"function"==typeof C&&t.prototype===C||"function"==typeof WeakMap&&t instanceof WeakMap||"function"==typeof WeakSet&&t instanceof WeakSet||"function"==typeof Date&&t instanceof Date||"function"==typeof A&&t instanceof A||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||"function"==typeof EventTarget&&t instanceof EventTarget||"function"==typeof ResizeObserver&&t instanceof ResizeObserver||"function"==typeof MutationObserver&&t instanceof MutationObserver||"function"==typeof PerformanceObserver&&t instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&t instanceof IntersectionObserver||"function"==typeof t[Symbol.iterator]&&"next"===o?t:t[f],s=function(){t[w]=o,D.unshift(o);for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];var s,l,f=i(t.___before___);try{for(f.s();!(s=f.n()).done;){(0,s.value)(t,o,D,t,n)}}catch(e){f.e(e)}finally{f.f()}if(new.target)l=r(t[j][o],n);else{var p=t[j][o];l=u?p.apply(c||t,n):p.apply(void 0,n)}var v,d=i(t.___after___);try{for(d.s();!(v=d.n()).done;){(0,v.value)(t,o,D,t,n)}}catch(e){d.e(e)}finally{d.f()}return t[w]=null,D.shift(),l};(s[g]=s[g]||new WeakMap).set(t,o),s[P]=function(e){var n=s[g].get(t);return t[n][e]};var v=e.make(s);return x.set(o,v),v}return t[o]},set:function(n,r,o){if(r===p)return!0;if(void 0!==t[v][r]&&t[v][r]===o)return!0;if("string"==typeof r&&"___"===r.substring(0,3)&&"___"===r.slice(-3))return!0;if(n[r]===o)return!0;for(var a in o&&o instanceof Object&&!M.filter(function(e){return t instanceof e}).length&&Object.isExtensible(t)&&!Object.isSealed(t)&&!t[E]&&(o=e.makeBindable(o)),t[v][r]=o,t[h])t[h][a]&&t[h][a](o,r,n,!1);var u=!1;if(r in t[d]){var c,s=i(t[d][r]);try{for(s.s();!(c=s.n()).done;)!1===(0,c.value)(o,r,n,!1,n[r])&&(u=!0)}catch(e){s.e(e)}finally{s.f()}}if(delete t[v][r],!u){var l=Object.getOwnPropertyDescriptor(n,r);n instanceof File&&"lastModifiedDate"==r||l&&!l.writable||n[r]!==o||(n[r]=o)}var f=Reflect.set(n,r,o);if(Array.isArray(n)&&t[d].length)for(var y in t[d].length)(0,t[d].length[y])(n.length,"length",n,!1,n.length);return f},construct:function(n,i){for(var a in n.___before___)n.___before___[a](n,"constructor",t[_],void 0,i);var u=e.make(r(n[p],o(i)));for(var c in n.___after___)n.___after___[c](n,"constructor",t[_],u,i);return u},getPrototypeOf:function(e){return k in t?t[k]:Reflect.getPrototypeOf(e)},deleteProperty:function(e,n){if(!(n in e))return!0;if(l.has(n)){var r=l.get(n);if(r&&!r.configurable)return!1;l.delete(n)}for(var o in t[h])t[h][o](void 0,n,e,!0,e[n]);if(n in t[d])for(var i in t[d][n])t[d][n][i]&&t[d][n][i](void 0,n,e,!0,e[n]);return delete e[n],!0}};return t[E]&&delete L.get,Object.defineProperty(t,f,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(t,L)}),t[f]}},{key:"clearBindings",value:function(e){!function(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.map(e)}}(function(e){return Object.keys(e).map(function(t){return delete e[t]})})(e[O],e[d],e[h],e.___after___,e.___before___)}},{key:"resolve",value:function(e,t){for(var n,r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],o=t.split("."),i=o[0];o.length;){if(r&&1===o.length)return[e.NoGetters?this.make(e):e,o.shift(),i];!(!(n=o.shift())in e)&&e[n]&&e[n]instanceof Object||(e[n]={}),e=e.NoGetters?this.make(e[n]):e[n]}return[this.make(e),n,i]}},{key:"wrapDelayCallback",value:function(e,t){return function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return setTimeout(function(){return e.apply(void 0,r)},t)}}},{key:"wrapThrottleCallback",value:function(e,t){var n=this;return this.throttles.set(e,!1),function(){n.throttles.get(e,!0)||(e.apply(void 0,arguments),n.throttles.set(e,!0),setTimeout(function(){n.throttles.set(e,!1)},t))}}},{key:"wrapWaitCallback",value:function(e,t){var n=this;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];var a;(a=n.waiters.get(e))&&(n.waiters.delete(e),clearTimeout(a)),a=setTimeout(function(){return e.apply(void 0,o)},t),n.waiters.set(e,a)}}},{key:"wrapFrameCallback",value:function(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];requestAnimationFrame(function(){return e.apply(void 0,n)})}}},{key:"wrapIdleCallback",value:function(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(window.requestIdleCallback||requestAnimationFrame)(function(){return e.apply(void 0,n)})}}}]),e}();e.Bindable=D,l(D,"waiters",new WeakMap),l(D,"throttles",new WeakMap),Object.defineProperty(D,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:S}),Object.defineProperty(D,"NoGetters",{configurable:!1,enumerable:!1,writable:!1,value:E}),Object.defineProperty(D,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:k}),Object.defineProperty(D,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:P})}),require.register("base/Cache.js",function(e,t,n){"use strict";function r(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Cache=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){n&&r(e,n)}(e,0,[{key:"store",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"standard",o=0;n&&(o=1e3*n+(new Date).getTime()),this.buckets||(this.buckets=new Map),this.buckets.has(r)||this.buckets.set(r,new Map);var i=new CustomEvent("cvCacheStore",{cancelable:!0,detail:{key:e,value:t,expiry:n,bucket:r}});document.dispatchEvent(i)&&this.buckets.get(r).set(e,{value:t,expiration:o})}},{key:"load",value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"standard",r=new CustomEvent("cvCacheLoad",{cancelable:!0,detail:{key:e,defaultvalue:t,bucket:n}});if(!document.dispatchEvent(r))return t;if(this.buckets&&this.buckets.has(n)&&this.buckets.get(n).has(e)){var o=this.buckets.get(n).get(e);if(0===o.expiration||o.expiration>(new Date).getTime())return this.buckets.get(n).get(e).value}return t}}]),e}();e.Cache=o}),require.register("base/Cookie.js",function(e,t,n){"use strict";var r=t("./Bindable");function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Cookie=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){n&&i(e,n)}(e,0,[{key:"set",value:function(t,n){e.jar[t]=n}},{key:"get",value:function(t){return e.jar[t]}},{key:"delete",value:function(t){delete e.jar[t]}}]),e}();e.Cookie=a,a.jar=a.jar||r.Bindable.make({}),document.cookie&&"data"!==window.location.href.substr(0,4)&&(document.cookie.split(";").map(function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.split("="),2),n=t[0],r=t[1];try{r=JSON.parse(r)}catch(e){r=r}n=n.trim(),a.jar[decodeURIComponent(n)]=r}),a.jar.bindTo(function(e,t,n,r){document.cookie=r?"".concat(encodeURIComponent(t),"=;expires=").concat(new Date(0)):"".concat(encodeURIComponent(t),"=").concat(e)}))}),require.register("base/Dom.js",function(e,t,n){"use strict";function r(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Dom=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){n&&r(e,n)}(e,0,[{key:"mapTags",value:function(e,t,n,r,o){var i=[],a=!0;r&&(a=!1);for(var u=!1,c=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(e){if(!a){if(e!==r)return NodeFilter.FILTER_SKIP;a=!0}return o&&e===o&&(u=!0),u?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);c.nextNode();)i.push(n(c.currentNode,c));return i}},{key:"dispatchEvent",value:function(t,n){t.dispatchEvent(n),e.mapTags(t,!1,function(e){e.dispatchEvent(n)})}}]),e}();e.Dom=o}),require.register("base/Import.js",function(e,t,n){"use strict";function r(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Import=void 0;var o=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),console.log(this.__proto__.constructor),this.__proto__.constructor.instances[t])return this.__proto__.constructor.instances[t];this.uri=t;var n=document.createElement("script");n.setAttribute("src",this.uri),this.ready=new Promise(function(e,t){n.addEventListener("load",function(){return e(n)}),n.addEventListener("error",function(e){console.error(e),t(e)})}),this.tag=n,this.attached=!1,this.__proto__.constructor.instances[t]=this}return function(e,t,n){t&&r(e.prototype,t)}(e,[{key:"attach",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.attached||((e=e||document.head).append(this.tag),this.attached=!0)}}]),e}();e.Import=o,o.instances={}}),require.register("base/Mixin.js",function(e,t,n){"use strict";var r=t("./Bindable");function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Mixin=void 0;var y=Symbol("constructor"),h=(Symbol("mixinList"),function(){function e(){v(this,e)}return function(e,t,n){n&&d(e,n)}(e,0,[{key:"from",value:function(t){for(var n=arguments.length,r=Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return function(t){function n(){var t;v(this,n);for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];var p,d=t=o.call.apply(o,[this].concat(c)),y=a(r);try{for(y.s();!(p=y.n()).done;){var h=p.value;switch(h[e.Constructor]&&h[e.Constructor].apply(f(t)),i(h)){case"object":e.mixObject(h,f(t))}}}catch(e){y.e(e)}finally{y.f()}return l(t,d)}s(n,t);var o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}(n);return n}(t)}},{key:"to",value:function(e){for(var t={},n=arguments.length,r=Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r.map(function(n){switch(i(n)){case"object":Object.assign(t,Object.getOwnPropertyDescriptors(n));break;case"function":Object.assign(t,Object.getOwnPropertyDescriptors(n.prototype))}delete t.constructor,Object.defineProperties(e.prototype,t)})}},{key:"with",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.from.apply(this,[Object].concat(t))}},{key:"mixObject",value:function(e,t){var n,r=a(Object.getOwnPropertyNames(e));try{for(r.s();!(n=r.n()).done;){var o=n.value;"function"!=typeof e[o]?t[o]=e[o]:t[o]=e[o].bind(t)}}catch(e){r.e(e)}finally{r.f()}var i,u=a(Object.getOwnPropertySymbols(e));try{for(u.s();!(i=u.n()).done;){var c=i.value;"function"!=typeof e[c]?t[c]=e[c]:t[c]=e[c].bind(t)}}catch(e){u.e(e)}finally{u.f()}}},{key:"mixClass",value:function(e,t){var n,r=a(Object.getOwnPropertyNames(e.prototype));try{for(r.s();!(n=r.n()).done;){var o=n.value;t.prototype[o]=e.prototype[o].bind(t.prototype)}}catch(e){r.e(e)}finally{r.f()}var i,u=a(Object.getOwnPropertySymbols(e.prototype));try{for(u.s();!(i=u.n()).done;){var c=i.value;t.prototype[c]=e.prototype[c].bind(t.prototype)}}catch(e){u.e(e)}finally{u.f()}var s,l=a(Object.getOwnPropertyNames(e));try{var f=function(){var n=s.value;if("function"!=typeof e[n])return"continue";var r=t[n]||!1,o=e[n].bind(t);t[n]=function(){return r&&r.apply(void 0,arguments),o.apply(void 0,arguments)}};for(l.s();!(s=l.n()).done;)f()}catch(e){l.e(e)}finally{l.f()}var p,v=a(Object.getOwnPropertySymbols(e));try{var d=function(){var n=p.value;if("function"!=typeof e[n])return"continue";var r=t[n]||!1,o=e[n].bind(t);t[n]=function(){return r&&r.apply(void 0,arguments),o.apply(void 0,arguments)}};for(v.s();!(p=v.n()).done;)d()}catch(e){v.e(e)}finally{v.f()}}},{key:"mix",value:function(e){for(var t={},n={},i=r.Bindable.makeBindable(e),u=function(e){var r,u=Object.getOwnPropertyNames(e.prototype),c=/^(before|after)__(.+)/,s=a(Object.getOwnPropertyNames(e));try{var l=function(){var n=r.value,a=n.match(c);if(a){switch(a[1]){case"before":i.___before(function(t,r,i,u,c){if(r===a[2])return e[n].bind(u).apply(void 0,o(c))});break;case"after":i.___after(function(t,r,i,u,c){if(r===a[2])return e[n].bind(u).apply(void 0,o(c))})}return"continue"}return t[n]?"continue":"function"==typeof e[n]?void(t[n]=e[n]):"continue"};for(s.s();!(r=s.n()).done;)l()}catch(e){s.e(e)}finally{s.f()}var f,p=a(u);try{var v=function(){var t=f.value,r=t.match(c);if(r){switch(r[1]){case"before":i.___before(function(n,i,a,u,c){if(i===r[2])return e.prototype[t].bind(u).apply(void 0,o(c))});break;case"after":i.___after(function(n,i,a,u,c){if(i===r[2])return e.prototype[t].bind(u).apply(void 0,o(c))})}return"continue"}return n[t]?"continue":"function"==typeof e.prototype[t]?void(n[t]=e.prototype[t]):"continue"};for(p.s();!(f=p.n()).done;)v()}catch(e){p.e(e)}finally{p.f()}},c=this;c&&c.prototype;c=Object.getPrototypeOf(c))u(c);for(var s in t)e[s]=t[s].bind(e);var l=function(t){e.prototype[t]=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return n[t].apply(this,r)}};for(var f in n)l(f);return i}}]),e}());e.Mixin=h,h.Constructor=y}),require.register("base/Model.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var r=t("./Cache"),o=t("./Bindable");function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}t("./Repository");var a=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.repository=t}return function(e,t,n){t&&i(e.prototype,t)}(e,[{key:"consume",value:function(t){for(var n in t){var i=t[n];if(t[n]instanceof Object&&t[n].class&&t[n].publicId){var a="".concat(t[n].class,"::").concat(t[n].publidId),u=r.Cache.load(a,!1,"model-type-repo");i=o.Bindable.makeBindable(new e(this.repository)),u&&(i=u),i.consume(t[n]),r.Cache.store(a,i,0,"model-type-repo")}this[n]=i}}}]),e}();e.Model=a}),require.register("base/Repository.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Repository=void 0;var r=t("./Bindable"),o=t("./Router"),i=t("./Cache"),a=t("./Model"),u=t("./Bag"),c=t("../form/Form"),s=t("../form/multiField/FormWrapper");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}var p=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.uri=t}return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(e,[{key:"get",value:function(t){var n=this,r=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},u=this.uri+"/"+t,c=i.Cache.load(u+o.Router.queryToString(o.Router.queryOver(a),!0),!1,"model-uri-repo");return!r&&c?Promise.resolve(c):e.request(u,a).then(function(e){return n.extractModel(e.body)})}},{key:"page",value:function(){var t=this,n=1<arguments.length?arguments[1]:void 0;return e.request(this.uri,n).then(function(e){var n=[];for(var r in e.body){var o=e.body[r];n.push(t.extractModel(o))}return e.body=n,e})}},{key:"edit",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=this.uri+"/create";return t&&(o=this.uri+"/"+t+"/edit"),n?e.request(o,{api:"json"},n).then(function(e){return e.body}):e.request(o).then(function(e){var t=new c.Form(e.meta.form,r);return new s.FormWrapper(t,o,"POST",r)})}},{key:"extractModel",value:function(e){var t=r.Bindable.makeBindable(new a.Model(this));if(t.consume(e),this.uri,t.publicId,t.class){var n="".concat(t.class,"::").concat(t.publidId);i.Cache.load(n,!1,"model-type-repo")}return t}}],[{key:"loadPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.request(this.uri,e).then(function(e){return e})}},{key:"domCache",value:function(){}},{key:"load",value:function(e){return this.objects=this.objects||{},this.objects[this.uri]=this.objects[this.uri]||{},this.objects[this.uri][e]?Promise.resolve(this.objects[this.uri][e]):this.request(this.uri+"/"+e).then(function(){})}},{key:"form",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=this.uri+"/create";return e&&(t=this.uri+"/"+e+"/edit"),this.request(t).then(function(e){return e})}},{key:"clearCache",value:function(){this.objects&&this.objects[this.uri]&&(this.objects[this.uri]={})}},{key:"encode",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;for(var r in n||(n=new FormData),e){var o=r;t&&(o="".concat(t,"[").concat(o,"]")),e[r]&&"object"!==l(e[r])?n.append(o,e[r]):this.encode(e[r],o,n)}return n}},{key:"onResponse",value:function(e){return this._onResponse||(this._onResponse=new u.Bag),this._onResponse.add(e)}},{key:"request",value:function(e){var t,n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},c="GET",s=null,l={};r&&(l=r),this._onResponse||(this._onResponse=new u.Bag),this.runningRequests||(this.runningRequests={}),l.api=l.api||"json",t=Object.keys(l).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(l[e])}).join("&");var f;if(f=e+"?"+t,!o&&this.runningRequests[f])return this.runningRequests[f];o&&(i=!1,c="POST",s=o instanceof FormData?o:this.encode(o));var p=new XMLHttpRequest;if("responseType"in a&&(p.responseType=a.responseType),!o&&i&&this.cache&&this.cache[f])return Promise.resolve(this.cache[f]);var v='script[data-uri="'+f+'"]',d=document.querySelector(v);if(!o&&i&&d){var y=JSON.parse(d.innerText);return Promise.resolve(y)}p.withCredentials=!("withCredentials"in a)||a.withCredentials,document.createElement("a").href=f,o||(p.timeout=a.timeout||15e3,this.xhrs[f]=p);var h=new Promise(function(e,t){if(o&&"progressUp"in a&&(p.upload.onprogress=a.progressUp),"progressDown"in a&&(p.onprogress=a.progressDown),p.onreadystatechange=function(){var r;if(4===p.readyState)if(delete n.xhrs[f],delete n.runningRequests[f],n.cache||(n.cache={}),"application/json"!=p.getResponseHeader("Content-Type")&&"application/json; charset=utf-8"!=p.getResponseHeader("Content-Type")&&"text/json"!=p.getResponseHeader("Content-Type")&&"text/json; charset=utf-8"!=p.getResponseHeader("Content-Type")){var o=n._onResponse.items();for(var i in o)o[i](p,!0);200===p.status?e(p):t(p)}else if((r=JSON.parse(p.responseText))&&0==r.code){var a=document.querySelector('script[data-uri="'+f+'"]');(window.prerenderer||navigator.userAgent.match(/prerender/i))&&(window.prerenderer=window.prerenderer||!0,!a&&((a=document.createElement("script")).type="text/json",a.setAttribute("data-hack","application/ld+json-NOT!"),a.setAttribute("data-uri",f),document.head.appendChild(a)),a.innerText=JSON.stringify(r));var u=n._onResponse.items();for(var c in u)u[c](r,!0);r._http=p.status,200===p.status?e(r):t(r)}else{var s=n._onResponse.items();for(var l in s)s[l](r,!0);t(r)}},p.open(c,f,!0),a.headers)for(var r in a.headers)p.setRequestHeader(r,a.headers[r]);p.send(s)});return o||(this.runningRequests[f]=h),h}},{key:"cancel",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:/^.$/;for(var t in this.xhrs)this.xhrs[t]&&t.match(e)&&(this.xhrs[t].abort(),delete this.xhrs[t])}}]),e}();e.Repository=p,p.xhrs=[]}),require.register("base/Router.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;var r=t("./View"),o=(t("./Cache"),t("./Config")),i=t("./Routes");function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}var s=Symbol("NotFound"),l=Symbol("Internal"),f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){n&&c(e,n)}(e,0,[{key:"wait",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded";(2<arguments.length&&void 0!==arguments[2]?arguments[2]:document).addEventListener(n,function(){t.listen(e)})}},{key:"listen",value:function(e){var t=this,n=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];this.routes=n||e.routes,Object.assign(this.query,this.queryOver({}));var r=function(n){for(var r in n.preventDefault(),n.state&&"routedId"in n.state?n.state.routedId<=t.routeCount?(t.history.splice(n.state.routedId),t.routeCount=n.state.routedId):n.state.routedId>t.routeCount&&(t.history.push(n.state.prev),t.routeCount=n.state.routedId):null!==t.prevPath&&t.prevPath!==location.pathname&&t.history.push(t.prevPath),"null"===location.origin?t.match(t.nextPath,e):t.match(location.pathname,e),t.query)delete t.query[r];Object.assign(t.query,t.queryOver({}))};window.addEventListener("popstate",r),window.addEventListener("cvUrlChanged",r);var o="null"!==location.origin&&location.pathname+location.search;location.origin&&location.hash&&(o+=location.hash),this.go(!1===o?"/":o)}},{key:"go",value:function(e,t){var n=o.Config.get("title");for(var r in n&&(document.title=n),"null"===location.origin?this.nextPath=e:2===t&&location.pathname!==e?history.replaceState({routedId:this.routeCount,prev:this.prevPath,url:location.pathname},null,e):location.pathname!==e&&history.pushState({routedId:++this.routeCount,prev:this.prevPath,url:location.pathname},null,e),t||(!1===t&&(this.path=null),"#"===e.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged"))),this.query)delete this.query[r];Object.assign(this.query,this.queryOver({})),this.prevPath=e}},{key:"match",value:function(e,t){var n=this,o=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];if(this.path!==e||o){this.queryString=location.search,this.path=e;var a=this.prevPath,u=t.args.content,c=this.routes||t.routes||i.Routes.dump();for(var l in new URLSearchParams(location.search),this.query)delete this.query[l];Object.assign(this.query,this.queryOver({}));var f={},p=!1,v="";for(var d in e=e.substr(1).split("/"),this.query)f[d]=this.query[d];e:for(var y in c){var h=y.split("/");if(!(h.length<e.length&&"*"!==h[h.length-1])){for(var b in h)if("%"==h[b].substr(0,1)){var m=null,g=/^%(\w+)\??/.exec(h[b]);if(g&&g[1]&&(m=g[1]),!m)throw new Error("".concat(h[b],' is not a valid argument segment in route "').concat(y,'"'));if(e[b])f[m]=e[b];else{if("?"!=h[b].substr(h[b].length-1,1))continue e;f[m]=""}}else if("*"!==h[b]&&e[b]!==h[b])continue e;p=y,v=c[y],"*"===h[h.length-1]&&(f.pathparts=e.slice(h.length-1));break}}var w=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:e,prev:a,root:t,selected:p,routes:c}});if(document.dispatchEvent(w)){if(!o&&t&&u&&v instanceof Object&&u instanceof v&&!(v instanceof Promise)&&u.update(f))return t.args.content=u,!0;try{p in c||(c[p]=c[s]);var _=function(e){return"function"==typeof c[e]?c[e].prototype instanceof r.View?new c[e](f):c[e](f):c[e]};return!1===(v=_(p))&&(v=_(s)),v instanceof Promise?v.then(function(r){n.update(t,e,r,c,p,f,o)}).catch(function(r){throw document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:r,path:e,prev:a,view:t,routes:c,selected:p}})),n.update(t,e,window.devMode?r+"":"Error: 500",c,p,f,o),r}):this.update(t,e,v,c,p,f,o)}catch(n){throw document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:n,path:e,prev:a,view:t,routes:c,selected:p}})),this.update(t,e,window.devMode?n+"":"Error: 500",c,p,f,o),n}}}}},{key:"update",value:function(e,t,n,o,i,a,u){if(e){var c=this.prevPath,s=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:n,path:t,prev:c,view:e,routes:o,selected:i}});!1!==n&&(e.args.content instanceof r.View&&(e.args.content.pause(!0),e.args.content.remove()),document.dispatchEvent(s)&&(e.args.content=n),n instanceof r.View&&(n.pause(!1),n.update(a,u)));var l=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:n,path:t,prev:c,view:e,routes:o,selected:i}});document.dispatchEvent(l)}}},{key:"queryOver",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n={},r={},o=a(new URLSearchParams(location.search));try{for(o.s();!(e=o.n()).done;){var i=e.value;r[i[0]]=i[1]}}catch(e){o.e(e)}finally{o.f()}return delete(n=Object.assign(n,r,t)).api,n}},{key:"queryToString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=[],r=e;for(var o in t||(r=this.queryOver(e)),r)""!==r[o]&&n.push(o+"="+encodeURIComponent(r[o]));return n.join("&")}},{key:"setQuery",value:function(e,t,n){var r=this.queryOver();r[e]=t,void 0===t&&delete r[e];var o=this.queryToString(r,!0);this.go(location.pathname+(o?"?"+o:""),n)}}]),e}();e.Router=f,Object.defineProperty(f,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(f,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(f,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(f,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(f,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(f,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:l}),Object.defineProperty(f,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:s})}),require.register("base/RuleSet.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuleSet=void 0,t("./Dom");var r=t("./Tag"),o=t("./View");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(e,[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;for(var r in e.apply(t,n),this.rules)for(var o in this.rules[r]){var i,u=this.rules[r][o],c=e.wrap(t,u,n),s=a(t.querySelectorAll(r));try{for(s.s();!(i=s.n()).done;){c(i.value)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"purge",value:function(){if(this.rules)for(var e=0,t=Object.entries(this.rules);e<t.length;e++){var n=i(t[e],2),r=n[0];if(n[1],this.rules[r])for(var o in this.rules[r])delete this.rules[r][o]}}}],[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;for(var n in this.globalRules)for(var r in this.globalRules[n]){var o,i=this.globalRules[n][r],u=this.wrap(e,i,t),c=a(e.querySelectorAll(n));try{for(c.s();!(o=c.n()).done;){u(o.value)}}catch(e){c.e(e)}finally{c.f()}}}},{key:"wait",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document,r=function(t,n){return function(){return n.removeEventListener(t,r),e.apply()}}(t,n);n.addEventListener(t,r)}},{key:"wrap",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=t;return(t instanceof o.View||t&&t.prototype&&t.prototype instanceof o.View)&&(i=function(){return t}),function(e){if(void 0===e.___cvApplied___&&Object.defineProperty(e,"___cvApplied___",{enumerable:!1,writable:!1,value:new WeakSet}),!e.___cvApplied___.has(t)){var a,u;n&&(a=u=n,n.viewList&&(u=n.viewList.parent));var c=new r.Tag(e,u,null,void 0,a),s=c.element.parentNode,l=c.element.nextSibling,f=i(c);if(!1!==f&&e.___cvApplied___.add(t),f instanceof HTMLElement&&(f=new r.Tag(f)),f instanceof r.Tag){if(!f.element.contains(c.element)){for(;c.element.firstChild;)f.element.appendChild(c.element.firstChild);c.remove()}l?s.insertBefore(f.element,l):s.appendChild(f.element)}f&&f.prototype&&f.prototype instanceof o.View&&(f=new f({},n)),f instanceof o.View&&(n&&(n.cleanup.push(function(e){return function(){e.remove()}}(f)),n.cleanup.push(n.args.bindTo(function(e,t,n){n[t]=e,f.args[t]=e})),n.cleanup.push(f.args.bindTo(function(e,t,r){r[t]=e,n.args[t]=e}))),c.clear(),f.render(c.element))}}}}]),e}();e.RuleSet=l}),require.register("base/SetMap.js",function(e,t,n){"use strict";function r(){return(r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(o,n.prototype),o}).apply(null,arguments)}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.SetMap=void 0;var c=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_map",new Map)}return function(e,t,n){t&&u(e.prototype,t)}(e,[{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"getOne",value:function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0},f:function e(){try{a||null==n.return||n.return()}finally{if(u)throw e}}}}(this.get(e));try{for(n.s();!(t=n.n()).done;)return t.value}catch(e){n.e(e)}finally{n.f()}}},{key:"add",value:function(e,t){var n=this._map.get(e);return n||this._map.set(e,n=new Set),n.add(t)}},{key:"remove",value:function(e,t){var n=this._map.get(e);if(n){var r=n.delete(t);return n.size||this._map.delete(e),r}}},{key:"values",value:function(){return r(Set,o(o(this._map.values()).map(function(e){return o(e.values())})))}}]),e}();e.SetMap=c}),require.register("base/Tag.js",function(e,t,n){"use strict";var r=t("./Bindable");function o(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=void 0;var i=function(){function e(t,n,o,i,a){var u=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t){var c=document.createRange().createContextualFragment(t);t=c.firstChild}return this.element=r.Bindable.makeBindable(t),this.node=this.element,this.parent=n,this.direct=a,this.ref=o,this.index=i,this.cleanup=[],this[r.Bindable.OnAllGet]=function(e){return"function"==typeof u[e]?u[e]:u.node&&"function"==typeof u.node[e]?function(){var t;return(t=u.node)[e].apply(t,arguments)}:u.node&&e in u.node?u.node[e]:u[e]},this.style=function(e){return r.Bindable.make(function(t){if(e.node)for(var n in t)"-"===n[0]?e.node.style.setProperty(n,t[n]):e.node.style[n]=t[n]})}(this),this.proxy=r.Bindable.make(this),this.proxy.style.bindTo(function(e,t){u.element.style[t]=e}),this.proxy.bindTo(function(e,n){return n in t&&(t[n]=e),!1}),this.proxy}return function(e,t,n){t&&o(e.prototype,t)}(e,[{key:"attr",value:function(e){for(var t in e)void 0===e[t]?this.node.removeAttribute(t):null===e[t]?this.node.setAttribute(t,""):this.node.setAttribute(t,e[t])}},{key:"remove",value:function(){this.node&&this.node.remove(),r.Bindable.clearBindings(this);for(var e;e=this.cleanup.shift();)e();if(this.clear(),this.node){var t=new Event("cvDomDetached");this.node.dispatchEvent(t),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var e=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(e),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){}},{key:"listen",value:function(e,t,n){var r=this.node;r.addEventListener(e,t,n);var o=function(){r.removeEventListener(e,t,n)},i=function(){o(),o=function(){return console.warn("Already removed!")}};return this.parent.onRemove(function(){return i()}),i}}]),e}();e.Tag=i}),require.register("base/Theme.js",function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0},f:function e(){try{a||null==n.return||n.return()}finally{if(u)throw e}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Theme=void 0;var c=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.key=t,this.viewMap=new Map,this.templateMap=new Map,this.fallbacks=[]}return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(e,[{key:"setFallback",value:function(){var e;return(e=this.fallbacks).push.apply(e,arguments),this}},{key:"setView",value:function(e,t){return this.viewMap.set(e,t),this}},{key:"getView",value:function(e){return this.resolve(e,"viewMap")}},{key:"setTemplate",value:function(e,t){return this.viewMap.set(e,t),this}},{key:"getTemplate",value:function(e){return this.resolve(e,"templateMap")}},{key:"resolve",value:function(e,t){var n=e.constructor,i=this[t];if(i.has(n))return i.get(n);var a,u=!1,c=o(i);try{for(c.s();!(a=c.n()).done;){var s=r(a.value,2),l=s[0],f=s[1];n.prototype instanceof l&&(u=f)}}catch(e){c.e(e)}finally{c.f()}if(!u){var p,v=o(this.fallbacks);try{for(v.s();!(p=v.n()).done;)if(u=p.value.resolve(e,t))return u}catch(e){v.e(e)}finally{v.f()}}return u&&i.set(n,u),u}}],[{key:"get",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return this.instances||(this.instances={}),this.instances[e]||(this.instances[e]=new this(e)),this.instances[e]}}]),e}();e.Theme=c}),require.register("base/View.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;var o=t("./Bindable"),i=t("./ViewList"),a=t("./Router"),u=t("./Dom"),c=t("./Tag"),s=t("./Bag"),l=t("./RuleSet"),f=t("./Mixin"),p=(t("../mixin/PromiseMixin"),t("../mixin/EventTargetMixin"));function v(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}function h(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=Symbol("dontParse"),k=Symbol("expandBind"),S=Symbol("uuid"),P=function(e){function n(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e=r.call(this,t,i),Object.defineProperty(_(e),"args",{value:o.Bindable.make(t)}),Object.defineProperty(_(e),S,{value:e.constructor.uuid()}),Object.defineProperty(_(e),"nodesAttached",{value:new s.Bag(function(){})}),Object.defineProperty(_(e),"nodesDetached",{value:new s.Bag(function(){})}),Object.defineProperty(_(e),"_onRemove",{value:new s.Bag(function(){})}),Object.defineProperty(_(e),"cleanup",{value:[]}),Object.defineProperty(_(e),"parent",{value:i}),Object.defineProperty(_(e),"views",{value:new Map}),Object.defineProperty(_(e),"viewLists",{value:new Map}),Object.defineProperty(_(e),"withViews",{value:new Map}),Object.defineProperty(_(e),"tags",{value:o.Bindable.make({})}),Object.defineProperty(_(e),"nodes",{value:o.Bindable.make([])}),Object.defineProperty(_(e),"timeouts",{value:new Map}),Object.defineProperty(_(e),"intervals",{value:[]}),Object.defineProperty(_(e),"frames",{value:[]}),Object.defineProperty(_(e),"ruleSet",{value:new l.RuleSet}),Object.defineProperty(_(e),"preRuleSet",{value:new l.RuleSet}),Object.defineProperty(_(e),"subBindings",{value:{}}),Object.defineProperty(_(e),"templates",{value:{}}),Object.defineProperty(_(e),"eventCleanup",{value:[]}),Object.defineProperty(_(e),"unpauseCallbacks",{value:new Map}),Object.defineProperty(_(e),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(_(e),"rendered",{value:new Promise(function(t){return Object.defineProperty(_(e),"renderComplete",{value:t})})}),e.template="",e.firstNode=null,e.lastNode=null,e.viewList=null,e.mainView=null,e.preserve=!1,e.removed=!1,e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(n,f.Mixin.with(p.EventTargetMixin));var r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}(n);return function(e,t,n){t&&m(e.prototype,t),n&&m(e,n)}(n,[{key:"_id",get:function(){return this[S]}},{key:"onFrame",value:function(e){var t=this,n=!1,r=function(){n=!0},o=function(){t.removed||n||(!t.paused&&e(Date.now()),requestAnimationFrame(o))};return requestAnimationFrame(function(){return o(Date.now())}),this.frames.push(r),r}},{key:"onNextFrame",value:function(e){return requestAnimationFrame(function(){return e(Date.now())})}},{key:"onIdle",value:function(e){return requestIdleCallback(function(){return e(Date.now())})}},{key:"onTimeout",value:function(e,t){var n=this,r={timeout:null,callback:null,time:e,fired:!1,created:(new Date).getTime(),paused:!1},o=function(){t(),r.fired=!0,n.timeouts.delete(r.timeout)},i=setTimeout(o,e);return r.callback=o,r.timeout=i,this.timeouts.set(r.timeout,r),i}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e,t=y(this.timeouts);try{for(t.s();!(e=t.n()).done;){var n=d(e.value,2),r=(n[0],n[1]);clearTimeout(r.timeout),this.timeouts.delete(r.timeout)}}catch(e){t.e(e)}finally{t.f()}})},{key:"onInterval",value:function(e,t){var n=setInterval(t,e);return this.intervals.push({timeout:n,callback:t,time:e,paused:!1}),n}},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){for(var t in this.intervals)e===this.intervals[t].timeout&&(clearInterval(this.intervals[t].timeout),delete this.intervals[t])})},{key:"pause",value:function(){var e=Math.max,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===t&&(this.paused=!this.paused),this.paused=t,this.paused){var n,r=y(this.timeouts);try{for(r.s();!(n=r.n()).done;){var o=d(n.value,2),i=(o[0],o[1]);i.fired?this.timeouts.delete(i.timeout):(clearTimeout(i.timeout),i.paused=!0,i.time=e(0,i.time-(Date.now()-i.created)))}}catch(e){r.e(e)}finally{r.f()}for(var a in this.intervals)clearInterval(this.intervals[a].timeout)}else{var u,c=y(this.timeouts);try{for(c.s();!(u=c.n()).done;){var s=d(u.value,2),l=(s[0],s[1]);if(l.paused){if(l.fired){this.timeouts.delete(l.timeout);continue}l.timeout=setTimeout(l.callback,l.time),l.paused=!1}}}catch(e){c.e(e)}finally{c.f()}for(var f in this.intervals)this.intervals[f].timeout.paused&&(this.intervals[f].timeout.paused=!1,this.intervals[f].timeout=setInterval(this.intervals[f].callback,this.intervals[f].time));var p,v=y(this.unpauseCallbacks);try{for(v.s();!(p=v.n()).done;){(0,d(p.value,2)[1])()}}catch(e){v.e(e)}finally{v.f()}this.unpauseCallbacks.clear()}var h,b=y(this.viewLists);try{for(b.s();!(h=b.n()).done;){var m=d(h.value,2);(m[0],m[1]).pause(!!t)}}catch(e){b.e(e)}finally{b.f()}for(var g in this.tags)if(Array.isArray(this.tags[g]))for(var w in this.tags[g])this.tags[g][w].pause(!!t);else this.tags[g].pause(!!t)}},{key:"render",value:function(){var e,t=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(r instanceof n&&(r=r.firstNode.parentNode),o instanceof n&&(o=o.firstNode),this.firstNode)return this.reRender(r,o);this.dispatchEvent(new CustomEvent("render"));var i=this.template instanceof DocumentFragment?this.template.cloneNode(!0):n.templates.has(this.template),a=i?this.template instanceof DocumentFragment?i:n.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(i||this.template instanceof DocumentFragment||n.templates.set(this.template,a.cloneNode(!0)),this.mainView||this.preRuleSet.apply(a,this),this.mapTags(a),this.mainView||this.ruleSet.apply(a,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(e=this.nodes).push.apply(e,[this.firstNode].concat(v(Array.from(a.childNodes)),[this.lastNode])),this.postRender(r),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(r){var u=r.getRootNode(),c=!1;if(u.isConnected&&(c=!0),o?(r.insertBefore(this.firstNode,o),r.insertBefore(this.lastNode,o)):(r.appendChild(this.firstNode),r.appendChild(this.lastNode)),r.insertBefore(a,this.lastNode),c)this.attached(u,r),this.dispatchAttached(u,r);else{var s=function(e){e.target.isConnected&&(t.attached(u,r),t.dispatchAttached(u,r),r.removeEventListener("cvDomAttached",s))};r.addEventListener("cvDomAttached",s)}}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;this.dispatchEvent(new CustomEvent("attached",{detail:{view:n||this,node:t,root:e,mainView:this}}));var r=this.nodesAttached.items();for(var o in r)r[o](e,t);this.dispatchDomAttached(n)}},{key:"dispatchDomAttached",value:function(e){var t=this;this.nodes.filter(function(e){return e.nodeType!==Node.COMMENT_NODE}).map(function(n){n.matches&&(u.Dom.mapTags(n,!1,function(n){n.matches&&n.dispatchEvent(new CustomEvent("cvDomAttached",{target:n,detail:{view:e||t,mainView:t}}))}),n.dispatchEvent(new CustomEvent("cvDomAttached",{target:n,detail:{view:e||t,mainView:t}})))})}},{key:"reRender",value:function(e,t){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this})){var n=new DocumentFragment;if(this.firstNode.isConnected){var r=this.nodesDetached.items();for(var o in r)r[o]()}if(n.append.apply(n,v(this.nodes)),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(n,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this});var i=e.getRootNode();i.isConnected&&(this.attached(i,e),this.dispatchAttached(i,e))}return this.nodes}}},{key:"mapTags",value:function(e){var t=this;u.Dom.mapTags(e,!1,function(e,n){e[j]||(e=e.matches?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.mapInterpolatableTag(e)).matches("[cv-template]")&&t.mapTemplateTag(e)||e).matches("[cv-slot]")&&t.mapSlotTag(e)||e).matches("[cv-prerender]")&&t.mapPrendererTag(e)||e).matches("[cv-link]")&&t.mapLinkTag(e)||e).matches("[cv-attr]")&&t.mapAttrTag(e)||e).matches("[cv-expand]")&&t.mapExpandableTag(e)||e).matches("[cv-ref]")&&t.mapRefTag(e)||e).matches("[cv-on]")&&t.mapOnTag(e)||e).matches("[cv-each]")&&t.mapEachTag(e)||e).matches("[cv-bind]")&&t.mapBindTag(e)||e).matches("[cv-with]")&&t.mapWithTag(e)||e).matches("[cv-if]")&&t.mapIfTag(e)||e).matches("[cv-view]")&&t.mapViewTag(e)||e:t.mapInterpolatableTag(e))!==n.currentNode&&(n.currentNode=e)})}},{key:"mapExpandableTag",value:function(e){var t=e[k];t&&(t(),e[k]=!1);var n=d(o.Bindable.resolve(this.args,e.getAttribute("cv-expand"),!0),2),r=n[0],i=n[1];return e.removeAttribute("cv-expand"),r[i]||(r[i]={}),r[i]=o.Bindable.make(r[i]),this.onRemove(e[k]=r[i].bindTo(function(t,n,r,o){return o||void 0===t?void e.removeAttribute(n,t):null===t?void e.setAttribute(n,""):void e.setAttribute(n,t)})),e}},{key:"compileExpandableTag",value:function(e){return function(t){var n=e.cloneNode(!0),r=n.getAttribute("cv-expand"),i=o.Bindable.make(t.args[r]||{});n.removeAttribute("cv-expand");var a=function(e){if("name"===e||"type"===e)return"continue";var r=i.bindTo(e,function(e,t){return function(n){e.setAttribute(t,n)}}(n,e));t.onRemove(function(){r(),i.isBound()&&o.Bindable.clearBindings(i)})};for(var u in i)a(u);return n}}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(e){var t=e.getAttribute("cv-attr").split(",").map(function(e){return e.split(":")});return e.removeAttribute("cv-attr"),function(n){var r=e.cloneNode(!0),i=function(e){var i=t[e][1]||t[e][0],a=d(o.Bindable.resolve(n.args,i,!0),2),u=a[0],c=a[1],s=t[e][0];n.onRemove(u.bindTo(c,function(e,t,n,o){return o||void 0===e?void r.removeAttribute(s,e):null===e?void r.setAttribute(s,""):void r.setAttribute(s,e)}))};for(var a in t)i(a);return r}}},{key:"mapInterpolatableTag",value:function(e){var t=this,r=this.interpolateRegex;if(e.nodeType===Node.TEXT_NODE){var i=e.nodeValue;if(!this.interpolatable(i))return e;for(var a,u=0,s=function(){var r=a[2],s=!1,l=!1,f=r.split("|"),p=!1;if(1<f.length&&(p=t.stringTransformer(f.slice(1)),r=f[0]),"$$"===r.substr(0,2)&&(s=!0,l=!0,r=r.substr(2)),"$"===r.substr(0,1)&&(s=!0,r=r.substr(1)),"000"===r.substr(0,3))return expand=!0,r=r.substr(3),"continue";var v=i.substring(u,a.index);u=a.index+a[1].length;var y,h=document.createTextNode(v);h[j]=!0,e.parentNode.insertBefore(h,e),(y=s?document.createElement("div"):document.createTextNode(""))[j]=!0;var b=t.args,m=r;if(r.match(/\./)){var g=d(o.Bindable.resolve(t.args,r,!0),2);b=g[0],m=g[1]}e.parentNode.insertBefore(y,e);var w=b.bindTo(m,function(r,o,i){if(i[o]!==r&&(i[o]instanceof n||i[o]instanceof Node||i[o]instanceof c.Tag)&&!i[o].preserve&&i[o].remove(),y.nodeValue="",l&&!(r instanceof n)){var a=r;(r=new n(t.args,t)).template=a}if(p&&(r=p(r)),r instanceof n){var u=function(){r.dispatchDomAttached(t)};t.nodesAttached.add(u),r.render(e.parentNode,y);var f=function(){r.preserve||r.remove()};t.onRemove(f),r.onRemove(function(){t.nodesAttached.remove(u),t._onRemove.remove(f)})}else r instanceof Node?(e.parentNode.insertBefore(r,y),t.onRemove(function(){return r.remove()})):r instanceof c.Tag?(e.parentNode.insertBefore(r.node,y),t.onRemove(function(){return r.remove()})):(r instanceof Object&&r.__toString instanceof Function&&(r=r.__toString()),s?y.innerHTML=r:y.nodeValue=r);y[j]=!0});t.onRemove(w)};a=r.exec(i);)s();var l=i.substring(u),f=document.createTextNode(l);f[j]=!0,e.parentNode.insertBefore(f,e),e.nodeValue=""}else if(e.nodeType===Node.ELEMENT_NODE)for(var p=function(n){if(!t.interpolatable(e.attributes[n].value))return"continue";for(var i=0,a=void 0,u=e.attributes[n].value,c=e.attributes[n],s={},l=[];a=r.exec(u);)l.push(u.substring(i,a.index)),s[a[2]]||(s[a[2]]=[]),s[a[2]].push(l.length),l.push(a[1]),i=a.index+a[1].length;l.push(u.substring(i));var f=function(n){var r=t.args,i=n,a=n.split("|"),u=!1,f=n;if(1<a.length&&(u=t.stringTransformer(a.slice(1)),i=a[0]),i.match(/\./)){var p=d(o.Bindable.resolve(t.args,i,!0),2);r=p[0],i=p[1]}s[f],t.onRemove(r.bindTo(i,function(n,r,o){for(var a in u&&(n=u(n)),s)for(var p in s[f])l[s[f][p]]=o[a],r===i&&(l[s[f][p]]=n);t.paused?t.unpauseCallbacks.set(c,function(){return e.setAttribute(c.name,l.join(""))}):e.setAttribute(c.name,l.join(""))})),t.onRemove(function(){r.isBound()||o.Bindable.clearBindings(r)})};for(var p in s)f(p)},v=0;v<e.attributes.length;v++)p(v);return e}},{key:"mapRefTag",value:function(e){var t=d(e.getAttribute("cv-ref").split(":"),3),n=t[0],r=t[1],o=void 0===r?null:r,i=t[2],a=void 0===i?null:i,u=c.Tag;o&&(u=this.stringToClass(o)),e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(function(){e.___tag___=null,e.remove()});var s=this;this.viewList&&(s=this.viewList.parent);var l=new u(e,this,n,void 0,this);for(e.___tag___=l,this.tags[n]=l;s;){s.parent;var f=this.args[a];void 0===f?s.tags[n]=l:(!s.tags[n]&&(s.tags[n]=[]),s.tags[n][f]=l),s=s.parent}return e}},{key:"mapBindTag",value:function(e){var t=this,r=e.getAttribute("cv-bind"),i=this.args,a=r,s=null;if(r.match(/\./)){var l=d(o.Bindable.resolve(this.args,r,!0),3);i=l[0],a=l[1],s=l[2]}i!==this.args&&(this.subBindings[r]=this.subBindings[r]||[],this.onRemove(this.args.bindTo(s,function(){for(;t.subBindings.length;)t.subBindings.shift()()})));var f=!1;"$"===a.substr(0,1)&&(a=a.substr(1),f=!0);var p=i.bindTo(a,function(r,o,i,a,s){(s instanceof n||s instanceof Node||s instanceof c.Tag)&&s!==r&&s.remove();var l=new CustomEvent("cvAutoChanged",{bubbles:!0});if(["INPUT","SELECT","TEXTAREA"].includes(e.tagName)){var p=e.getAttribute("type");if(p&&"checkbox"===p.toLowerCase())e.checked=!!r,e.dispatchEvent(l);else if(p&&"radio"===p.toLowerCase())e.checked=r==e.value,e.dispatchEvent(l);else if("file"!==p){if("SELECT"===e.tagName){var v=function(){for(var t=0;t<e.options.length;t++)e.options[t].value==r&&(e.selectedIndex=t)};v(),t.nodesAttached.add(v)}else e.value=null==r?"":r;e.dispatchEvent(l)}}else if(r instanceof n){var d,h=y(e.childNodes);try{for(h.s();!(d=h.n()).done;)d.value.remove()}catch(e){h.e(e)}finally{h.f()}var b=function(){r.dispatchDomAttached(t)};t.nodesAttached.add(b),r.render(e),r.onRemove(function(){return t.nodesAttached.remove(b)})}else if(r instanceof Node)e.insert(r);else if(r instanceof c.Tag)e.append(r.node);else if(f){if(e.innerHTML!==r){if(r+="",e.innerHTML===r.substring(0,e.innerHTML.length))e.innerHTML+=r.substring(e.innerHTML.length);else{var m,g=y(e.childNodes);try{for(g.s();!(m=g.n()).done;)m.value.remove()}catch(e){g.e(e)}finally{g.f()}e.innerHTML=r}u.Dom.mapTags(e,!1,function(e){return e[j]=!0})}}else if(e.textContent!==r){var w,_=y(e.childNodes);try{for(_.s();!(w=_.n()).done;)w.value.remove()}catch(e){_.e(e)}finally{_.f()}e.textContent=r}});i!==this.args&&this.subBindings[r].push(p),this.onRemove(p);var v=e.getAttribute("type"),h=e.getAttribute("multiple"),b=function(t){if(t.target===e)if(v&&"checkbox"===v.toLowerCase())i[a]=!!e.checked&&t.target.getAttribute("value");else if(t.target.matches("[contenteditable=true]"))i[a]=t.target.innerHTML;else if("file"===v&&h){var n=Array.from(t.target.files),r=i[a]||o.Bindable.onDeck(i,a);if(r&&n.length){var u=function(e){if(n[e]!==r[e])return n[e].toJSON=function(){return{name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified}},r[e]=n[e],"break"};for(var c in n)if("break"===u(c))break}else i[a]=n}else if("file"!==v||h)i[a]=t.target.value;else{var s=t.target.files.item(0);s.toJSON=function(){return{name:s.name,size:s.size,type:s.type,date:s.lastModified}},i[a]=s}};return"file"===v||"radio"===v?e.addEventListener("change",b):(e.addEventListener("input",b),e.addEventListener("change",b),e.addEventListener("value-changed",b)),this.onRemove(function(){"file"===v||"radio"===v?e.removeEventListener("change",b):(e.removeEventListener("input",b),e.removeEventListener("change",b),e.removeEventListener("value-changed",b))}),e.removeAttribute("cv-bind"),e}},{key:"mapOnTag",value:function(e){var t=this;return(e.getAttribute("cv-on")+"").split(";").map(function(e){return e.split(":")}).map(function(n){var r=(n=n.map(function(e){return e.trim()})).length,o=(n.shift()+"").trim(),i=((n.shift()||o)+"").trim(),a=((n.shift()||"")+"").trim(),u=[],c=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(i);c?(i=c[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),c[2]&&(u=c[2].split(",").map(function(e){return e.trim()})),c.length):u.push("$event"),o&&1!==r||(o=i);for(var s,l=t;l&&("function"!=typeof l[i]||"break"!==function(){var e=l,t=i;return s=function(){e[t].apply(e,arguments)},"break"}())&&l.parent;)l=l.parent;var f=function(n){var r=u.map(function(r){var o;return+r==r?r:"event"===r||"$event"===r?n:"$view"===r?l:"$tag"===r?e:"$parent"===r?t.parent:"$subview"===r?t:r in t.args?t.args[r]:(o=/^['"]([\w-]+?)["']$/.exec(r))?o[1]:void 0});if("function"!=typeof s)throw new Error("".concat(i," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));s.apply(void 0,v(r))},p={};switch(a.includes("p")?p.passive=!0:a.includes("P")&&(p.passive=!1),a.includes("c")?p.capture=!0:a.includes("C")&&(p.capture=!1),a.includes("o")?p.once=!0:a.includes("O")&&(p.once=!1),o){case"_init":f();break;case"_attach":t.nodesAttached.add(f);break;case"_detach":t.nodesDetached.add(f);break;default:e.addEventListener(o,f,p),t.onRemove(function(){e.removeEventListener(o,f,p)})}return[o,i,u]}),e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var n=function(n){return n.preventDefault(),"http"===t.substring(0,4)||"//"===t.substring(0,2)?void window.open(e.getAttribute("href",t)):void a.Router.go(e.getAttribute("href"))};return e.addEventListener("click",n),this.onRemove(function(e,t){return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,n)),e.removeAttribute("cv-link"),e}},{key:"compileLinkTag",value:function(e){var t=e.getAttribute("cv-link");return e.removeAttribute("cv-link"),function(){var n=e.cloneNode(!0);return n.setAttribute("href",t),n}}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),n=window.prerenderer||navigator.userAgent.match(/prerender/i);return n&&(window.prerenderer=window.prerenderer||!0),("never"===t&&n||"only"===t&&!n)&&e.parentNode.removeChild(e),e}},{key:"mapWithTag",value:function(e){var t=this,r=e.getAttribute("cv-with"),i=e.getAttribute("cv-carry"),a=e.getAttribute("cv-view");e.removeAttribute("cv-with"),e.removeAttribute("cv-carry"),e.removeAttribute("cv-view");var u=a?this.stringToClass(a):n,c=new DocumentFragment;v(e.childNodes).map(function(e){return c.appendChild(e)});var s=[];i&&(s=i.split(",").map(function(e){return e.trim()}));var l=this.args.bindTo(r,function(n){for(t.withViews.has(e)&&t.withViews.delete(e);e.firstChild;)e.removeChild(e.firstChild);var r=new u({},t);t.onRemove(function(e){return function(){e.remove()}}(r)),r.template=c;var i=function(e){var n=t.args.bindTo(s[e],function(e,t){r.args[t]=e});r.onRemove(n),t.onRemove(function(){n(),r.remove()})};for(var a in s)i(a);var l=function(e){var i=n.bindTo(e,function(e,t){r.args[t]=e});r.args.bindTo(e,function(e,t){n[t]=e}),t.onRemove(function(){i(),n.isBound()||o.Bindable.clearBindings(n),r.remove()}),r.onRemove(function(){i(),n.isBound()||o.Bindable.clearBindings(n)})};for(var f in n)l(f);r.render(e),t.withViews.set(e,r)});return this.onRemove(function(){t.withViews.delete(e),l()}),e}},{key:"mapViewTag",value:function(e){var t=this,r=e.getAttribute("cv-view");e.removeAttribute("cv-view");var o=new DocumentFragment;v(e.childNodes).map(function(e){return o.appendChild(e)});var i=r.split(":"),a=i.pop()?this.stringToClass(r):n,u=i.shift(),c=new a(this.args,this);return this.views.set(e,c),u&&this.views.set(u,c),this.onRemove(function(n){return function(){n.remove(),t.views.delete(e),t.views.delete(u)}}(c)),c.template=o,c.render(e),e}},{key:"mapEachTag",value:function(e){var t=this,r=e.getAttribute("cv-each"),o=e.getAttribute("cv-view");e.removeAttribute("cv-each"),e.removeAttribute("cv-view");var a=o?this.stringToClass(o):n,u=new DocumentFragment;Array.from(e.childNodes).map(function(e){return u.appendChild(e)});var c=d(r.split(":"),3),s=c[0],l=c[1],f=c[2],p=this.args.bindTo(s,function(n){t.viewLists.has(e)&&t.viewLists.get(e).remove();var r=new i.ViewList(u,l,n,t,f,a),o=function(){return r.remove()};t.onRemove(o),r.onRemove(function(){return t._onRemove.remove(o)});var c=t.args.bindTo(function(e,t,n,o){"_id"===t||(o&&delete r.subArgs[t],r.subArgs[t]=e)}),s=r.args.bindTo(function(e,n,r,o){"_id"===n||"value"===n||"___"===n.substring(0,3)||(o&&delete t.args[n],n in t.args&&(t.args[n]=e))});for(r.onRemove(c),r.onRemove(s),t.onRemove(c),t.onRemove(s);e.firstChild;)e.removeChild(e.firstChild);t.viewLists.set(e,r),r.render(e)});return this.onRemove(p),e}},{key:"mapIfTag",value:function(e){var t=this,r=e,i=r.getAttribute("cv-view"),a=r.getAttribute("cv-if"),u=r.getAttribute("cv-is"),c=!1,s=!1;r.removeAttribute("cv-view"),r.removeAttribute("cv-if"),r.removeAttribute("cv-is");var l=i?this.stringToClass(i):n;"!"===a.substr(0,1)&&(a=a.substr(1),c=!0),"?"===a.substr(0,1)&&(a=a.substr(1),s=!0);var f=new DocumentFragment;Array.from(r.childNodes).map(function(e){return f.appendChild(e)});var p=this,v=new DocumentFragment,y=new l(this.args,p);this.onRemove(y.tags.bindTo(function(e,n){t.tags[n]=e})),y.template=f;var h=p.args,b=a;if(a.match(/\./)){var m=d(o.Bindable.resolve(p.args,a,!0),2);h=m[0],b=m[1]}y.render(v);var g=h.bindTo(b,function(t){var n=t;s&&(t=null!=t),Array.isArray(t)&&(t=!!t.length),c&&(t=!t),t?(null!==u&&n==u||null===u)&&e.appendChild(v):y.nodes.map(function(e){return v.appendChild(e)})},{wait:0,children:Array.isArray(h[b])});p.onRemove(g);var w=function(){h.isBound()||o.Bindable.clearBindings(h)};return p.onRemove(function(){g(),w(),p._onRemove.remove(g),p._onRemove.remove(w)}),this.onRemove(function(){y.remove(),p!==t&&p.remove()}),e}},{key:"compileIfTag",value:function(e){var t=e.getAttribute("cv-if"),r=!1;e.removeAttribute("cv-if"),"!"===t.substr(0,1)&&(t=t.substr(1),r=!0);var i=new DocumentFragment;return Array.from(e.childNodes).map(function(e){return i.appendChild(e.cloneNode(!0))}),function(a){var u=e.cloneNode(),c=new DocumentFragment,s=new n({},a);s.template=i,a.syncBind(s);var l=a.args,f=t;if(t.match(/\./)){var p=d(o.Bindable.resolve(a.args,t,!0),2);l=p[0],f=p[1]}var v=!1,y=l.bindTo(f,function(e){if(!v){var t=a.args[f]||r?u:c;return s.render(t),void(v=!0)}Array.isArray(e)&&(e=!!e.length),r&&(e=!e),e?u.appendChild(c):s.nodes.map(function(e){return c.appendChild(e)})});a.onRemove(y);var h=function(){l.isBound()||o.Bindable.clearBindings(l)};return s.onRemove(function(){y(),h(),a._onRemove.remove(y),a._onRemove.remove(h)}),u}}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");return e.removeAttribute("cv-template"),this.templates[t]=function(){return"TEMPLATE"===e.tagName?e.content.cloneNode(!0):new DocumentFragment(e.innerHTML)},this.rendered.then(function(){return e.remove()}),e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),n=this.templates[t];if(!n){for(var r=this;r&&!(n=r.templates[t]);)r=this.parent;if(!n)return void console.error("Template ".concat(t," not found."))}var o=n();for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return e.appendChild(o),e}},{key:"syncBind",value:function(e){var t=this,r=this.args.bindTo(function(t,n){"_id"===n||e.args[n]!==t&&(e.args[n]=t)}),o=e.args.bindTo(function(e,r,o,i,a){if("_id"!==r){var u=e,c=a;u instanceof n&&(u=u.___ref___),c instanceof n&&(c=c.___ref___),u!==c&&c instanceof n&&a.remove(),r in t.args&&(t.args[r]=e)}});this.onRemove(r),this.onRemove(o),e.onRemove(function(){t._onRemove.remove(r),t._onRemove.remove(o)})}},{key:"postRender",value:function(){}},{key:"attached",value:function(){}},{key:"interpolatable",value:function(e){return!!(e+"").match(this.interpolateRegex)}},{key:"remove",value:function(){var e=this,t=function(){for(var t in e.tags)Array.isArray(e.tags[t])?(e.tags[t]&&e.tags[t].map(function(e){return e.remove()}),e.tags[t].splice(0)):(e.tags[t]&&e.tags[t].remove(),e.tags[t]=void 0);for(var n in e.nodes)e.nodes[n]&&e.nodes[n].dispatchEvent(new Event("cvDomDetached")),e.nodes[n]&&e.nodes[n].remove(),e.nodes[n]=void 0;e.nodes.splice(0),e.firstNode=e.lastNode=void 0};!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0]?t():requestAnimationFrame(t);var n,r,o=y(this._onRemove.items());try{for(o.s();!(n=o.n()).done;){var i=n.value;this._onRemove.remove(i),i()}}catch(e){o.e(e)}finally{o.f()}for(;r=this.cleanup.shift();)r&&r();var a,u=y(this.viewLists);try{for(u.s();!(a=u.n()).done;){var c=d(a.value,2);(c[0],c[1]).remove()}}catch(e){u.e(e)}finally{u.f()}this.viewLists.clear();var s,l=y(this.timeouts);try{for(l.s();!(s=l.n()).done;){var f=d(s.value,2),p=(f[0],f[1]);clearTimeout(p.timeout),this.timeouts.delete(p.timeout)}}catch(e){l.e(e)}finally{l.f()}for(var v in this.intervals)clearInterval(this.intervals[v].timeout),delete this.intervals[v];for(var v in this.frames)this.frames[v](),delete this.frames[v];this.preRuleSet.purge(),this.ruleSet.purge(),this.removed=!0}},{key:"findTag",value:function(e){for(var t in this.nodes){var n=void 0;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return new c.Tag(this.nodes[t],this,void 0,void 0,this);if(n=this.nodes[t].querySelector(e))return new c.Tag(n,this,void 0,void 0,this)}}}},{key:"findTags",value:function(e){var t=this;return this.nodes.filter(function(e){return e.querySelectorAll}).map(function(t){return v(t.querySelectorAll(e))}).flat().map(function(e){return new c.Tag(e,t,void 0,void 0,t)})}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(){}},{key:"afterUpdate",value:function(){}},{key:"stringTransformer",value:function(e){var t=this;return function(n){for(var r in e){for(var o=t,i=e[r];o&&!o[i];)o=o.parent;if(!o)return;n=o[e[r]](n)}return n}}},{key:"stringToClass",value:function(e){if(n.refClasses.has(e))return n.refClasses.get(e);var r=e.split("/"),o=r[r.length-1],i=t(e);return n.refClasses.set(e,i[o]),i[o]}},{key:"preventParsing",value:function(e){e[j]=!0}},{key:"toString",value:function(){return this.nodes.map(function(e){return e.outerHTML}).join(" ")}},{key:"listen",value:function(e,t,r,o){var i=this;if("string"==typeof e&&(o=r,r=t,t=e,e=this),e instanceof n)return this.listen(e.nodes,t,r,o);if(Array.isArray(e)){var a=e.map(function(e){return i.listen(e,t,r,o)});return function(){return a.map(function(e){return e()})}}if(e instanceof c.Tag)return this.listen(e.element,t,r,o);e.addEventListener(t,r,o);var u=function(){return e.removeEventListener(t,r,o)},s=function(){u(),u=function(){}};return this.onRemove(function(){return s()}),s}},{key:"detach",value:function(){for(var e in this.nodes)this.nodes[e].remove();return this.nodes}}],[{key:"from",value:function(e){var t=new this(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:null);return t.template=e,t}},{key:"isView",value:function(){return n}},{key:"uuid",value:function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}}]),n}();e.View=P,Object.defineProperty(P,"templates",{value:new Map}),Object.defineProperty(P,"refClasses",{value:new Map})}),require.register("base/ViewList.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewList=void 0;var r=t("./Bindable"),o=t("./SetMap"),i=t("./View"),a=t("./Bag");function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}var l=function(){function e(t,n,o,u){var s=this,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,f=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.removed=!1,this.args=r.Bindable.makeBindable({}),this.args.value=r.Bindable.makeBindable(o||{}),this.subArgs=r.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.viewClass=f||i.View,this._onRemove=new a.Bag,this.template=t,this.subProperty=n,this.keyProperty=l,this.tag=null,this.paused=!1,this.parent=u,this.rendered=new Promise(function(e){Object.defineProperty(s,"renderComplete",{configurable:!1,writable:!0,value:e})}),this.willReRender=!1,this.args.___before(function(e,t){"bindTo"==t||(s.paused=!0)}),this.args.___after(function(e,t,n){"bindTo"==t||(s.paused=1<n.length,s.reRender())});var p=this.args.value.bindTo(function(e,t,n,r){if(!s.paused){var o=t;if("symbol"!==c(t))if(isNaN(t)&&(o="_"+t),r)for(var i in s.views[o]&&s.views[o].remove(),delete s.views[o],s.views)isNaN(i)?s.views[i].args[s.keyProperty]=i.substr(1):s.views[i].args[s.keyProperty]=i;else s.views[o]||s.willReRender?s.views[o]&&s.views[o].args&&(s.views[o].args[s.keyProperty]=t,s.views[o].args[s.subProperty]=e):(cancelAnimationFrame(s.willReRender),s.willReRender=requestAnimationFrame(function(){s.reRender()}))}});this._onRemove.add(p)}return function(e,t,n){t&&s(e.prototype,t)}(e,[{key:"render",value:function(e){var t,n=this,r=[],o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}(this.views);try{var i=function(){var n=t.value;n.render(e),r.push(n.rendered.then(function(){return n}))};for(o.s();!(t=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}this.tag=e,Promise.all(r).then(function(e){return n.renderComplete(e)}),this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[],n=new o.SetMap;for(var r in this.views){var i=this.views[r],a=i.args[this.subProperty];n.add(a,i),t[r]=i}var u=[],c=new Set;this.upDebind&&this.upDebind.map(function(e){return e&&e()}),this.downDebind&&this.downDebind.map(function(e){return e&&e()}),this.upDebind=[],this.downDebind=[];var s=1/0,l=1/0,f=function(t){var r=Math.min,o=!1,i=t;if(isNaN(i)?i="_"+t:(i+"").length&&(i=+i),void 0!==e.args.value[t]&&n.has(e.args.value[t])){var a=n.getOne(e.args.value[t]);a&&(a.args[e.keyProperty]=t,u[i]=a,c.add(a),o=!0,!isNaN(i)&&(s=r(s,i),0<i&&(l=r(l,i))),n.remove(e.args.value[t],a))}if(!o){var f={},p=u[i]=new e.viewClass(f,e.parent);isNaN(i)||(s=r(s,i),0<i&&(l=r(l,i))),u[i].template=(e.template,e.template),u[i].viewList=e,u[i].args[e.keyProperty]=t,u[i].args[e.subProperty]=e.args.value[t],e.upDebind[i]=f.bindTo(e.subProperty,function(t,n,r,o){var i=f[e.keyProperty];return o?void delete e.args.value[i]:void(e.args.value[i]=t)}),e.downDebind[i]=e.subArgs.bindTo(function(e,t,n,r){return r?void delete f[t]:void(f[t]=e)});var v=function(){e.upDebind.filter(function(e){return e}).map(function(e){return e()}),e.upDebind.splice(0)},d=function(){e.downDebind.filter(function(e){return e}).map(function(e){return e()}),e.downDebind.splice(0)};p.onRemove(function(){e._onRemove.remove(v),e._onRemove.remove(d),e.upDebind[i]&&e.upDebind[i](),e.downDebind[i]&&e.downDebind[i](),delete e.upDebind[i],delete e.downDebind[i]}),e._onRemove.add(v),e._onRemove.add(d),f[e.subProperty]=e.args.value[t]}};for(var p in this.args.value)f(p);for(var v in t)c.has(t[v])||t[v].remove();if(Array.isArray(this.args.value)){var d=0===s&&void 0!==u[1]&&1<u.length||l===1/0?s:l,y=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=u.length-t-1;n>d&&void 0===u[n];)n--;return n<d?Promise.resolve():u[n]===e.views[n]?u[n].firstNode?y(+t+1):(u[n].render(e.tag,u[n+1]),u[n].rendered.then(function(){return y(+t+1)})):(u[n].render(e.tag,u[n+1]),e.views.splice(n,0,u[n]),u[n].rendered.then(function(){return y(+t+1)}))};this.rendered=y(),this.rendered.then(function(){return u.splice(0)})}else{var h=[],b=Object.assign({},u),m=function(t){return delete b[t],u[t].firstNode&&u[t]===e.views[t]?"continue":(u[t].render(e.tag),void h.push(u[t].rendered.then(function(){return u[t]})))};for(var g in u)m(g);for(var w in b)delete this.args.views[w],b.remove();this.rendered=Promise.all(h)}for(var _ in u)isNaN(_)?u[_].args[this.keyProperty]=_.substr(1):u[_].args[this.keyProperty]=_;this.views=[].concat(u),c.clear(),this.willReRender=!1,this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}}},{key:"pause",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var e in this.views)this.views[e].remove();var t=this._onRemove.items();for(var n in t)this._onRemove.remove(t[n]),t[n]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&r.Bindable.clearBindings(this.subArgs),r.Bindable.clearBindings(this.args),this.args.value&&!this.args.value.isBound()&&r.Bindable.clearBindings(this.args.value),this.removed=!0}}]),e}();e.ViewList=l}),require.register("form/ButtonField.js",function(e,t,n){"use strict";var r=t("./Field");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonField=void 0;var s=function(e){function t(e,r,o,i){var a;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),(a=n.call(this,e,r,o,i)).args.title=a.args.title||a.args.value,a._onClick=[];var u=a.args.attrs||{};return u.type=u.type||a.args.type,a.args.name=u.name=a.args.name||i,a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\ttype      = "').concat(u.type,'"\n\t\t\t\t\tvalue     = "[[value]]"\n\t\t\t\t\tcv-on     = "click:clicked(event)"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,r.Field);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}(t);return function(e,t,n){t&&i(e.prototype,t)}(t,[{key:"clicked",value:function(e){return this._onClick.map(function(t){return!1===t(e)}).filter(function(e){return e}).length?void("submit"==this.args.attrs.type&&(e.preventDefault(),e.stopPropagation())):void("submit"==this.args.attrs.type&&(e.preventDefault(),e.stopPropagation(),this.form.tags.formTag.element.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))))}},{key:"onClick",value:function(e){this._onClick.push(e)}}]),t}();e.ButtonField=s}),require.register("form/Field.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Field=void 0;var o=t("../base/View");function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t("../base/Bindable");var s=function(e){function t(e,r,o,i){var a,u,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=Object.assign({},e);(s=n.call(this,l,o)).args.title=null!==(a=s.args.title)&&void 0!==a?a:i,s.args.value=null!==(u=s.args.value)&&void 0!==u?u:"",s.value=null!==(c=s.args.value)&&void 0!==c?c:"",s.skeleton=l,s.disabled=null,s.args.valueString="",s.form=r,s.key=i,s.ignore=!!s.args.attrs&&(s.args.attrs["data-cv-ignore"]||!1);var f="",p=s.args.attrs||{};p.type=p.type||l.type||null,s.args.name=p.name=p.name||s.args.name||i,"checkbox"==p.type&&(f='value = "1"'),s.template='\n\t\t\t<label\n\t\t\t\tfor           = "'.concat(s.getName(),'"\n\t\t\t\tdata-type     = "').concat(p.type||"text",'"\n\t\t\t\tcv-ref        = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(s.getName(),'"\n\t\t\t\t\ttype      = "').concat(p.type||"text",'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t').concat(f,'\n\t\t\t\t/>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t');var v=null;return s.args.bindTo("value",function(e,t){if(!isNaN(e)&&e.length&&e==+e&&e.length===(+e+"").length&&(e=+e),s.value=e,v!=t){if(v=i,s.args.valueString=JSON.stringify(e||"",null,4),s.valueString=s.args.valueString,"file"==p.type&&s.tags.input&&s.tags.input.element.files&&s.tags.input.element.length)if(p.multiple){var n=Array.from(s.tags.input.element.files);if(s.parent.args.value[t]&&n.length){for(var r in n)n[r]!==s.parent.args.value[i][r]&&(s.parent.args.value[i]=n);s.parent.args.value.splice(n.length)}else s.parent.args.value[i]=n}else s.parent.args.value[i]=s.tags.input.element.files[0];else s.parent.args.value||(s.parent.args.value={}),s.parent.args.value[i]=e;s.args.errors=[],v=null}}),s.parent.args.value[s.key]=s.args.value,s.parent.args.value.bindTo(i,function(e,t){if(v!=t){if(v=t,"file"!=p.type)s.args.value=e;else if(s.tags.input&&s.tags.input.element.files&&s.tags.input.element.files.length)if(p.multiple){var n=Array.from(s.tags.input.element.files);if(s.parent.args.value[i]&&n.length){for(var r in n)n[r]!==s.parent.args.value[i][r]&&(s.parent.args.value[i]=n);s.parent.args.value[i].splice(n.length)}else s.parent.args.value[i]=n}else s.parent.args.value[i]=s.tags.input.element.files[0];else s.args.value=e;v=null}}),s}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,o.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}(t);return function(e,t,n){t&&i(e.prototype,t)}(t,[{key:"disable",value:function(){this.hasChildren(),this.disabled="disabled"}},{key:"enable",value:function(){this.hasChildren(),this.disabled=!1}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];if(this.tags.input)return this.tags.input.element.getAttribute("name");var t=this.key;if(e){for(var n=this.parent,r=[t];n&&n.array&&void 0!==n.key;)r.unshift(n.key),n=n.parent;t=r.shift(),r.length&&(t+="[".concat(r.join("]["),"]"))}return t}}]),t}();e.Field=s}),require.register("form/FieldSet.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FieldSet=void 0;var o=t("./Field"),i=t("./Form");function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){function t(e,r,o,a){var u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var c=(u=n.call(this,e,r,o,a)).args.attrs||{};return c.type=c.type||"fieldset",u.array=!1,(e.array||c["data-array"]||c["data-multi"])&&(u.array=c["data-array"]=!0),u.args.value={},u.args.fields=i.Form.renderFields(e.children,s(u)),u.fields=u.args.fields,u.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(u.getName(),'"\n\t\t\t\tdata-type  = "').concat(c.type,'"\n\t\t\t\tdata-multi = "').concat(c["data-multi"]?"true":"false",'"\n\t\t\t\tcv-ref     = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<fieldset\n\t\t\t\t\tname   = "').concat(u.getName(),'"\n\t\t\t\t\tcv-ref = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand="attrs"\n\t\t\t\t\tcv-each = "fields:field"\n\t\t\t\t>\n\t\t\t\t\t[[field]]\n\t\t\t\t</fieldset>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),u}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o.Field);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}(t);return function(e,t,n){t&&a(e.prototype,t)}(t,[{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}},{key:"wrapSubfield",value:function(e){return e}}]),t}();e.FieldSet=f}),require.register("form/FileField.js",function(e,t,n){"use strict";var r=t("./Field");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FileField=void 0;var c=function(e){function t(e,r,o,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=(a=n.call(this,e,r,o,i)).args.attrs||{};return u.type=u.type||a.args.type||"file",a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\tname    = "').concat(a.getName(),'"\n\t\t\t\t\ttype    = "').concat(u.type,'"\n\t\t\t\t\tcv-bind = "value"\n\t\t\t\t\tcv-ref  = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t\t<span style = "display:none" cv-if = "value">[[[value]]]</span>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,r.Field);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}(t);return t}();e.FileField=c}),require.register("form/Form.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Form=void 0;var o=t("../base/View"),i=t("./Field"),a=t("./FieldSet"),u=t("./SelectField"),c=t("./RadioField"),s=t("./HtmlField"),l=t("./HiddenField"),f=t("./ButtonField"),p=t("./TextareaField"),v=t("./multiField/View"),d=t("../base/Bindable");function y(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){function t(e){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),(r=n.call(this,{})).args.flatValue=r.args.flatValue||{},r.args.value=r.args.value||{},r.args.method=e._method||"GET",r.args.classes=r.args.classes||[],r.skeleton=e,r.args.bindTo("classes",function(e){r.args._classes=e.join(" ")}),r.action="",r.template='\n\t\t\t<form\n\t\t\t\tclass     = "[[_classes]]"\n\t\t\t\tmethod    = "[[method]]"\n\t\t\t\tenctype   = "multipart/form-data"\n\t\t\t\tcv-on     = "submit:submit(event)"\n\t\t\t\tcv-ref    = "formTag:curvature/base/Tag"\n\t\t\t\tcv-each   = "fields:field"\n\t\t\t\tcv-expand = "attrs"\n\t\t\t>\n\t\t\t\t[[field]]\n\t\t\t</form>\n\t\t',r.args.fields=t.renderFields(e,m(r),o),r.fields=r.args.fields;var i=d.Bindable.makeBindable(m(r));return r.args.bindTo("value",function(e){i.value=e}),r.args.bindTo("valueString",function(e){i.json=e}),b(r,i)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,o.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}(t);return function(e,t,n){t&&y(e.prototype,t),n&&y(e,n)}(t,[{key:"submit",value:function(e){this.args.valueString=JSON.stringify(this.args.value,null,4),this.dispatchEvent(new CustomEvent("submit",{details:{view:this}}))||(e.preventDefault(),e.stopPropagation())}},{key:"buttonClick",value:function(){}},{key:"formData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];for(var r in e||(e=new FormData),t||(t=this),t.args.fields)if(!t.args.fields[r]||!t.args.fields[r].disabled){var o=n.slice(0);if(o.push(r),t.args.fields[r]&&t.args.fields[r].hasChildren())this.formData(e,t.args.fields[r],o);else if(t.args.fields[r]){var i=t.args.fields[r].getName();if("file"==t.args.fields[r].args.type&&t.args.fields[r].tags.input.element.files&&t.args.fields[r].tags.input.element.files.length)if(t.args.fields[r].args.attrs.multiple)for(var a=t.args.fields[r].tags.input.element.files,u=0;u<a.length;u++)a[u]&&e.append(i+"[]",a[u]);else t.args.fields[r].tags.input.element.files[0]&&e.append(i,t.args.fields[r].tags.input.element.files[0]);else("file"!==t.args.fields[r].args.type||t.args.fields[r].args.value)&&e.append(i,void 0===t.args.fields[r].args.value?"":t.args.fields[r].args.value)}}return e}},{key:"queryString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var n in this.args.flatValue)e[n]=e[n]||this.args.flatValue[n];for(var r in e)t.push(r+"="+encodeURIComponent(e[r]));return t.join("&")}},{key:"populate",value:function(e){for(var t in e)this.args.value[t]=e[t]}},{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}}],[{key:"renderFields",value:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o={},d=function(d){if(o[d])return"continue";if("_"==d.substr(0,1))return"continue";var y=null,h=null;if(n&&(h=n instanceof t?n:n.form),r&&e[d].name in r)y=new r[e[d].name](e[d],h,n,d);else switch(e[d].type){case"fieldset":y=e[d].attrs&&e[d].attrs["data-multi"]?new v.View(e[d],h,n,d):new a.FieldSet(e[d],h,n,d);break;case"select":y=new u.SelectField(e[d],h,n,d);break;case"radios":y=new c.RadioField(e[d],h,n,d);break;case"html":y=new s.HtmlField(e[d],h,n,d);break;case"submit":case"button":y=new f.ButtonField(e[d],h,n,d);break;case"hidden":y=new l.HiddenField(e[d],h,n,d);break;case"textarea":y=new p.TextareaField(e[d],h,n,d);break;default:y=new i.Field(e[d],h,n,d)}o[d]=y;var b=y.key;y.args.bindTo("value",function(e,t,r){if(!isNaN(e)&&e.length&&e==+e&&e.length===(+e+"").length&&(e=+e),("html"!=r.type||r.contentEditable)&&"fieldset"!=r.type){if(r.disabled)return void delete h.args.flatValue[b];r.attrs=r.attrs||{},r.attrs.multiple;var o=Array.isArray(e),i=n.args.value[b];if(r.attrs.multiple&&o&&Array.isArray(i))for(var a in e)e[a]!==n.args.value[b][a]&&(n.args.value[b][a]=e[a]),n.args.value[b].splice(e.length);else n.args.value[b]=e;h.args.flatValue[b]=e,h.args.valueString=JSON.stringify(h.args.value,null,4),console.log()}})};for(var y in e)d(y);return o}},{key:"_updateFields",value:function(e,t){for(var n in e.args.fields){var r=e.args.fields[n];t[n]&&(t[n].value&&(r.args.value=t[n].value),t[n].errors&&(r.args.errors=t[n].errors),t[n].title&&(r.args.title=t[n].title),t[n].options&&(r.args.options=t[n].options),t[n].attrs&&(r.args.attrs=t[n].attrs),r.children&&t[n].children&&this._updateFields(r,t[n].children))}}}]),t}();e.Form=w}),require.register("form/HiddenField.js",function(e,t,n){"use strict";var r=t("./Field");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.HiddenField=void 0;var c=function(e){function t(e,r,o,i){var a;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.type="hidden";var u=(a=n.call(this,e,r,o,i)).args.attrs||{};return a.args.type=u.type="hidden",a.args.name=u.name=u.name||a.args.name||i,a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tstyle     = "display:none"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\t\ttype      = "hidden"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,r.Field);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}(t);return t}();e.HiddenField=c}),require.register("form/HtmlField.js",function(e,t,n){"use strict";var r=t("./Field");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.HtmlField=void 0;var s=function(e){function t(e,r,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=n.call(this,e,r,o,i)).key=i,a.args.tagName=a.args.tagName||"div",a.args.displayValue=a.args.value,a.args.attrs=a.args.attrs||{},a.ignore=a.args.attrs["data-cv-ignore"]||!1,a.args.contentEditable=a.args.attrs.contenteditable||!1,a.args.bindTo("value",function(e){a.tags.input&&a.tags.input.element!==document.activeElement&&(a.args.displayValue=e)}),a.template="<".concat(a.args.tagName,'\n\t\t\tname            = "').concat(a.getName(),'"\n\t\t\tcv-ref          = "input:curvature/base/Tag"\n\t\t\tcontenteditable = "[[contentEditable]]"\n\t\t\tcv-expand       = "attrs"\n\t\t\tcv-bind         = "$displayValue"\n\t\t\tcv-on           = "input:inputProvided(event);"\n\t\t></').concat(a.args.tagName,">"),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,r.Field);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}(t);return function(e,t,n){t&&i(e.prototype,t)}(t,[{key:"inputProvided",value:function(e){this.args.value=e.target.innerHTML}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){return this.key}}]),t}();e.HtmlField=s}),require.register("form/RadioField.js",function(e,t,n){"use strict";var r=t("./Field");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.RadioField=void 0;var s=function(e){function t(e,r,o,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=(a=n.call(this,e,r,o,i)).args.attrs||{};return a.args.name=u.name=u.name||a.args.name||i,a.args.value=a.args.value||"",a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each  = "options:option:optionText"/>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname      = "').concat(a.args.name,'"\n\t\t\t\t\t\t\ttype      = "radio"\n\t\t\t\t\t\t\tvalue     = "[[option]]"\n\t\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t\t\tcv-on     = "change:changed(event)"\n\t\t\t\t\t/>\n\t\t\t\t\t\t[[optionText]]\n\t\t\t\t\t</label>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,r.Field);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}(t);return function(e,t,n){t&&i(e.prototype,t)}(t,[{key:"getLabel",value:function(){for(var e in this.args.options)if(this.args.options[e]==this.args.value)return e}},{key:"changed",value:function(e){this.args.value=e.target.value}}]),t}();e.RadioField=s}),require.register("form/SelectField.js",function(e,t,n){"use strict";var r=t("./Field");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.SelectField=void 0;var l=function(e){function t(e,r,o,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=(a=n.call(this,e,r,o,i)).args.attrs||{};return a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type||"select",'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<select\n\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-each   = "options:option:optionText"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t\t\t<option value = "[[option]]">[[optionText]]</option>\n\t\t\t\t</select>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.Field);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}(t);return function(e,t,n){t&&a(e.prototype,t)}(t,[{key:"postRender",value:function(){var e=this;this.args.bindTo("value",function(t){return e.selectOptionByValue(t)}),this.args.options.bindTo(function(){return e.selectOptionByValue(e.args.value)},{frame:1})}},{key:"selectOptionByValue",value:function(e){var t,n=this.tags.input.element,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0},f:function e(){try{a||null==n.return||n.return()}finally{if(u)throw e}}}}(n.options);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.value==e&&(n.selectedIndex=o.index)}}catch(e){r.e(e)}finally{r.f()}}},{key:"getLabel",value:function(){for(var e in this.args.options)if(this.args.options[e]==this.args.value)return e}}]),t}();e.SelectField=l}),require.register("form/TextareaField.js",function(e,t,n){"use strict";var r=t("./Field");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.TextareaField=void 0;var c=function(e){function t(e,r,o,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=(a=n.call(this,e,r,o,i)).args.attrs||{};return u.type=u.type||"textarea",a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<textarea\n\t\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t></textarea>\n\t\t\t\t<cv-template cv-if = "attrs.data-caption">\n\t\t\t\t\t<p>[[attrs.data-caption]]</p>\n\t\t\t\t</cv-template>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,r.Field);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}(t);return t}();e.TextareaField=c}),require.register("input/Gamepad.js",function(e,t,n){}),require.register("input/Keyboard.js",function(e,t,n){"use strict";var r=t("../base/Bindable");function o(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Keyboard=void 0;var i=function(){function e(){var t=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.maxDecay=120,this.comboTime=500,this.listening=!1,this.focusElement=document.body,Object.defineProperty(this,"combo",{value:r.Bindable.make([])}),Object.defineProperty(this,"whichs",{value:r.Bindable.make({})}),Object.defineProperty(this,"codes",{value:r.Bindable.make({})}),Object.defineProperty(this,"keys",{value:r.Bindable.make({})}),Object.defineProperty(this,"pressedWhich",{value:r.Bindable.make({})}),Object.defineProperty(this,"pressedCode",{value:r.Bindable.make({})}),Object.defineProperty(this,"pressedKey",{value:r.Bindable.make({})}),Object.defineProperty(this,"releasedWhich",{value:r.Bindable.make({})}),Object.defineProperty(this,"releasedCode",{value:r.Bindable.make({})}),Object.defineProperty(this,"releasedKey",{value:r.Bindable.make({})}),Object.defineProperty(this,"keyRefs",{value:r.Bindable.make({})}),document.addEventListener("keyup",function(e){!t.listening||t.focusElement&&document.activeElement!==t.focusElement&&(!t.focusElement.contains(document.activeElement)||document.activeElement.matches("input,textarea"))||(e.preventDefault(),t.releasedWhich[e.which]=Date.now(),t.releasedCode[e.code]=Date.now(),t.releasedKey[e.key]=Date.now(),t.whichs[e.which]=-1,t.codes[e.code]=-1,t.keys[e.key]=-1)}),document.addEventListener("keydown",function(e){t.listening&&(t.focusElement&&document.activeElement!==t.focusElement&&(!t.focusElement.contains(document.activeElement)||document.activeElement.matches("input,textarea"))||(e.preventDefault(),!e.repeat&&(t.combo.push(e.code),clearTimeout(t.comboTimer),t.comboTimer=setTimeout(function(){return t.combo.splice(0)},t.comboTime),t.pressedWhich[e.which]=Date.now(),t.pressedCode[e.code]=Date.now(),t.pressedKey[e.key]=Date.now(),0<t.keys[e.key]||(t.whichs[e.which]=1,t.codes[e.code]=1,t.keys[e.key]=1))))});var n=function(){for(var e in t.keys)0>t.keys[e]||(t.releasedKey[e]=Date.now(),t.keys[e]=-1);for(var n in t.codes)0>t.codes[n]||(t.releasedCode[n]=Date.now(),t.codes[n]=-1);for(var r in t.whichs)0>t.whichs[r]||(t.releasedWhich[r]=Date.now(),t.whichs[r]=-1)};window.addEventListener("blur",n),window.addEventListener("visibilitychange",function(){"visible"===document.visibilityState||n()})}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"getKeyRef",value:function(e){return this.keyRefs[e]=this.keyRefs[e]||r.Bindable.make({})}},{key:"getKeyTime",value:function(e){var t=this.releasedKey[e],n=this.pressedKey[e];return n?!t||t<n?Date.now()-n:-1*(Date.now()-t):0}},{key:"getCodeTime",value:function(e){var t=this.releasedCode[e],n=this.pressedCode[e];return n?!t||t<n?Date.now()-n:-1*(Date.now()-t):0}},{key:"getWhichTime",value:function(e){var t=this.releasedWhich[e],n=this.pressedWhich[e];return n?!t||t<n?Date.now()-n:-1*(Date.now()-t):0}},{key:"getKey",value:function(e){return this.keys[e]?this.keys[e]:0}},{key:"getKeyCode",value:function(e){return this.codes[e]?this.codes[e]:0}},{key:"reset",value:function(){for(var e in this.keys)delete this.keys[e];for(var e in this.codes)delete this.codes[e];for(var e in this.whichs)delete this.whichs[e]}},{key:"update",value:function(){for(var e in this.keys)0<this.keys[e]?this.keys[e]++:this.keys[e]>-this.maxDecay?this.keys[e]--:delete this.keys[e];for(var e in this.codes){var t=this.releasedCode[e],n=this.pressedCode[e],r=this.getKeyRef(e);if(0<this.codes[e])return r.frames=this.codes[e]++,r.time=n?Date.now()-n:0,r.down=!0,!t||t<n?void 0:-1*(Date.now()-t);this.codes[e]>-this.maxDecay?(r.frames=this.codes[e]--,r.time=t-Date.now(),r.down=!1):(r.frames=0,r.time=0,r.down=!1,delete this.codes[e])}for(var e in this.whichs)0<this.whichs[e]?this.whichs[e]++:this.whichs[e]>-this.maxDecay?this.whichs[e]--:delete this.whichs[e]}}],[{key:"get",value:function(){return this.instance=this.instance||r.Bindable.make(new this)}}]),e}();e.Keyboard=i}),require.register("input/Mouse.js",function(e,t,n){}),require.register("mixin/EventTargetMixin.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventTargetMixin=void 0;var r,o=t("../base/Mixin");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=Symbol("Target"),u=(i(r={},o.Mixin.Constructor,function(){try{this[a]=new EventTarget}catch(e){this[a]=document.createDocumentFragment()}}),i(r,"dispatchEvent",function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0];(e=this[a]).dispatchEvent.apply(e,n);var i="on".concat(o.type[0].toUpperCase()+o.type.slice(1));return"function"==typeof this[i]&&this[i](o),o.returnValue}),i(r,"addEventListener",function(){var e;(e=this[a]).addEventListener.apply(e,arguments)}),i(r,"removeEventListener",function(){var e;(e=this[a]).removeEventListener.apply(e,arguments)}),r);e.EventTargetMixin=u}),require.register("mixin/PromiseMixin.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PromiseMixin=void 0;var r,o=t("../base/Mixin");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=Symbol("Promise"),u=Symbol("Accept"),c=Symbol("Reject"),s=(i(r={},o.Mixin.Constructor,function(){var e=this;this[a]=new Promise(function(t,n){e[u]=t,e[c]=n})}),i(r,"then",function(){var e;return(e=this[a]).then.apply(e,arguments)}),i(r,"catch",function(){var e;return(e=this[a]).catch.apply(e,arguments)}),i(r,"finally",function(){var e;return(e=this[a]).finally.apply(e,arguments)}),r);e.PromiseMixin=s,Object.defineProperty(s,"Reject",{value:c}),Object.defineProperty(s,"Accept",{value:u})}),require.register("model/Database.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Database=void 0;var o=t("../base/Bindable"),i=t("../base/Mixin"),a=t("../mixin/EventTargetMixin");function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=Symbol("BeforeWrite"),y=Symbol("AfterWrite"),h=Symbol("BeforeDelete"),b=Symbol("AfterDelete"),m=Symbol("BeforeInsert"),g=Symbol("AfterInsert"),w=Symbol("BeforeUpdate"),_=Symbol("AfterUpdate"),O=Symbol("BeforeRead"),j=Symbol("AfterRead"),k=Symbol("PrimaryKey"),S=Symbol("Connection"),P=Symbol("Instances"),T=(Symbol("HighWater"),Symbol("Metadata")),R=Symbol("Timers"),E=Symbol("Target"),A=(Symbol("Store"),Symbol("Each")),C=Symbol("Name"),B=Symbol("Bank"),x=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=n.call(this),Object.defineProperty(p(r),S,{value:e}),Object.defineProperty(p(r),C,{value:e.name}),Object.defineProperty(p(r),R,{value:{}}),Object.defineProperty(p(r),T,{value:{}}),Object.defineProperty(p(r),B,{value:{}}),r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,i.Mixin.with(a.EventTargetMixin));var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}(t);return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(t,[{key:"select",value:function(e){var t=this,n=e.store,r=e.index,o=e.range,i=void 0===o?null:o,a=e.direction,u=void 0===a?"next":a,c=e.limit,s=void 0===c?0:c,l=e.offset,f=void 0===l?0:l,p=e.type,v=void 0!==p&&p,d=e.origin,y=void 0===d?void 0:d,h=this[S].transaction(n,"readonly").objectStore(n),b=r?h.index(r):h;return{each:this[A](v,b,u,i,s,f,y),one:this[A](v,b,u,i,1,f,y),then:function(e){return t[A](v,b,u,i,s,f,y)(function(e){return e}).then(e)}}}},{key:"insert",value:function(e,n){var r=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(a,u){r[B][e]=r[B][e]||{};var c=r[S].transaction([e],"readwrite"),s=c.objectStore(e),l=r[B][e];n=o.Bindable.make(n);var f={database:r[C],record:n,store:e,type:"write",subType:"insert",origin:i},p=n[t.BeforeWrite]?n[t.BeforeWrite](f):null,v=n[t.BeforeInsert]?n[t.BeforeInsert](f):null,d=s.add(Object.assign({},o.Bindable.shuck(n)));!1===p||!1===v||(d.onerror=function(e){r.dispatchEvent(new CustomEvent("writeError",{detail:f})),u(e)},d.onsuccess=function(o){var u=o.target.result;if(l[u]=n,f.key=t.getPrimaryKey(n),r.dispatchEvent(new CustomEvent("write",{cancelable:!0,detail:f}))){if(n[k]=Symbol.for(u),r[T][e]||(r[T][e]=r.getStoreMeta(e,"store",{})),r[T][e]){var s=r.checkHighWaterMark(e,n),p=r.checkLowWaterMark(e,n),v=r[T][e],d=n[v.highWater];i.setHighWater&&s<d&&r.setHighWaterMark(e,n,i,"insert"),i.setLowWater&&p>d&&r.setLowWaterMark(e,n,i,"insert")}c.commit&&c.commit(),n[t.AfterInsert]&&n[t.AfterInsert](f),n[t.AfterWrite]&&n[t.AfterWrite](f)}else c.abort();a(n)})})}},{key:"update",value:function(e,n){var r=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!n[k])throw Error("Value provided is not a DB record!");return new Promise(function(a,u){var c=r[S].transaction([e],"readwrite"),s=c.objectStore(e),l={database:r[C],key:t.getPrimaryKey(n),record:n,store:e,type:"write",subType:"update",origin:i};n[t.AfterInsert]&&n[t.AfterInsert](l),n[t.AfterWrite]&&n[t.AfterWrite](l);var f=n[t.BeforeWrite]?n[t.BeforeWrite](l):null,p=n[t.BeforeUpdate]?n[t.BeforeUpdate](l):null;if(!1!==f&&!1!==p){var v=s.put(Object.assign({},o.Bindable.shuck(n)));v.onerror=function(e){r.dispatchEvent(new CustomEvent("writeError",{detail:l})),u(e)},v.onsuccess=function(t){if(r.dispatchEvent(new CustomEvent("write",{cancelable:!0,detail:l}))){if(r[T][e]||(r[T][e]=r.getStoreMeta(e,"store",{})),r[T][e]){var o=r.checkHighWaterMark(e,n),u=r.checkLowWaterMark(e,n),s=r[T][e],f=n[s.highWater];i.setHighWater&&o<f&&r.setHighWaterMark(e,n,i,"insert"),i.setLowWater&&u>f&&r.setLowWaterMark(e,n,i,"insert")}c.commit&&c.commit()}else c.abort();a(t)}}})}},{key:"delete",value:function(e,n){var r=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;if(!n[k])throw Error("Value provided is not a DB record!");return new Promise(function(i,a){var u=r[S].transaction([e],"readwrite"),c=u.objectStore(e),s={database:r[C],record:n,key:t.getPrimaryKey(n),store:e,type:"write",subType:"delete",origin:o};if(!1!==(n[t.BeforeDelete]?n[t.BeforeDelete](s):null)){var l=c.delete(n[k].description);n[k]=void 0,n[t.AfterDelete]&&n[t.AfterDelete](s),l.onerror=function(e){s.original=e;var t=new CustomEvent("writeError",{detail:s});r.dispatchEvent(t),a(e)},l.onsuccess=function(e){s.original=e;var t=new CustomEvent("write",{detail:s});r.dispatchEvent(t),u.commit&&u.commit(),i(t)}}})}},{key:"clear",value:function(e){var t=this;return new Promise(function(n,r){var o=t[S].transaction([e],"readwrite"),i=o.objectStore(e).clear(),a={database:t[C],store:e,type:"write",subType:"clear",origin:origin};i.onerror=function(e){a.original=e;var n=new CustomEvent("writeError",{detail:a});t.dispatchEvent(n),r(e)},i.onsuccess=function(e){a.original=e;var r=new CustomEvent("write",{detail:a});t.dispatchEvent(r),o.commit&&o.commit(),n(r)}})}},{key:"listStores",value:function(){return u(this[S].objectStoreNames)}},{key:"listIndexes",value:function(e){return u(this[S].transaction([e]).objectStore(e).indexNames)}},{key:A,value:function(e,n,r,i,a,u,c){var s=this;return function(l){return new Promise(function(f){var p=0;n.openCursor(i,r).addEventListener("success",function(r){var i=r.target.result;if(!i)return f({record:null,result:null,index:p});s[B][void 0]=s[B][void 0]||{};var v=s[B][void 0],d=i.primaryKey,y=e?e.from(i.value):i.value,h=o.Bindable.makeBindable(y),b={database:s[C],key:t.getPrimaryKey(h),record:y,store:n.name,type:"read",subType:"select",origin:c},m=y[t.BeforeRead]?y[t.BeforeRead](b):null;if(u>p++||!1===m)return i.continue();v[d]?Object.assign(v[d],y):(y[k]=Symbol.for(d),v[d]=y);var g=i.source;if(g.objectStore?g.objectStore.name:n.name,b.record=y,v[d][t.AfterRead]&&v[d][t.AfterRead](b),s.dispatchEvent(new CustomEvent("read",{detail:b,cancelable:!0}))){var w=e?e.from(v[d]):v[d];w[k]=Symbol.for(d);var _=l?l(w,p):w;if(a&&p-u>=a)return u+=a,f({record:w,result:_,index:p})}i.continue()})})}}},{key:"setStoreMeta",value:function(e,t,n){localStorage.setItem("::::cvdb::".concat(e,"::").concat(t),JSON.stringify(n))}},{key:"getStoreMeta",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=localStorage.getItem("::::cvdb::".concat(e,"::").concat(t)),o=null===r?n:JSON.parse(r);return null===o?n:o}},{key:"createObjectStore",value:function(e,t){var n=this[S].createObjectStore(e,t);return this.setStoreMeta(e,"store",t),n}},{key:"deleteObjectStore",value:function(e){return this[S].deleteObjectStore(e)}},{key:"checkHighWaterMark",value:function(e){return this.getStoreMeta(e,"highWater",0)}},{key:"setHighWaterMark",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,o=t[this[T][e].highWater],i=this.getStoreMeta(e,"highWater",0);this.setStoreMeta(e,"highWater",o),this.dispatchEvent(new CustomEvent("highWaterMoved",{detail:{database:this[C],record:t,store:e,type:"highWaterMoved",subType:r,origin:n,oldValue:i,value:o}}))}},{key:"checkLowWaterMark",value:function(e){return this.getStoreMeta(e,"lowWater",1/0)}},{key:"setLowWaterMark",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,o=t[this[T][e].highWater],i=this.getStoreMeta(e,"lowWater",null);this.setStoreMeta(e,"lowWater",o),this.dispatchEvent(new CustomEvent("lowWaterMoved",{detail:{database:this[C],record:t,store:e,type:"lowWaterMoved",subType:r,origin:n,oldValue:i,value:o}}))}}],[{key:"open",value:function(e){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this[P][e]?this[P][e]:this[P][e]=new Promise(function(o,i){var a=indexedDB.open(e,r);a.onerror=function(e){t.dispatchEvent(new CustomEvent("error",{detail:{database:n[C],error:e,store:void 0,type:"read",subType:"select"}})),i(e)},a.onsuccess=function(e){var t=new n(e.target.result);o(t)},a.onupgradeneeded=function(e){var t=e.target.result;t.addEventListener("error",function(e){return console.error(e)});for(var o=new n(t),i=e.oldVersion+1;i<=r;i+=1)o["_version_"+i](t)}})}},{key:"getPrimaryKey",value:function(e){return e[k]?e[k].description:null}},{key:"destroyDatabase",value:function(){var e=this;return new Promise(function(n,r){var o=indexedDB.delete(dbName);o.onerror=function(e){t.dispatchEvent(new CustomEvent("error",{detail:{database:dbName,error:e,type:"destroy"}})),r(e)},o.onsuccess=function(){delete e[P][dbName],n(dbName)}})}}]),t}();e.Database=x,Object.defineProperty(x,P,{value:[]}),Object.defineProperty(x,E,{value:document.createDocumentFragment()}),Object.defineProperty(x,"BeforeDelete",{value:h}),Object.defineProperty(x,"AfterDelete",{value:b}),Object.defineProperty(x,"BeforeWrite",{value:d}),Object.defineProperty(x,"AfterWrite",{value:y}),Object.defineProperty(x,"BeforeInsert",{value:m}),Object.defineProperty(x,"AfterInsert",{value:g}),Object.defineProperty(x,"BeforeUpdate",{value:w}),Object.defineProperty(x,"AfterUpdate",{value:_}),Object.defineProperty(x,"BeforeRead",{value:O}),Object.defineProperty(x,"AfterRead",{value:j});var M=function(e){Object.defineProperty(x,e,{value:function(){var t;return(t=x[E])[e].apply(t,arguments)}})};for(var D in["addEventListener","removeEventListener","dispatchEvent"])M(D)}),require.register("model/Model.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var r=t("../base/Cache"),o=t("../base/Bindable");function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0},f:function e(){try{i||null==n.return||n.return()}finally{if(u)throw e}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}var s=Symbol("Saved"),l=Symbol("Changed"),f=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,l,{value:o.Bindable.make({})}),Object.defineProperty(this,s,{writable:!0,value:!1}),o.Bindable.makeBindable(this)}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(e,[{key:"consume",value:function(t){var n=this,o=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],i=e.keyProps,a=function(e,t){if(t&&"object"===u(t)&&t.constructor.keyProps){var o=t.constructor.keyProps.map(function(e){return t[e]}).join("::"),i=r.Cache.load(o,!1,"models-by-type-and-publicId");i&&(i.consume(t),t=i)}n[e]=t};for(var c in t)(o||!this[l][c])&&(i.includes(c)||a(c,t[c]))}},{key:"changed",value:function(){this[s]=!1}},{key:"stored",value:function(){for(var e in this[l])this[l][e]=!1;this[s]=!0}},{key:"isSaved",value:function(){return this[s]}}],[{key:"keyProps",get:function(){return["id","class"]}},{key:"from",value:function(e){var t=this,n=this.prototype.constructor.keyProps,o=n.map(function(t){return e[t]});o.unshift(this.prototype.constructor.name);var a,c=o.join("::"),f="models-by-type-and-publicId",p=r.Cache.load(c,!1,f),v=p||new this,d=i(n);try{for(d.s();!(a=d.n()).done;){var y,h,b=a.value;v[b]=null!==(y=null!==(h=v[b])&&void 0!==h?h:e[b])&&void 0!==y?y:null}}catch(e){d.e(e)}finally{d.f()}if(v.consume(e),r.Cache.store(c,v,0,f),!p){var m=!1;v.bindTo(function(e,n,r){"symbol"===u(n)||e===r[n]||(v[l][n]=m,v[s]=!m&&t[s])}),m=!0}return v}}]),e}();e.Model=f,Object.defineProperty(f,"Saved",{value:s}),Object.defineProperty(f,"Changed",{value:l})}),require.register("model/SourceWorker.js",function(e,t,n){}),require.register("model/Store.js",function(e,t,n){"use strict";var r=t("curvature/model/Model");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Store=void 0;var s=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(u(e=n.call.apply(n,[this].concat(o))),"class","MetaStore"),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,r.Model);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}(t);return t}();e.Store=s}),require.register("strings/Parser.js",function(e,t,n){"use strict"}),require.register("tag/LazyTag.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.LazyTag=void 0;var o=t("./ScrollTag"),i=t("../base/Dom");function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){function t(e,r,o,a,u){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(c=n.call(this,e,r,o,a,u)).element.classList.remove("cv-visible"),c.element.classList.add("cv-not-visible"),c.bindTo("visible",function(e){e&&(c.afterScroll&&clearTimeout(c.afterScroll),c.afterScroll=setTimeout(function(){c.element&&(c.element.classList.add("cv-visible"),c.element.classList.remove("cv-not-visible"),i.Dom.mapTags(c.element,"[cv-lazy-style]",function(e){var t=e.getAttribute("cv-lazy-style"),n=e.getAttribute("style");e.setAttribute("style",n+";"+t),e.removeAttribute("cv-lazy-style")}))},.5*(c.offsetTop||c.element.offsetTop)+.5*c.element.offsetLeft))}),c}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,o.ScrollTag);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}(t);return t}();e.LazyTag=s}),require.register("tag/PopOutTag.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.PopOutTag=void 0,t("../base/Bindable");var o=t("../base/Dom");function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){function t(e,r,o,i,a){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(u=n.call(this,e,r,o,i,a)).poppedOut=!1,u.style=e.getAttribute("style")||"",u.moving=!1,u.hostSelector=e.getAttribute("cv-pop-to"),u.popMargin=e.getAttribute("cv-pop-margin")||0,u.popSpeed=e.getAttribute("data-pop-speed")||1750,e.removeAttribute("cv-pop-to"),e.removeAttribute("cv-pop-margin"),e.removeAttribute("data-pop-speed"),u.verticalDuration=.4,u.horizontalDuration=.1,u.unpoppedStyle="",u.previousScroll=0,u.bodyStyle="",u.bodyScroll=0,u.element.classList.add("unpopped"),u.scrollStyle="",u.style="",u.popTimeout=null,u.rect=null,u.transformRect=null,u.clickListener=function(e){var t=Math.sqrt,n=Math.pow;if(u.rect=u.element.getBoundingClientRect(),!u.poppedOut){u.distance=t(n(u.rect.top,2)+n(u.rect.left,2));var r=u.popSpeed,o=window.innerWidth-u.rect.right,i=window.innerHeight-u.rect.bottom,a=(u.rect.left+o)/2,c=(u.rect.top+i)/2;u.horizontalDuration=a/r,u.verticalDuration=c/r,.1>u.horizontalDuration&&(u.horizontalDuration=.1),.1>u.verticalDuration&&(u.verticalDuration=.1),.4<u.horizontalDuration&&(u.horizontalDuration=.4),.4<u.verticalDuration&&(u.verticalDuration=.4)}u.element.contains(e.target)&&(e.stopPropagation(),e.preventDefault(),u.moving||(u.poppedOut?e.target.matches(".closeButton")&&u.poppedOut&&u.unpop():u.pop()))},u.escapeListener=function(e){u.poppedOut&&"Escape"===e.key&&u.unpop()},u.resizeListener=function(){if(u.poppedOut){for(var e=u.element;e.parentNode&&!e.matches(u.hostSelector)&&e.parentNode!=document;)e=e.parentNode;var t=hostTag.getBoundingClientRect(),n=u.style+u.unpoppedStyle,r=t.x,o=t.y+document.documentElement.scrollTop,i=t.width,a=t.height;u.transformRect&&(r-=u.transformRect.x,o-=u.transformRect.y),u.popMargin,u.popMargin,u.popMargin,u.popMargin,n+=";\n\t\t\t\tz-index:    99999;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t\toverflow: hidden;\n\t\t\t\tposition:  fixed;\n\t\t\t\tleft:      ".concat(r,"px;\n\t\t\t\ttop:        ").concat(o,"px;\n\t\t\t\twidth:      ").concat(i,"px;\n\t\t\t\theight:     ").concat(a,"px;\n\t\t\t\toverflow-y: auto;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t"),u.element.setAttribute("style",n)}},u.element.___clickListener___||(Object.defineProperty(u.element,"___scrollListeners___",{enumerable:!1,writable:!0}),e.___clickListener___=u.clickListener,e.___escapeListener___=u.escapeListener,e.___resizeListener___=u.resizeListener,u.element.addEventListener("click",e.___clickListener___),window.addEventListener("keyup",e.___escapeListener___),window.addEventListener("resize",e.___resizeListener___),u.cleanup.push(function(e){return function(){e.removeEventListener("click",e.___clickListener___),window.removeEventListener("keyup",e.___escapeListener___),window.removeEventListener("resize",e.___resizeListener___)}}(e))),u}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}(t);return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,[{key:"pause",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];a(s(t.prototype),"pause",this).call(this,e),e&&(document.body.setAttribute("style",this.bodyStyle),document.body.setAttribute("style",""))}},{key:"pop",value:function(){var e=this;t.popLevel(),this.previousScroll=window.scrollY,this.rect=this.element.getBoundingClientRect(),this.style=this.element.getAttribute("style");var n=this.element;for(this.transformRect=null;n.parentNode&&!n.matches(this.hostSelector)&&n.parentNode!=document;)n=n.parentNode,this.transformRect||"none"===getComputedStyle(n).transform||(this.transformRect=n.getBoundingClientRect());console.log(this.transformRect);var r=n.getBoundingClientRect();this.element.classList.add("popping");var i=this.rect.x,a=this.rect.y,u=this.rect.width,c=this.rect.height;this.transformRect&&(i-=this.transformRect.x,a-=this.transformRect.y),window.requestAnimationFrame(function(){e.unpoppedStyle="\n\t\t\t\t;position:  fixed;\n\t\t\t\tleft:       ".concat(i,"px;\n\t\t\t\ttop:        ").concat(a,"px;\n\t\t\t\twidth:      ").concat(u,"px;\n\t\t\t\theight:     ").concat(c,"px;\n\t\t\t\tz-index:    99999;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t\toverflow: hidden;\n\t\t\t");var t=r.x,n=r.y+document.documentElement.scrollTop,s=r.width,l=r.height;console.log(e.transformRect),e.transformRect&&(t-=e.transformRect.x,n-=e.transformRect.y),e.popMargin,e.popMargin,e.popMargin,e.popMargin;var f=e.style+e.unpoppedStyle;e.element.setAttribute("style",f),setTimeout(function(){f+="\n\t\t\t\t\t;left:      ".concat(t,"px;\n\t\t\t\t\ttop:        ").concat(n+document.documentElement.scrollTop,"px;\n\t\t\t\t\twidth:      ").concat(s,"px;\n\t\t\t\t\theight:     ").concat(l,"px;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t\ttransition: width ").concat(e.horizontalDuration,"s ease-out\n\t\t\t\t\t\t, top ").concat(e.verticalDuration,"s           ease-out\n\t\t\t\t\t\t, left ").concat(e.horizontalDuration,"s        ease-out\n\t\t\t\t\t\t, height ").concat(e.verticalDuration,"s        ease-out\n\t\t\t\t\t\t, all ").concat(e.horizontalDuration,"s         ease-out;\n\t\t\t\t"),e.moving=!0,e.element.setAttribute("style",f),e.element.classList.add("popped"),e.element.classList.remove("unpopped"),e.element.classList.remove("popping"),e.popTimeout=setTimeout(function(){if(e.element){e.bodyStyle=document.body.getAttribute("style"),document.body.setAttribute("style","height:100%;overflow:hidden;"),e.moving=!1,o.Dom.mapTags(e.element,!1,function(t){var n=new CustomEvent("cvPopped");t.dispatchEvent(n),e.scrollStyle=e.element.getAttribute("style")});var t=new CustomEvent("cvPop",{bubbles:!0,detail:{tag:e,view:e.parent,publicId:e.parent.args.publicId}});e.element.dispatchEvent(t)}},1e3*e.horizontalDuration)},33.4),e.poppedOut=!0})}},{key:"unpop",value:function(){var e=this;this.element.classList.add("unpopping"),this.popTimeout&&clearTimeout(this.popTimeout),0==t.level?document.body.setAttribute("style",""):document.body.setAttribute("style",this.bodyStyle||""),t.unpopLevel(),this.rect||(this.rect=this.element.getBoundingClientRect()),window.scrollTo(0,this.previousScroll);var n=this.style+this.unpoppedStyle+";transition: width ".concat(this.horizontalDuration,"s ease-in\n\t\t\t\t\t, height ").concat(this.verticalDuration,"s        ease-in\n\t\t\t\t\t, all ").concat(this.horizontalDuration,"s         ease-in;");this.element.setAttribute("style",n),this.moving=!0,setTimeout(function(){e.element&&e.element.classList.remove("popped")},1e3*this.horizontalDuration),setTimeout(function(){if(e.element.classList.add("unpopped"),e.element.classList.remove("unpopping"),e.element){e.element.setAttribute("style",e.style),e.moving=!1,o.Dom.mapTags(e.element,!1,function(e){var t=new CustomEvent("cvUnpopped");e.dispatchEvent(t)});var t=new CustomEvent("cvUnpop",{bubbles:!0,detail:{tag:e,view:e.parent,publicId:e.parent.args.publicId}});e.element.dispatchEvent(t)}},1e3*this.horizontalDuration),this.poppedOut=!1}},{key:"remove",value:function(){document.body.setAttribute("style",this.bodyStyle),a(s(t.prototype),"remove",this).call(this)}}],[{key:"popLevel",value:function(){return this.level||(this.level=0),this.level++,this.level}},{key:"unpopLevel",value:function(){return this.level||(this.level=0),this.level--,0>this.level&&(this.level=0),this.level}}]),t}(t("../base/Tag").Tag);e.PopOutTag=l}),require.register("tag/ScrollTag.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollTag=void 0;var o=t("../base/Tag"),i=t("../base/Dom");function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t("../base/Bindable");var l=function(e){function t(e,r,o,a,u){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(c=n.call(this,e,r,o,a,u)).visible=!1,c.offsetTop=!1,c.offsetBottom=!1,c.attachListener=function(t){for(var n=t.target;n.parentNode;)n=n.parentNode;rootNode!==window&&rootNode!==document||t.target!==e||(c.addScrollListener(t.target),c.addResizeListener(t.target),c.scrolled(t.target),t.target.removeEventListener("cvDomAttached",c.attachListener))},c.element.addEventListener("cvDomAttached",c.attachListener),c.cleanup.push(function(e){return function(){e.removeEventListener("cvDomAttached",c.attachListener)}}(c.element)),c.bindTo("visible",function(e){var t;t=e?new Event("cvScrolledIn"):new Event("cvScrolledOut"),i.Dom.mapTags(c.element,!1,function(e){e.dispatchEvent(t)}),c.element.dispatchEvent(t)}),c.bindTo("offsetTop",function(e){var t=new CustomEvent("cvScrolled",{detail:{offset:e}});i.Dom.mapTags(c.element,!1,function(e){e.dispatchEvent(t)}),c.element.dispatchEvent(t)}),c}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o.Tag);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}(t);return function(e,t,n){t&&a(e.prototype,t)}(t,[{key:"scrolled",value:function(){var e=this.element;if(e){var t=!1,n=e.getBoundingClientRect();0<n.bottom&&n.top<window.innerHeight&&(t=!0),this.proxy.visible=t,this.proxy.offsetTop=n.top||0,this.proxy.offsetBottom=n.bottom||0}}},{key:"addScrollListener",value:function(e){var t=this;if(!e.___scrollListener___){Object.defineProperty(e,"___scrollListener___",{enumerable:!1,writable:!0}),e.___scrollListener___=function(e){t.scrolled(e.target)};for(var n=e,r={passive:!0,capture:!0};n.parentNode;)(n=n.parentNode).addEventListener("scroll",e.___scrollListener___,r),this.direct.cleanup.push(function(e,t,n){return function(){e.removeEventListener("scroll",t.___scrollListener___,n),t=e=null}}(n,e,r))}}},{key:"addResizeListener",value:function(e){var t=this;e.___resizeListener___||(Object.defineProperty(e,"___resizeListener___",{enumerable:!1,writable:!0}),e.___resizeListener___=function(e){t.scrolled(e.target)},window.addEventListener("resize",this.resizeListener),this.direct.cleanup.push(function(t){return function(){window.removeEventListener("resize",t.___resizeListener___),e.___resizeListener___=null,e=null}}(e)))}}]),t}();e.ScrollTag=l}),require.register("toast/Toast.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Toast=void 0;var o=t("../base/View"),i=t("../base/Bindable"),a=t("./ToastAlert");function u(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=n.call(this)).template='\n\t\t\t<div id = "[[_id]]" cv-each = "alerts:alert" class = "toast">\n\t\t\t\t[[alert]]\n\t\t\t</div>\n\t\t',e.args.alerts=[],e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,o.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}(t);return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(t,[{key:"pop",value:function(e){var t=this;this.args.alerts.length,this.args.alerts.push(e),e.decay(function(e){return function(){for(var n in t.args.alerts)if(i.Bindable.ref(t.args.alerts[n])===i.Bindable.ref(e))return e.remove(),void delete t.args.alerts[n]}}(e))}},{key:"alert",value:function(e,t,n){return this.pop(new a.ToastAlert({title:e,body:t,time:n}))}}],[{key:"instance",value:function(){return this.inst||(this.inst=new this),this.inst}}]),t}();e.Toast=f}),require.register("toast/ToastAlert.js",function(e,t,n){"use strict";var r=t("../base/View");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ToastAlert=void 0;var s=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=n.call(this,e)).args.running=!1,r.args.time=r.args.time||16e3,r.init=r.args.time,r.args.title=r.args.title||"Standard alert",r.args.status="new",r.args.body=r.args.body||"This is a standard alert.",r.template='\n\t\t\t<div id = "[[_id]]" class = "alert toast-[[status]]">\n\t\t\t\t<h3>[[title]]</h3>\n\t\t\t\t<p>[[body]]</p>\n\t\t\t</div>\n\t\t',r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,r.View);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}(t);return function(e,t,n){t&&i(e.prototype,t)}(t,[{key:"decay",value:function(){var e=this;this.args.running=!0,this.onTimeout(50,function(){e.args.status=""}),this.onTimeout(300,function(){e.args.status="decaying"}),this.onTimeout(2400,function(){e.args.status="imminent"}),this.onTimeout(3500,function(){e.remove()})}}]),t}();e.ToastAlert=s}),require.register("___globals___",function(e,t,n){})}(),require("___globals___");
