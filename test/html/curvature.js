!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},r={},o={}.hasOwnProperty,i=/^\.\.?(\/|$)/,a=function(e,t){for(var n,r=[],o=(i.test(t)?e+"/"+t:t).split("/"),a=0,u=o.length;a<u;a++)".."===(n=o[a])?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},c=function(t,r){var o,i={id:t,exports:{},hot:y&&y.createHot(t)};return n[t]=i,r(i.exports,(o=t,function(t){var n=a(u(o),t);return e.require(n,o)}),i),i.exports},s=function(e){var t=r[e];return t&&e!==t?s(t):e},l=function(e,r){null==r&&(r="/");var i=s(e);if(o.call(n,i))return n[i].exports;if(o.call(t,i))return c(i,t[i]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};l.alias=function(e,t){r[t]=e};var f=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/;l.register=l.define=function(e,i){if(e&&"object"==typeof e)for(var a in e)o.call(e,a)&&l.register(a,e[a]);else t[e]=i,delete n[e],function(e){if(f.test(e)){var t=e.replace(f,"");o.call(r,t)&&r[t].replace(f,"")!==t+"/index"||(r[t]=e)}if(p.test(e)){var n=e.replace(p,"");o.call(r,n)||(r[n]=e)}}(e)},l.list=function(){var e=[];for(var n in t)o.call(t,n)&&e.push(n);return e};var y=e._hmr&&new e._hmr((function(e,t){return s(a(u(e),t))}),l,t,n);l._cache=n,l.hmr=y&&y.wrap,l.brunch=!0,e.require=l}}(),function(){"undefined"==typeof window||window;require.register("curvature/Config.js",(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;e.Config={title:"Curvature 0.0.66-r"}})),require.register("curvature/access/LoginView.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.LoginView=void 0;var o=t("../base/Config"),i=t("../base/View"),a=t("../base/Router"),u=t("../base/Repository"),c=t("./UserRepository"),s=t("../toast/Toast"),l=t("../toast/ToastAlert");function f(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var h=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=n.call(this)).template='\n\t\t\t<a cv-link = "user">User</a>\n\t\t\t<br />\n\t\t\t\n\t\t\t<a cv-link = "user/login">Login</a>\n\t\t\t<br />\n\n\t\t\t<a cv-link = "user/register">Register</a>\n\t\t\t<br />\n\n\t\t\t<a cv-link = "user/logout">Logout</a>\n\t\t\t<br />\n\n\t\t\t<input\n\t\t\t\ttype  = "button"\n\t\t\t\tvalue = "Login via FaceBook"\n\t\t\t \tcv-on = "click:facebookLogin(event)"\n\t\t\t />\n\t\t\t <input\n\t\t\t\ttype  = "button"\n\t\t\t\tvalue = "Log Out"\n\t\t\t \tcv-on = "click:logout(event)"\n\t\t\t />\n\t\t',e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e);var n=y(t);return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"facebookLogin",value:function(e){var t=this;console.log("fb!"),e.preventDefault(),window.open(o.Config.get("backend")+"/facebookLogin"),this.userCheck&&this.clearInterval(this.userCheck),this.userCheck=this.onInterval(333,(function(){c.UserRepository.getCurrentUser(!0).then((function(e){var n=e.body;n.id&&n&&(t.clearInterval(t.userCheck),a.Router.clearCache(),u.Repository.clearCache(),s.Toast.instance().pop(new l.ToastAlert({title:"Logged in as "+n.username,body:"ID: "+n.publicId,time:2400})))}))}))}},{key:"logout",value:function(){window.open(o.Config.get("backend")+"/user/logout?page=app%3Fclose%3D1")}}]),t}(i.View);e.LoginView=h})),require.register("curvature/access/UserRepository.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.UserRepository=void 0;var o=t("../base/Config"),i=t("../base/Bindable"),a=t("../base/Repository");function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var y=function(e){function t(){return u(this,t),n.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e);var n=l(t);return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,null,[{key:"uri",get:function(){return o.Config.get("backend")+"/user/"}},{key:"getCurrentUser",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return window.prerenderer||navigator.userAgent.match(/prerender/i)?void(window.prerenderer=window.prerenderer||!0):this.args.response&&!1===t?Promise.resolve(this.args.response):this.request(this.uri+"current",!1,!1).then((function(t){if(t.body&&t.body.roles)for(var n in t.body.roles)"SeanMorris\\Access\\Role\\Administrator"==t.body.roles[n].class&&(t.body.isAdmin=!0);return t.body&&t.body.id&&(e.args.response=t,e.args.current=t.body),t})).catch((function(e){console.error(e)}))}},{key:"login",value:function(){return this.request(this.uri+"/login")}},{key:"logout",value:function(){var e=this,t=this.args.current;return delete this.args.current,this.request(this.uri+"logout",!1,{},!1).then((function(){return e.args.current=null,t}))}},{key:"onChange",value:function(e){return this.args.bindTo("current",e)}}]),t}(a.Repository);e.UserRepository=y,Object.defineProperty(y,"args",{configurable:!1,writable:!1,value:i.Bindable.makeBindable({})}),a.Repository.onResponse((function(e){e&&e.meta&&"currentUser"in e.meta&&(!y.args.current||e.meta.currentUser.id!==y.args.current.id)&&(y.args.current=e.meta.currentUser)}))})),require.register("curvature/animate/Chain.js",(function(e,t,n){"use strict";function r(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(e,"__esModule",{value:!0}),e.Chain=void 0;var i=o((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));e.Chain=i})),require.register("curvature/animate/Ease.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Ease=void 0;var o=t("../base/Mixin"),i=t("../mixin/PromiseMixin");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){function t(e){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return a(this,t),(r=n.call(this)).interval=e,r.terminal=!1,r.initial=!1,r.timeout=!1,r.final=!1,r.canceled=!1,r.done=!1,r.calculate=!(!r.calculate&&!("calculate"in o))&&o.calculate,r.bounded=!("bounded"in o)||o.bounded,r.repeat="repeat"in o?o.repeat:1,r.reverse=!!("reverse"in o)&&o.reverse,r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e);var n=s(t);return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"start",value:function(){var e=this;this.done=!1,requestAnimationFrame((function(){e.initial=Date.now(),e.terminal=e.initial+e.interval,0<=e.repeat&&(e.terminal=e.initial+e.interval*e.repeat,e.timeout=setTimeout((function(){return e.done?e.reverse?0:1:(e.done=!0,void e[i.PromiseMixin.Accept](e.reverse?0:1))}),e.interval*e.repeat))}))}},{key:"cancel",value:function(){return this.done||(clearTimeout(this.timeout),this.final=this.current(),this.canceled=this.done=!0,this[i.PromiseMixin.Reject](this.final)),this.final}},{key:"fraction",value:function(){if(this.done)return this.reverse?0:1;if(!1===this.initial)return this.reverse?1:0;var e=Date.now()-this.initial;if(e/this.interval>=this.repeat)return this.reverse?0:1;var t=e%this.interval/this.interval;return this.reverse?1-t:t}},{key:"current",value:function(){var e=this.fraction();return this.calculate?this.calculate(e):e}}]),t}(o.Mixin.with(i.PromiseMixin));e.Ease=p})),require.register("curvature/animate/ease/CubicIn.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.CubicIn=void 0;var y=function(e){function t(){var e;a(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(l(e=n.call.apply(n,[this].concat(o))),"calculate",(function(e){return e*e*e})),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.CubicIn=y})),require.register("curvature/animate/ease/CubicInOut.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.CubicInOut=void 0;var y=function(e){function t(){var e;a(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(l(e=n.call.apply(n,[this].concat(o))),"calculate",(function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1})),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.CubicInOut=y})),require.register("curvature/animate/ease/CubicOut.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.CubicOut=void 0;var y=function(e){function t(){var e;a(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(l(e=n.call.apply(n,[this].concat(o))),"calculate",(function(e){return--e*e*e+1})),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.CubicOut=y})),require.register("curvature/animate/ease/ElasticOut.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.ElasticOut=void 0;var y=function(e){function t(e){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return a(this,t),p(l(r=n.call(this,e,o)),"calculate",(function(e){return Math.pow(2,-10*e)*Math.sin((e-r.friction/4)*(2*Math.PI)/r.friction)+1})),r.friction=r.friction||"friction"in o?o.friction:.3,r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.ElasticOut=y})),require.register("curvature/animate/ease/GeoIn.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.GeoIn=void 0;var f=function(e){function t(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return a(this,t),n.call(this,e,r)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.GeoIn=f})),require.register("curvature/animate/ease/GeoInOut.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.GeoInOut=void 0;var o=t("../Ease"),i=t("./GeoIn");t("./GeoOut");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}console.log(i.GeoIn);var p,y,d,v=function(e){function t(){return a(this,t),n.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e);var n=s(t);return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"calculate",value:function(e){return.5>e?EaseIn(power)(2*e)/2:EaseOut(power)(2*e-1)/2+.5}}]),t}(o.Ease);e.GeoInOut=v,d=1,(y="power")in(p=v)?Object.defineProperty(p,y,{value:d,enumerable:!0,configurable:!0,writable:!0}):p[y]=d})),require.register("curvature/animate/ease/GeoOut.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.GeoOut=void 0;var y=function(e){function t(e){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return a(this,t),p(l(r=n.call(this,e,o)),"calculate",(function(e){return 1-Math.abs(e-Math.pow(1,r.power))})),r.power=r.power||"power"in o?o.power:1,r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.GeoOut=y})),require.register("curvature/animate/ease/Linear.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Linear=void 0;var f=function(e){function t(){return a(this,t),n.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.Linear=f})),require.register("curvature/animate/ease/QuadIn.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.QuadIn=void 0;var f=function(e){function t(){return i(this,t),n.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"current",value:function(){var e=this.fraction();return e*e}}]),t}(r.Ease);e.QuadIn=f})),require.register("curvature/animate/ease/QuadInOut.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.QuadInOut=void 0;var y=function(e){function t(){var e;a(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(l(e=n.call.apply(n,[this].concat(o))),"calculate",(function(e){return.5>e?2*e*e:(4-2*e)*e-1})),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.QuadInOut=y})),require.register("curvature/animate/ease/QuadOut.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.QuadOut=void 0;var f=function(e){function t(){return i(this,t),n.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"current",value:function(){var e=this.fraction();return e*(2-e)}}]),t}(r.Ease);e.QuadOut=f})),require.register("curvature/animate/ease/QuartIn.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.QuartIn=void 0;var y=function(e){function t(){var e;a(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(l(e=n.call.apply(n,[this].concat(o))),"calculate",(function(e){return e*e*e*e})),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.QuartIn=y})),require.register("curvature/animate/ease/QuartInOut.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.QuartInOut=void 0;var y=function(e){function t(){var e;a(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(l(e=n.call.apply(n,[this].concat(o))),"calculate",(function(e){return.5>e?8*e*e*e*e:1-8*--e*e*e*e})),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.QuartInOut=y})),require.register("curvature/animate/ease/QuartOut.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.QuartOut=void 0;var y=function(e){function t(){var e;a(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(l(e=n.call.apply(n,[this].concat(o))),"calculate",(function(e){return 1- --e*e*e*e})),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.QuartOut=y})),require.register("curvature/animate/ease/QuintIn.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.QuintIn=void 0;var y=function(e){function t(){var e;a(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(l(e=n.call.apply(n,[this].concat(o))),"calculate",(function(e){return e*e*e*e*e})),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.QuintIn=y})),require.register("curvature/animate/ease/QuintInOut.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.QuintInOut=void 0;var y=function(e){function t(){var e;a(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(l(e=n.call.apply(n,[this].concat(o))),"calculate",(function(e){return.5>e?16*e*e*e*e*e:1+16*--e*e*e*e*e})),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.QuintInOut=y})),require.register("curvature/animate/ease/QuintOut.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.QuintOut=void 0;var y=function(e){function t(){var e;a(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(l(e=n.call.apply(n,[this].concat(o))),"calculate",(function(e){return 1+--e*e*e*e*e})),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.QuintOut=y})),require.register("curvature/animate/ease/SineIn.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.SineIn=void 0;var y=function(e){function t(){var e;a(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(l(e=n.call.apply(n,[this].concat(o))),"calculate",(function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)})),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.SineIn=y})),require.register("curvature/animate/ease/SineInOut.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.SineInOut=void 0;var y=function(e){function t(){var e;a(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(l(e=n.call.apply(n,[this].concat(o))),"calculate",(function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2})),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.SineInOut=y})),require.register("curvature/animate/ease/SineOut.js",(function(e,t,n){"use strict";var r=t("../Ease");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.SineOut=void 0;var y=function(e){function t(){var e;a(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return p(l(e=n.call.apply(n,[this].concat(o))),"calculate",(function(e){return Math.sin(Math.PI/2*e)})),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Ease);e.SineOut=y})),require.register("curvature/base/Bag.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Bag=void 0;var o=t("./Bindable"),i=t("./Mixin"),a=t("../mixin/EventTargetMixin");function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var y=Symbol("Mapped"),d=Symbol("Has"),v=Symbol("Add"),h=Symbol("Remove"),b=Symbol("Delete"),m=function(e){function t(){var e,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;return u(this,t),(e=n.call(this)).changeCallback=r,e.content=new Map,e.current=0,e.length=0,e.list=o.Bindable.makeBindable([]),e.meta=Symbol("meta"),e.type=void 0,e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e);var n=l(t);return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"has",value:function(e){return this[y]?this[y].has(e):this[d](e)}},{key:d,value:function(e){return this.content.has(e)}},{key:"add",value:function(e){return this[y]?this[y].add(e):this[v](e)}},{key:v,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(e=o.Bindable.make(e),!this.content.has(e)){var n=new CustomEvent("adding",{detail:{item:e}});if(this.dispatchEvent(n)){var r=function(e){return+e}(this.current++);this.content.set(e,r),this.list[r]=e,this.changeCallback&&this.changeCallback(e,this.meta,t.ITEM_ADDED,r);var i=new CustomEvent("added",{detail:{item:e,id:r}});return this.dispatchEvent(i),this.length=this.size,r}}}},{key:"remove",value:function(e){return this[y]?this[y].remove(e):this[h](e)}},{key:h,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(e=o.Bindable.make(e),!this.content.has(e))return this.changeCallback&&this.changeCallback(e,this.meta,0,void 0),!1;var n=new CustomEvent("removing",{detail:{item:e}});if(this.dispatchEvent(n)){var r=this.content.get(e);delete this.list[r],this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,t.ITEM_REMOVED,r);var i=new CustomEvent("removed",{detail:{item:e,id:r}});return this.dispatchEvent(i),this.length=this.size,e}}},{key:"delete",value:function(e){return this[y]?this[y].delete(e):void this[b](e)}},{key:b,value:function(e){this.remove(e)}},{key:"map",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(e){return e},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e){return e},r=new WeakMap,o=new t;return o[y]=this,this.addEventListener("added",(function(t){var i=t.detail.item;if(n(i)&&!r.has(i)){var a=e(i);r.set(i,a),o[v](a)}})),this.addEventListener("removed",(function(e){var t=e.detail.item;if(r.has(t)){var n=r.get(t);r.delete(t),o[h](n)}})),o}},{key:"size",get:function(){return this.content.size}},{key:"items",value:function(){return Array.from(this.content.entries()).map((function(e){return e[0]}))}}]),t}(i.Mixin.with(a.EventTargetMixin));e.Bag=m,Object.defineProperty(m,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(m,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})})),require.register("curvature/base/Bindable.js",(function(e,t,n){"use strict";function r(){return(r=o()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,e},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.Bindable=void 0;var y=Symbol("ref"),d=Symbol("original"),v=Symbol("deck"),h=Symbol("binding"),b=Symbol("subBinding"),m=Symbol("bindingAll"),g=Symbol("isBindable"),w=Symbol("wrapping"),O=Symbol("Names"),j=Symbol("executing"),_=Symbol("stack"),P=(Symbol("object"),Symbol("wrapped")),S=Symbol("unwrapped"),k=Symbol("getProto"),E=Symbol("onGet"),R=Symbol("onAllGet"),T=Symbol("bindChain"),C=Symbol("Descriptors"),A=Symbol("Before"),x=Symbol("After"),B=Symbol("NoGetters"),M=Object.getPrototypeOf(Int8Array),D=Set.prototype[Symbol.iterator],I=Map.prototype[Symbol.iterator],L=globalThis,N=[L.Node,L.File,L.Map,L.Set,L.WeakMap,L.WeakSet,L.ArrayBuffer,L.ResizeObserver,L.MutationObserver,L.PerformanceObserver,L.IntersectionObserver,L.IDBCursor,L.IDBCursorWithValue,L.IDBDatabase,L.IDBFactory,L.IDBIndex,L.IDBKeyRange,L.IDBObjectStore,L.IDBOpenDBRequest,L.IDBRequest,L.IDBTransaction,L.IDBVersionChangeEvent,L.Event,L.CustomEvent,L.FileSystemFileHandle].filter((function(e){return"function"==typeof e})),F=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"isBindable",value:function(t){return!(!t||!t[g])&&t[g]===e}},{key:"onDeck",value:function(e,t){return e[v][t]||!1}},{key:"ref",value:function(e){return e[y]||e||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"shuck",value:function(t,n){n=n||new Map;var r={};if(t instanceof M||t instanceof ArrayBuffer){var o=t.slice(0);return n.set(t,o),o}var i=Object.keys(t);for(var a in i){var u=i[a];if("___"!==u.substring(0,3)){var c=n.get(t[u]);if(c){r[u]=c;continue}if(t[u]===t){n.set(t[u],r),r[u]=r;continue}if(t[u]&&"object"===l(t[u])){var s=t[u];e.isBindable(t[u])&&(s=t[u][d]),r[u]=this.shuck(s,n)}else r[u]=t[u];n.set(t[u],r[u])}}return e.isBindable(t)&&(delete r.bindTo,delete r.isBound),r}},{key:"make",value:function(t){var n=this;if(!t||!["function","object"].includes(l(t)))return t;if(t[y])return t[y];if(t[g])return t;if(Object.isSealed(t)||Object.isFrozen(t)||!Object.isExtensible(t)||N.filter((function(e){return t instanceof e})).length)return t;Object.defineProperty(t,g,{configurable:!1,enumerable:!1,writable:!1,value:e}),Object.defineProperty(t,y,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(t,d,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(t,v,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(t,h,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(t,b,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(t,m,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(t,j,{enumerable:!1,writable:!0}),Object.defineProperty(t,w,{enumerable:!1,writable:!0}),Object.defineProperty(t,_,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(t,A,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(t,x,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(t,P,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)}),Object.defineProperty(t,S,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(t,C,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)});var o=function(r){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},u=!1;if(Array.isArray(r)){var c=r.forEach((function(e){return o(e,i,a)}));return function(){return c.forEach((function(e){return e()}))}}if(r instanceof Function&&(a=i||{},i=r,u=!0),0<=a.delay&&(i=n.wrapDelayCallback(i,a.delay)),0<=a.throttle&&(i=n.wrapThrottleCallback(i,a.throttle)),0<=a.wait&&(i=n.wrapWaitCallback(i,a.wait)),a.frame&&(i=n.wrapFrameCallback(i,a.frame)),a.idle&&(i=n.wrapIdleCallback(i)),u){var s=t[m].length;if(t[m].push(i),!("now"in a)||a.now)for(var f in t)i(t[f],f,t,!1);return function(){delete t[m][s]}}if(t[h][r]||(t[h][r]=new Set),a.children){var p=i;i=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=r[0],u=t[b].get(p);if(u&&(t[b].delete(p),u()),"object"===l(i)){var c=e.make(i);e.isBindable(c)&&t[b].set(p,c.bindTo((function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.apply(void 0,r.concat(t))}),Object.assign({},a,{children:!1}))),p.apply(void 0,r)}else p.apply(void 0,r)}}t[h][r].add(i),(!("now"in a)||a.now)&&i(t[r],r,t,!1);var y=function(){var e=t[b].get(i);e&&(t[b].delete(i),e()),t[h][r]&&t[h][r].has(i)&&t[h][r].delete(i)};return a.removeWith&&a.removeWith instanceof View&&a.removeWith.onRemove((function(){return y})),y};Object.defineProperty(t,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.defineProperty(t,T,{configurable:!1,enumerable:!1,writable:!1,value:function(e,r){var o=e.split("."),i=o.shift(),a=o.slice(0),u=[];return u.push(t.bindTo(i,(function(e,t,o,i){var c=a.join(".");return 0===a.length?void r(e,t,o,i):(void 0===e&&(e=o[t]=n.make({})),void(u=u.concat(e[T](c,r))))}))),function(){return u.forEach((function(e){return e()}))}}}),Object.defineProperty(t,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var n=t[A].length;t[A].push(e);var r=!1;return function(){r||(r=!0,delete t[A][n])}}}),Object.defineProperty(t,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var n=t[x].length;t[x].push(e);var r=!1;return function(){r||(r=!0,delete t[x][n])}}}),Object.defineProperty(t,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e in t[m])if(t[m][e])return!0;for(var n in t[h]){var r,o=u(t[h][n]);try{for(o.s();!(r=o.n()).done;){if(r.value)return!0}}catch(r){o.e(r)}finally{o.f()}}return!1}});var i=function(n){t[n]&&t[n]instanceof Object&&!t[n]instanceof Promise&&!N.filter((function(e){return t[n]instanceof e})).length&&Object.isExtensible(t[n])&&!Object.isSealed(t[n])&&(t[n]=e.make(t[n]))};for(var c in t)i(c);var s=t[C],f=t[P],p=t[_],L={get:function(n,o){if(f.has(o))return f.get(o);if(o===y||o===d||"apply"===o||"isBound"===o||"bindTo"===o||"__proto__"===o||"constructor"===o)return t[o];var i;if(s.has(o)?i=s.get(o):(i=Object.getOwnPropertyDescriptor(t,o),s.set(o,i)),i&&!i.configurable&&!i.writable)return t[o];if(R in t)return t[R](o);if(E in t&&!(o in t))return t[E](o);if(i&&!i.configurable&&!i.writable)return f.set(o,t[o]),t[o];if("function"==typeof t[o]){if(O in t[o])return t[o];Object.defineProperty(t[S],o,{configurable:!1,enumerable:!1,writable:!0,value:t[o]});var a=Object.getPrototypeOf(t)[o]===t[o],c="function"==typeof Promise&&t instanceof Promise||"function"==typeof Map&&t instanceof Map||"function"==typeof Set&&t instanceof Set||"function"==typeof I&&t.prototype===I||"function"==typeof D&&t.prototype===D||"function"==typeof D&&t.prototype===D||"function"==typeof WeakMap&&t instanceof WeakMap||"function"==typeof WeakSet&&t instanceof WeakSet||"function"==typeof Date&&t instanceof Date||"function"==typeof M&&t instanceof M||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||"function"==typeof EventTarget&&t instanceof EventTarget||"function"==typeof ResizeObserver&&t instanceof ResizeObserver||"function"==typeof MutationObserver&&t instanceof MutationObserver||"function"==typeof PerformanceObserver&&t instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&t instanceof IntersectionObserver||"function"==typeof t[Symbol.iterator]&&"next"===o?t:t[y],l=function(){t[j]=o,p.unshift(o);for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var s,l,f=u(t[A]);try{for(f.s();!(s=f.n()).done;){var y=s.value;y(t,o,p,t,n)}}catch(e){f.e(e)}finally{f.f()}if(new.target)l=r(t[S][o],n);else{var d=t[S][o];l=a?d.apply(c||t,n):d.apply(void 0,n)}var v,h=u(t[x]);try{for(h.s();!(v=h.n()).done;){var b=v.value;b(t,o,p,t,n)}}catch(e){h.e(e)}finally{h.f()}return t[j]=null,p.shift(),l};(l[O]=l[O]||new WeakMap).set(t,o),l[R]=function(e){var n=l[O].get(t);return t[n][e]};var v=e.make(l);return f.set(o,v),v}return t[o]},set:function(n,r,o){if(f.has(r)&&f.delete(r),r===d)return!0;var i=t[v];if(r in i&&i[r]===o)return!0;if(r.slice&&"___"===r.slice(-3))return!0;if(n[r]===o||"number"==typeof o&&isNaN(i[r])&&isNaN(o))return!0;for(var a in o&&o instanceof Object&&!N.filter((function(e){return t instanceof e})).length&&Object.isExtensible(t)&&!Object.isSealed(t)&&(t[B],o=e.make(o)),i[r]=o,t[m])t[m][a]&&t[m][a](o,r,n,!1);var c=!1;if(r in t[h]){var s,l=u(t[h][r]);try{for(l.s();!(s=l.n()).done;){!1===(0,s.value)(o,r,n,!1,n[r])&&(c=!0)}}catch(e){l.e(e)}finally{l.f()}}if(delete i[r],!c){var p=Object.getOwnPropertyDescriptor(n,r);n instanceof File&&"lastModifiedDate"==r||p&&!p.writable||n[r]!==o||(n[r]=o)}var y=Reflect.set(n,r,o);if(Array.isArray(n)&&t[h].length)for(var b in t[h].length){(0,t[h].length[b])(n.length,"length",n,!1,n.length)}return y},construct:function(n,o){for(var i in n[A])n[A][i](n,"constructor",t[_],void 0,o);var u=e.make(r(n[d],a(o)));for(var c in n[x])n[x][c](n,"constructor",t[_],u,o);return u},getPrototypeOf:function(e){return k in t?t[k]:Reflect.getPrototypeOf(e)},deleteProperty:function(e,n){var r=t[v];if(void 0!==r[n])return!0;if(!(n in e))return!0;if(s.has(n)){var o=s.get(n);if(o&&!o.configurable)return!1;s.delete(n)}for(var i in r[n]=null,f.has(n)&&f.delete(n),t[m])t[m][i](void 0,n,e,!0,e[n]);if(n in t[h]){var a,c=u(t[h][n]);try{for(c.s();!(a=c.n()).done;){(0,a.value)(void 0,n,e,!0,e[n])}}catch(e){c.e(e)}finally{c.f()}}return delete r[n],delete e[n],!0}};return t[B]&&delete L.get,Object.defineProperty(t,y,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(t,L)}),t[y]}},{key:"clearBindings",value:function(e){var t=function(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.map(e)}}((function(e){return Object.keys(e).map((function(t){return delete e[t]}))}));t(e[P],e[h],e[m],e[x],e[A])}},{key:"resolve",value:function(e,t){for(var n,r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],o=t.split("."),i=o[0];o.length;){if(r&&1===o.length){var a=this.make(e);return[a,o.shift(),i]}!(!(n=o.shift())in e)&&e[n]&&e[n]instanceof Object||(e[n]={}),e=this.make(e[n])}return[this.make(e),n,i]}},{key:"wrapDelayCallback",value:function(e,t){return function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return setTimeout((function(){return e.apply(void 0,r)}),t)}}},{key:"wrapThrottleCallback",value:function(e,t){var n=this;return this.throttles.set(e,!1),function(){n.throttles.get(e,!0)||(e.apply(void 0,arguments),n.throttles.set(e,!0),setTimeout((function(){n.throttles.set(e,!1)}),t))}}},{key:"wrapWaitCallback",value:function(e,t){var n=this;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];var a;(a=n.waiters.get(e))&&(n.waiters.delete(e),clearTimeout(a)),a=setTimeout((function(){return e.apply(void 0,o)}),t),n.waiters.set(e,a)}}},{key:"wrapFrameCallback",value:function(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];requestAnimationFrame((function(){return e.apply(void 0,n)}))}}},{key:"wrapIdleCallback",value:function(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=window.requestIdleCallback||requestAnimationFrame;o((function(){return e.apply(void 0,n)}))}}}]),e}();e.Bindable=F,p(F,"waiters",new WeakMap),p(F,"throttles",new WeakMap),Object.defineProperty(F,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:E}),Object.defineProperty(F,"NoGetters",{configurable:!1,enumerable:!1,writable:!1,value:B}),Object.defineProperty(F,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:k}),Object.defineProperty(F,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:R})})),require.register("curvature/base/Cache.js",(function(e,t,n){"use strict";function r(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Cache=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"store",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"standard",o=0;n&&(o=1e3*n+(new Date).getTime()),this.buckets||(this.buckets=new Map),this.buckets.has(r)||this.buckets.set(r,new Map);var i=new CustomEvent("cvCacheStore",{cancelable:!0,detail:{key:e,value:t,expiry:n,bucket:r}});document.dispatchEvent(i)&&this.buckets.get(r).set(e,{value:t,expiration:o})}},{key:"load",value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"standard",r=new CustomEvent("cvCacheLoad",{cancelable:!0,detail:{key:e,defaultvalue:t,bucket:n}});if(!document.dispatchEvent(r))return t;if(this.buckets&&this.buckets.has(n)&&this.buckets.get(n).has(e)){var o=this.buckets.get(n).get(e);if(0===o.expiration||o.expiration>(new Date).getTime())return this.buckets.get(n).get(e).value}return t}}]),e}();e.Cache=o})),require.register("curvature/base/Config.js",(function(e,t,n){"use strict";function r(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var o={},i=t;try{o=i("/Config").Config||{}}catch(e){!0===globalThis.devMode&&console.error(e)}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"get",value:function(e){return this.configs[e]}},{key:"set",value:function(e,t){return this.configs[e]=t,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r in t){var o=t[r];for(var i in"string"==typeof o&&(o=JSON.parse(o)),o){var a=o[i];return this.configs[i]=a}}return this}}]),e}();e.Config=a,Object.defineProperty(a,"configs",{configurable:!1,enumerable:!1,writable:!1,value:o})})),require.register("curvature/base/Cookie.js",(function(e,t,n){"use strict";var r=t("./Bindable");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Cookie=void 0;var u,c,s,l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"set",value:function(e,t){this.jar[e]=t}},{key:"get",value:function(e){return this.jar[e]}},{key:"delete",value:function(e){delete this.jar[e]}}]),e}();e.Cookie=l,u=l,c="jar",s=r.Bindable.make({}),c in u?Object.defineProperty(u,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):u[c]=s,"string"==typeof document.cookie&&"data"!==window.location.href.substr(0,4)&&(document.cookie.split(";").map((function(e){var t=o(e.split("="),2),n=t[0],r=t[1];try{r=JSON.parse(r)}catch(e){r=r}n=n.trim(),l.jar[decodeURIComponent(n)]=r})),l.jar.bindTo((function(e,t,n,r){document.cookie=r?"".concat(encodeURIComponent(t),"=;expires=").concat(new Date(0)):"".concat(encodeURIComponent(t),"=").concat(e)})))})),require.register("curvature/base/Dom.js",(function(e,t,n){"use strict";function r(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Dom=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"mapTags",value:function(e,t,n,r,o){var i=[],a=!0;r&&(a=!1);var u=!1,c=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(e){if(!a){if(e!==r)return NodeFilter.FILTER_SKIP;a=!0}return o&&e===o&&(u=!0),u?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);for(0;c.nextNode();)i.push(n(c.currentNode,c));return i}},{key:"dispatchEvent",value:function(t,n){t.dispatchEvent(n),e.mapTags(t,!1,(function(e){e.dispatchEvent(n)}))}}]),e}();e.Dom=o})),require.register("curvature/base/Import.js",(function(e,t,n){"use strict";function r(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Import=void 0;var o=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),console.log(this.__proto__.constructor),this.__proto__.constructor.instances[t])return this.__proto__.constructor.instances[t];this.uri=t;var n=document.createElement("script");n.setAttribute("src",this.uri),this.ready=new Promise((function(e,t){n.addEventListener("load",(function(){return e(n)})),n.addEventListener("error",(function(e){console.error(e),t(e)}))})),this.tag=n,this.attached=!1,this.__proto__.constructor.instances[t]=this}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"attach",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this.attached||((e=e||document.head).append(this.tag),this.attached=!0)}}]),e}();e.Import=o,o.instances={}})),require.register("curvature/base/Mixin.js",(function(e,t,n){"use strict";var r=t("./Bindable");function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,e},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function b(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(e,"__esModule",{value:!0}),e.Mixin=void 0;var m=Symbol("constructor"),g=(Symbol("mixinList"),function(){function e(){v(this,e)}return b(e,null,[{key:"from",value:function(t){for(var n=arguments.length,r=Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var u=function(n){function o(){var n;v(this,o);for(var c=arguments.length,s=Array(c),l=0;l<c;l++)s[l]=arguments[l];var f,d=t.constructor?n=u.call.apply(u,[this].concat(s)):null,h=a(r);try{for(h.s();!(f=h.n()).done;){var b=f.value;switch(b[e.Constructor]&&b[e.Constructor].apply(y(n)),i(b)){case"function":e.mixClass(b,o);break;case"object":e.mixObject(b,y(n))}}}catch(e){h.e(e)}finally{h.f()}return p(n,d)}s(o,n);var u=f(o);return b(o)}(t);return u}},{key:"make",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n.pop();return e.to.apply(e,[o].concat(n))}},{key:"to",value:function(e){for(var t={},n=arguments.length,r=Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r.map((function(n){switch(i(n)){case"object":Object.assign(t,Object.getOwnPropertyDescriptors(n));break;case"function":Object.assign(t,Object.getOwnPropertyDescriptors(n.prototype))}delete t.constructor,Object.defineProperties(e.prototype,t)}))}},{key:"with",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.from.apply(this,[function(){return b((function e(){v(this,e)}))}()].concat(t))}},{key:"mixObject",value:function(e,t){var n,r=a(Object.getOwnPropertyNames(e));try{for(r.s();!(n=r.n()).done;){var o=n.value;"function"!=typeof e[o]?t[o]=e[o]:t[o]=e[o].bind(t)}}catch(e){r.e(e)}finally{r.f()}var i,u=a(Object.getOwnPropertySymbols(e));try{for(u.s();!(i=u.n()).done;){var c=i.value;"function"!=typeof e[c]?t[c]=e[c]:t[c]=e[c].bind(t)}}catch(e){u.e(e)}finally{u.f()}}},{key:"mixClass",value:function(e,t){var n,r=a(Object.getOwnPropertyNames(e.prototype));try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!["name","prototype","length"].includes(o)){var i=Object.getOwnPropertyDescriptor(t,o);if(!i||i.writable){if("function"!=typeof e[o]){t.prototype[o]=e.prototype[o];continue}t.prototype[o]=e.prototype[o].bind(t.prototype)}}}}catch(e){r.e(e)}finally{r.f()}var u,c=a(Object.getOwnPropertySymbols(e.prototype));try{for(c.s();!(u=c.n()).done;){var s=u.value;"function"==typeof e[s]?t.prototype[s]=e.prototype[s].bind(t.prototype):t.prototype[s]=e.prototype[s]}}catch(e){c.e(e)}finally{c.f()}var l,f=a(Object.getOwnPropertyNames(e));try{var p=function(){var n=l.value;if(["name","prototype","length"].includes(n))return"continue";var r=Object.getOwnPropertyDescriptor(t,n);if(r&&!r.writable)return"continue";if("function"!=typeof e[n])return t[n]=e[n],"continue";var o=t[n]||!1,i=e[n].bind(t);t[n]=function(){return o&&o.apply(void 0,arguments),i.apply(void 0,arguments)}};for(f.s();!(l=f.n()).done;)p()}catch(e){f.e(e)}finally{f.f()}var y,d=a(Object.getOwnPropertySymbols(e));try{var v=function(){var n=y.value;if("function"!=typeof e[n])return t.prototype[n]=e[n],"continue";var r=t[n]||!1,o=e[n].bind(t);t[n]=function(){return r&&r.apply(void 0,arguments),o.apply(void 0,arguments)}};for(d.s();!(y=d.n()).done;)v()}catch(e){d.e(e)}finally{d.f()}}},{key:"mix",value:function(e){for(var t={},n={},i=r.Bindable.makeBindable(e),u=function(e){var r,u=Object.getOwnPropertyNames(e.prototype),c=Object.getOwnPropertyNames(e),s=/^(before|after)__(.+)/,l=a(c);try{var f=function(){var n=r.value,a=n.match(s);if(a){switch(a[1]){case"before":i.___before((function(t,r,i,u,c){if(r===a[2])return e[n].bind(u).apply(void 0,o(c))}));break;case"after":i.___after((function(t,r,i,u,c){if(r===a[2])return e[n].bind(u).apply(void 0,o(c))}))}return"continue"}return t[n]?"continue":"function"==typeof e[n]?void(t[n]=e[n]):"continue"};for(l.s();!(r=l.n()).done;)f()}catch(e){l.e(e)}finally{l.f()}var p,y=a(u);try{var d=function(){var t=p.value,r=t.match(s);if(r){switch(r[1]){case"before":i.___before((function(n,i,a,u,c){if(i===r[2])return e.prototype[t].bind(u).apply(void 0,o(c))}));break;case"after":i.___after((function(n,i,a,u,c){if(i===r[2])return e.prototype[t].bind(u).apply(void 0,o(c))}))}return"continue"}return n[t]?"continue":"function"==typeof e.prototype[t]?void(n[t]=e.prototype[t]):"continue"};for(y.s();!(p=y.n()).done;)d()}catch(e){y.e(e)}finally{y.f()}},c=this;c&&c.prototype;c=Object.getPrototypeOf(c))u(c);for(var s in t)e[s]=t[s].bind(e);var l=function(t){e.prototype[t]=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return n[t].apply(this,r)}};for(var f in n)l(f);return i}}]),e}());e.Mixin=g,g.Constructor=m})),require.register("curvature/base/Model.js",(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var r=t("./Cache"),o=t("./Bindable");t("./Repository");function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}var a=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.repository=t}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"consume",value:function(t){for(var n in t){var i=t[n];if(t[n]instanceof Object&&t[n].class&&t[n].publicId){var a="".concat(t[n].class,"::").concat(t[n].publidId),u=r.Cache.load(a,!1,"model-type-repo");i=o.Bindable.makeBindable(new e(this.repository)),u&&(i=u),i.consume(t[n]),r.Cache.store(a,i,0,"model-type-repo")}this[n]=i}}}]),e}();e.Model=a})),require.register("curvature/base/Repository.js",(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Repository=void 0;var r=t("./Bindable"),o=t("./Router"),i=t("./Cache"),a=t("./Model"),u=t("./Bag"),c=t("../form/Form"),s=t("../form/multiField/FormWrapper");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}var p=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.uri=t}return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"get",value:function(t){var n=this,r=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},u=this.uri+"/"+t,c=i.Cache.load(u+o.Router.queryToString(o.Router.queryOver(a),!0),!1,"model-uri-repo");return!r&&c?Promise.resolve(c):e.request(u,a).then((function(e){return n.extractModel(e.body)}))}},{key:"page",value:function(){var t=this,n=1<arguments.length?arguments[1]:void 0;return e.request(this.uri,n).then((function(e){var n=[];for(var r in e.body){var o=e.body[r];n.push(t.extractModel(o))}return e.body=n,e}))}},{key:"edit",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=this.uri+"/create";return t&&(o=this.uri+"/"+t+"/edit"),n?e.request(o,{api:"json"},n).then((function(e){return e.body})):e.request(o).then((function(e){var t=new c.Form(e.meta.form,r);return new s.FormWrapper(t,o,"POST",r)}))}},{key:"extractModel",value:function(e){var t=r.Bindable.makeBindable(new a.Model(this));if(t.consume(e),this.uri,t.publicId,t.class){var n="".concat(t.class,"::").concat(t.publidId);i.Cache.load(n,!1,"model-type-repo")}return t}}],[{key:"loadPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.request(this.uri,e).then((function(e){return e}))}},{key:"domCache",value:function(){}},{key:"load",value:function(e){return this.objects=this.objects||{},this.objects[this.uri]=this.objects[this.uri]||{},this.objects[this.uri][e]?Promise.resolve(this.objects[this.uri][e]):this.request(this.uri+"/"+e).then((function(){}))}},{key:"form",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=this.uri+"/create";return e&&(t=this.uri+"/"+e+"/edit"),this.request(t).then((function(e){return e}))}},{key:"clearCache",value:function(){this.objects&&this.objects[this.uri]&&(this.objects[this.uri]={})}},{key:"encode",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;for(var r in n||(n=new FormData),e){var o=r;t&&(o="".concat(t,"[").concat(o,"]")),e[r]&&"object"!==l(e[r])?n.append(o,e[r]):this.encode(e[r],o,n)}return n}},{key:"onResponse",value:function(e){return this._onResponse||(this._onResponse=new u.Bag),this._onResponse.add(e)}},{key:"request",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a="GET",c="",s=null,l={};n&&(l=n),this._onResponse||(this._onResponse=new u.Bag),this.runningRequests||(this.runningRequests={}),l.api=l.api||"json",c=Object.keys(l).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(l[e])})).join("&");var f=e;if(f=e+"?"+c,!r&&this.runningRequests[f])return this.runningRequests[f];r&&(o=!1,a="POST",s=r instanceof FormData?r:this.encode(r));var p=new XMLHttpRequest;if("responseType"in i&&(p.responseType=i.responseType),!r&&o&&this.cache&&this.cache[f])return Promise.resolve(this.cache[f]);var y='script[data-uri="'+f+'"]',d=document.querySelector(y);if(!r&&o&&d){var v=JSON.parse(d.innerText);return Promise.resolve(v)}p.withCredentials=!("withCredentials"in i)||i.withCredentials;var h=document.createElement("a");h.href=f,r||(p.timeout=i.timeout||15e3,this.xhrs[f]=p);var b=new Promise((function(e,n){if(r&&"progressUp"in i&&(p.upload.onprogress=i.progressUp),"progressDown"in i&&(p.onprogress=i.progressDown),p.onreadystatechange=function(){var r;if(4===p.readyState)if(delete t.xhrs[f],delete t.runningRequests[f],t.cache||(t.cache={}),"application/json"!=p.getResponseHeader("Content-Type")&&"application/json; charset=utf-8"!=p.getResponseHeader("Content-Type")&&"text/json"!=p.getResponseHeader("Content-Type")&&"text/json; charset=utf-8"!=p.getResponseHeader("Content-Type")){var o=t._onResponse.items();for(var i in o)o[i](p,!0);200===p.status?e(p):n(p)}else if((r=JSON.parse(p.responseText))&&0==r.code){var a=document.querySelector('script[data-uri="'+f+'"]');(window.prerenderer||navigator.userAgent.match(/prerender/i))&&(window.prerenderer=window.prerenderer||!0,!a&&((a=document.createElement("script")).type="text/json",a.setAttribute("data-hack","application/ld+json-NOT!"),a.setAttribute("data-uri",f),document.head.appendChild(a)),a.innerText=JSON.stringify(r));var u=t._onResponse.items();for(var c in u)u[c](r,!0);r._http=p.status,200===p.status?e(r):n(r)}else{var s=t._onResponse.items();for(var l in s)s[l](r,!0);n(r)}},p.open(a,f,!0),i.headers)for(var o in i.headers)p.setRequestHeader(o,i.headers[o]);p.send(s)}));return r||(this.runningRequests[f]=b),b}},{key:"cancel",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:/^.$/;for(var t in this.xhrs)this.xhrs[t]&&t.match(e)&&(this.xhrs[t].abort(),delete this.xhrs[t])}}]),e}();e.Repository=p,p.xhrs=[]})),require.register("curvature/base/Router.js",(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;var r,o=t("./View"),i=(t("./Cache"),t("./Config")),a=t("./Routes");function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,e},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}function s(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}var y=Symbol("NotFound"),d=Symbol("Internal");globalThis.CustomEvent=null!==(r=globalThis.CustomEvent)&&void 0!==r?r:globalThis.Event;var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"wait",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document;r.addEventListener(n,(function(){t.listen(e)}))}},{key:"listen",value:function(e){var t=this,n=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];this.listener=e||this.listener,this.routes=n||e.routes,Object.assign(this.query,this.queryOver({}));var r=function(n){n.preventDefault(),n.state&&"routedId"in n.state?(n.state.routedId<=t.routeCount?(t.history.splice(n.state.routedId),t.routeCount=n.state.routedId):n.state.routedId>t.routeCount&&(t.history.push(n.state.prev),t.routeCount=n.state.routedId),t.state=n.state):null!==t.prevPath&&t.prevPath!==location.pathname&&t.history.push(t.prevPath),"null"===location.origin?t.match(t.nextPath,e):t.match(location.pathname,e)};window.addEventListener("cvUrlChanged",r),window.addEventListener("popstate",r);var o="null"!==location.origin&&location.pathname+location.search;location.origin&&location.hash&&(o+=location.hash);var i={routedId:this.routeCount,url:location.pathname,prev:this.prevPath};"null"!==location.origin&&history.replaceState(i,null,location.pathname),this.go(!1===o?"/":o)}},{key:"go",value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=i.Config.get("title");n&&(document.title=n);var r={routedId:this.routeCount,prev:this.prevPath,url:location.pathname};-1===t?this.match(e,this.listener,!0):"null"===location.origin?this.nextPath=e:2===t&&location.pathname!==e?history.replaceState(r,null,e):location.pathname!==e&&history.pushState(r,null,e),(!t||0>t)&&(!1===t&&(this.path=null),!t&&("#"===e.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged")))),this.prevPath=e}},{key:"processRoute",value:function(e,t,n){return"function"==typeof e[t]?e[t].prototype instanceof o.View?new e[t](n):e[t](n):e[t]}},{key:"handleError",value:function(e,t,n,r,o,i,a,u){console.error(e),"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:i,prev:a,view:o,routes:t,selected:n}}));var c=globalThis.devMode?"Unexpected error: "+e:"Unexpected error.";t[d]&&(r[d]=e,c=this.processRoute(t,d,r)),this.update(o,i,c,t,n,r,u)}},{key:"match",value:function(e,t){var n=this,r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],o=null,i=!1;if(!0===r&&(i=r),r&&"object"===f(r)&&(i=r.forceRefresh,o=r.event),"undefined"==typeof document||this.path!==e||i){var s="http://example.com";"undefined"!=typeof document&&(s="null"===location.origin?s:location.origin,this.queryString=location.search);var l=new URL(e,s);e=this.path=l.pathname,"undefined"==typeof document&&(this.queryString=l.search);var p=this.prevPath,d=t&&t.args?t.args.content:null,v=this.routes||t&&t.routes||a.Routes.dump(),h=new URLSearchParams(this.queryString);for(var b in o&&o.request&&(this.request=o.request),Object.keys(this.query))delete this.query[b];var m,g=c(h);try{for(g.s();!(m=g.n()).done;){var w=u(m.value,2),O=w[0],j=w[1];this.query[O]=j}}catch(e){g.e(e)}finally{g.f()}var _={},P=!1,S="";for(var k in"/"===e.substring(0,1)&&(e=e.substring(1)),e=e.split("/"),this.query)_[k]=this.query[k];e:for(var E in v){var R=E.split("/");if(!(R.length<e.length&&"*"!==R[R.length-1])){for(var T in R)if("%"==R[T].substr(0,1)){var C=null,A=/^%(\w+)\??/.exec(R[T]);if(A&&A[1]&&(C=A[1]),!C)throw new Error("".concat(R[T],' is not a valid argument segment in route "').concat(E,'"'));if(e[T])_[C]=e[T];else{if("?"!=R[T].substr(R[T].length-1,1))continue e;_[C]=""}}else if("*"!==R[T]&&e[T]!==R[T])continue e;P=E,S=v[E],"*"===R[R.length-1]&&(_.pathparts=e.slice(R.length-1));break}}var x=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:e,prev:p,root:t,selected:P,routes:v}});if("undefined"==typeof document||document.dispatchEvent(x)){if(!i&&t&&d&&S instanceof Object&&d instanceof S&&!(S instanceof Promise)&&d.update(_))return t.args.content=d,!0;P in v||(v[P]=v[y]);try{return!1===(S=this.processRoute(v,P,_))&&(S=this.processRoute(v,y,_)),S instanceof Promise||(S=Promise.resolve(S)),"undefined"==typeof document?S:S.then((function(r){n.update(t,e,r,v,P,_,i)})).catch((function(r){n.handleError(r,v,P,_,t,e,p,i)}))}catch(n){this.handleError(n,v,P,_,t,e,p,i)}}}}},{key:"update",value:function(e,t,n,r,i,a,u){if(e){var c=this.prevPath,s=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:n,path:t,prev:c,view:e,routes:r,selected:i}});!1!==n&&(e.args.content instanceof o.View&&(e.args.content.pause(!0),e.args.content.remove()),document.dispatchEvent(s)&&(e.args.content=n),n instanceof o.View&&(n.pause(!1),n.update(a,u)));var l=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:n,path:t,prev:c,view:e,routes:r,selected:i}});document.dispatchEvent(l)}}},{key:"queryOver",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=new URLSearchParams(location.search),r={},o={},i=c(n);try{for(i.s();!(e=i.n()).done;){var a=e.value;o[a[0]]=a[1]}}catch(e){i.e(e)}finally{i.f()}return delete(r=Object.assign(r,o,t)).api,r}},{key:"queryToString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=[],r=e;for(var o in t||(r=this.queryOver(e)),r)""!==r[o]&&n.push(o+"="+encodeURIComponent(r[o]));return n.join("&")}},{key:"setQuery",value:function(e,t,n){var r=this.queryOver();r[e]=t,void 0===t&&delete r[e];var o=this.queryToString(r,!0);this.go(location.pathname+(o?"?"+o:"?"),n)}}]),e}();e.Router=v,Object.defineProperty(v,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(v,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(v,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(v,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(v,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(v,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:d}),Object.defineProperty(v,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:y})})),require.register("curvature/base/Routes.js",(function(e,t,n){"use strict";function r(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Routes=void 0;var o={},i=t,a=!1,u=function(){if(!a){try{Object.assign(o,i("Routes").Routes||{})}catch(e){!0===globalThis.devMode&&console.warn(e)}a=!0}},c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"get",value:function(e){return u(),this.routes[e]}},{key:"dump",value:function(){return u(),this.routes}}]),e}();e.Routes=c,Object.defineProperty(c,"routes",{configurable:!1,enumerable:!1,writable:!1,value:o})})),require.register("curvature/base/RuleSet.js",(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuleSet=void 0;t("./Dom");var r=t("./Tag"),o=t("./View");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,e},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;for(var r in e.apply(t,n),this.rules)for(var o in this.rules[r]){var i,u=this.rules[r][o],c=e.wrap(t,u,n),s=t.querySelectorAll(r),l=a(s);try{for(l.s();!(i=l.n()).done;){var f=i.value;c(f)}}catch(e){l.e(e)}finally{l.f()}}}},{key:"purge",value:function(){if(this.rules)for(var e=0,t=Object.entries(this.rules);e<t.length;e++){var n=i(t[e],2),r=n[0];n[1];if(this.rules[r])for(var o in this.rules[r])delete this.rules[r][o]}}}],[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;for(var n in this.globalRules)for(var r in this.globalRules[n]){var o,i=this.globalRules[n][r],u=this.wrap(e,i,t),c=e.querySelectorAll(n),s=a(c);try{for(s.s();!(o=s.n()).done;){var l=o.value;u(l)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"wait",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document,r=function(t,n){return function(){return n.removeEventListener(t,r),e.apply()}}(t,n);n.addEventListener(t,r)}},{key:"wrap",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=t;return(t instanceof o.View||t&&t.prototype&&t.prototype instanceof o.View)&&(i=function(){return t}),function(e){if(void 0===e.___cvApplied___&&Object.defineProperty(e,"___cvApplied___",{enumerable:!1,writable:!1,value:new WeakSet}),!e.___cvApplied___.has(t)){var a,u;n&&(a=u=n,n.viewList&&(u=n.viewList.parent));var c=new r.Tag(e,u,null,void 0,a),s=c.element.parentNode,l=c.element.nextSibling,f=i(c);if(!1!==f&&e.___cvApplied___.add(t),f instanceof HTMLElement&&(f=new r.Tag(f)),f instanceof r.Tag){if(!f.element.contains(c.element)){for(;c.element.firstChild;)f.element.appendChild(c.element.firstChild);c.remove()}l?s.insertBefore(f.element,l):s.appendChild(f.element)}f&&f.prototype&&f.prototype instanceof o.View&&(f=new f({},n)),f instanceof o.View&&(n&&(n.cleanup.push(function(e){return function(){e.remove()}}(f)),n.cleanup.push(n.args.bindTo((function(e,t,n){n[t]=e,f.args[t]=e}))),n.cleanup.push(f.args.bindTo((function(e,t,r){r[t]=e,n.args[t]=e})))),c.clear(),f.render(c.element))}}}}]),e}();e.RuleSet=l})),require.register("curvature/base/SetMap.js",(function(e,t,n){"use strict";function r(){return(r=o()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.SetMap=void 0;var l=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_map",new Map)}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"getOne",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}(this.get(e));try{for(n.s();!(t=n.n()).done;){return t.value}}catch(e){n.e(e)}finally{n.f()}}},{key:"add",value:function(e,t){var n=this._map.get(e);return n||this._map.set(e,n=new Set),n.add(t)}},{key:"remove",value:function(e,t){var n=this._map.get(e);if(n){var r=n.delete(t);return n.size||this._map.delete(e),r}}},{key:"values",value:function(){return r(Set,a(a(this._map.values()).map((function(e){return a(e.values())}))))}}]),e}();e.SetMap=l})),require.register("curvature/base/Tag.js",(function(e,t,n){"use strict";var r=t("./Bindable");function o(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=void 0;var i=Symbol("CurrentStyle"),a=function(e){if(this.node)for(var t in e){var n=e[t]+"";this[i].has(t)&&this[i].get(t)===e[t]||("-"===t[0]?this.node.style.setProperty(t,n):this.node.style[t]=n,void 0===e[t]?this[i].delete(t):this[i].set(t,e[t]))}},u=function(e){var t=this;return"function"==typeof this[e]?this[e]:this.node&&"function"==typeof this.node[e]?function(){var n;return(n=t.node)[e].apply(n,arguments)}:"style"===e?this.proxy.style:this.node&&e in this.node?this.node[e]:this[e]},c=function(){function e(t,n,o,c,s){var l=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t){var f=document.createRange().createContextualFragment(t);t=f.firstChild}this.element=r.Bindable.makeBindable(t),this.node=this.element,this.parent=n,this.direct=s,this.ref=o,this.index=c,this.cleanup=[],this[r.Bindable.OnAllGet]=u.bind(this),this[i]=new Map;var p=r.Bindable.make(a.bind(this));return Object.defineProperty(this,"style",{value:p}),this.proxy=r.Bindable.make(this),this.proxy.style.bindTo((function(e,t,n,r){l[i].has(t)&&l[i].get(t)===e||(l.node.style[t]=e,r||void 0===e?l[i].delete(t):l[i].set(t,e))})),this.proxy.bindTo((function(e,n){if("index"!==n)return n in t&&t[n]!==e&&(t[n]=e),!1})),this.proxy}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"attr",value:function(e){for(var t in e)void 0===e[t]?this.node.removeAttribute(t):null===e[t]?this.node.setAttribute(t,""):this.node.setAttribute(t,e[t]);return this}},{key:"remove",value:function(){this.node&&this.node.remove(),r.Bindable.clearBindings(this);for(var e;e=this.cleanup.shift();)e();if(this.clear(),this.node){var t=new Event("cvDomDetached");this.node.dispatchEvent(t),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var e=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(e),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){}},{key:"listen",value:function(e,t,n){var r=this.node;r.addEventListener(e,t,n);var o=function(){r.removeEventListener(e,t,n)},i=function(){o(),o=function(){return console.warn("Already removed!")}};return this.parent.onRemove((function(){return i()})),i}}]),e}();e.Tag=c})),require.register("curvature/base/Theme.js",(function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,e},f:function e(){try{i||null==n.return||n.return()}finally{if(u)throw e}}}}function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.Theme=void 0;var p=function(){function e(t){var n;c(this,e),f(this,"themes",[]),(n=this.themes).push.apply(n,i(t))}return l(e,[{key:"getTemplate",value:function(e){for(var t in this.themes){var n=this.themes[t].getTemplate(e);if(n)return n}}},{key:"getView",value:function(e){for(var t in this.themes){var n=this.themes[t].getView(e);if(n)return n}}}]),e}(),y=function(){function e(t){c(this,e),this.key=t,this.viewMap=new Map,this.templateMap=new Map,this.fallbacks=[]}return l(e,[{key:"setFallback",value:function(){var e;return(e=this.fallbacks).push.apply(e,arguments),this}},{key:"setView",value:function(e,t){return this.viewMap.set(e,t),this}},{key:"getView",value:function(e){var t=this.resolve(e,"viewMap");return t?new t(e):null}},{key:"setTemplate",value:function(e,t){return this.templateMap.set(e,t),this}},{key:"getTemplate",value:function(e){return this.resolve(e,"templateMap")}},{key:"resolve",value:function(e,t){e.___object___&&e.isBound&&(e=e.___object___);var n=e.__proto__.constructor,i=this[t];if(i.has(n,e))return i.get(n);var a,u=null,c=o(i);try{for(c.s();!(a=c.n()).done;){var s=r(a.value,2),l=s[0],f=s[1];e instanceof l&&(u=f)}}catch(e){c.e(e)}finally{c.f()}if(!u){var p,y=o(this.fallbacks);try{for(y.s();!(p=y.n()).done;){if(u=p.value.resolve(e,t))return u}}catch(e){y.e(e)}finally{y.f()}}return u&&i.set(n,u),u}}],[{key:"get",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1>=t.length){var r=(t[0]||"")+"";return this.instances[r]||(this.instances[r]=new this(r)),this.instances[r]}var o=[];for(var i in t)o.push(this.get(t[i]));return new p(o)}}]),e}();e.Theme=y,f(y,"instances",{})})),require.register("curvature/base/Uuid.js",(function(e,t,n){"use strict";var r;function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.Uuid=void 0,r=Symbol.toPrimitive;var u=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4;if(o(this,e),a(this,"uuid",null),a(this,"version",4),t){if(!t||"string"!=typeof t&&!(t instanceof e)||!t.match(/[0-9A-Fa-f]{8}(-[0-9A-Fa-f]{4}){3}-[0-9A-Fa-f]{12}/))throw new Error('Invalid input for Uuid: "'.concat(t,'"'));this.version=n,this.uuid=t}else this.uuid="function"==typeof crypto.randomUUID?crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}));Object.freeze(this)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:r,value:function(){return this.toString()}},{key:"toString",value:function(){return this.uuid}},{key:"toJson",value:function(){return{version:this.version,uuid:this.uuid}}}]),e}();e.Uuid=u})),require.register("curvature/base/View.js",(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;var r=t("./Bindable"),o=t("./ViewList"),i=t("./Router"),a=t("./Uuid"),u=t("./Dom"),c=t("./Tag"),s=t("./Bag"),l=t("./RuleSet"),f=t("./Mixin"),p=(t("../mixin/PromiseMixin"),t("../mixin/EventTargetMixin"));function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function d(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=b(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,e},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}function b(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var k=Symbol("dontParse"),E=Symbol("expandBind"),R=Symbol("uuid"),T=function(e){function n(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return g(this,n),e=f.call(this,t,o),Object.defineProperty(P(e),"args",{value:r.Bindable.make(t)}),Object.defineProperty(P(e),R,{value:e.constructor.uuid()}),Object.defineProperty(P(e),"nodesAttached",{value:new s.Bag((function(){}))}),Object.defineProperty(P(e),"nodesDetached",{value:new s.Bag((function(){}))}),Object.defineProperty(P(e),"_onRemove",{value:new s.Bag((function(){}))}),Object.defineProperty(P(e),"cleanup",{value:[]}),Object.defineProperty(P(e),"parent",{value:o}),Object.defineProperty(P(e),"views",{value:new Map}),Object.defineProperty(P(e),"viewLists",{value:new Map}),Object.defineProperty(P(e),"withViews",{value:new Map}),Object.defineProperty(P(e),"tags",{value:r.Bindable.make({})}),Object.defineProperty(P(e),"nodes",{value:r.Bindable.make([])}),Object.defineProperty(P(e),"timeouts",{value:new Map}),Object.defineProperty(P(e),"intervals",{value:[]}),Object.defineProperty(P(e),"frames",{value:[]}),Object.defineProperty(P(e),"ruleSet",{value:new l.RuleSet}),Object.defineProperty(P(e),"preRuleSet",{value:new l.RuleSet}),Object.defineProperty(P(e),"subBindings",{value:{}}),Object.defineProperty(P(e),"templates",{value:{}}),Object.defineProperty(P(e),"eventCleanup",{value:[]}),Object.defineProperty(P(e),"unpauseCallbacks",{value:new Map}),Object.defineProperty(P(e),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(P(e),"rendered",{value:new Promise((function(t){return Object.defineProperty(P(e),"renderComplete",{value:t})}))}),e.controller=P(e),e.loaded=Promise.resolve(P(e)),e.template="",e.firstNode=null,e.lastNode=null,e.viewList=null,e.mainView=null,e.preserve=!1,e.removed=!1,e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(n,e);var f=j(n);return function(e,t,n){t&&w(e.prototype,t),n&&w(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"_id",get:function(){return this[R]}},{key:"onFrame",value:function(e){var t=this,n=!1,r=function(){n=!0},o=function(){t.removed||n||(!t.paused&&e(Date.now()),requestAnimationFrame(o))};return requestAnimationFrame((function(){return o(Date.now())})),this.frames.push(r),r}},{key:"onNextFrame",value:function(e){return requestAnimationFrame((function(){return e(Date.now())}))}},{key:"onIdle",value:function(e){return requestIdleCallback((function(){return e(Date.now())}))}},{key:"onTimeout",value:function(e,t){var n=this,r={timeout:null,callback:null,time:e,fired:!1,created:(new Date).getTime(),paused:!1},o=function(){t(),r.fired=!0,n.timeouts.delete(r.timeout)},i=setTimeout(o,e);return r.callback=o,r.timeout=i,this.timeouts.set(r.timeout,r),i}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e,t=h(this.timeouts);try{for(t.s();!(e=t.n()).done;){var n=v(e.value,2),r=(n[0],n[1]);clearTimeout(r.timeout),this.timeouts.delete(r.timeout)}}catch(e){t.e(e)}finally{t.f()}}))},{key:"onInterval",value:function(e,t){var n=setInterval(t,e);return this.intervals.push({timeout:n,callback:t,time:e,paused:!1}),n}},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){for(var t in this.intervals)e===this.intervals[t].timeout&&(clearInterval(this.intervals[t].timeout),delete this.intervals[t])}))},{key:"pause",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){var t,n=h(this.timeouts);try{for(n.s();!(t=n.n()).done;){var r=v(t.value,2),o=(r[0],r[1]);o.fired?this.timeouts.delete(o.timeout):(clearTimeout(o.timeout),o.paused=!0,o.time=Math.max(0,o.time-(Date.now()-o.created)))}}catch(e){n.e(e)}finally{n.f()}for(var i in this.intervals)clearInterval(this.intervals[i].timeout)}else{var a,u=h(this.timeouts);try{for(u.s();!(a=u.n()).done;){var c=v(a.value,2),s=(c[0],c[1]);if(s.paused){if(s.fired){this.timeouts.delete(s.timeout);continue}s.timeout=setTimeout(s.callback,s.time),s.paused=!1}}}catch(e){u.e(e)}finally{u.f()}for(var l in this.intervals)this.intervals[l].timeout.paused&&(this.intervals[l].timeout.paused=!1,this.intervals[l].timeout=setInterval(this.intervals[l].callback,this.intervals[l].time));var f,p=h(this.unpauseCallbacks);try{for(p.s();!(f=p.n()).done;){var y=v(f.value,2),d=y[1];d()}}catch(e){p.e(e)}finally{p.f()}this.unpauseCallbacks.clear()}var b,m=h(this.viewLists);try{for(m.s();!(b=m.n()).done;){var g=v(b.value,2),w=(g[0],g[1]);w.pause(!!e)}}catch(e){m.e(e)}finally{m.f()}for(var O in this.tags)if(Array.isArray(this.tags[O]))for(var j in this.tags[O])this.tags[O][j].pause(!!e);else this.tags[O].pause(!!e)}},{key:"render",value:function(){var e,t=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(r instanceof n&&(r=r.firstNode.parentNode),o instanceof n&&(o=o.firstNode),this.firstNode)return this.reRender(r,o);this.dispatchEvent(new CustomEvent("render"));var i=this.template instanceof DocumentFragment?this.template.cloneNode(!0):n.templates.has(this.template),a=i?this.template instanceof DocumentFragment?i:n.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(i||this.template instanceof DocumentFragment||n.templates.set(this.template,a.cloneNode(!0)),this.mainView||this.preRuleSet.apply(a,this),this.mapTags(a),this.mainView||this.ruleSet.apply(a,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(e=this.nodes).push.apply(e,[this.firstNode].concat(d(Array.from(a.childNodes)),[this.lastNode])),this.postRender(r),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(r){var u=r.getRootNode();if(o?(r.insertBefore(this.firstNode,o),r.insertBefore(this.lastNode,o)):(r.appendChild(this.firstNode),r.appendChild(this.lastNode)),r.insertBefore(a,this.lastNode),u.isConnected)this.attached(u,r),this.dispatchAttached(u,r);else{var c=function(e){e.target.isConnected&&(t.attached(u,r),t.dispatchAttached(u,r),r.removeEventListener("cvDomAttached",c))};r.addEventListener("cvDomAttached",c)}}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;this.dispatchEvent(new CustomEvent("attached",{detail:{view:n||this,node:t,root:e,mainView:this}})),this.dispatchDomAttached(n);var r,o=h(this.nodesAttached.items());try{for(o.s();!(r=o.n()).done;){var i=r.value;i(e,t)}}catch(e){o.e(e)}finally{o.f()}}},{key:"dispatchDomAttached",value:function(e){var t=this;this.nodes.filter((function(e){return e.nodeType!==Node.COMMENT_NODE})).forEach((function(n){n.matches&&(u.Dom.mapTags(n,!1,(function(n){n.matches&&n.dispatchEvent(new CustomEvent("cvDomAttached",{target:n,detail:{view:e||t,mainView:t}}))})),n.dispatchEvent(new CustomEvent("cvDomAttached",{target:n,detail:{view:e||t,mainView:t}})))}))}},{key:"reRender",value:function(e,t){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this})){var n=new DocumentFragment;if(this.firstNode.isConnected){var r=this.nodesDetached.items();for(var o in r)r[o]()}if(n.append.apply(n,d(this.nodes)),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(n,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this});var i=e.getRootNode();i.isConnected&&(this.attached(i,e),this.dispatchAttached(i,e))}return this.nodes}}},{key:"mapTags",value:function(e){var t=this;u.Dom.mapTags(e,!1,(function(e,n){e[k]||(e.matches?e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.mapInterpolatableTag(e)).matches("[cv-template]")&&t.mapTemplateTag(e)||e).matches("[cv-slot]")&&t.mapSlotTag(e)||e).matches("[cv-prerender]")&&t.mapPrendererTag(e)||e).matches("[cv-link]")&&t.mapLinkTag(e)||e).matches("[cv-attr]")&&t.mapAttrTag(e)||e).matches("[cv-expand]")&&t.mapExpandableTag(e)||e).matches("[cv-ref]")&&t.mapRefTag(e)||e).matches("[cv-on]")&&t.mapOnTag(e)||e).matches("[cv-each]")&&t.mapEachTag(e)||e).matches("[cv-bind]")&&t.mapBindTag(e)||e).matches("[cv-with]")&&t.mapWithTag(e)||e).matches("[cv-if]")&&t.mapIfTag(e)||e).matches("[cv-view]")&&t.mapViewTag(e)||e:e=t.mapInterpolatableTag(e),e!==n.currentNode&&(n.currentNode=e))}))}},{key:"mapExpandableTag",value:function(e){var t=e[E];t&&(t(),e[E]=!1);var n=v(r.Bindable.resolve(this.args,e.getAttribute("cv-expand"),!0),2),o=n[0],i=n[1];return e.removeAttribute("cv-expand"),o[i]||(o[i]={}),o[i]=r.Bindable.make(o[i]),this.onRemove(e[E]=o[i].bindTo((function(t,n,r,o){return o||void 0===t?void e.removeAttribute(n,t):null===t?void e.setAttribute(n,""):void e.setAttribute(n,t)}))),e}},{key:"compileExpandableTag",value:function(e){return function(t){var n=e.cloneNode(!0),o=n.getAttribute("cv-expand"),i=r.Bindable.make(t.args[o]||{});n.removeAttribute("cv-expand");var a=function(e){if("name"===e||"type"===e)return"continue";var o=i.bindTo(e,function(e,t){return function(n){e.setAttribute(t,n)}}(n,e));t.onRemove((function(){o(),i.isBound()&&r.Bindable.clearBindings(i)}))};for(var u in i)a(u);return n}}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(e){var t=e.getAttribute("cv-attr").split(/[,;]/).map((function(e){return e.split(":")}));return e.removeAttribute("cv-attr"),function(n){var o=e.cloneNode(!0),i=function(e){var i=t[e][1]||t[e][0],a=v(r.Bindable.resolve(n.args,i,!0),2),u=a[0],c=a[1],s=t[e][0];n.onRemove(u.bindTo(c,(function(e,t,n,r){return r||void 0===e?void o.removeAttribute(s,e):null===e?void o.setAttribute(s,""):void o.setAttribute(s,e)})))};for(var a in t)i(a);return o}}},{key:"mapInterpolatableTag",value:function(e){var t=this,o=this.interpolateRegex;if(e.nodeType===Node.TEXT_NODE){var i=e.nodeValue;if(!this.interpolatable(i))return e;for(var a,u,s=0,l=function(){var o=a[2],u=!1,l=!1,f=o.split("|"),p=!1;if(1<f.length&&(p=t.stringTransformer(f.slice(1)),o=f[0]),"$$"===o.substr(0,2)&&(u=!0,l=!0,o=o.substr(2)),"$"===o.substr(0,1)&&(u=!0,o=o.substr(1)),"000"===o.substr(0,3))return expand=!0,o=o.substr(3),"continue";var d=i.substring(s,a.index);s=a.index+a[1].length;var h,b=document.createTextNode(d);b[k]=!0,e.parentNode.insertBefore(b,e),(h=u?document.createElement("div"):document.createTextNode(""))[k]=!0;var m=t.args,g=o;if(o.match(/\./)){var w=v(r.Bindable.resolve(t.args,o,!0),2);m=w[0],g=w[1]}if(e.parentNode.insertBefore(h,e),"object"!==y(m))return"break";var O=(m=r.Bindable.make(m)).bindTo(g,(function(r,o,i){if(i[o]!==r&&(i[o]instanceof n||i[o]instanceof Node||i[o]instanceof c.Tag)&&!i[o].preserve&&i[o].remove(),h.nodeValue="",l&&!(r instanceof n)){var a,s=null!==(a=r)&&void 0!==a?a:"";(r=new n(t.args,t)).template=s}if(p&&(r=p(r)),r instanceof n){var f=function(e,n){r.dispatchAttached(e,n,t)};t.nodesAttached.add(f),r.render(e.parentNode,h);var y=function(){r.preserve||r.remove()};t.onRemove(y),r.onRemove((function(){t.nodesAttached.remove(f),t._onRemove.remove(y)}))}else r instanceof Node?(e.parentNode.insertBefore(r,h),t.onRemove((function(){return r.remove()}))):r instanceof c.Tag?r.node?(e.parentNode.insertBefore(r.node,h),t.onRemove((function(){return r.remove()}))):r.remove():(r instanceof Object&&r.__toString instanceof Function&&(r=r.__toString()),u?h.innerHTML=r:h.nodeValue=r);h[k]=!0}));t.onRemove(O)};(a=o.exec(i))&&("continue"===(u=l())||"break"!==u););var f=i.substring(s),p=document.createTextNode(f);p[k]=!0,e.parentNode.insertBefore(p,e),e.nodeValue=""}else if(e.nodeType===Node.ELEMENT_NODE)for(var d=function(n){if(!t.interpolatable(e.attributes[n].value))return"continue";for(var i=0,a=void 0,u=e.attributes[n].value,c=e.attributes[n],s={},l=[];a=o.exec(u);)l.push(u.substring(i,a.index)),s[a[2]]||(s[a[2]]=[]),s[a[2]].push(l.length),l.push(a[1]),i=a.index+a[1].length;l.push(u.substring(i));var f=function(n){var o=t.args,i=n,a=n.split("|"),u=!1,f=n;if(1<a.length&&(u=t.stringTransformer(a.slice(1)),i=a[0]),i.match(/\./)){var p=v(r.Bindable.resolve(t.args,i,!0),2);o=p[0],i=p[1]}s[f],t.onRemove(o.bindTo(i,(function(n,r,o){for(var a in u&&(n=u(n)),s)for(var p in s[f])l[s[f][p]]=o[a],r===i&&(l[s[f][p]]=n);t.paused?t.unpauseCallbacks.set(c,(function(){return e.setAttribute(c.name,l.join(""))})):e.setAttribute(c.name,l.join(""))}))),t.onRemove((function(){o.isBound()||r.Bindable.clearBindings(o)}))};for(var p in s)f(p)},h=0;h<e.attributes.length;h++)d(h);return e}},{key:"mapRefTag",value:function(e){var t=v(e.getAttribute("cv-ref").split(":"),3),n=t[0],r=t[1],o=void 0===r?null:r,i=t[2],a=void 0===i?null:i,u=c.Tag;o&&(u=this.stringToClass(o)),e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove((function(){e.___tag___=null,e.remove()}));var s=this;this.viewList&&(s=this.viewList.parent);var l=new u(e,this,n,void 0,this);for(e.___tag___=l,this.tags[n]=l;s;){var f=this.args[a];if(void 0===f?s.tags[n]=l:(!s.tags[n]&&(s.tags[n]=[]),s.tags[n][f]=l),!s.parent)break;s=s.parent}return e}},{key:"mapBindTag",value:function(e){var t=this,o=e.getAttribute("cv-bind"),i=this.args,a=o,s=null;if(o.match(/\./)){var l=v(r.Bindable.resolve(this.args,o,!0),3);i=l[0],a=l[1],s=l[2]}i!==this.args&&(this.subBindings[o]=this.subBindings[o]||[],this.onRemove(this.args.bindTo(s,(function(){for(;t.subBindings.length;)t.subBindings.shift()()}))));var f=!1;"$"===a.substr(0,1)&&(a=a.substr(1),f=!0);var p=i.bindTo(a,(function(r,o,i,a,s){(s instanceof n||s instanceof Node||s instanceof c.Tag)&&s!==r&&s.remove();var l=new CustomEvent("cvAutoChanged",{bubbles:!0});if(["INPUT","SELECT","TEXTAREA"].includes(e.tagName)){var p=e.getAttribute("type");if(p&&"checkbox"===p.toLowerCase())e.checked=!!r,e.dispatchEvent(l);else if(p&&"radio"===p.toLowerCase())e.checked=r==e.value,e.dispatchEvent(l);else if("file"!==p){if("SELECT"===e.tagName){var y=function(){for(var t=0;t<e.options.length;t++)e.options[t].value==r&&(e.selectedIndex=t)};y(),t.nodesAttached.add(y)}else e.value=null==r?"":r;e.dispatchEvent(l)}}else if(r instanceof n){var d,v=h(e.childNodes);try{for(v.s();!(d=v.n()).done;){d.value.remove()}}catch(e){v.e(e)}finally{v.f()}var b=function(){r.dispatchDomAttached(t)};t.nodesAttached.add(b),r.render(e),r.onRemove((function(){return t.nodesAttached.remove(b)}))}else if(r instanceof Node)e.insert(r);else if(r instanceof c.Tag)e.append(r.node);else if(f){if(e.innerHTML!==r){if(r+="",e.innerHTML===r.substring(0,e.innerHTML.length))e.innerHTML+=r.substring(e.innerHTML.length);else{var m,g=h(e.childNodes);try{for(g.s();!(m=g.n()).done;){m.value.remove()}}catch(e){g.e(e)}finally{g.f()}e.innerHTML=r}u.Dom.mapTags(e,!1,(function(e){return e[k]=!0}))}}else if(e.textContent!==r){var w,O=h(e.childNodes);try{for(O.s();!(w=O.n()).done;){w.value.remove()}}catch(e){O.e(e)}finally{O.f()}e.textContent=r}}));i!==this.args&&this.subBindings[o].push(p),this.onRemove(p);var y=e.getAttribute("type"),d=e.getAttribute("multiple"),b=function(t){if(t.target===e)if(y&&"checkbox"===y.toLowerCase())i[a]=!!e.checked&&t.target.getAttribute("value");else if(t.target.matches("[contenteditable=true]"))i[a]=t.target.innerHTML;else if("file"===y&&d){var n=Array.from(t.target.files),o=i[a]||r.Bindable.onDeck(i,a);if(o&&n.length){var u=function(e){if(n[e]!==o[e])return n[e].toJSON=function(){return{name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified}},o[e]=n[e],"break"};for(var c in n){if("break"===u(c))break}}else i[a]=n}else if("file"===y&&!d&&t.target.files.length){var s=t.target.files.item(0);s.toJSON=function(){return{name:s.name,size:s.size,type:s.type,date:s.lastModified}},i[a]=s}else i[a]=t.target.value};return"file"===y||"radio"===y?e.addEventListener("change",b):(e.addEventListener("input",b),e.addEventListener("change",b),e.addEventListener("value-changed",b)),this.onRemove((function(){"file"===y||"radio"===y?e.removeEventListener("change",b):(e.removeEventListener("input",b),e.removeEventListener("change",b),e.removeEventListener("value-changed",b))})),e.removeAttribute("cv-bind"),e}},{key:"mapOnTag",value:function(e){var t=this;return(e.getAttribute("cv-on")+"").split(";").map((function(e){return e.split(":")})).forEach((function(n){n=n.map((function(e){return e.trim()}));var r=n.length,o=(n.shift()+"").trim(),i=((n.shift()||o)+"").trim(),a=((n.shift()||"")+"").trim(),u=[],c=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(i);c&&(i=c[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),c[2]&&(u=c[2].split(",").map((function(e){return e.trim()})))),u.length||u.push("$event"),o&&1!==r||(o=i);for(var s,l=t,f=function(){var e=l.controller;return"function"==typeof e[i]?(s=function(){e[i].apply(e,arguments)},"break"):"function"==typeof l[i]?(s=function(){var e;(e=l)[i].apply(e,arguments)},"break"):l.parent?void(l=l.parent):"break"};l&&"break"!==f(););var p=function(n){var r=u.map((function(r){var o;return+r==r?r:"event"===r||"$event"===r?n:"$view"===r?l:"$controller"===r?controller:"$tag"===r?e:"$parent"===r?t.parent:"$subview"===r?t:r in t.args?t.args[r]:(o=/^['"]([\w-]+?)["']$/.exec(r))?o[1]:void 0}));if("function"!=typeof s)throw new Error("".concat(i," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));s.apply(void 0,d(r))},y={};switch(a.includes("p")?y.passive=!0:a.includes("P")&&(y.passive=!1),a.includes("c")?y.capture=!0:a.includes("C")&&(y.capture=!1),a.includes("o")?y.once=!0:a.includes("O")&&(y.once=!1),o){case"_init":p();break;case"_attach":t.nodesAttached.add(p);break;case"_detach":t.nodesDetached.add(p);break;default:e.addEventListener(o,p,y),t.onRemove((function(){e.removeEventListener(o,p,y)}))}return[o,i,u]})),e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var n=function(n){return n.preventDefault(),"http"===t.substring(0,4)||"//"===t.substring(0,2)?void window.open(e.getAttribute("href",t)):void i.Router.go(e.getAttribute("href"))};return e.addEventListener("click",n),this.onRemove(function(e,t){return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,n)),e.removeAttribute("cv-link"),e}},{key:"compileLinkTag",value:function(e){var t=e.getAttribute("cv-link");return e.removeAttribute("cv-link"),function(){var n=e.cloneNode(!0);return n.setAttribute("href",t),n}}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),n=window.prerenderer||navigator.userAgent.match(/prerender/i);return n&&(window.prerenderer=window.prerenderer||!0),("never"===t&&n||"only"===t&&!n)&&e.parentNode.removeChild(e),e}},{key:"mapWithTag",value:function(e){var t=this,o=e.getAttribute("cv-with"),i=e.getAttribute("cv-carry"),a=e.getAttribute("cv-view");e.removeAttribute("cv-with"),e.removeAttribute("cv-carry"),e.removeAttribute("cv-view");var u=a?this.stringToClass(a):n,c=new DocumentFragment;d(e.childNodes).forEach((function(e){return c.appendChild(e)}));var s=[];i&&(s=i.split(",").map((function(e){return e.trim()})));var l=this.args.bindTo(o,(function(n){for(t.withViews.has(e)&&t.withViews.delete(e);e.firstChild;)e.removeChild(e.firstChild);var o=new u({},t);t.onRemove(function(e){return function(){e.remove()}}(o)),o.template=c;var i=function(e){var n=t.args.bindTo(s[e],(function(e,t){o.args[t]=e}));o.onRemove(n),t.onRemove((function(){n(),o.remove()}))};for(var a in s)i(a);var l=function(e){if("object"!==y(n))return"continue";var i=(n=r.Bindable.make(n)).bindTo(e,(function(e,t,n,r){r?t in o.args&&delete o.args[t]:o.args[t]=e}));o.args.bindTo(e,(function(e,t,r,o){o?t in n&&delete n[t]:n[t]=e}));t.onRemove((function(){i(),n.isBound()||r.Bindable.clearBindings(n),o.remove()})),o.onRemove((function(){i(),n.isBound()||r.Bindable.clearBindings(n)}))};for(var f in n)l(f);o.render(e),t.withViews.set(e,o)}));return this.onRemove((function(){t.withViews.delete(e),l()})),e}},{key:"mapViewTag",value:function(e){var t=this,r=e.getAttribute("cv-view");e.removeAttribute("cv-view");var o=new DocumentFragment;d(e.childNodes).forEach((function(e){return o.appendChild(e)}));var i=r.split(":"),a=i.pop()?this.stringToClass(r):n,u=i.shift(),c=new a(this.args,this);return this.views.set(e,c),u&&this.views.set(u,c),this.onRemove(function(n){return function(){n.remove(),t.views.delete(e),t.views.delete(u)}}(c)),c.template=o,c.render(e),e}},{key:"mapEachTag",value:function(e){var t=this,i=e.getAttribute("cv-each"),a=e.getAttribute("cv-view");e.removeAttribute("cv-each"),e.removeAttribute("cv-view");var u=a?this.stringToClass(a):n,c=new DocumentFragment;d(e.childNodes).forEach((function(e){return c.appendChild(e)}));var l=v(i.split(":"),3),f=l[0],p=l[1],y=l[2],h=this.args,b=f;if(f.match(/\./)){var m=v(r.Bindable.resolve(this.args,f,!0),2);h=m[0],b=m[1]}var g=h.bindTo(b,(function(n){n instanceof s.Bag&&(n=n.list),t.viewLists.has(e)&&t.viewLists.get(e).remove();var r=new o.ViewList(c,p,n,t,y,u),i=function(){return r.remove()};t.onRemove(i),r.onRemove((function(){return t._onRemove.remove(i)}));var a=t.args.bindTo((function(e,t,n,o){"_id"===t||(o?t in r.subArgs&&delete r.subArgs[t]:r.subArgs[t]=e)})),l=r.args.bindTo((function(e,n,r,o){"_id"===n||"value"===n||"___"===(n+"").substring(0,3)||(o?delete t.args[n]:n in t.args&&(t.args[n]=e))}));for(r.onRemove(a),r.onRemove(l),t.onRemove(a),t.onRemove(l);e.firstChild;)e.removeChild(e.firstChild);t.viewLists.set(e,r),r.render(e)}));return this.onRemove(g),e}},{key:"mapIfTag",value:function(e){var t=this,o=e,i=o.getAttribute("cv-view"),a=o.getAttribute("cv-if"),c=o.getAttribute("cv-is"),l=!1,f=!1;o.removeAttribute("cv-view"),o.removeAttribute("cv-if"),o.removeAttribute("cv-is");var p=i?this.stringToClass(i):n;"!"===a.substr(0,1)&&(a=a.substr(1),l=!0),"?"===a.substr(0,1)&&(a=a.substr(1),f=!0);var y=new DocumentFragment;d(o.childNodes).forEach((function(e){return y.appendChild(e)}));var h=this,b=new DocumentFragment,m=new p(Object.assign({},this.args),h);m.tags.bindTo((function(e,n){return t.tags[n]=e}),{removeWith:this}),m.template=y;var g=h.args,w=a;if(a.match(/\./)){var O=v(r.Bindable.resolve(h.args,a,!0),2);g=O[0],w=O[1]}m.render(b);var j=g.bindTo(w,(function(n){var r=n;f&&(n=null!=n),n instanceof s.Bag&&(n=n.list),Array.isArray(n)&&(n=!!n.length),null!==c&&(n=r==c),l&&(n=!n),n?(e.appendChild(b),d(b.childNodes).forEach((function(e){return u.Dom.mapTags(e,!1,(function(e){e.matches&&e.dispatchEvent(new CustomEvent("cvDomAttached",{target:e,detail:{view:m||t,mainView:t}}))}))}))):(m.nodes.forEach((function(e){return b.appendChild(e)})),u.Dom.mapTags(b,!1,(function(e){e.matches&&new CustomEvent("cvDomDetached",{target:e,detail:{view:m||t,mainView:t}})})))}),{children:Array.isArray(g[w])});h.onRemove(j);var _=this.args.bindTo((function(e,t,n,r){"_id"===t||(r?t in m.args&&delete m.args[t]:m.args[t]=e)})),P=m.args.bindTo((function(e,n,r,o){"_id"===n||"___"===(n+"").substring(0,3)||n in t.args&&(o?delete t.args[n]:t.args[n]=e)}));return h.onRemove((function(){j(),_(),P(),h._onRemove.remove(j)})),this.onRemove((function(){_(),P(),m.remove(),h!==t&&h.remove()})),e}},{key:"compileIfTag",value:function(e){var t=e.getAttribute("cv-if"),o=!1;e.removeAttribute("cv-if"),"!"===t.substr(0,1)&&(t=t.substr(1),o=!0);var i=new DocumentFragment;return d(e.childNodes).forEach((function(e){return i.appendChild(e.cloneNode(!0))})),function(a){var u=e.cloneNode(),c=new DocumentFragment,s=new n({},a);s.template=i,a.syncBind(s);var l=a.args,f=t;if(t.match(/\./)){var p=v(r.Bindable.resolve(a.args,t,!0),2);l=p[0],f=p[1]}var y=!1,d=l.bindTo(f,(function(e){if(!y){var t=a.args[f]||o?u:c;return s.render(t),void(y=!0)}Array.isArray(e)&&(e=!!e.length),o&&(e=!e),e?u.appendChild(c):s.nodes.forEach((function(e){return c.appendChild(e)}))}));a.onRemove(d);var h=function(){l.isBound()||r.Bindable.clearBindings(l)};return s.onRemove((function(){d(),h(),a._onRemove.remove(d),a._onRemove.remove(h)})),u}}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");return e.removeAttribute("cv-template"),this.templates[t]=function(){return"TEMPLATE"===e.tagName?e.content.cloneNode(!0):new DocumentFragment(e.innerHTML)},this.rendered.then((function(){return e.remove()})),e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),n=this.templates[t];if(!n){for(var r=this;r&&!(n=r.templates[t]);)r=this.parent;if(!n)return void console.error("Template ".concat(t," not found."))}var o=n();for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return e.appendChild(o),e}},{key:"syncBind",value:function(e){var t=this,r=this.args.bindTo((function(t,n){"_id"===n||e.args[n]!==t&&(e.args[n]=t)})),o=e.args.bindTo((function(e,r,o,i,a){if("_id"!==r){var u=e,c=a;u instanceof n&&(u=u.___ref___),c instanceof n&&(c=c.___ref___),u!==c&&c instanceof n&&a.remove(),r in t.args&&(t.args[r]=e)}}));this.onRemove(r),this.onRemove(o),e.onRemove((function(){t._onRemove.remove(r),t._onRemove.remove(o)}))}},{key:"postRender",value:function(){}},{key:"attached",value:function(){}},{key:"interpolatable",value:function(e){return!!(e+"").match(this.interpolateRegex)}},{key:"remove",value:function(){var e=this,t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];if(this.dispatchEvent(new CustomEvent("remove",{detail:{view:this},cancelable:!0}))){var n=function(){for(var t in e.tags)Array.isArray(e.tags[t])?(e.tags[t]&&e.tags[t].forEach((function(e){return e.remove()})),e.tags[t].splice(0)):(e.tags[t]&&e.tags[t].remove(),e.tags[t]=void 0);for(var n in e.nodes)e.nodes[n]&&e.nodes[n].dispatchEvent(new Event("cvDomDetached")),e.nodes[n]&&e.nodes[n].remove(),e.nodes[n]=void 0;e.nodes.splice(0),e.firstNode=e.lastNode=void 0};t?n():requestAnimationFrame(n);var r,o=this._onRemove.items(),i=h(o);try{for(i.s();!(r=i.n()).done;){var a=r.value;a(),this._onRemove.remove(a)}}catch(e){i.e(e)}finally{i.f()}var u,c=h(this.cleanup);try{for(c.s();!(u=c.n()).done;){var s=u.value;s&&s()}}catch(e){c.e(e)}finally{c.f()}this.cleanup.length=0;var l,f=h(this.viewLists);try{for(f.s();!(l=f.n()).done;){var p=v(l.value,2),y=(p[0],p[1]);y.remove()}}catch(e){f.e(e)}finally{f.f()}this.viewLists.clear();var d,b=h(this.timeouts);try{for(b.s();!(d=b.n()).done;){var m=v(d.value,2),g=(m[0],m[1]);clearTimeout(g.timeout),this.timeouts.delete(g.timeout)}}catch(e){b.e(e)}finally{b.f()}var w,O=h(this.intervals);try{for(O.s();!(w=O.n()).done;){var j=w.value;clearInterval(j)}}catch(e){O.e(e)}finally{O.f()}this.intervals.length=0;var _,P=h(this.frames);try{for(P.s();!(_=P.n()).done;){var S=_.value;S()}}catch(e){P.e(e)}finally{P.f()}this.frames.length=0,this.preRuleSet.purge(),this.ruleSet.purge(),this.removed=!0,this.dispatchEvent(new CustomEvent("removed",{detail:{view:this},cancelable:!0}))}}},{key:"findTag",value:function(e){for(var t in this.nodes){var n=void 0;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return new c.Tag(this.nodes[t],this,void 0,void 0,this);if(n=this.nodes[t].querySelector(e))return new c.Tag(n,this,void 0,void 0,this)}}}},{key:"findTags",value:function(e){var t=this;return this.nodes.filter((function(e){return e.querySelectorAll})).map((function(t){return d(t.querySelectorAll(e))})).flat().map((function(e){return new c.Tag(e,t,void 0,void 0,t)}))||[]}},{key:"onRemove",value:function(e){e instanceof Event||this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(){}},{key:"afterUpdate",value:function(){}},{key:"stringTransformer",value:function(e){var t=this;return function(n){for(var r in e){for(var o=t,i=e[r];o&&!o[i];)o=o.parent;if(!o)return;n=o[e[r]](n)}return n}}},{key:"stringToClass",value:function(e){if(n.refClasses.has(e))return n.refClasses.get(e);var r=e.split("/"),o=r[r.length-1],i=t(e);return n.refClasses.set(e,i[o]),i[o]}},{key:"preventParsing",value:function(e){e[k]=!0}},{key:"toString",value:function(){return this.nodes.map((function(e){return e.outerHTML})).join(" ")}},{key:"listen",value:function(e,t,r,o){var i=this;if("string"==typeof e&&(o=r,r=t,t=e,e=this),e instanceof n)return this.listen(e.nodes,t,r,o);if(Array.isArray(e))return e.map((function(e){return i.listen(e,t,r,o)})).forEach((function(e){return e()}));if(e instanceof c.Tag)return this.listen(e.element,t,r,o);e.addEventListener(t,r,o);var a=function(){return e.removeEventListener(t,r,o)},u=function(){a(),a=function(){}};return this.onRemove((function(){return u()})),u}},{key:"detach",value:function(){for(var e in this.nodes)this.nodes[e].remove();return this.nodes}}],[{key:"from",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=new this(t,n);return r.template=e,r}},{key:"isView",value:function(){return n}},{key:"uuid",value:function(){return new a.Uuid}}]),n}(f.Mixin.with(p.EventTargetMixin));e.View=T,Object.defineProperty(T,"templates",{value:new Map}),Object.defineProperty(T,"refClasses",{value:new Map})})),require.register("curvature/base/ViewList.js",(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewList=void 0;var r=t("./Bindable"),o=t("./SetMap"),i=t("./Bag");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,e},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}var f=function(){function e(t,n,o,a){var u=this,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,f=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null;s(this,e),this.removed=!1,this.args=r.Bindable.makeBindable({}),this.args.value=r.Bindable.makeBindable(o||{}),this.subArgs=r.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.viewClass=f,this._onRemove=new i.Bag,this.template=t,this.subProperty=n,this.keyProperty=l,this.tag=null,this.downDebind=[],this.upDebind=[],this.paused=!1,this.parent=a,this.rendered=new Promise((function(e){Object.defineProperty(u,"renderComplete",{configurable:!1,writable:!0,value:e})})),this.willReRender=!1,this.args.___before((function(e,t){"bindTo"==t||(u.paused=!0)})),this.args.___after((function(e,t,n){"bindTo"==t||(u.paused=1<n.length,u.reRender())}));var p=this.args.value.bindTo((function(e,t,n,r){if(!u.paused){var o=t;if("symbol"!==c(t))if(isNaN(t)&&(o="_"+t),r)for(var i in u.views[o]&&u.views[o].remove(),delete u.views[o],u.views)isNaN(i)?u.views[i].args[u.keyProperty]=i.substr(1):u.views[i].args[u.keyProperty]=i;else u.views[o]?u.views[o]&&u.views[o].args&&(u.views[o].args[u.keyProperty]=t,u.views[o].args[u.subProperty]=e):(cancelAnimationFrame(u.willReRender),u.willReRender=requestAnimationFrame((function(){u.reRender()})))}}));this._onRemove.add(p),Object.preventExtensions(this)}return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"render",value:function(e){var t,n=this,r=[],o=a(this.views);try{var i=function(){var n=t.value;n.render(e),r.push(n.rendered.then((function(){return n})))};for(o.s();!(t=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}this.tag=e,Promise.all(r).then((function(e){return n.renderComplete(e)})),this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[],n=new o.SetMap;for(var r in this.views){var i=this.views[r],u=i.args[this.subProperty];n.add(u,i),t[r]=i}var c=[],s=new Set;this.downDebind.length&&this.downDebind.forEach((function(e){return e&&e()})),this.upDebind.length&&this.upDebind.forEach((function(e){return e&&e()})),this.upDebind.length=0,this.downDebind.length=0;var l=1/0,f=1/0,p=function(t){var r=!1,o=t;if(isNaN(o)?o="_"+t:(o+"").length&&(o=+o),void 0!==e.args.value[t]&&n.has(e.args.value[t])){var i=n.getOne(e.args.value[t]);i&&(i.args[e.keyProperty]=t,c[o]=i,s.add(i),r=!0,!isNaN(o)&&(l=Math.min(l,o),0<o&&(f=Math.min(f,o))),n.remove(e.args.value[t],i))}if(!r){var a={},u=c[o]=new e.viewClass(a,e.parent);isNaN(o)||(l=Math.min(l,o),0<o&&(f=Math.min(f,o))),c[o].template=e.template,c[o].viewList=e,c[o].args[e.keyProperty]=t,c[o].args[e.subProperty]=e.args.value[t],e.upDebind[o]=a.bindTo(e.subProperty,(function(t,n,r,o){var i=a[e.keyProperty];return o?void delete e.args.value[i]:void(e.args.value[i]=t)})),e.downDebind[o]=e.subArgs.bindTo((function(e,t,n,r){return r?void delete a[t]:void(a[t]=e)}));var p=function(){e.upDebind.filter((function(e){return e})).forEach((function(e){return e()})),e.upDebind.length=0},y=function(){e.downDebind.filter((function(e){return e})).forEach((function(e){return e()})),e.downDebind.length=0};u.onRemove((function(){e._onRemove.remove(p),e._onRemove.remove(y),e.upDebind[o]&&e.upDebind[o](),e.downDebind[o]&&e.downDebind[o](),delete e.upDebind[o],delete e.downDebind[o]})),e._onRemove.add(p),e._onRemove.add(y),a[e.subProperty]=e.args.value[t]}};for(var y in this.args.value)p(y);for(var d in t)s.has(t[d])||t[d].remove();if(Array.isArray(this.args.value)){var v=0===l&&void 0!==c[1]&&1<c.length||f===1/0?l:f,h=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=c.length-t-1;n>v&&void 0===c[n];)n--;return n<v?Promise.resolve():c[n]===e.views[n]?c[n]&&!c[n].firstNode?(c[n].render(e.tag,c[n+1]),c[n].rendered.then((function(){return h(+t+1)}))):0===t||t%500?h(+t+1):new Promise((function(e){return requestAnimationFrame((function(){return e(h(+t+1))}))})):(c[n].render(e.tag,c[n+1]),e.views.splice(n,0,c[n]),c[n].rendered.then((function(){return h(t+1)})))};this.rendered=h()}else{var b,m=[],g=Object.assign({},c),w=function(e){return parseInt(e)===e-0},O=Object.keys(c).sort((function(e,t){return w(e)&&w(t)?Math.sign(e-t):w(e)||w(t)?!w(e)&&w(t)?-1:w(e)&&!w(t)?1:void 0:0})),j=a(O);try{var _=function(){var t=b.value;return delete g[t],c[t].firstNode&&c[t]===e.views[t]?"continue":(c[t].render(e.tag),void m.push(c[t].rendered.then((function(){return c[t]}))))};for(j.s();!(b=j.n()).done;)_()}catch(e){j.e(e)}finally{j.f()}for(var P in g)delete this.args.views[P],g.remove();this.rendered=Promise.all(m)}for(var S in c)isNaN(S)?c[S].args[this.keyProperty]=S.substr(1):c[S].args[this.keyProperty]=S;this.views=Array.isArray(this.args.value)?[].concat(c):c,s.clear(),this.willReRender=!1,this.rendered.then((function(){e.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:e.subProperty,value:e.args.value,tag:e.tag}}})),e.tag.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:e.subProperty,value:e.args.value,tag:e.tag}}}))}))}}},{key:"pause",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var e in this.views)this.views[e].remove();var t=this._onRemove.items();for(var n in t)this._onRemove.remove(t[n]),t[n]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&r.Bindable.clearBindings(this.subArgs),r.Bindable.clearBindings(this.args),this.args.value&&!this.args.value.isBound()&&r.Bindable.clearBindings(this.args.value),this.removed=!0}}]),e}();e.ViewList=f})),require.register("curvature/form/ButtonField.js",(function(e,t,n){"use strict";var r=t("./Field");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonField=void 0;var l=function(e){function t(e,r,o,i){var a;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),(a=n.call(this,e,r,o,i)).args.title=a.args.title||a.args.value,a._onClick=[];var u=a.args.attrs||{};return u.type=u.type||a.args.type,a.args.name=u.name=a.args.name||i,a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\ttype      = "').concat(u.type,'"\n\t\t\t\t\tvalue     = "[[value]]"\n\t\t\t\t\tcv-on     = "click:clicked(event)"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e);var n=u(t);return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"clicked",value:function(e){return this._onClick.map((function(t){return!1===t(e)})).filter((function(e){return e})).length?void("submit"==this.args.attrs.type&&(e.preventDefault(),e.stopPropagation())):void("submit"==this.args.attrs.type&&(e.preventDefault(),e.stopPropagation(),this.form.tags.formTag.element.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))))}},{key:"onClick",value:function(e){this._onClick.push(e)}}]),t}(r.Field);e.ButtonField=l})),require.register("curvature/form/Field.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Field=void 0;var o=t("../base/View");t("../base/Bindable");function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=function(e){function t(e,r,o,i){var a,u,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=Object.assign({},e);(s=n.call(this,l,o)).args.title=null!==(a=s.args.title)&&void 0!==a?a:i,s.args.value=null!==(u=s.args.value)&&void 0!==u?u:"",s.value=null!==(c=s.args.value)&&void 0!==c?c:"",s.skeleton=l,s.disabled=null,s.args.valueString="",s.form=r,s.key=i,s.ignore=!!s.args.attrs&&(s.args.attrs["data-cv-ignore"]||!1);var f="",p=s.args.attrs||{};p.type=p.type||l.type||null,s.args.name=p.name=p.name||s.args.name||i,"checkbox"==p.type&&(f='value = "1"'),s.template='\n\t\t\t<label\n\t\t\t\tfor           = "'.concat(s.getName(),'"\n\t\t\t\tdata-type     = "').concat(p.type||"text",'"\n\t\t\t\tcv-ref        = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(s.getName(),'"\n\t\t\t\t\ttype      = "').concat(p.type||"text",'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t').concat(f,'\n\t\t\t\t/>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t');var y=null;return s.args.bindTo("value",(function(e,t){if(!isNaN(e)&&null!==e&&e.length&&e==+e&&e.length===(+e+"").length&&(e=+e),s.value=e,y!=t){if(y=i,s.args.valueString=JSON.stringify(e||"",null,4),s.valueString=s.args.valueString,"file"==p.type&&s.tags.input&&s.tags.input.element.files&&s.tags.input.element.length)if(s.tags.input.node.removeAttribute("title"),p.multiple){var n=Array.from(s.tags.input.element.files);if(s.parent.args.value[t]&&n.length){for(var r in n)n[r]!==s.parent.args.value[i][r]&&(s.parent.args.value[i]=n);s.parent.args.value.splice(n.length)}else s.parent.args.value[i]=n}else s.parent.args.value[i]=s.tags.input.element.files[0];else"file"==p.type&&s.tags.input?!e&&s.tags.input?(s.tags.input.node.value=null,p.placeholder?s.tags.input.node.setAttribute("title",p.placeholder):s.tags.input.node.removeAttribute("title")):e instanceof File&&s.tags.input.node.setAttribute("title",e.name):(s.parent.args.value||(s.parent.args.value={}),s.parent.args.value[i]=e);s.args.errors=[],y=null}})),s.parent.args.value[s.key]=s.args.value,s.parent.args.value.bindTo(i,(function(e,t){if(y!=t){if(y=t,"file"!=p.type)s.args.value=e;else if(s.tags.input&&s.tags.input.element.files&&s.tags.input.element.files.length)if(p.multiple){var n=Array.from(s.tags.input.element.files);if(s.parent.args.value[i]&&n.length){for(var r in n)n[r]!==s.parent.args.value[i][r]&&(s.parent.args.value[i]=n);s.parent.args.value[i].splice(n.length)}else s.parent.args.value[i]=n}else s.parent.args.value[i]=s.tags.input.element.files[0];else s.args.value=e;y=null}})),s}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e);var n=u(t);return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"disable",value:function(){this.hasChildren(),this.disabled="disabled"}},{key:"enable",value:function(){this.hasChildren(),this.disabled=!1}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];if(this.tags.input)return this.tags.input.element.getAttribute("name");var t=this.key;if(e){for(var n=this.parent,r=[t];n&&n.array&&void 0!==n.key;)r.unshift(n.key),n=n.parent;t=r.shift(),r.length&&(t+="[".concat(r.join("]["),"]"))}return t}}]),t}(o.View);e.Field=l})),require.register("curvature/form/FieldSet.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FieldSet=void 0;var o=t("./Field"),i=t("./Form");function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){function t(e,r,o,a){var u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var c=(u=n.call(this,e,r,o,a)).args.attrs||{};return c.type=c.type||"fieldset",u.array=!1,(e.array||c["data-array"]||c["data-multi"])&&(u.array=c["data-array"]=!0),u.args.value={},u.args.fields=i.Form.renderFields(e.children,l(u)),u.fields=u.args.fields,u.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(u.getName(),'"\n\t\t\t\tdata-type  = "').concat(c.type,'"\n\t\t\t\tdata-multi = "').concat(c["data-multi"]?"true":"false",'"\n\t\t\t\tcv-ref     = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<fieldset\n\t\t\t\t\tname   = "').concat(u.getName(),'"\n\t\t\t\t\tcv-ref = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand="attrs"\n\t\t\t\t\tcv-each = "fields:field"\n\t\t\t\t>\n\t\t\t\t\t[[field]]\n\t\t\t\t</fieldset>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),u}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}},{key:"wrapSubfield",value:function(e){return e}}]),t}(o.Field);e.FieldSet=p})),require.register("curvature/form/FileField.js",(function(e,t,n){"use strict";var r=t("./Field");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FileField=void 0;var l=function(e){function t(e,r,o,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=(a=n.call(this,e,r,o,i)).args.attrs||{};return u.type=u.type||a.args.type||"file",a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\tname    = "').concat(a.getName(),'"\n\t\t\t\t\ttype    = "').concat(u.type,'"\n\t\t\t\t\tcv-bind = "value"\n\t\t\t\t\tcv-ref  = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t\t<span style = "display:none" cv-if = "value">[[[value]]]</span>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e);var n=u(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Field);e.FileField=l})),require.register("curvature/form/Form.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Form=void 0;var o=t("../base/View"),i=t("./Field"),a=t("./FieldSet"),u=t("./SelectField"),c=t("./RadioField"),s=t("./HtmlField"),l=t("./HiddenField"),f=t("./ButtonField"),p=t("./TextareaField"),y=t("./multiField/View"),d=t("../base/Bindable");function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var j=function(e){function t(e){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};v(this,t),(r=n.call(this,{})).args.flatValue=r.args.flatValue||{},r.args.value=r.args.value||{},r.args.method=e._method||"GET",r.args.classes=r.args.classes||[],r.skeleton=e,r.args.bindTo("classes",(function(e){r.args._classes=e.join(" ")})),r.action="",r.template='\n\t\t\t<form\n\t\t\t\tclass     = "[[_classes]]"\n\t\t\t\tmethod    = "[[method]]"\n\t\t\t\tenctype   = "multipart/form-data"\n\t\t\t\tcv-on     = "submit:submit(event)"\n\t\t\t\tcv-ref    = "formTag:curvature/base/Tag"\n\t\t\t\tcv-each   = "fields:field"\n\t\t\t\tcv-expand = "attrs"\n\t\t\t>\n\t\t\t\t[[field]]\n\t\t\t</form>\n\t\t',r.args.fields=t.renderFields(e,w(r),o),r.fields=r.args.fields;var i=d.Bindable.makeBindable(w(r));return r.args.bindTo("value",(function(e){i.value=e})),r.args.bindTo("valueString",(function(e){i.json=e})),g(r,i)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e);var n=m(t);return function(e,t,n){t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"submit",value:function(e){this.args.valueString=JSON.stringify(this.args.value,null,4),this.dispatchEvent(new CustomEvent("submit",{details:{view:this}}))||(e.preventDefault(),e.stopPropagation())}},{key:"buttonClick",value:function(){}},{key:"formData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];for(var r in e||(e=new FormData),t||(t=this),t.args.fields)if(!t.args.fields[r]||!t.args.fields[r].disabled){var o=n.slice(0);if(o.push(r),t.args.fields[r]&&t.args.fields[r].hasChildren())this.formData(e,t.args.fields[r],o);else if(t.args.fields[r]){var i=t.args.fields[r].getName();if("file"==t.args.fields[r].args.type&&t.args.fields[r].tags.input.element.files&&t.args.fields[r].tags.input.element.files.length)if(t.args.fields[r].args.attrs.multiple)for(var a=t.args.fields[r].tags.input.element.files,u=0;u<a.length;u++)a[u]&&e.append(i+"[]",a[u]);else t.args.fields[r].tags.input.element.files[0]&&e.append(i,t.args.fields[r].tags.input.element.files[0]);else("file"!==t.args.fields[r].args.type||t.args.fields[r].args.value)&&e.append(i,void 0===t.args.fields[r].args.value?"":t.args.fields[r].args.value)}}return e}},{key:"queryString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var n in this.args.flatValue)e[n]=e[n]||this.args.flatValue[n];for(var r in e)t.push(r+"="+encodeURIComponent(e[r]));return t.join("&")}},{key:"populate",value:function(e){for(var t in e)this.args.value[t]=e[t]}},{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}}],[{key:"renderFields",value:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o={},v=function(v){if(o[v])return"continue";if("_"==v.substr(0,1))return"continue";var h=null,b=null;if(n&&(b=n instanceof t?n:n.form),r&&e[v].name in r)h=new r[e[v].name](e[v],b,n,v);else switch(e[v].type){case"fieldset":h=e[v].attrs&&e[v].attrs["data-multi"]?new y.View(e[v],b,n,v):new a.FieldSet(e[v],b,n,v);break;case"select":h=new u.SelectField(e[v],b,n,v);break;case"radios":h=new c.RadioField(e[v],b,n,v);break;case"html":h=new s.HtmlField(e[v],b,n,v);break;case"submit":case"button":h=new f.ButtonField(e[v],b,n,v);break;case"hidden":h=new l.HiddenField(e[v],b,n,v);break;case"textarea":h=new p.TextareaField(e[v],b,n,v);break;default:h=new i.Field(e[v],b,n,v)}o[v]=d.Bindable.make(h);var m=h.key;h.args.bindTo("value",(function(e,t,r){if(!isNaN(e)&&null!==e&&e.length&&e==+e&&e.length===(+e+"").length&&(e=+e),("html"!=r.type||r.contentEditable)&&"fieldset"!=r.type){if(r.disabled)return void delete b.args.flatValue[m];r.attrs=r.attrs||{};r.attrs.multiple;var o=Array.isArray(e),i=n.args.value[m];if(r.attrs.multiple&&o&&Array.isArray(i))for(var a in e)e[a]!==n.args.value[m][a]&&(n.args.value[m][a]=e[a]),n.args.value[m].splice(e.length);else n.args.value[m]=e;b.args.flatValue[m]=e,b.args.valueString=JSON.stringify(b.args.value,null,4)}})),h.render()};for(var h in e)v(h);return o}},{key:"_updateFields",value:function(e,t){for(var n in e.args.fields){var r=e.args.fields[n];t[n]&&(t[n].value&&(r.args.value=t[n].value),t[n].errors&&(r.args.errors=t[n].errors),t[n].title&&(r.args.title=t[n].title),t[n].options&&(r.args.options=t[n].options),t[n].attrs&&(r.args.attrs=t[n].attrs),r.children&&t[n].children&&this._updateFields(r,t[n].children))}}}]),t}(o.View);e.Form=j})),require.register("curvature/form/HiddenField.js",(function(e,t,n){"use strict";var r=t("./Field");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.HiddenField=void 0;var l=function(e){function t(e,r,o,i){var a;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.type="hidden";var u=(a=n.call(this,e,r,o,i)).args.attrs||{};return a.args.type=u.type="hidden",a.args.name=u.name=u.name||a.args.name||i,a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tstyle     = "display:none"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\t\ttype      = "hidden"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e);var n=u(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Field);e.HiddenField=l})),require.register("curvature/form/HtmlField.js",(function(e,t,n){"use strict";var r=t("./Field");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.HtmlField=void 0;var l=function(e){function t(e,r,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=n.call(this,e,r,o,i)).key=i,a.args.tagName=a.args.tagName||"div",a.args.displayValue=a.args.value,a.args.attrs=a.args.attrs||{},a.ignore=a.args.attrs["data-cv-ignore"]||!1,a.args.contentEditable=a.args.attrs.contenteditable||!1,a.args.bindTo("value",(function(e){a.tags.input&&a.tags.input.element!==document.activeElement&&(a.args.displayValue=e)})),a.template="<".concat(a.args.tagName,'\n\t\t\tname            = "').concat(a.getName(),'"\n\t\t\tcv-ref          = "input:curvature/base/Tag"\n\t\t\tcontenteditable = "[[contentEditable]]"\n\t\t\tcv-expand       = "attrs"\n\t\t\tcv-bind         = "$displayValue"\n\t\t\tcv-on           = "input:inputProvided(event);"\n\t\t></').concat(a.args.tagName,">"),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e);var n=u(t);return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"inputProvided",value:function(e){this.args.value=e.target.innerHTML}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){return this.key}}]),t}(r.Field);e.HtmlField=l})),require.register("curvature/form/RadioField.js",(function(e,t,n){"use strict";var r=t("./Field");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.RadioField=void 0;var l=function(e){function t(e,r,o,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=(a=n.call(this,e,r,o,i)).args.attrs||{};return a.args.name=u.name=u.name||a.args.name||i,a.args.value=a.args.value||"",a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each  = "options:option:optionText"/>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname      = "').concat(a.args.name,'"\n\t\t\t\t\t\t\ttype      = "radio"\n\t\t\t\t\t\t\tvalue     = "[[option]]"\n\t\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t\t\tcv-on     = "change:changed(event)"\n\t\t\t\t\t/>\n\t\t\t\t\t\t[[optionText]]\n\t\t\t\t\t</label>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e);var n=u(t);return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"getLabel",value:function(){for(var e in this.args.options)if(this.args.options[e]==this.args.value)return e}},{key:"changed",value:function(e){this.args.value=e.target.value}},{key:"postRender",value:function(){var e=this;this.args.bindTo("value",(function(t){return e.selectOptionByValue(t)})),this.args.options.bindTo((function(){return e.selectOptionByValue(e.args.value)}),{frame:1})}},{key:"selectOptionByValue",value:function(e){this.findTags("input").forEach((function(t){t.value==e&&(t.checked=!0)}))}}]),t}(r.Field);e.RadioField=l})),require.register("curvature/form/SelectField.js",(function(e,t,n){"use strict";var r=t("./Field");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,e},f:function e(){try{i||null==n.return||n.return()}finally{if(u)throw e}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.SelectField=void 0;var p=function(e){function t(e,r,o,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=(a=n.call(this,e,r,o,i)).args.attrs||{};return a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type||"select",'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<select\n\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-each   = "options:option:optionText"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t\t\t<option value = "[[option]]">[[optionText]]</option>\n\t\t\t\t</select>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e);var n=s(t);return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"postRender",value:function(){var e=this;this.args.bindTo("value",(function(t){return e.selectOptionByValue(t)})),this.args.options.bindTo((function(){return e.selectOptionByValue(e.args.value)}),{frame:1})}},{key:"selectOptionByValue",value:function(e){var t,n=this.tags.input.element,r=i(n.options);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.value==e&&(n.selectedIndex=o.index)}}catch(e){r.e(e)}finally{r.f()}}},{key:"getLabel",value:function(){for(var e in this.args.options)if(this.args.options[e]==this.args.value)return e}}]),t}(r.Field);e.SelectField=p})),require.register("curvature/form/TextareaField.js",(function(e,t,n){"use strict";var r=t("./Field");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.TextareaField=void 0;var l=function(e){function t(e,r,o,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=(a=n.call(this,e,r,o,i)).args.attrs||{};return u.type=u.type||"textarea",a.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(a.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<textarea\n\t\t\t\t\t\tname      = "').concat(a.getName(),'"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t></textarea>\n\t\t\t\t<cv-template cv-if = "attrs.data-caption">\n\t\t\t\t\t<p>[[attrs.data-caption]]</p>\n\t\t\t\t</cv-template>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e);var n=u(t);return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(r.Field);e.TextareaField=l})),require.register("curvature/form/multiField/CreateForm.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.CreateForm=void 0;var o=t("./FormWrapper");t("../../form/HiddenField");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=c(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(3>arguments.length?e:n):o.value}},u.apply(this,arguments)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var y=function(e){function t(e,r){var o,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return i(this,t),(o=n.call(this,e,r,"POST",a||{})).creating=!!e.publicId,o}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e);var n=l(t);return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"onLoad",value:function(e){for(var n in e.args.fields)if(e.args.fields[n].tags.input&&"hidden"!=e.args.fields[n].args.attrs.type){e.args.fields[n].tags.input.element.focus();break}u(p(t.prototype),"onLoad",this).call(this,e)}},{key:"onRequest",value:function(){return this.args.view.args.loading=!0,this.args.view.args.classes+=" loading",u(p(t.prototype),"onRequest",this).call(this)}},{key:"onResponse",value:function(e){return this.args.view.args.loading=!1,this.args.view.args.classes="",e.body?(this.args.wrapper?this.args.wrapper.refresh(e.body):this.args.view.addRecord(e.body),this.args.view.args.creating="",void u(p(t.prototype),"onResponse",this).call(this,e)):void u(p(t.prototype),"onResponse",this).call(this,e)}}]),t}(o.FormWrapper);e.CreateForm=y})),require.register("curvature/form/multiField/Form.js",(function(e,t,n){})),require.register("curvature/form/multiField/FormWrapper.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FormWrapper=void 0;var o=t("../../base/Repository"),i=t("../../form/Form"),a=t("../../toast/Toast"),u=(t("../../toast/ToastAlert"),t("../../base/View")),c=t("../../base/Router");function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,e},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var b=function(e){function t(e,r){var a,u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"GET",c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return f(this,t),(a=n.call(this,e)).path=r,a.args.method=u,a.args.action=a.args.action||null,a.args.form=null,a.args.title=null,a.args.class="",a.template='\n\t\t\t<div class = "form constrict [[class]]">\n\t\t\t\t<div cv-if = "title"><label>[[title]]</label></div>\n\t\t\t\t[[form]]\n\t\t\t</div>\n\t\t',a._onLoad=[],a._onSubmit=[],a._onRender=[],a._onRequest=[],a._onError=[],a._onResponse=[],r instanceof i.Form?a.loadForm(form,c):o.Repository.request(r).then((function(e){return e&&e.meta&&e.meta.form&&e.meta.form instanceof Object?(a.loadForm(new i.Form(e.meta.form,c)),void a.onLoad(a.args.form,e.body)):void console.warn("Cannot render form with ",e)})),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e);var n=d(t);return function(e,t,n){t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"loadForm",value:function(e){var t=this;this.args.form=e,this.args.form.addEventListener("submit",(function(n){n&&(n.preventDefault(),n.stopPropagation());var r=e.tags.formTag.element,i=r.getAttribute("action")||t.args.action||t.path,a=r.getAttribute("method")||t.args.method,u=e.args.flatValue;if("GET"==(a=a.toUpperCase())){var l={};for(var f in t.args.content&&t.args.content.args&&(t.args.content.args.page=0),l.page=0,u)"api"!=f&&(l[f]=u[f]);t.onRequest(l).then((function(){t.onResponse({}),c.Router.go(i+"?"+c.Router.queryToString(l)),t.update(l)})).catch((function(e){t.onRequestError(e)}))}else if("POST"==a){var p,y=e.formData(),d=s(y.entries());try{for(d.s();!(p=d.n()).done;)p.value}catch(e){d.e(e)}finally{d.f()}var v=t.onRequest(y);v&&v.then((function(){o.Repository.request(i,{api:"json"},y,!1,{progressDown:function(e){t.progressDown(e)},progressUp:function(e){t.progressUp(e)}}).then((function(e){t.onResponse(e)})).catch((function(e){t.onRequestError(e)}))}))}}))}},{key:"onRequest",value:function(e){var t=[];for(var n in this._onRequest){var r=this._onRequest[n](e,this);r&&t.push(r)}return 0==t.length?Promise.resolve():Promise.all(t)}},{key:"onRequestError",value:function(e){for(var t in this._onError)this._onError[t](e,this);if(e.messages)for(var n in e.messages)a.Toast.instance().alert(e.body&&e.body.id?"Success!":"Error!",e.messages[n],3500)}},{key:"onResponse",value:function(e){for(var t in this._onResponse)this._onResponse[t](e,this);if(e.messages)for(var n in e.messages)a.Toast.instance().alert(e.body&&e.body.id?"Success!":"Error!",e.messages[n],3500)}},{key:"onLoad",value:function(e,t){for(var n in this._onLoad)this._onLoad[n](this,e,t)}},{key:"customFields",value:function(){return{}}},{key:"submit",value:function(){}},{key:"progressUp",value:function(e){console.log(e.loaded,e.total,e.loaded/e.total)}},{key:"progressDown",value:function(e){console.log(e.loaded,e.total,e.loaded/e.total)}}]),t}(u.View);e.FormWrapper=b})),require.register("curvature/form/multiField/SearchForm.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.SearchForm=void 0;var o=t("../../base/Config"),i=t("./FormWrapper"),a=t("../../form/HiddenField"),u=t("../../base/Repository");function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(3>arguments.length?e:n):o.value}},l.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var h=o.Config.get("backend")||"//",b=function(e){function t(e,r){var o;return c(this,t),(o=n.call(this,e,r,"POST",{search:a.HiddenField})).superTemplate=o.template,o.args.records=[],o.selected=null,o.template="\n\t\t\t".concat(o.superTemplate,'\n\t\t\t<div cv-each = "records:record:r" class = "dropdown-results">\n\t\t\t\t<div\n\t\t\t\t\tcv-on         = "click:select(event)"\n\t\t\t\t\tdata-index    = "[[r]]"\n\t\t\t\t\tdata-publicId = "[[record.publicId]]"\n\t\t\t\t\tclass         = "[[record.classes]]"\n\t\t\t\t>\n\t\t\t\t\t[[record.title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'),o}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e);var n=y(t);return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"onLoad",value:function(e){var n=this;for(var r in e.args.fields)if(e.args.fields[r].tags.input&&"hidden"!=e.args.fields[r].args.attrs.type){e.args.fields[r].tags.input.element.focus();break}e.args.flatValue.bindTo("keyword",(function(e){n.args.records=[],n.selected=null,e&&(console.log(n.path,e),u.Repository.request(h+n.path,{keyword:e}).then((function(t){console.log(t.body),t.body&&(n.args.records=t.body.map((function(t){return t.classes="",t.title==e&&(t.classes="selected",n.selected=t),t})))})))})),l(v(t.prototype),"onLoad",this).call(this,e)}},{key:"onRequest",value:function(){return l(v(t.prototype),"onRequest",this).call(this)}},{key:"onResponse",value:function(e){l(v(t.prototype),"onResponse",this).call(this,e)}},{key:"select",value:function(e){var t=e.target.getAttribute("data-index"),n=(e.target.getAttribute("data-publicId"),this.args.records[t]);return console.log(n),this.args.view.addRecord(n),void this.args.view.addButtonClicked()}},{key:"onSubmit",value:function(e,t){return t.preventDefault(),t.stopPropagation(),this.selected&&(this.args.view.addRecord(this.selected),this.args.view.addButtonClicked()),!1}}]),t}(i.FormWrapper);e.SearchForm=b})),require.register("curvature/form/multiField/View.js",(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;var r=t("../../base/Config"),o=t("../../form/Form"),i=t("../../form/FieldSet"),a=t("./CreateForm"),u=t("./SearchForm"),c=(t("./FormWrapper"),t("./Wrapper"));function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var h=function(e){function t(e,r,o,i){var a;for(var u in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=n.call(this,e,r,o,i)).args._fields=[],a.dragging=!1,a.dropping=!1,a.args.fields)a.args._fields[+u+1]=a.wrapSubfield(a.args.fields[u]);return a.args.fields[-1].disable(),a.args._fields[0].addEventListener("attach",(function(e){return e.preventDefault()})),a.args.creating="",a.args.fieldType="",a.args.createForm=a.args.createForm||"",a.args.searchForm=a.args.searchForm||"",a.args.createFormReady=!1,a.setCreateForm({view:d(a)}),a.args.loader="...",a.args.addIcon="&#215;",a.args.addIcon="a",a.args.addIcon="+",a.args.draggable="true",a.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(a.args.name,'"\n\t\t\t\tdata-type  = "').concat(a.args.attrs.type,'"\n\t\t\t\tdata-multi = "').concat(a.args.attrs["data-multi"]?"true":"false",'"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\n\t\t\t\t<fieldset\n\t\t\t\t\tname  = "').concat(a.args.name,'"\n\t\t\t\t\tclass = "multi-field [[creating]] [[fieldType]]"\n\t\t\t\t>\n\n\t\t\t\t\t<div class = "record-list" cv-each = "_fields:field:f">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass     = "single-record"\n\t\t\t\t\t\t\tdata-for  = "[[f]]"\n\t\t\t\t\t\t>[[field]]</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = "overlay create">\n\t\t\t\t\t\t<div class = "form constrict">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcv-on = "click:addButtonClicked(event)"\n\t\t\t\t\t\t\t\tclass = "bubble bottom left-margin close"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t&#215;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t[[createForm]]\n\t\t\t\t\t\t[[searchForm]]\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = "overlay loading">\n\t\t\t\t\t\t[[loader]]\n\t\t\t\t\t</div>\n\t\t\t\t\t<div cv-if = "createFormReady" class="add-button-holder">\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcv-on = "click:addButtonClicked(event)"\n\t\t\t\t\t\t\tclass = "bubble bottom left-margin add"\n\t\t\t\t\t\t\ttab-index = "0"\n\t\t\t\t\t\t>[[addIcon]]</div>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t</fieldset>\n\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\n\t\t\t</label>\n\t\t'),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e);var n=p(t);return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"setCreateForm",value:function(e){var t=this,n="";r.Config.get("backend")&&(n=r.Config.get("backend")),!1!==this.args.attrs["data-create-endpoint"]&&void 0!==this.args.attrs["data-create-endpoint"]?(this.args.createForm=new a.CreateForm(Object.assign({},e),this.args.attrs["data-create-endpoint"]?n+this.args.attrs["data-create-endpoint"]:e.publicId?n+"".concat(this.args.attrs["data-endpoint"],"/").concat(e.publicId,"/edit"):n+"".concat(this.args.attrs["data-endpoint"],"/create")),this.args.createForm._onLoad.push((function(){t.args.createFormReady=!0}))):this.args.createFormReady=!0,this.args.attrs["data-endpoint"]&&(this.args.searchForm=new u.SearchForm(Object.assign({},e),n+this.args.attrs["data-endpoint"]))}},{key:"wrapSubfield",value:function(e){return new c.Wrapper({field:e,parent:this})}},{key:"addButtonClicked",value:function(){this.args.creating||(this.args.creating="creating")}},{key:"addRecord",value:function(e){for(var t in this.args.creating="",Array.isArray(e)||(e=[e]),e){this.args.fields[-1].constructor;var n,r=Object.assign({},this.args.fields[-1].skeleton),i=Object.values(this.args.fields).length-1;r=this.cloneSkeleton(r),(r=this.correctNames(r,i)).attrs=null!==(n=r.attrs)&&void 0!==n?n:{},r.attrs["data-array"]=!0;var a={};a[i]=r;var u=o.Form.renderFields(a,this)[i];this.args.fields[i]=u;var c=this.wrapSubfield(u);u.args.value.id=e[t].id||"",u.args.value.class=e[t].class||"",u.args.value.title=e[t].title||"",u.args.value.key=this.args._fields.length,console.log(this.args._fields),this.args._fields.push(c),c.refresh(e[t])}}},{key:"editRecord",value:function(e,t){this.setCreateForm({view:this,publicId:e.publicId,wrapper:t}),this.args.creating=this.args.creating?"":"creating"}},{key:"deleteImage",value:function(e){console.log(e,this.args.fields),this.args.fields[e].disable(),this.args._fields[e].args.classes="deleted"}},{key:"undeleteImage",value:function(e){this.args.fields[e].enable(),this.args._fields[e].args.classes=""}},{key:"cloneSkeleton",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n={};for(var r in Array.isArray(e)&&(n=[]),e)if("fields"!=r){if(!e[r]||"object"!==s(e[r])){n[r]=e[r];continue}n[r]=Object.assign({},this.cloneSkeleton(e[r],t+1))}return n}},{key:"correctNames",value:function(e,t){if(e.name=e.name.replace(/\[-1\]/,"[".concat(t,"]")),e.attrs.name=e.name,"children"in e)for(var n in e.children)e.children[n]=this.correctNames(e.children[n],t);return e}},{key:"drag",value:function(e){this.dragging=e.target}},{key:"dragOver",value:function(e){if(!this.dragging)return!1;for(var t=e.target;t&&!t.matches('[draggable="true"]');)t=t.parentNode;dropping&&(this.dropping=dropping,e.preventDefault())}},{key:"drop",value:function(e){e.stopPropagation();var t=this.dragging.querySelector("label"),n=this.dropping.querySelector("label"),r=t.getAttribute("for"),o=n.getAttribute("for"),i=this.extractIndex(r),a=this.extractIndex(o);if(i==a||i==a-1)return this.dragging=!1,void(this.dropping=!1);var u,c,s=t.querySelectorAll('[name^="'+r+'"]'),l=t.querySelectorAll('[for^="'+r+'"]'),f=n.querySelectorAll('[name^="'+o+'"]'),p=n.querySelectorAll('[for^="'+o+'"]'),y=this.dropping,d=0;for(var v in this.args.fields){var h=this.args.fields[v].tags.input.element,b=this.args.fields[v].tags.label.element,m=h.getAttribute("name");t==b&&(u=this.args.fields[v]),n==b&&(c=this.args.fields[v]);var g=this.extractIndex(m),w=!1;if(!(0>g)&&(i>a&&g>=a&&g<=i?(w=this.changeIndex(m,g+1),d=-1):i<a&&g<=a&&g>=i&&(w=this.changeIndex(m,g-1),d=0),!1!==w)){this.changeAttributePrefix(b,"for",m,w),this.args.fields[v].args.fieldName=w,this.changeAttributePrefix(h,"name",m,w);for(var O=h.parentNode.querySelectorAll('[name^="'+m+'"]'),j=0;j<O.length;j++)this.changeAttributePrefix(O[j],"name",m,w);for(var _=h.parentNode.querySelectorAll('[for^="'+m+'"]'),P=0;P<_.length;P++)this.changeAttributePrefix(_[P],"for",m,w)}}r=t.getAttribute("for"),o=n.getAttribute("for"),i=this.extractIndex(r),a=this.extractIndex(o),this.changeAttributePrefix(t,"for",r,this.changeIndex(r,a+d));for(var S=0;S<s.length;S++)this.changeAttributePrefix(s[S],"name",r,this.changeIndex(r,a+d));for(var k=0;k<l.length;k++)this.changeAttributePrefix(l[k],"for",r,this.changeIndex(r,a+d));u.args.fieldName=t.getAttribute("for"),this.changeAttributePrefix(n,"for",o,this.changeIndex(o,a+d+1));for(var E=0;E<f.length;E++)this.changeAttributePrefix(f[E],"name",o,this.changeIndex(o,a+d+1));for(var R=0;R<p.length;R++)this.changeAttributePrefix(p[R],"for",o,this.changeIndex(o,a+d+1));c.args.fieldName=n.getAttribute("for"),this.dragging.parentNode.insertBefore(this.dragging,y),this.dragging=!1,this.dropping=!1}},{key:"dragStop",value:function(){this.dragging=!1,this.dropping=!1}},{key:"changeAttributePrefix",value:function(e,t,n,r){e.getAttribute(t);var o=r+e.getAttribute(t).substring(n.length);e.setAttribute(t,o)}},{key:"extractIndex",value:function(e){var t;return!!(t=/\[(-?\d+)\]$/.exec(e))&&parseInt(t[1])}},{key:"changeIndex",value:function(e,t){return e.replace(/\[(-?\d+)\]$/,"["+t+"]")}},{key:"cancel",value:function(e){e.stopPropagation()}}]),t}(i.FieldSet);e.View=h})),require.register("curvature/form/multiField/Wrapper.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Wrapper=void 0;var o=t("../../base/Config"),i=t("../../base/View"),a=t("../../base/Repository");function u(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=n.call(this,e)).template='\n\t\t\t<div\n\t\t\t\tclass = "wrapped-field [[classes]]"\n\t\t\t\tcv-on = "click:editRecord(event, key)"\n\t\t\t\ttitle = "[[fieldName]]: [[id]]"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tcv-on = "click:deleteImage(event, key)"\n\t\t\t\t\tstyle = "display: inline; cursor:pointer;"\n\t\t\t\t>\n\t\t\t\t\t[[icon]]\n\t\t\t\t</div>\n\t\t\t\t<div class = "field-content">\n\t\t\t\t\t[[title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style = "display:none">[[field]]</div>\n\t\t',r.args.field=r.args.field||"!",r.args.keyword="",r.args.title="",r.args.record={},r.args.key=r.args.field.key,r.args.classes="",r.args.icon="×",r.deleted=!1,r.args.field.args.bindTo("fieldName",(function(e){r.args.fieldName=e})),r.args.fieldName=r.args.field.args.name,r.args.id=r.args.field.args.value.id,r.args.bindTo("id",(function(e){r.args.field.args.value.id=e})),r.args.field.args.value.bindTo("id",(function(e){e&&a.Repository.request(r.backendPath(),{id:e}).then((function(t){r.args.id=e;var n=t.body[0];return n?void r.refresh(n):(r.args.publicId=null,void(r.args.title=null))}))}),{wait:0}),r.args.field.args.value.bindTo("keyword",(function(e){r.args.keyword=e})),r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e);var n=s(t);return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"editRecord",value:function(){this.args.parent.editRecord(this.args.record,this)}},{key:"deleteImage",value:function(e,t){e.stopPropagation(),this.deleted?(this.args.icon="×",this.args.parent.undeleteImage(t),this.deleted=!1):(this.args.icon="↺",this.args.parent.deleteImage(t),this.deleted=!0)}},{key:"backendPath",value:function(){return(o.Config.get("backend")||"//")+this.args.parent.args.attrs["data-endpoint"]}},{key:"getRecordTitle",value:function(e){return e._titleField?e[e._titleField]:e.title||e.publicId||e.id}},{key:"refresh",value:function(e){for(var t in e)this.args[t]=e[t];this.args.record=e,this.args.title=this.getRecordTitle(e)}}]),t}(i.View);e.Wrapper=p})),require.register("curvature/input/Axis.js",(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Axis=void 0;var r,o=t("../base/Bindable");function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r=o.Bindable.NoGetters;var u=function(){function e(t){var n=t.deadZone,o=void 0===n?0:n,i=t.proportional;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),a(this,r,!0),a(this,"magnitude",0),a(this,"delta",0),this.proportional=void 0===i||i,this.deadZone=o}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"tilt",value:function(e){this.deadZone&&Math.abs(e)>=this.deadZone?e=(Math.abs(e)-this.deadZone)/(1-this.deadZone)*Math.sign(e):this.deadZone&&Math.abs(e)<this.deadZone&&(e=0),this.delta=(+(e-this.magnitude)).toFixed(3)-0,this.magnitude=(+e).toFixed(3)-0}},{key:"zero",value:function(){this.magnitude=this.delta=0}}]),e}();e.Axis=u})),require.register("curvature/input/Button.js",(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Button=void 0;var r,o=t("../base/Bindable");function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r=o.Bindable.NoGetters;var u=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),a(this,r,!0),a(this,"active",!1),a(this,"pressure",0),a(this,"delta",0),a(this,"time",0)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"update",value:function(){this.pressure?this.time++:!this.pressure&&0<this.time?this.time=-1:!this.pressure&&0>this.time&&this.time--,-1>this.time&&-1===this.delta&&(this.delta=0)}},{key:"press",value:function(e){this.delta=(+(e-this.pressure)).toFixed(3)-0,this.pressure=(+e).toFixed(3)-0,this.active=!0,this.time=0<this.time?this.time:0}},{key:"release",value:function(){this.active&&(this.delta=(+-this.pressure).toFixed(3)-0,this.pressure=0,this.active=!1)}},{key:"zero",value:function(){this.pressure=this.delta=0,this.active=!1}}]),e}();e.Button=u})),require.register("curvature/input/Gamepad.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Gamepad=void 0;var o,i=t("../base/Bindable"),a=t("../base/Mixin"),u=t("../mixin/EventTargetMixin"),c=t("./Axis"),s=t("./Button");function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var w={Space:0,Enter:0,NumpadEnter:0,ControlLeft:1,ControlRight:1,ShiftLeft:2,ShiftRight:2,KeyZ:3,KeyQ:4,KeyE:5,Digit1:6,Digit3:7,KeyW:12,KeyA:14,KeyS:13,KeyD:15,KeyH:112,KeyJ:113,KeyK:114,KeyL:115,KeyP:9,Pause:9,Tab:11,ArrowUp:12,ArrowDown:13,ArrowLeft:14,ArrowRight:15,Numpad4:112,Numpad2:113,Numpad8:114,Numpad6:115,Backquote:1010,NumpadAdd:1011,NumpadSubtract:1012,NumpadMultiply:1013,NumpadDivide:1014,Escape:1020};m(Array(12)).map((function(e,t){return w["F".concat(t)]=2e3+t})),o=i.Bindable.NoGetters;var O=function(e){function t(){var e,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=(r.keys,r.deadZone),a=void 0===i?0:i,u=r.gamepad,c=void 0===u?null:u,s=(r.keyboard,r.axisMap),f=void 0===s?null:s;return l(this,t),b(v(e=n.call(this)),o,!0),b(v(e),"axisMap",{12:-1,13:1,14:-0,15:0,112:-2,113:3,114:-3,115:2}),e.deadZone=a,e.gamepad=c,e.index=c.index,e.id=c.id,e.axisMap=f||e.axisMap,Object.defineProperties(v(e),{buttons:{value:{}},pressure:{value:{}},axes:{value:{}},keys:{value:{}}}),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e);var n=y(t);return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"update",value:function(){for(var e in this.buttons){this.buttons[e].update()}}},{key:"rumbleEffect",value:function(e){return this.gamepad.vibrationActuator.playEffect("dual-rumble",e)}},{key:"rumble",value:function(){var e;if(this.gamepad.vibrationActuator.pulse)return(e=this.gamepad.vibrationActuator).pulse.apply(e,arguments);this.rumbleEffect({duration:1e3,strongMagnitude:1,weakMagnitude:1})}},{key:"readInput",value:function(){if(this.gamepad){var e=this.gamepad.index+"",t=this.constructor;t.padsRead.has(e)||(t.padsRead=new Map(Object.entries(navigator.getGamepads())));var n=this.gamepad=t.padsRead.get(e);t.padsRead.delete(e);var r={},o={};if(n)for(var i in n.buttons){var a=n.buttons[i];a.pressed&&(this.press(i,a.value),r[i]=!0)}if(this.keyboard){for(var u in m(Array(10)))r[u]||0<this.keyboard.getKeyCode(u)&&(this.press(u,1),r[u]=!0);for(var c in w)if(!r[c]){var l=w[c];0<this.keyboard.getKeyCode(c)&&(this.press(l,1),r[l]=!0)}}if(n)for(var f in n.buttons)if(!r[f]){n.buttons[f].pressed||(this.release(f),o[f]=!0)}if(this.keyboard){for(var p in m(Array(10)))o[p]||r[p]||0>this.keyboard.getKeyCode(p)&&(this.release(p),o[p]=!0);for(var y in w){var d=w[y];o[d]||r[d]||0>this.keyboard.getKeyCode(y)&&(this.release(d),o[y]=!0)}}var v={};if(n)for(var h in n.axes){var b=n.axes[h];v[h]=!0,this.tilt(h,b)}for(var g in this.axisMap){this.buttons[g]||(this.buttons[g]=new s.Button);var O=this.axisMap[g],j=Math.sign(1/O),_=Math.abs(O);this.buttons[g].active?(v[_]=!0,this.tilt(_,j)):!v[_]&&this.tilt(_,0)}}}},{key:"tilt",value:function(e,t){this.axes[e]||(this.axes[e]=new c.Axis({deadZone:this.deadZone})),this.axes[e].tilt(t)}},{key:"press",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.buttons[e]||(this.buttons[e]=new s.Button),this.buttons[e].press(t)}},{key:"release",value:function(e){this.buttons[e]||(this.buttons[e]=new s.Button),this.buttons[e].release()}},{key:"serialize",value:function(){var e={};for(var t in this.buttons)e[t]=this.buttons[t].pressure;var n={};for(var r in this.axes)n[r]=this.axes[r].magnitude;return{axes:n,buttons:e}}},{key:"replay",value:function(e){if(e.buttons)for(var t in e.buttons)0<e.buttons[t]?this.press(t,e.buttons[t]):this.release(t);if(e.axes)for(var n in e.axes)e.axes[n].magnitude!==e.axes[n]&&this.tilt(n,e.axes[n])}},{key:"zero",value:function(){for(var e in this.axes)this.axes[e].zero();for(var t in this.buttons)this.buttons[t].zero()}}],[{key:"getPad",value:function(e){var t=this,n=e.index,r=void 0===n?void 0:n,o=e.deadZone,i=void 0===o?0:o,a=e.keys,u=void 0===a?{}:a,c=e.keyboard,s=void 0===c?null:c,l=e.axisMap,f=void 0===l?null:l;if(this.padsConnected.has(r))return this.padsConnected.get(r);var p=new Promise((function(e){addEventListener("gamepadconnected",(function(n){n.stopImmediatePropagation();var r=new t({gamepad:n.gamepad,deadZone:i,keys:u,keyboard:s,axisMap:f});t.padsConnected.set(n.gamepad.index,p),e(r)}),{once:!0})}));return p}}]),t}(a.Mixin.with(u.EventTargetMixin));e.Gamepad=O,b(O,"padsConnected",new Map),b(O,"padsRead",new Map)})),require.register("curvature/input/Keyboard.js",(function(e,t,n){"use strict";var r=t("../base/Bindable");function o(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Keyboard=void 0;var i=function(){function e(){var t=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.maxDecay=120,this.comboTime=500,this.listening=!1,this.focusElement=document.body,this[r.Bindable.NoGetters]=!0,Object.defineProperty(this,"combo",{value:r.Bindable.make([])}),Object.defineProperty(this,"whichs",{value:r.Bindable.make({})}),Object.defineProperty(this,"codes",{value:r.Bindable.make({})}),Object.defineProperty(this,"keys",{value:r.Bindable.make({})}),Object.defineProperty(this,"pressedWhich",{value:r.Bindable.make({})}),Object.defineProperty(this,"pressedCode",{value:r.Bindable.make({})}),Object.defineProperty(this,"pressedKey",{value:r.Bindable.make({})}),Object.defineProperty(this,"releasedWhich",{value:r.Bindable.make({})}),Object.defineProperty(this,"releasedCode",{value:r.Bindable.make({})}),Object.defineProperty(this,"releasedKey",{value:r.Bindable.make({})}),Object.defineProperty(this,"keyRefs",{value:r.Bindable.make({})}),document.addEventListener("keyup",(function(e){t.listening&&(0<t.keys[e.key]||!t.focusElement||document.activeElement===t.focusElement||t.focusElement.contains(document.activeElement)&&!document.activeElement.matches("input,textarea"))&&(e.preventDefault(),t.releasedWhich[e.which]=Date.now(),t.releasedCode[e.code]=Date.now(),t.releasedKey[e.key]=Date.now(),t.whichs[e.which]=-1,t.codes[e.code]=-1,t.keys[e.key]=-1)})),document.addEventListener("keydown",(function(e){t.listening&&(t.focusElement&&document.activeElement!==t.focusElement&&(!t.focusElement.contains(document.activeElement)||document.activeElement.matches("input,textarea"))||(e.preventDefault(),!e.repeat&&(t.combo.push(e.code),clearTimeout(t.comboTimer),t.comboTimer=setTimeout((function(){return t.combo.splice(0)}),t.comboTime),t.pressedWhich[e.which]=Date.now(),t.pressedCode[e.code]=Date.now(),t.pressedKey[e.key]=Date.now(),0<t.keys[e.key]||(t.whichs[e.which]=1,t.codes[e.code]=1,t.keys[e.key]=1))))}));var n=function(){for(var e in t.keys)0>t.keys[e]||(t.releasedKey[e]=Date.now(),t.keys[e]=-1);for(var n in t.codes)0>t.codes[n]||(t.releasedCode[n]=Date.now(),t.codes[n]=-1);for(var r in t.whichs)0>t.whichs[r]||(t.releasedWhich[r]=Date.now(),t.whichs[r]=-1)};window.addEventListener("blur",n),window.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState||n()}))}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"getKeyRef",value:function(e){return this.keyRefs[e]=this.keyRefs[e]||r.Bindable.make({})}},{key:"getKeyTime",value:function(e){var t=this.releasedKey[e],n=this.pressedKey[e];return n?!t||t<n?Date.now()-n:-1*(Date.now()-t):0}},{key:"getCodeTime",value:function(e){var t=this.releasedCode[e],n=this.pressedCode[e];return n?!t||t<n?Date.now()-n:-1*(Date.now()-t):0}},{key:"getWhichTime",value:function(e){var t=this.releasedWhich[e],n=this.pressedWhich[e];return n?!t||t<n?Date.now()-n:-1*(Date.now()-t):0}},{key:"getKey",value:function(e){return this.keys[e]?this.keys[e]:0}},{key:"getKeyCode",value:function(e){return this.codes[e]?this.codes[e]:0}},{key:"reset",value:function(){for(var e in this.keys)delete this.keys[e];for(var e in this.codes)delete this.codes[e];for(var e in this.whichs)delete this.whichs[e]}},{key:"update",value:function(){for(var e in this.keys)0<this.keys[e]?this.keys[e]++:this.keys[e]>-this.maxDecay?this.keys[e]--:delete this.keys[e];for(var e in this.codes){var t=this.releasedCode[e],n=this.pressedCode[e],r=this.getKeyRef(e);if(0<this.codes[e])return r.frames=this.codes[e]++,r.time=n?Date.now()-n:0,r.down=!0,!t||t<n?void 0:-1*(Date.now()-t);this.codes[e]>-this.maxDecay?(r.frames=this.codes[e]--,r.time=t-Date.now(),r.down=!1):(r.frames=0,r.time=0,r.down=!1,delete this.codes[e])}for(var e in this.whichs)0<this.whichs[e]?this.whichs[e]++:this.whichs[e]>-this.maxDecay?this.whichs[e]--:delete this.whichs[e]}}],[{key:"get",value:function(){return this.instance=this.instance||r.Bindable.make(new this)}}]),e}();e.Keyboard=i})),require.register("curvature/input/Mouse.js",(function(e,t,n){})),require.register("curvature/input/Sequence.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Sequence=void 0;var o,i=t("../base/Bindable"),a=t("../base/Mixin"),u=t("../mixin/EventTargetMixin");function c(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o=i.Bindable.NoGetters;var b=function(e){function t(e){var r,i=e.callback,a=e.keys,u=e.timing,c=e.gamepad;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),h(d(r=n.call(this)),o,!0),h(d(r),"lastTap",!1),h(d(r),"recent",[]),h(d(r),"callback",(function(){})),h(d(r),"timing",500),h(d(r),"keys","");var s=[i,u,a,c];return r.callback=s[0],r.timing=s[1],r.keys=s[2],r.gamepad=s[3],r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e);var n=p(t);return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"check",value:function(e){var t=this.recent,n=Date.now();n+-this.lastTap>this.timing&&t.splice(0),t.push({code:e,time:Date.now()});var r=t.map((function(e){return e.code})).join(","),o=this.keys.join(",");this.lastTap=n;var i=[];for(var a in t){t[a];var u=t.slice(a),s=u.map((function(e){return e.code})).join(",");if(s===o.substr(0,s.length)){i.push.apply(i,c(u)),this.dispatchEvent(new CustomEvent("advance",{detail:{matched:i,recent:t,keys:this.keys,length:u.length}}));break}}return i.length?void(o===r.substr(-o.length)&&this.dispatchEvent(new CustomEvent("complete",{detail:{matched:i,recent:t,keys:this.keys,length:i.length}}))):void this.dispatchEvent(new CustomEvent("cancel",{detail:{matched:i,recent:t,keys:this.keys,length:i.length}}))}}]),t}(a.Mixin.with(u.EventTargetMixin));e.Sequence=b})),require.register("curvature/mixin/EventTargetMixin.js",(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventTargetMixin=void 0;var r,o=t("../base/Mixin");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,e},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}function u(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Symbol("Target");var l=Symbol("Parent"),f=(Symbol("CallHandler"),Symbol("Capture")),p=Symbol("Bubble"),y=Symbol("HandlersBubble"),d=Symbol("HandlersCapture"),v=(i(r={},o.Mixin.Constructor,(function(){this[d]=new Map,this[y]=new Map})),i(r,"setParent",(function(e){this[l]=e})),i(r,"dispatchEvent",(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];"string"==typeof r&&(r=new CustomEvent(r),t[0]=r),r.cvOriginalTarget=this,r.cvPath=r.cvPath||[],this[f].apply(this,t);var o=[];r.cvTarget=this,this[d].has(r.type)&&o.push.apply(o,u(this[d].get(r.type))),this[y].has(r.type)&&o.push.apply(o,u(this[y].get(r.type)));for(var i,a=0,c=o;a<c.length&&!1!==(i=(0,c[a])(r));a++);return!1!==i&&this[p].apply(this,t),this[l]||Object.freeze(r.cvPath),r.returnValue})),i(r,"addEventListener",(function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!0===n&&(n={useCapture:!0});var r=y;n.useCapture&&(r=d),this[r].has(e)||this[r].set(e,new Set),this[r].get(e).add(t)})),i(r,"removeEventListener",(function(e,t,n){!0===n&&(n={useCapture:!0});var r=y;n.useCapture&&(r=d),this[r].has(e)&&this[r].get(e).delete(t)})),i(r,f,(function(){var e,t=0>=arguments.length?void 0:arguments[0];if(t.cvPath.push(this),this[l]){var n=(e=this[l])[f].apply(e,arguments);if(!1!==n&&this[l][d].has(t.type)){t.cvTarget=this[l];var r,o=a(this[l][d].get(t.type));try{for(o.s();!(r=o.n()).done;){var i=r.value;if(!1===(n=i(t)))break}}catch(e){o.e(e)}finally{o.f()}return n}}})),i(r,p,(function(){var e,t=0>=arguments.length?void 0:arguments[0];if(t.bubbles&&this[l]){var n,r;if(!this[l][y].has(t.type))return(n=this[l])[p].apply(n,arguments);t.cvTarget=this[l];var o,i=a(this[l][y].get(t.type));try{for(i.s();!(o=i.n()).done;){var u=o.value;if(!1===(r=u(t)))return r}}catch(e){i.e(e)}finally{i.f()}return(e=this[l])[p].apply(e,arguments)}})),r);e.EventTargetMixin=v,Object.defineProperty(v,"Parent",{value:l}),Object.defineProperties(v,{ALLOW_PROPAGATION:{value:0},STOP_PROPAGATION:{value:1},ZERO_PROPAGATION:{value:2}})})),require.register("curvature/mixin/PromiseMixin.js",(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PromiseMixin=void 0;var r,o=t("../base/Mixin");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=Symbol("Promise"),u=Symbol("Accept"),c=Symbol("Reject"),s=(i(r={},o.Mixin.Constructor,(function(){var e=this;this[a]=new Promise((function(t,n){e[u]=t,e[c]=n}))})),i(r,"then",(function(){var e;return(e=this[a]).then.apply(e,arguments)})),i(r,"catch",(function(){var e;return(e=this[a]).catch.apply(e,arguments)})),i(r,"finally",(function(){var e;return(e=this[a]).finally.apply(e,arguments)})),r);e.PromiseMixin=s,Object.defineProperty(s,"Reject",{value:c}),Object.defineProperty(s,"Accept",{value:u})})),require.register("curvature/model/Database.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Database=void 0;var o=t("../base/Bindable"),i=t("../base/Mixin"),a=t("../mixin/EventTargetMixin");function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var v=Symbol("BeforeWrite"),h=Symbol("AfterWrite"),b=Symbol("BeforeDelete"),m=Symbol("AfterDelete"),g=Symbol("BeforeInsert"),w=Symbol("AfterInsert"),O=Symbol("BeforeUpdate"),j=Symbol("AfterUpdate"),_=Symbol("BeforeRead"),P=Symbol("AfterRead"),S=Symbol("PrimaryKey"),k=Symbol("Connection"),E=Symbol("Instances"),R=(Symbol("HighWater"),Symbol("Metadata")),T=Symbol("Timers"),C=Symbol("Target"),A=(Symbol("Store"),Symbol("Each")),x=Symbol("Name"),B=Symbol("Bank"),M=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=n.call(this),Object.defineProperty(y(r),k,{value:e}),Object.defineProperty(y(r),x,{value:e.name}),Object.defineProperty(y(r),T,{value:{}}),Object.defineProperty(y(r),R,{value:{}}),Object.defineProperty(y(r),B,{value:{}}),r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(t,e);var n=f(t);return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"select",value:function(e){var t=this,n=e.store,r=e.index,o=e.range,i=void 0===o?null:o,a=e.ranges,u=void 0===a?[]:a,c=e.direction,s=void 0===c?"next":c,l=e.limit,f=void 0===l?0:l,p=e.offset,y=void 0===p?0:p,d=e.type,v=void 0!==d&&d,h=e.origin,b=void 0===h?void 0:h,m=e.map,g=void 0===m?void 0:m,w=this[k].transaction(n,"readonly").objectStore(n),O=r?w.index(r):w;return u&&u.length||(u=[i]),{each:this[A](v,O,s,u,f,y,b,g),one:this[A](v,O,s,u,1,y,b,g),then:function(e){return t[A](v,O,s,u,f,y,b,g)((function(e){return e})).then(e)}}}},{key:"insert",value:function(e,n){var r=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this[B][e]=this[B][e]||{};var a=this[k].transaction([e],"readwrite"),u=a.objectStore(e),c=this[B][e],s=!0;Array.isArray(n)||(n=[n],s=!1);var l,f=n.map((function(n){return new Promise((function(s,l){n=o.Bindable.make(n);var f={database:r[x],record:n,store:e,type:"write",subType:"insert",origin:i},p=n[t.BeforeWrite]?n[t.BeforeWrite](f):null,y=n[t.BeforeInsert]?n[t.BeforeInsert](f):null,d=u.add(Object.assign({},o.Bindable.shuck(n)));!1===p||!1===y||(d.onerror=function(e){r.dispatchEvent(new CustomEvent("writeError",{detail:f})),l(e)},d.onsuccess=function(o){var u=o.target.result;if(c[u]=n,f.key=t.getPrimaryKey(n),r.dispatchEvent(new CustomEvent("write",{cancelable:!0,detail:f}))){if(n[S]=Symbol.for(u),r[R][e]||(r[R][e]=r.getStoreMeta(e,"store",{})),r[R][e]){var l=r.checkHighWaterMark(e,n),p=r.checkLowWaterMark(e,n),y=r[R][e],d=n[y.highWater];i.setHighWater&&l<d&&r.setHighWaterMark(e,n,i,"insert"),i.setLowWater&&p>d&&r.setLowWaterMark(e,n,i,"insert")}n[t.AfterInsert]&&n[t.AfterInsert](f),n[t.AfterWrite]&&n[t.AfterWrite](f)}else a.abort();s(n)})}))}));return l=s?Promise.allSettled(f):f[0],Promise.all(f).then((function(){return a.commit&&a.commit()})),l}},{key:"update",value:function(e,n){var r=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!n[S])throw Error("Value provided is not a DB record!");return new Promise((function(a,u){var c=r[k].transaction([e],"readwrite"),s=c.objectStore(e),l={database:r[x],key:t.getPrimaryKey(n),record:n,store:e,type:"write",subType:"update",origin:i};n[t.AfterInsert]&&n[t.AfterInsert](l),n[t.AfterWrite]&&n[t.AfterWrite](l);var f=n[t.BeforeWrite]?n[t.BeforeWrite](l):null,p=n[t.BeforeUpdate]?n[t.BeforeUpdate](l):null;if(!1!==f&&!1!==p){var y=s.put(Object.assign({},o.Bindable.shuck(n)));y.onerror=function(e){r.dispatchEvent(new CustomEvent("writeError",{detail:l})),u(e)},y.onsuccess=function(t){if(r.dispatchEvent(new CustomEvent("write",{cancelable:!0,detail:l}))){if(r[R][e]||(r[R][e]=r.getStoreMeta(e,"store",{})),r[R][e]){var o=r.checkHighWaterMark(e,n),u=r.checkLowWaterMark(e,n),s=r[R][e],f=n[s.highWater];i.setHighWater&&o<f&&r.setHighWaterMark(e,n,i,"insert"),i.setLowWater&&u>f&&r.setLowWaterMark(e,n,i,"insert")}c.commit&&c.commit()}else c.abort();a(t)}}}))}},{key:"delete",value:function(e,n){var r=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;if(!n[S])throw Error("Value provided is not a DB record!");return new Promise((function(i,a){var u=r[k].transaction([e],"readwrite"),c=u.objectStore(e),s={database:r[x],record:n,key:t.getPrimaryKey(n),store:e,type:"write",subType:"delete",origin:o};if(!1!==(n[t.BeforeDelete]?n[t.BeforeDelete](s):null)){var l=c.delete(n.id);n[S]=void 0,n[t.AfterDelete]&&n[t.AfterDelete](s),l.onerror=function(e){s.original=e;var t=new CustomEvent("writeError",{detail:s});r.dispatchEvent(t),a(e)},l.onsuccess=function(e){s.original=e;var t=new CustomEvent("write",{detail:s});r.dispatchEvent(t),u.commit&&u.commit(),i(t)}}}))}},{key:"clear",value:function(e){var t=this;return new Promise((function(n,r){var o=t[k].transaction([e],"readwrite"),i=o.objectStore(e).clear(),a={database:t[x],store:e,type:"write",subType:"clear",origin:origin};i.onerror=function(e){a.original=e;var n=new CustomEvent("writeError",{detail:a});t.dispatchEvent(n),r(e)},i.onsuccess=function(e){a.original=e;var r=new CustomEvent("write",{detail:a});t.dispatchEvent(r),o.commit&&o.commit(),n(r)}}))}},{key:"listStores",value:function(){return u(this[k].objectStoreNames)}},{key:"listIndexes",value:function(e){return u(this[k].transaction([e]).objectStore(e).indexNames)}},{key:A,value:function(e,n,r,i,a,u,c,s){var l=this;return function(f){return Promise.all(i.map((function(i){return new Promise((function(p){var y=n.openCursor(i,r),d=0;y.addEventListener("success",(function(r){var i=r.target.result;if(!i)return p({record:null,result:null,index:d});l[B][void 0]=l[B][void 0]||{};var y=l[B][void 0],v=i.primaryKey,h=e?e.from(i.value):i.value,b=o.Bindable.makeBindable(h),m={database:l[x],key:t.getPrimaryKey(b),record:h,store:n.name,type:"read",subType:"select",origin:c},g=h[t.BeforeRead]?h[t.BeforeRead](m):null;if(u>d++||!1===g)return i.continue();y[v]?Object.assign(y[v],h):(h[S]=Symbol.for(v),y[v]=h);var w=i.source;w.objectStore?w.objectStore.name:n.name;if(m.record=h,y[v][t.AfterRead]&&y[v][t.AfterRead](m),l.dispatchEvent(new CustomEvent("read",{detail:m,cancelable:!0}))){var O=e?e.from(y[v]):y[v];O[S]=Symbol.for(v);var j=s?s(O):O,_=f?f(j,d):j;if(a&&d-u>=a)return u+=a,p({mapped:j,result:_,index:d})}i.continue()}))}))}))).then((function(e){return 1===e.length?e[0]:e}))}}},{key:"setStoreMeta",value:function(e,t,n){localStorage.setItem("::::cvdb::".concat(e,"::").concat(t),JSON.stringify(n))}},{key:"getStoreMeta",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=localStorage.getItem("::::cvdb::".concat(e,"::").concat(t)),o=null===r?n:JSON.parse(r);return null===o?n:o}},{key:"createObjectStore",value:function(e,t){var n=this[k].createObjectStore(e,t);return this.setStoreMeta(e,"store",t),n}},{key:"deleteObjectStore",value:function(e){return this[k].deleteObjectStore(e)}},{key:"checkHighWaterMark",value:function(e){var t=this.getStoreMeta(e,"highWater",0);return t}},{key:"setHighWaterMark",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,o=this[R][e],i=t[o.highWater],a=this.getStoreMeta(e,"highWater",0);this.setStoreMeta(e,"highWater",i),this.dispatchEvent(new CustomEvent("highWaterMoved",{detail:{database:this[x],record:t,store:e,type:"highWaterMoved",subType:r,origin:n,oldValue:a,value:i}}))}},{key:"checkLowWaterMark",value:function(e){var t=this.getStoreMeta(e,"lowWater",1/0);return t}},{key:"setLowWaterMark",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,o=this[R][e],i=t[o.highWater],a=this.getStoreMeta(e,"lowWater",null);this.setStoreMeta(e,"lowWater",i),this.dispatchEvent(new CustomEvent("lowWaterMoved",{detail:{database:this[x],record:t,store:e,type:"lowWaterMoved",subType:r,origin:n,oldValue:a,value:i}}))}}],[{key:"open",value:function(e){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this[E][e]?this[E][e]:this[E][e]=new Promise((function(o,i){var a=indexedDB.open(e,r);a.onerror=function(e){t.dispatchEvent(new CustomEvent("error",{detail:{database:n[x],error:e,store:void 0,type:"read",subType:"select"}})),i(e)},a.onsuccess=function(e){var t=new n(e.target.result);o(t)},a.onupgradeneeded=function(e){var t=e.target.result;t.addEventListener("error",(function(e){return console.error(e)}));for(var o=new n(t),i=e.oldVersion+1;i<=r;i+=1)o["_version_"+i](t)}}))}},{key:"getPrimaryKey",value:function(e){return e[S]?e[S]:null}},{key:"destroyDatabase",value:function(){var e=this;return new Promise((function(n,r){var o=indexedDB.delete(dbName);o.onerror=function(e){t.dispatchEvent(new CustomEvent("error",{detail:{database:dbName,error:e,type:"destroy"}})),r(e)},o.onsuccess=function(){delete e[E][dbName],n(dbName)}}))}}]),t}(i.Mixin.with(a.EventTargetMixin));e.Database=M,Object.defineProperty(M,E,{value:[]});try{Object.defineProperty(M,C,{value:new EventTarget})}catch(e){Object.defineProperty(M,C,{value:document.createDocumentFragment()})}Object.defineProperty(M,"BeforeDelete",{value:b}),Object.defineProperty(M,"AfterDelete",{value:m}),Object.defineProperty(M,"BeforeWrite",{value:v}),Object.defineProperty(M,"AfterWrite",{value:h}),Object.defineProperty(M,"BeforeInsert",{value:g}),Object.defineProperty(M,"AfterInsert",{value:w}),Object.defineProperty(M,"BeforeUpdate",{value:O}),Object.defineProperty(M,"AfterUpdate",{value:j}),Object.defineProperty(M,"BeforeRead",{value:_}),Object.defineProperty(M,"AfterRead",{value:P}),Object.defineProperty(M,"PKSymbol",{value:S});var D=function(e){Object.defineProperty(M,e,{value:function(){var t;return(t=M[C])[e].apply(t,arguments)}})};for(var I in["addEventListener","removeEventListener","dispatchEvent"])D(I)})),require.register("curvature/model/Model.js",(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var r=t("../base/Cache"),o=t("../base/Bindable"),i=t("./Database");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,e},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}function u(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=Symbol("Changed"),d=Symbol("Deleted"),v=Symbol("Saved"),h=Symbol("Keys"),b=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"id",void 0),p(this,"class",void 0),Object.defineProperty(this,y,{value:o.Bindable.make({})}),Object.defineProperty(this,d,{writable:!0,value:!1}),Object.defineProperty(this,v,{writable:!0,value:!1}),Object.defineProperty(this,h,{writable:!0,value:new Set}),o.Bindable.make(this)}return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"consume",value:function(t){var n=this,o=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],c=e.keyProps,s=function(e,t){if(t&&"object"===l(t)&&t.constructor.keyProps){var i=t.constructor.keyProps.map((function(e){return t[e]})).join("::"),a=r.Cache.load(i,!1,"models-by-type-and-publicId");a&&(a.consume(t),t=a)}!o&&n[y][e]||(n[e]=t)};i.Database.PKSymbol in t&&s(i.Database.PKSymbol,t[i.Database.PKSymbol]),this[h]=new Set([].concat(u(this[h]),u(Object.keys(this)),u(Object.keys(t))));var f,p=a(this[h]);try{for(p.s();!(f=p.n()).done;){var d=f.value;(o||!this[y][d])&&(c.includes(d)||d in t&&s(d,t[d]))}}catch(e){p.e(e)}finally{p.f()}}},{key:"changed",value:function(){this[v]=!1}},{key:"markDeleted",value:function(){for(var e in this[y])this[y][e]=!1;this[d]=!0,this[v]=!1}},{key:"markStored",value:function(){for(var e in this)this[y][e]=!1;this[d]=!1,this[v]=!0}},{key:"isSaved",value:function(){return this[v]}}],[{key:"keyProps",get:function(){return["id","class"]}},{key:"from",value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=this.keyProps,o=n.map((function(t){return e[t]}));o.unshift(this.name);var i,u=o.join("::"),c="models-by-type-and-publicId",s=r.Cache.load(u,!1,c),f=s||new this,p=a(n);try{for(p.s();!(i=p.n()).done;){var d,h,b=i.value;f[b]=null!==(d=null!==(h=f[b])&&void 0!==h?h:e[b])&&void 0!==d?d:null}}catch(e){p.e(e)}finally{p.f()}if(f.consume(e),!s){r.Cache.store(u,f,0,c);var m=!1;f.bindTo((function(e,t,n){"symbol"===l(t)||e===n[t]||(f[y][t]=m,f[v]=!m&&f[v])})),0===Object.keys(f[y]).length&&(f[v]=t),m=!0}return f}}]),e}();e.Model=b,Object.defineProperty(b,"Changed",{value:y}),Object.defineProperty(b,"Deleted",{value:d}),Object.defineProperty(b,"Saved",{value:v})})),require.register("curvature/model/SourceWorker.js",(function(e,t,n){})),require.register("curvature/model/Store.js",(function(e,t,n){"use strict";function r(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Store=void 0;var o=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"storeName","test-store")}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"select",value:function(e){e.index,e.range,e.ranges,e.direction,e.limit,e.offset,e.type,e.origin,e.map}},{key:"insert",value:function(){}},{key:"update",value:function(){}},{key:"delete",value:function(){}},{key:"getMeta",value:function(){}},{key:"setMeta",value:function(){}},{key:"listIndexes",value:function(){}},{key:"clear",value:function(){}}],[{key:"setHighWaterMark",value:function(){}},{key:"setLowWaterMark",value:function(){}},{key:"checkHighWaterMark",value:function(){}},{key:"checkLowWaterMark",value:function(){}},{key:"create",value:function(){}},{key:"delete",value:function(){}}]),e}();e.Store=o})),require.register("curvature/net/Elicit.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Elicit=void 0;var o=t("curvature/base/Mixin"),i=t("curvature/mixin/EventTargetMixin"),a=t("curvature/mixin/PromiseMixin");function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var y=Symbol("IterateDownload"),d=Symbol("Retry"),v=Symbol("HandleFirstByte"),h=Symbol("HandleProgress"),b=Symbol("HandleComplete"),m=Symbol("HandleHeaders"),g=Symbol("HandleClose"),w=Symbol("HandleError"),O=Symbol("HandleOpen"),j=Symbol("HandleFail"),_=Symbol("LastChunkSize"),P=Symbol("LastChunkTime"),S=Symbol("Options"),k=Symbol("Fetch"),E=Symbol("Type"),R=Symbol("Url"),T=Symbol("RetriesLeft"),C=Symbol("TimeoutLeft"),A=Symbol("Timeout"),x=Symbol("Timer"),B=Symbol("Canecller"),M=Symbol("Caneclled"),D=Symbol("Paused"),I=Symbol("Received"),L=Symbol("Length"),N=Symbol("Opened"),F=Symbol("Closed"),q=Symbol("Start"),W=Symbol("First"),V=Symbol("End"),U=function(e){function t(e){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return u(this,t),(r=n.call(this))[T]=o.retries||5,r[A]=o.timeout||4500,r[C]=o.maxTimeout||r[A]*r[T],r[P]=0,r[_]=0,r[M]=!1,r[I]=0,r[D]=!1,r[F]=0,r[S]=Object.assign({},o),r[R]=e,o.defer||r.open(),r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e);var n=l(t);return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"open",value:function(){var e=this;if(!this[N]||this[F]){this[q]||(this[q]=Date.now()),this[B]=new AbortController,this[S].signal=this[B].signal,this[N]=Date.now(),this[F]=0,this[W]=0,this[k]=fetch(this[R],this[S]).then((function(t){return e[O](t)})).catch((function(t){return e[w](t)}));this[x]=setTimeout((function(){if(!e[W]){if(e[B].abort(),e[g](),e[C]=Math.max(0,e[C]-e[A]),!e[C])return;e[j](new Error("Timed out."))}}),this[A])}}},{key:"headers",value:function(){return this[k].then((function(e){var t=e.response;e.stream;return t.headers}))}},{key:"json",value:function(){var e=this;return this[k].then((function(t){t.response;var n=t.stream;return new Response(n,{headers:{"Content-Type":e.type}}).json()}))}},{key:"text",value:function(){var e=this;return this[k].then((function(t){t.response;var n=t.stream;return new Response(n,{headers:{"Content-Type":e.type}}).text()}))}},{key:"css",value:function(){return this.text().then((function(e){var t=new CSSStyleSheet;return t.replace(e),t}))}},{key:"blob",value:function(){var e=this;return this[k].then((function(t){t.response;var n=t.stream;return new Response(n,{headers:{"Content-Type":e.type}}).blob()}))}},{key:"objectUrl",value:function(){return this.blob().then((function(e){return URL.createObjectURL(e)}))}},{key:"dataUri",value:function(){return this.blob().then((function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){return t(r.result)},r.onerror=function(){return n(r.error)},r.onabort=function(){return n(new Error("Read aborted"))},r.readAsDataURL(e)}))}))}},{key:"buffer",value:function(){return this.blob().then((function(e){return e.arrayBuffer()}))}},{key:"bytes",value:function(){return this.buffer().then((function(e){return new Uint8Array(e)}))}},{key:"cancel",value:function(){this.emitCancelEvent()&&(this[B].abort(),this[M]=!0,this.emitCancelledEvent())}},{key:"pause",value:function(){this[V]||this[D]||this[F]||!this.emitPauseEvent()||(this[D]=!0,this.emitPausedEvent())}},{key:"unpause",value:function(){!this[V]&&this[D]&&this.emitUnpauseEvent()&&(this[D]=!1,this.emitUnpausedEvent())}},{key:"done",get:function(){return!!this[V]}},{key:"type",get:function(){return this[E]}},{key:"totalTime",get:function(){return this[V]?this[V]-this[q]:Date.now()-this[q]}},{key:"waitTime",get:function(){return this[W]?this[W]-this[N]:Date.now()-this[N]}},{key:"loadTime",get:function(){return this[N]?this[F]?this[F]-this[W]:Date.now()-this[W]:0}},{key:"speed",get:function(){return this[N]?((e=this[V]?this[V]-this[P]:Date.now()-this[P])||(e=.01),this[_]/e):0;var e}},{key:"received",get:function(){return this[I]}},{key:"length",get:function(){return this[L]}},{key:"isPaused",get:function(){return this[D]}},{key:y,value:function(e,t,n){var r=this;this[h](n,0,null);var o=Date.now(),i=1,a=function(){return r[M]?e.cancel():r[D]?new Promise((function(e){setTimeout((function(){return e(a())}),100)})):e.read().then((function(e){return function(e){var u=e.done,c=e.value;return u?(t.close(),r[b]()):(t.enqueue(c),r[I]+=c.length,r[W]||r[v](c),r[h](n,r[I]),r[P]=o,r[_]=i,o=Date.now(),i=c.length,a())}(e)})).catch((function(e){return r[w](e)}))};return a()}},{key:d,value:function(){if(this.emitRetryEvent())return 0>=this[T]?void 0:(this[B].abort(),this[g](),this[I]=0,this[T]--,this.open())}},{key:O,value:function(e){var t=e.body.getReader(),n=this[L]||+e.headers.get("Content-Length"),r=this[r]||e.headers.get("Content-Type");this[L]=n,this[E]=r,this[m](e.headers);var o=this,i=new ReadableStream({start:function(e){o[y](t,e,n)}});return{response:e,stream:i}}},{key:g,value:function(){this[F]=Date.now(),this.emitCloseEvent()}},{key:m,value:function(e){this.emitHeadersEvent(e)}},{key:h,value:function(e,t,n){this.emitProgressEvent(e,t,n)}},{key:b,value:function(){this[V]=Date.now(),this[g](),this.emitCompleteEvent(),this[a.PromiseMixin.Accept]()}},{key:w,value:function(e){return console.warn(e),this.emitErrorEvent(e)?this[j](e):this[d]()}},{key:j,value:function(e){return this[V]=Date.now(),this[g](),this.emitFailEvent(e),this[a.PromiseMixin.Reject](e)}},{key:v,value:function(e){clearInterval(this[x]),this[W]=Date.now(),this.emitFirstByteEvent(e)}},{key:"emitProgressEvent",value:function(e,t,n){var r=e?t/e:0,o=this.totalTime,i=this.loadTime,a=this.waitTime,u=this.speed;return this.dispatchEvent(new CustomEvent("progress",{detail:{length:e,received:t,done:r,speed:u,loadTime:i,waitTime:a,totalTime:o,value:n}}))}},{key:"emitOpenEvent",value:function(){return this.dispatchEvent(new CustomEvent("open"))}},{key:"emitCloseEvent",value:function(){return this.dispatchEvent(new CustomEvent("close"))}},{key:"emitFirstByteEvent",value:function(e){return this.dispatchEvent(new CustomEvent("firstByte",{detail:{received:e}}))}},{key:"emitHeadersEvent",value:function(e){return this.dispatchEvent(new CustomEvent("headers",{detail:{headers:e}}))}},{key:"emitCompleteEvent",value:function(){return this.dispatchEvent(new CustomEvent("complete"))}},{key:"emitErrorEvent",value:function(){return this.dispatchEvent(new CustomEvent("error",{cancelable:0<this[T]}))}},{key:"emitRetryEvent",value:function(){return this.dispatchEvent(new CustomEvent("retry",{cancelable:!0}))}},{key:"emitFailEvent",value:function(){return this.dispatchEvent(new CustomEvent("fail"))}},{key:"emitPauseEvent",value:function(){return this.dispatchEvent(new CustomEvent("pause",{cancelable:!0}))}},{key:"emitPausedEvent",value:function(){this.dispatchEvent(new CustomEvent("paused"))}},{key:"emitUnpauseEvent",value:function(){return this.dispatchEvent(new CustomEvent("unpause",{cancelable:!0}))}},{key:"emitUnpausedEvent",value:function(){this.dispatchEvent(new CustomEvent("unpaused"))}},{key:"emitCancelEvent",value:function(){return this.dispatchEvent(new CustomEvent("cancel",{cancelable:!0}))}},{key:"emitCancelledEvent",value:function(){return this.dispatchEvent(new CustomEvent("cancelled"))}}]),t}(o.Mixin.with(i.EventTargetMixin,a.PromiseMixin));e.Elicit=U})),require.register("curvature/net/RtcClient.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.RtcClient=void 0;var o=t("curvature/base/Mixin"),i=t("curvature/mixin/EventTargetMixin");function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(l(r=n.call(this)),"candidateTimeout",500),r.peerClient=new RTCPeerConnection(e),r.peerClientChannel=r.peerClient.createDataChannel("chat"),r.peerClientChannel.addEventListener("open",(function(e){var t=new CustomEvent("open",{detail:e.data});t.originalEvent=e,r.dispatchEvent(t),r.connected=!0})),r.peerClientChannel.addEventListener("close",(function(e){var t=new CustomEvent("close",{detail:e.data});t.originalEvent=e,r.dispatchEvent(t),r.connected=!1})),r.peerClientChannel.addEventListener("message",(function(e){var t=new CustomEvent("message",{detail:e.data});t.originalEvent=e,r.dispatchEvent(t)})),r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"send",value:function(e){this.peerClientChannel&&this.peerClientChannel.send(e)}},{key:"close",value:function(){this.peerClientChannel&&this.peerClientChannel.close()}},{key:"offer",value:function(){var e=this;this.peerClient.createOffer().then((function(t){e.peerClient.setLocalDescription(t)}));var t=new Set;return new Promise((function(n){var r=null;e.peerClient.addEventListener("icecandidate",(function(o){o.candidate&&(t.add(o.candidate),r&&clearTimeout(r),r=setTimeout((function(){return n(e.peerClient.localDescription)}),e.candidateTimeout))}))}))}},{key:"accept",value:function(e){var t=new RTCSessionDescription(e);this.peerClient.setRemoteDescription(t)}}]),t}(o.Mixin.with(i.EventTargetMixin));e.RtcClient=p})),require.register("curvature/net/RtcServer.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.RtcServer=void 0;var o=t("curvature/base/Mixin"),i=t("curvature/mixin/EventTargetMixin");function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(l(r=n.call(this)),"candidateTimeout",500),r.peerServer=new RTCPeerConnection(e),r.peerServer.addEventListener("datachannel",(function(e){r.peerServerChannel=e.channel,r.peerServerChannel.addEventListener("open",(function(e){var t=new CustomEvent("open",{detail:e.data});t.originalEvent=e,r.dispatchEvent(t),r.connected=!0})),r.peerServerChannel.addEventListener("close",(function(e){var t=new CustomEvent("close",{detail:e.data});t.originalEvent=e,r.dispatchEvent(t),r.connected=!1})),r.peerServerChannel.addEventListener("message",(function(e){var t=new CustomEvent("message",{detail:e.data});t.originalEvent=e,r.dispatchEvent(t)}))})),r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"send",value:function(e){this.peerServerChannel&&this.peerServerChannel.send(e)}},{key:"close",value:function(){this.peerServerChannel&&this.peerServerChannel.close()}},{key:"answer",value:function(e){var t=this;return new Promise((function(n){t.peerServer.setRemoteDescription(e),t.peerServer.createAnswer((function(e){return t.peerServer.setLocalDescription(e)}),(function(e){return console.error(e)}));var r=new Set,o=null;t.peerServer.addEventListener("icecandidate",(function(e){e.candidate&&(r.add(e.candidate),o&&clearTimeout(o),o=setTimeout((function(){return n(t.peerServer.localDescription)}),t.candidateTimeout))}))}))}}]),t}(o.Mixin.with(i.EventTargetMixin));e.RtcServer=p})),require.register("curvature/service/CloudService.js",(function(e,t,n){"use strict";var r=t("curvature/base/Router");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,e},f:function e(){try{i||null==n.return||n.return()}finally{if(u)throw e}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.CloudService=void 0;var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"handleFetch",value:function(e){var t,n=new URL(e.request.url),a=n.pathname+n.search,u=i(this.routeHandlers);try{for(u.s();!(t=u.n()).done;){var c=t.value;return r.Router.match(a,{routes:c}).then((function(e){return"object"===o(e)&&e instanceof Response||(e=new Response(e)),e}))}}catch(e){u.e(e)}finally{u.f()}}}]),e}();e.CloudService=c,Object.defineProperty(c,"routeHandlers",{value:new Set}),globalThis.addEventListener("fetch",(function(e){e.respondWith(c.handleFetch(e))}))})),require.register("curvature/service/EventPipe.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,e},f:function e(){try{a||null==n.return||n.return()}finally{if(u)throw e}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(e,"__esModule",{value:!0}),e.EventPipe=void 0;e.EventPipe=function(e){var t=new Headers;t.set("Access-Control-Allow-Methods","GET, OPTIONS"),t.set("Access-Control-Allow-Origin","*"),t.set("Cache-Control","no-cache"),t.set("Content-Type","text/event-stream"),t.set("Connection","keep-alive");var n,i=new TransformStream,a=i.readable,u=i.writable.getWriter(),c=new TextEncoder,s=[],l=o(e);try{for(l.s();!(n=l.n()).done;){var f=n.value;f instanceof Promise||(f=Promise.resolve(f)),f.then((function(e){var t,n;e&&"object"===r(e)||(e={data:e}),u.write(c.encode("event:  ".concat(null!==(t=e.type)&&void 0!==t?t:"ServerEvent","\n")+"data: ".concat(JSON.stringify(e.data),"\n")+"id:   ".concat(null!==(n=e.id)&&void 0!==n?n:Date.now(),"\n\n")))})),s.push(f)}}catch(e){l.e(e)}finally{l.f()}return Promise.all(s).then((function(){return u.close()})),new Response(a,{status:"200",statusText:"OK",headers:t})}})),require.register("curvature/service/Service.js",(function(e,t,n){"use strict";var r=t("../base/Router");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,e},f:function e(){try{i||null==n.return||n.return()}finally{if(a)throw e}}}}function f(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Service=void 0;var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"register",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/";if(!("serviceWorker"in navigator))return Promise.reject("Service Workers not supported.");var r=navigator.serviceWorker;return r.register(e,{scope:n}),r.ready.then((function(e){var n=e.active;n&&(t.workers.set(n.scriptURL,n),r.addEventListener("message",(function(e){return t.handleResponse(e)})))})),r.ready}},{key:"request",value:function(e){var t,n=this,r=e.command,o=e.args,i=e.echo,a=e.notify,u=e.to,c=void 0===u?null:u,f=e.broadcast,p=(1/Math.random()).toString(36),y=new Promise((function(e){n.incomplete.set(p,e)})),d=l(this.workers);try{for(d.s();!(t=d.n()).done;){var v=s(t.value,2),h=(v[0],v[1]);if("redundant"===h.state)return Promise.reject("Worker has been updated, connection lost. Please refresh the page.");h.postMessage({correlationId:p,broadcast:void 0!==f&&f,command:r,notify:a,args:o,echo:i,to:c})}}catch(e){d.e(e)}finally{d.f()}return y}},{key:"broadcast",value:function(e){var t=e.command,n=e.args,r=e.echo,o=e.notify;this.request({command:t,args:n,echo:r,notify:o,broadcast:!0})}},{key:"handleResponse",value:function(e){var t=this;e.target.ready.then((function(e){var n=e.active;t.workers.set(n.scriptURL,n)}));var n=e.data;if(n.to||n.correlationId){if(!this.incomplete.has(n.correlationId))return void(n.broadcast?this.handleBroadcast(e):n.to&&this.handleMessage(e));var r=this.incomplete.get(n.correlationId);this.incomplete.delete(n.correlationId),r(n.result)}}},{key:"handleRequest",value:function(e){var t=this;if(e.origin===globalThis.origin){var n=e.data,r=Promise.resolve("Unexpected request.");if(n.echo)r=Promise.resolve(n.echo);else if(n.notify){var o=n.args||[];r=globalThis.registration.getNotifications().then((function(e){var n;return e.forEach((function(e){return t.notifications.set(e.tag,e)})),(n=globalThis.registration).showNotification.apply(n,c(o))})).then((function(){return globalThis.registration.getNotifications()})).then((function(){var n=e.data.args&&e.data.args[1]&&e.data.args[1].tag,r=new Promise((function(r){var o;t.notifyClients.has(n)?o=t.notifyClients.get(n):(o=new Map,t.notifyClients.set(n,o)),o.set(e.source,r)}));return r}))}else if(n.command){var a,s=n.command,f=n.args||[],p=l(this.serviceHandlers);try{for(p.s();!(a=p.n()).done;){var y=a.value;if("function"==typeof y[s]){r=y[s].apply(y,c(f));break}}}catch(e){p.e(e)}finally{p.f()}}if(u(r)!==Promise&&(r=Promise.resolve(r)),n.broadcast){var d=e.source.id;globalThis.clients.matchAll({type:"window",includeUncontrolled:!0}).then((function(e){e.forEach((function(e){r.then((function(t){return e.postMessage(i(i({},n),{},{result:t,source:d}))}))}))}))}else if(n.to){var v=e.source.id;globalThis.clients.get(n.to).then((function(e){r.then((function(t){e.postMessage(i(i({},n),{},{result:t,source:v}))}))}))}else r.then((function(t){return e.source.postMessage(i(i({},n),{},{result:t}))}))}}},{key:"handleInstall",value:function(e){globalThis.skipWaiting();var t,n=l(this.pageHandlers);try{for(n.s();!(t=n.n()).done;){var r=t.value;"function"==typeof r.handleInstall&&r.handleInstall(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"handleActivate",value:function(e){var t,n=l(this.pageHandlers);try{for(n.s();!(t=n.n()).done;){var r=t.value;"function"==typeof r.handleActivate&&r.handleActivate(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"handleError",value:function(e){console.error(e);var t,n=l(this.pageHandlers);try{for(n.s();!(t=n.n()).done;){var r=t.value;"function"==typeof r.handleError&&r.handleError(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"handlePush",value:function(){}},{key:"handleSync",value:function(){}},{key:"handlePeriodicSync",value:function(){}},{key:"handleFetch",value:function(e){var t,n=new URL(e.request.url),o=n.pathname+n.search,i=l(this.routeHandlers);try{for(i.s();!(t=i.n()).done;){var a=t.value;return r.Router.match(o,{routes:a},{event:e}).then((function(e){if(void 0!==e)return"object"===u(e)&&e instanceof Response||(e=new Response(e)),e}))}}catch(e){i.e(e)}finally{i.f()}}},{key:"handleBroadcast",value:function(e){var t,n=l(this.pageHandlers);try{for(n.s();!(t=n.n()).done;){var r=t.value;"function"==typeof r.handleBroadcast&&r.handleBroadcast(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"handleMessage",value:function(e){var t,n=l(this.pageHandlers);try{for(n.s();!(t=n.n()).done;){var r=t.value;"function"==typeof r.handleMessage&&r.handleMessage(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"notify",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];return n.tag=n.tag||"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})),new Promise((function(e){Notification.requestPermission((function(t){e(t)}))})).then((function(){return t.request({notify:!0,args:[e,n],broadcast:r})}))}},{key:"handleNotifyClicked",value:function(e){if(this.notifyClients.has(e.notification.tag)){var t=this.notifyClients.get(e.notification.tag),n=[];for(t.forEach((function(t,r){t({action:e.action,data:e.notification.data,click:Date.now(),time:e.notification.timestamp,tag:e.notification.tag}),n.push(r)}));n.length;){if(n.pop().focus())break}this.notifyClients.delete(e.notification.tag)}var r,o=l(this.pageHandlers);try{for(o.s();!(r=o.n()).done;){var i=r.value;"function"==typeof i.handleNotifyClicked&&i.handleNotifyClicked(e)}}catch(e){o.e(e)}finally{o.f()}e.notification.close()}},{key:"handleNotifyClosed",value:function(e){this.notifyClients.has(e.notification.tag)&&this.notifyClients.get(e.notification.tag).forEach((function(t){return t({action:void 0,data:e.notification.data,close:Date.now(),time:e.notification.timestamp,tag:e.notification.tag})}));if(this.notifyClients.delete(e.notification.tag)){var t,n=l(this.pageHandlers);try{for(n.s();!(t=n.n()).done;){var r=t.value;"function"==typeof r.handleNotifyDismissed&&r.handleNotifyDismissed(e)}}catch(e){n.e(e)}finally{n.f()}}var o,i=l(this.pageHandlers);try{for(i.s();!(o=i.n()).done;){var a=o.value;"function"==typeof a.handleNotifyClosed&&a.handleNotifyClosed(e)}}catch(e){i.e(e)}finally{i.f()}}}]),e}();e.Service=d,Object.defineProperty(d,"serviceHandlers",{value:new Set}),Object.defineProperty(d,"routeHandlers",{value:new Set}),Object.defineProperty(d,"pageHandlers",{value:new Set}),Object.defineProperty(d,"notifications",{value:new Map}),Object.defineProperty(d,"notifyClients",{value:new Map}),Object.defineProperty(d,"incomplete",{value:new Map}),Object.defineProperty(d,"workers",{value:new Map}),globalThis.document||(globalThis.addEventListener("install",(function(e){return d.handleInstall(e)})),globalThis.addEventListener("activate",(function(e){return d.handleActivate(e)})),globalThis.addEventListener("error",(function(e){return d.handleActivate(e)})),globalThis.addEventListener("message",(function(e){return d.handleRequest(e)})),globalThis.addEventListener("fetch",(function(e){e.waitUntil(new Promise((function(t){d.handleFetch(e).then((function(n){n&&e.respondWith(n),t()}))})))})),globalThis.addEventListener("push",(function(e){return d.handlePush(e)})),globalThis.addEventListener("notificationclose",(function(e){return d.handleNotifyClosed(e)})),globalThis.addEventListener("notificationclick",(function(e){return d.handleNotifyClicked(e)})),globalThis.addEventListener("sync",(function(e){return d.handleSync(e)})),globalThis.addEventListener("periodicsync",(function(e){return d.handlePeriodicSync(e)})))})),require.register("curvature/strings/Parser.js",(function(e,t,n){"use strict"})),require.register("curvature/tag/LazyTag.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.LazyTag=void 0;var o=t("./ScrollTag"),i=t("../base/Dom");function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var f=function(e){function t(e,r,o,a,u){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(c=n.call(this,e,r,o,a,u)).element.classList.remove("cv-visible"),c.element.classList.add("cv-not-visible"),c.bindTo("visible",(function(e){e&&(c.afterScroll&&clearTimeout(c.afterScroll),c.afterScroll=setTimeout((function(){c.element&&(c.element.classList.add("cv-visible"),c.element.classList.remove("cv-not-visible"),i.Dom.mapTags(c.element,"[cv-lazy-style]",(function(e){var t=e.getAttribute("cv-lazy-style"),n=e.getAttribute("style");e.setAttribute("style",n+";"+t),e.removeAttribute("cv-lazy-style")})))}),.5*(c.offsetTop||c.element.offsetTop)+.5*c.element.offsetLeft))})),c}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(o.ScrollTag);e.LazyTag=f})),require.register("curvature/tag/PopOutTag.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.PopOutTag=void 0;t("../base/Bindable"),t("../base/Dom");function o(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=a(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(3>arguments.length?e:n):o.value}},i.apply(this,arguments)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var f=function(e){function t(e,r,o,i,a){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(u=n.call(this,e,r,o,i,a)).defaultStyle=e.getAttribute("style")||"",u.poppedOut=!1,u.moving=!1,u.hostSelector=e.getAttribute("cv-pop-to"),u.popMargin=e.getAttribute("cv-pop-margin")||0,u.popSpeed=e.getAttribute("data-pop-speed")||1750,e.removeAttribute("cv-pop-to"),e.removeAttribute("cv-pop-margin"),e.removeAttribute("data-pop-speed"),u.verticalDuration=.4,u.horizontalDuration=.1,u.unpoppedStyle="",u.previousScroll=0,u.bodyStyle="",u.bodyScroll=0,u.element.classList.add("unpopped"),u.scrollStyle="",u.existingStyle="",u.popTimeout=null,u.rect=null,u.transformRect=null,u.clickListener=function(e){if(u.rect=u.element.getBoundingClientRect(),!u.poppedOut){u.distance=Math.sqrt(Math.pow(u.rect.top,2)+Math.pow(u.rect.left,2));var t=u.popSpeed,n=window.innerWidth-u.rect.right,r=window.innerHeight-u.rect.bottom,o=(u.rect.left+n)/2,i=(u.rect.top+r)/2;u.horizontalDuration=o/t,u.verticalDuration=i/t,.1>u.horizontalDuration&&(u.horizontalDuration=.1),.1>u.verticalDuration&&(u.verticalDuration=.1),.4<u.horizontalDuration&&(u.horizontalDuration=.4),.4<u.verticalDuration&&(u.verticalDuration=.4)}u.element.contains(e.target)&&(e.stopPropagation(),e.preventDefault(),u.moving||(u.poppedOut?e.target.matches(".closeButton")&&u.poppedOut&&u.unpop():u.pop()))},u.escapeListener=function(e){u.poppedOut&&"Escape"===e.key&&u.unpop()},u.resizeListener=function(){if(u.poppedOut){for(var e=u.element;e.parentNode&&!e.matches(u.hostSelector)&&e.parentNode!=document;)e=e.parentNode;var t=hostTag.getBoundingClientRect(),n=u.existingStyle+u.unpoppedStyle,r=t.x,o=t.y+document.documentElement.scrollTop,i=t.width,a=t.height;u.transformRect&&(r-=u.transformRect.x,o-=u.transformRect.y),u.popMargin,u.popMargin,u.popMargin,u.popMargin,n+=";\n\t\t\t\tz-index:    99999;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t\toverflow: hidden;\n\t\t\t\tposition:  fixed;\n\t\t\t\tleft:      ".concat(r,"px;\n\t\t\t\ttop:        ").concat(o,"px;\n\t\t\t\twidth:      ").concat(i,"px;\n\t\t\t\theight:     ").concat(a,"px;\n\t\t\t\toverflow-y: auto;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t"),u.element.setAttribute("style",n)}},u.element.___clickListener___||(Object.defineProperty(u.element,"___scrollListeners___",{enumerable:!1,writable:!0}),e.___clickListener___=u.clickListener,e.___escapeListener___=u.escapeListener,e.___resizeListener___=u.resizeListener,u.element.addEventListener("click",e.___clickListener___),window.addEventListener("keyup",e.___escapeListener___),window.addEventListener("resize",e.___resizeListener___),u.cleanup.push(function(e){return function(){e.removeEventListener("click",e.___clickListener___),window.removeEventListener("keyup",e.___escapeListener___),window.removeEventListener("resize",e.___resizeListener___)}}(e))),u}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"pause",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];i(l(t.prototype),"pause",this).call(this,e),e&&(document.body.setAttribute("style",this.bodyStyle),document.body.setAttribute("style",""))}},{key:"pop",value:function(){var e=this;t.popLevel(),this.previousScroll=window.scrollY,this.rect=this.element.getBoundingClientRect(),this.existingStyle=this.element.getAttribute("style");var n=this.element;for(this.transformRect=null;n.parentNode&&!n.matches(this.hostSelector)&&n.parentNode!=document;)n=n.parentNode,this.transformRect||"none"===getComputedStyle(n).transform||(this.transformRect=n.getBoundingClientRect());var r=n.getBoundingClientRect();this.element.classList.add("popping");var o=this.rect.x,i=this.rect.y,a=this.rect.width,u=this.rect.height;this.transformRect&&(o-=this.transformRect.x,i-=this.transformRect.y),window.requestAnimationFrame((function(){e.unpoppedStyle="\n\t\t\t\t;position:  fixed;\n\t\t\t\tleft:       ".concat(o,"px;\n\t\t\t\ttop:        ").concat(i,"px;\n\t\t\t\twidth:      ").concat(a,"px;\n\t\t\t\theight:     ").concat(u,"px;\n\t\t\t\tz-index:    99999;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t\toverflow: hidden;\n\t\t\t");var t=r.x,n=r.y+document.documentElement.scrollTop,c=r.width,s=r.height;e.transformRect&&(t-=e.transformRect.x,n-=e.transformRect.y),e.popMargin,e.popMargin,e.popMargin,e.popMargin;var l=e.existingStyle+e.unpoppedStyle;e.element.setAttribute("style",l),setTimeout((function(){l+="\n\t\t\t\t\t;left:      ".concat(t,"px;\n\t\t\t\t\ttop:        ").concat(n+document.documentElement.scrollTop,"px;\n\t\t\t\t\twidth:      ").concat(c,"px;\n\t\t\t\t\theight:     ").concat(s,"px;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t\ttransition: width ").concat(e.horizontalDuration,"s ease-out\n\t\t\t\t\t\t, top ").concat(e.verticalDuration,"s           ease-out\n\t\t\t\t\t\t, left ").concat(e.horizontalDuration,"s        ease-out\n\t\t\t\t\t\t, height ").concat(e.verticalDuration,"s        ease-out\n\t\t\t\t\t\t, all ").concat(e.horizontalDuration,"s         ease-out;\n\t\t\t\t"),e.moving=!0,e.element.setAttribute("style",l),e.element.classList.add("popped"),e.element.classList.remove("unpopped"),e.element.classList.remove("popping"),e.popTimeout=setTimeout((function(){if(e.element){e.bodyStyle=document.body.getAttribute("style"),document.body.setAttribute("style","height:100%;overflow:hidden;"),e.moving=!1;var t=new CustomEvent("cvPopped");e.element.dispatchEvent(t),e.scrollStyle=e.element.getAttribute("style")}}),1e3*e.horizontalDuration)}),33.4),e.poppedOut=!0}));var c=new CustomEvent("cvPop",{bubbles:!0,detail:{tag:this,view:this.parent,publicId:this.parent.args.publicId}});this.element.dispatchEvent(c)}},{key:"unpop",value:function(){var e=this;this.element.classList.add("unpopping"),this.popTimeout&&clearTimeout(this.popTimeout),0==t.level?document.body.setAttribute("style",""):document.body.setAttribute("style",this.bodyStyle||""),t.unpopLevel(),this.rect||(this.rect=this.element.getBoundingClientRect()),window.scrollTo(0,this.previousScroll);var n=this.existingStyle+this.unpoppedStyle+";transition: width ".concat(this.horizontalDuration,"s ease-out\n\t\t\t\t\t, height ").concat(this.verticalDuration,"s        ease-out\n\t\t\t\t\t, all ").concat(this.horizontalDuration,"s         ease-out;");this.element.setAttribute("style",n),this.moving=!0,setTimeout((function(){e.element&&e.element.classList.remove("popped")}),1e3*this.horizontalDuration),setTimeout((function(){if(e.element.classList.add("unpopped"),e.element.classList.remove("unpopping"),e.element){e.element.setAttribute("style",e.defaultStyle),e.moving=!1;var t=new CustomEvent("cvUnpopped");e.element.dispatchEvent(t)}}),1e3*this.horizontalDuration);var r=new CustomEvent("cvUnpop",{bubbles:!0,detail:{tag:this,view:this.parent,publicId:this.parent.args.publicId}});this.element.dispatchEvent(r),this.poppedOut=!1}},{key:"remove",value:function(){document.body.setAttribute("style",this.bodyStyle),i(l(t.prototype),"remove",this).call(this)}}],[{key:"popLevel",value:function(){return this.level||(this.level=0),this.level++,this.level}},{key:"unpopLevel",value:function(){return this.level||(this.level=0),this.level--,0>this.level&&(this.level=0),this.level}}]),t}(t("../base/Tag").Tag);e.PopOutTag=f})),require.register("curvature/tag/ScrollTag.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollTag=void 0;var o=t("../base/Tag"),i=t("../base/Dom");t("../base/Bindable");function a(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var f=function(e){function t(e,r,o,a,u){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(c=n.call(this,e,r,o,a,u)).visible=!1,c.offsetTop=!1,c.offsetBottom=!1,c.attachListener=function(t){for(var n=t.target;n.parentNode;)n=n.parentNode;rootNode!==window&&rootNode!==document||t.target!==e||(c.addScrollListener(t.target),c.addResizeListener(t.target),c.scrolled(t.target),t.target.removeEventListener("cvDomAttached",c.attachListener))},c.element.addEventListener("cvDomAttached",c.attachListener),c.cleanup.push(function(e){return function(){e.removeEventListener("cvDomAttached",c.attachListener)}}(c.element)),c.bindTo("visible",(function(e){var t;t=e?new Event("cvScrolledIn"):new Event("cvScrolledOut"),i.Dom.mapTags(c.element,!1,(function(e){e.dispatchEvent(t)})),c.element.dispatchEvent(t)})),c.bindTo("offsetTop",(function(e){var t=new CustomEvent("cvScrolled",{detail:{offset:e}});i.Dom.mapTags(c.element,!1,(function(e){e.dispatchEvent(t)})),c.element.dispatchEvent(t)})),c}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var n=c(t);return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"scrolled",value:function(){var e=this.element;if(e){var t=!1,n=e.getBoundingClientRect();0<n.bottom&&n.top<window.innerHeight&&(t=!0),this.proxy.visible=t,this.proxy.offsetTop=n.top||0,this.proxy.offsetBottom=n.bottom||0}}},{key:"addScrollListener",value:function(e){var t=this;if(!e.___scrollListener___){Object.defineProperty(e,"___scrollListener___",{enumerable:!1,writable:!0}),e.___scrollListener___=function(e){t.scrolled(e.target)};for(var n=e,r={passive:!0,capture:!0};n.parentNode;)(n=n.parentNode).addEventListener("scroll",e.___scrollListener___,r),this.direct.cleanup.push(function(e,t,n){return function(){e.removeEventListener("scroll",t.___scrollListener___,n),t=e=null}}(n,e,r))}}},{key:"addResizeListener",value:function(e){var t=this;e.___resizeListener___||(Object.defineProperty(e,"___resizeListener___",{enumerable:!1,writable:!0}),e.___resizeListener___=function(e){t.scrolled(e.target)},window.addEventListener("resize",this.resizeListener),this.direct.cleanup.push(function(t){return function(){window.removeEventListener("resize",t.___resizeListener___),e.___resizeListener___=null,e=null}}(e)))}}]),t}(o.Tag);e.ScrollTag=f})),require.register("curvature/toast/Toast.js",(function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Toast=void 0;var o=t("../base/View"),i=t("../base/Bindable"),a=t("./ToastAlert");function u(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=n.call(this)).template='\n\t\t\t<div id = "[[_id]]" cv-each = "alerts:alert" class = "toast">\n\t\t\t\t[[alert]]\n\t\t\t</div>\n\t\t',e.args.alerts=[],e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e);var n=s(t);return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"pop",value:function(e){var t=this;this.args.alerts.length;this.args.alerts.push(e),e.decay(function(e){return function(){for(var n in t.args.alerts)if(i.Bindable.ref(t.args.alerts[n])===i.Bindable.ref(e))return e.remove(),void delete t.args.alerts[n]}}(e))}},{key:"alert",value:function(e,t,n){return this.pop(new a.ToastAlert({title:e,body:t,time:n}))}}],[{key:"instance",value:function(){return this.inst||(this.inst=new this),this.inst}}]),t}(o.View);e.Toast=p})),require.register("curvature/toast/ToastAlert.js",(function(e,t,n){"use strict";var r=t("../base/View");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ToastAlert=void 0;var l=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=n.call(this,e)).args.running=!1,r.args.time=r.args.time||16e3,r.init=r.args.time,r.args.title=r.args.title||"Standard alert",r.args.status="new",r.args.body=r.args.body||"This is a standard alert.",r.template='\n\t\t\t<div id = "[[_id]]" class = "alert toast-[[status]]">\n\t\t\t\t<h3>[[title]]</h3>\n\t\t\t\t<p>[[body]]</p>\n\t\t\t</div>\n\t\t',r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e);var n=u(t);return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"decay",value:function(){var e=this;this.args.running=!0,this.onTimeout(50,(function(){e.args.status=""})),this.onTimeout(300,(function(){e.args.status="decaying"})),this.onTimeout(2400,(function(){e.args.status="imminent"})),this.onTimeout(3500,(function(){e.remove()}))}}]),t}(r.View);e.ToastAlert=l})),require.register("___globals___",(function(e,t,n){}))}(),require("___globals___");
